var Cw=Object.defineProperty,bw=Object.defineProperties;var Sw=Object.getOwnPropertyDescriptors;var Fg=Object.getOwnPropertySymbols;var Aw=Object.prototype.hasOwnProperty,Mw=Object.prototype.propertyIsEnumerable;var Lg=(n,e,t)=>e in n?Cw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Z=(n,e)=>{for(var t in e||={})Aw.call(e,t)&&Lg(n,t,e[t]);if(Fg)for(var t of Fg(e))Mw.call(e,t)&&Lg(n,t,e[t]);return n},ye=(n,e)=>bw(n,Sw(e));var Fe=null,ms=!1,_u=1,Nw=null,Je=Symbol("SIGNAL");function H(n){let e=Fe;return Fe=n,e}function vs(){return Fe}var gr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Iu(n){if(ms)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(n);let e=Fe.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Fe.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Fe.producers,t!==void 0&&t.producer===n)){Fe.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Fe&&(!r||xw(i,Fe)))return;let o=yr(Fe),s={producer:n,consumer:Fe,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Fe.producersTail=s,e!==void 0?e.nextProducer=s:Fe.producers=s,o&&Ug(n,s)}function Vg(){_u++}function wu(n){if(!(yr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===_u)){if(!n.producerMustRecompute(n)&&!_s(n)){Eu(n);return}n.producerRecomputeValue(n),Eu(n)}}function Du(n){if(n.consumers===void 0)return;let e=ms;ms=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Rw(r)}}finally{ms=e}}function Tu(){return Fe?.consumerAllowSignalWrites!==!1}function Rw(n){n.dirty=!0,Du(n),n.consumerMarkedDirty?.(n)}function Eu(n){n.dirty=!1,n.lastCleanEpoch=_u}function Li(n){return n&&Bg(n),H(n)}function Bg(n){n.producersTail=void 0,n.recomputing=!0}function Es(n,e){H(e),n&&jg(n)}function jg(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(yr(n))do t=Cu(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function _s(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(wu(t),r!==t.version))return!0}return!1}function mr(n){if(yr(n)){let e=n.producers;for(;e!==void 0;)e=Cu(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Ug(n,e){let t=n.consumersTail,r=yr(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Ug(i.producer,i)}function Cu(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!yr(e)){let o=e.producers;for(;o!==void 0;)o=Cu(o)}return t}function yr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function bu(n){Nw?.(n)}function xw(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Su(n,e){return Object.is(n,e)}function Is(n,e){let t=Object.create(Pw);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(wu(t),Iu(t),t.value===ys)throw t.error;return t.value};return r[Je]=t,bu(t),r}var yu=Symbol("UNSET"),vu=Symbol("COMPUTING"),ys=Symbol("ERRORED"),Pw=ye(Z({},gr),{value:yu,dirty:!0,error:null,equal:Su,kind:"computed",producerMustRecompute(n){return n.value===yu||n.value===vu},producerRecomputeValue(n){if(n.value===vu)throw new Error("");let e=n.value;n.value=vu;let t=Li(n),r,i=!1;try{r=n.computation(),H(null),i=e!==yu&&e!==ys&&r!==ys&&n.equal(e,r)}catch(o){r=ys,n.error=o}finally{Es(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function kw(){throw new Error}var Hg=kw;function $g(n){Hg(n)}function Au(n){Hg=n}var Ow=null;function Mu(n,e){let t=Object.create(Gg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>zg(t);return r[Je]=t,bu(t),[r,s=>Nu(t,s),s=>qg(t,s)]}function zg(n){return Iu(n),n.value}function Nu(n,e){Tu()||$g(n),n.equal(n.value,e)||(n.value=e,Fw(n))}function qg(n,e){Tu()||$g(n),Nu(n,e(n.value))}var Gg=ye(Z({},gr),{equal:Su,value:void 0,kind:"signal"});function Fw(n){n.version++,Vg(),Du(n),Ow?.(n)}var Ru=ye(Z({},gr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function xu(n){if(n.dirty=!1,n.version>0&&!_s(n))return;n.version++;let e=Li(n);try{n.cleanup(),n.fn()}finally{Es(n,e)}}function Ge(n){return typeof n=="function"}function ws(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ds=ws(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Vi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ge(r))try{r()}catch(o){e=o instanceof Ds?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Wg(o)}catch(s){e=e??[],s instanceof Ds?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ds(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wg(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Vi(t,e)}remove(e){let{_finalizers:t}=this;t&&Vi(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Pu=$e.EMPTY;function Ts(n){return n instanceof $e||n&&"closed"in n&&Ge(n.remove)&&Ge(n.add)&&Ge(n.unsubscribe)}function Wg(n){Ge(n)?n():n.unsubscribe()}var st={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vr={setTimeout(n,e,...t){let{delegate:r}=vr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=vr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kg(n){vr.setTimeout(()=>{let{onUnhandledError:e}=st;if(e)e(n);else throw n})}function ku(){}var Qg=Ou("C",void 0,void 0);function Yg(n){return Ou("E",void 0,n)}function Zg(n){return Ou("N",n,void 0)}function Ou(n,e,t){return{kind:n,value:e,error:t}}var Rn=null;function Er(n){if(st.useDeprecatedSynchronousErrorHandling){let e=!Rn;if(e&&(Rn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Rn;if(Rn=null,t)throw r}}else n()}function Xg(n){st.useDeprecatedSynchronousErrorHandling&&Rn&&(Rn.errorThrown=!0,Rn.error=n)}var xn=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ts(e)&&e.add(this)):this.destination=Bw}static create(e,t,r){return new _r(e,t,r)}next(e){this.isStopped?Lu(Zg(e),this):this._next(e)}error(e){this.isStopped?Lu(Yg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Lu(Qg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Lw=Function.prototype.bind;function Fu(n,e){return Lw.call(n,e)}var Vu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cs(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cs(r)}else Cs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cs(t)}}},_r=class extends xn{constructor(e,t,r){super();let i;if(Ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&st.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Fu(e.next,o),error:e.error&&Fu(e.error,o),complete:e.complete&&Fu(e.complete,o)}):i=e}this.destination=new Vu(i)}};function Cs(n){st.useDeprecatedSynchronousErrorHandling?Xg(n):Kg(n)}function Vw(n){throw n}function Lu(n,e){let{onStoppedNotification:t}=st;t&&vr.setTimeout(()=>t(n,e))}var Bw={closed:!0,next:ku,error:Vw,complete:ku};var Jg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function em(n){return n}function tm(n){return n.length===0?em:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ir=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Uw(t)?t:new _r(t,r,i);return Er(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=nm(r),new r((i,o)=>{let s=new _r({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Jg](){return this}pipe(...t){return tm(t)(this)}toPromise(t){return t=nm(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function nm(n){var e;return(e=n??st.Promise)!==null&&e!==void 0?e:Promise}function jw(n){return n&&Ge(n.next)&&Ge(n.error)&&Ge(n.complete)}function Uw(n){return n&&n instanceof xn||jw(n)&&Ts(n)}function Hw(n){return Ge(n?.lift)}function rm(n){return e=>{if(Hw(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function im(n,e,t,r,i){return new Bu(n,e,t,r,i)}var Bu=class extends xn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var om=ws(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Nt=(()=>{class n extends Ir{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bs(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new om}next(t){Er(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Er(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Er(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Pu:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,Vi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ir;return t.source=this,t}}return n.create=(e,t)=>new bs(e,t),n})(),bs=class extends Nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Pu}};var Bi=class extends Nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function ju(n,e){return rm((t,r)=>{let i=0;t.subscribe(im(r,o=>{r.next(n.call(e,o,i++))}))})}var Uu;function Ss(){return Uu}function yt(n){let e=Uu;return Uu=n,e}var sm=Symbol("NotFound");function wr(n){return n===sm||n?.name==="\u0275NotFound"}var tl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ee=class extends Error{code;constructor(e,t){super(nl(e,t)),this.code=e}};function zw(n){return`NG0${Math.abs(n)}`}function nl(n,e){return`${zw(n)}${e?": "+e:""}`}function ae(n){for(let e in n)if(n[e]===ae)return e;throw Error("")}function cn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(cn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function rl(n,e){return n?e?`${n} ${e}`:n:e||""}var qw=ae({__forward_ref__:ae});function Os(n){return n.__forward_ref__=Os,n.toString=function(){return cn(this())},n}function Ye(n){return dm(n)?n():n}function dm(n){return typeof n=="function"&&n.hasOwnProperty(qw)&&n.__forward_ref__===Os}function le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fs(n){return Gw(n,Ls)}function Gw(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Ww(n){let e=n?.[Ls]??null;return e||null}function $u(n){return n&&n.hasOwnProperty(Ms)?n[Ms]:null}var Ls=ae({\u0275prov:ae}),Ms=ae({\u0275inj:ae}),re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function il(n){return n&&!!n.\u0275providers}var ol=ae({\u0275cmp:ae}),sl=ae({\u0275dir:ae}),al=ae({\u0275pipe:ae});var zu=ae({\u0275fac:ae}),Ln=ae({__NG_ELEMENT_ID__:ae}),am=ae({__NG_ENV_ID__:ae});function Vn(n){return ul(n,"@Component"),n[ol]||null}function cl(n){return ul(n,"@Directive"),n[sl]||null}function fm(n){return ul(n,"@Pipe"),n[al]||null}function ul(n,e){if(n==null)throw new ee(-919,!1)}function ll(n){return typeof n=="string"?n:n==null?"":String(n)}function hm(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ll(n)}var pm=ae({ngErrorCode:ae}),Kw=ae({ngErrorMessage:ae}),Qw=ae({ngTokenPath:ae});function dl(n,e){return gm("",-200,e)}function Vs(n,e){throw new ee(-201,!1)}function gm(n,e,t){let r=new ee(e,n);return r[pm]=e,r[Kw]=n,t&&(r[Qw]=t),r}function Yw(n){return n[pm]}var qu;function mm(){return qu}function Qe(n){let e=qu;return qu=n,e}function fl(n,e,t){let r=Fs(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Vs(n,"")}var Zw={},Pn=Zw,Xw="__NG_DI_FLAG__",Gu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=kn(t)||0;try{return this.injector.get(e,r&8?null:Pn,r)}catch(i){if(wr(i))return i;throw i}}};function Jw(n,e=0){let t=Ss();if(t===void 0)throw new ee(-203,!1);if(t===null)return fl(n,void 0,e);{let r=eD(e),i=t.retrieve(n,r);if(wr(i)){if(r.optional)return null;throw i}return i}}function oe(n,e=0){return(mm()||Jw)(Ye(n),e)}function te(n,e){return oe(n,kn(e))}function kn(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function eD(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Wu(n){let e=[];for(let t=0;t<n.length;t++){let r=Ye(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=tD(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(oe(i,o))}else e.push(oe(r))}return e}function tD(n){return n[Xw]}function Tr(n,e){let t=n.hasOwnProperty(zu);return t?n[zu]:null}function ym(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function vm(n){return n.flat(Number.POSITIVE_INFINITY)}function Bs(n,e){n.forEach(t=>Array.isArray(t)?Bs(t,e):e(t))}function hl(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gi(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Em(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function _m(n,e,t){let r=Cr(n,e);return r>=0?n[r|1]=t:(r=~r,Em(n,r,e,t)),r}function js(n,e){let t=Cr(n,e);if(t>=0)return n[t|1]}function Cr(n,e){return nD(n,e,1)}function nD(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Bn={},et=[],Wi=new re(""),pl=new re("",-1),gl=new re(""),Ui=class{get(e,t=Pn){if(t===Pn){let i=gm("",-201);throw i.name="\u0275NotFound",i}return t}};function ml(n){return{\u0275providers:n}}function Im(...n){return{\u0275providers:yl(!0,n),\u0275fromNgModule:!0}}function yl(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bs(e,s=>{let c=s;Ns(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&wm(i,o),t}function wm(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];vl(i,o=>{e(o,r)})}}function Ns(n,e,t,r){if(n=Ye(n),!n)return!1;let i=null,o=$u(n),s=!o&&Vn(n);if(!o&&!s){let u=n.ngModule;if(o=$u(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)Ns(d,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{Bs(o.imports,h=>{Ns(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&wm(d,e)}if(!c){let d=Tr(i)||(()=>new i);e({provide:i,useFactory:d,deps:et},i),e({provide:gl,useValue:i,multi:!0},i),e({provide:Wi,useValue:()=>oe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let d=n;vl(u,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function vl(n,e){for(let t of n)il(t)&&(t=t.\u0275providers),Array.isArray(t)?vl(t,e):e(t)}var rD=ae({provide:String,useValue:ae});function Dm(n){return n!==null&&typeof n=="object"&&rD in n}function iD(n){return!!(n&&n.useExisting)}function oD(n){return!!(n&&n.useFactory)}function Rs(n){return typeof n=="function"}var Ki=new re(""),As={},cm={},Hu;function Qi(){return Hu===void 0&&(Hu=new Ui),Hu}var tt=class{},On=class extends tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Qu(e,s=>this.processProvider(s)),this.records.set(pl,Dr(void 0,this)),i.has("environment")&&this.records.set(tt,Dr(void 0,this));let o=this.records.get(Ki);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gl,et,{self:!0}))}retrieve(e,t){let r=kn(t)||0;try{return this.get(e,Pn,r)}catch(i){if(wr(i))return i;throw i}}destroy(){ji(this),this._destroyed=!0;let e=H(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),H(e)}}onDestroy(e){return ji(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ji(this);let t=yt(this),r=Qe(void 0),i;try{return e()}finally{yt(t),Qe(r)}}get(e,t=Pn,r){if(ji(this),e.hasOwnProperty(am))return e[am](this);let i=kn(r),o,s=yt(this),c=Qe(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=lD(e)&&Fs(e);h&&this.injectableDefInScope(h)?d=Dr(Ku(e),As):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let u=i&2?Qi():this.parent;return t=i&8&&t===Pn?null:t,u.get(e,t)}catch(u){let d=Yw(u);throw d===-200||d===-201?new ee(d,null):u}finally{Qe(c),yt(s)}}resolveInjectorInitializers(){let e=H(null),t=yt(this),r=Qe(void 0),i;try{let o=this.get(Wi,et,{self:!0});for(let s of o)s()}finally{yt(t),Qe(r),H(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(cn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ye(e);let t=Rs(e)?e:Ye(e&&e.provide),r=aD(e);if(!Rs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Dr(void 0,As,!0),i.factory=()=>Wu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=H(null);try{if(t.value===cm)throw dl(cn(e));return t.value===As&&(t.value=cm,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&uD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{H(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ye(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ku(n){let e=Fs(n),t=e!==null?e.factory:Tr(n);if(t!==null)return t;if(n instanceof re)throw new ee(204,!1);if(n instanceof Function)return sD(n);throw new ee(204,!1)}function sD(n){if(n.length>0)throw new ee(204,!1);let t=Ww(n);return t!==null?()=>t.factory(n):()=>new n}function aD(n){if(Dm(n))return Dr(void 0,n.useValue);{let e=Tm(n);return Dr(e,As)}}function Tm(n,e,t){let r;if(Rs(n)){let i=Ye(n);return Tr(i)||Ku(i)}else if(Dm(n))r=()=>Ye(n.useValue);else if(oD(n))r=()=>n.useFactory(...Wu(n.deps||[]));else if(iD(n))r=(i,o)=>oe(Ye(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ye(n&&(n.useClass||n.provide));if(cD(n))r=()=>new i(...Wu(n.deps));else return Tr(i)||Ku(i)}return r}function ji(n){if(n.destroyed)throw new ee(205,!1)}function Dr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cD(n){return!!n.deps}function uD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lD(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Qu(n,e){for(let t of n)Array.isArray(t)?Qu(t,e):t&&il(t)?Qu(t.\u0275providers,e):e(t)}function Us(n,e){let t;n instanceof On?(ji(n),t=n):t=new Gu(n);let r,i=yt(t),o=Qe(void 0);try{return e()}finally{yt(i),Qe(o)}}function Cm(){return mm()!==void 0||Ss()!=null}var at=0,z=1,$=2,Ae=3,nt=4,rt=5,Yi=6,br=7,Pe=8,fn=9,kt=10,ke=11,Sr=12,El=13,jn=14,ct=15,hn=16,Un=17,vt=18,Zi=19,_l=20,xt=21,Hs=22,un=23,Ze=24,$s=25,Xi=26,ze=27,bm=1;var pn=7,Ji=8,Hn=9,Le=10;function Ot(n){return Array.isArray(n)&&typeof n[bm]=="object"}function ut(n){return Array.isArray(n)&&n[bm]===!0}function Il(n){return(n.flags&4)!==0}function Ar(n){return n.componentOffset>-1}function wl(n){return(n.flags&1)===1}function Mr(n){return!!n.template}function Nr(n){return(n[$]&512)!==0}function $n(n){return(n[$]&256)===256}var Dl="svg",Sm="math";function it(n){for(;Array.isArray(n);)n=n[at];return n}function Tl(n,e){return it(e[n])}function Ft(n,e){return it(e[n.index])}function zs(n,e){return n.data[e]}function Lt(n,e){let t=e[n];return Ot(t)?t:t[at]}function Am(n){return(n[$]&4)===4}function qs(n){return(n[$]&128)===128}function Mm(n){return ut(n[Ae])}function gn(n,e){return e==null?null:n[e]}function Cl(n){n[Un]=0}function bl(n){n[$]&1024||(n[$]|=1024,qs(n)&&Rr(n))}function Nm(n,e){for(;n>0;)e=e[jn],n--;return e}function eo(n){return!!(n[$]&9216||n[Ze]?.dirty)}function Gs(n){n[kt].changeDetectionScheduler?.notify(8),n[$]&64&&(n[$]|=1024),eo(n)&&Rr(n)}function Rr(n){n[kt].changeDetectionScheduler?.notify(0);let e=ln(n);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!qs(e)));)e=ln(e)}function Sl(n,e){if($n(n))throw new ee(911,!1);n[xt]===null&&(n[xt]=[]),n[xt].push(e)}function Rm(n,e){if(n[xt]===null)return;let t=n[xt].indexOf(e);t!==-1&&n[xt].splice(t,1)}function ln(n){let e=n[Ae];return ut(e)?e[Ae]:e}function Al(n){return n[br]??=[]}function Ml(n){return n.cleanup??=[]}function xm(n,e,t,r){let i=Al(e);i.push(t),n.firstCreatePass&&Ml(n).push(r,i.length-1)}var K={lFrame:Km(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Yu=!1;function Pm(){return K.lFrame.elementDepthCount}function km(){K.lFrame.elementDepthCount++}function Om(){K.lFrame.elementDepthCount--}function Fm(){return K.skipHydrationRootTNode!==null}function Lm(n){return K.skipHydrationRootTNode===n}function Vm(){K.skipHydrationRootTNode=null}function ge(){return K.lFrame.lView}function Vt(){return K.lFrame.tView}function Me(n){return K.lFrame.contextLView=n,n[Pe]}function Ne(n){return K.lFrame.contextLView=null,n}function Et(){let n=Nl();for(;n!==null&&n.type===64;)n=n.parent;return n}function Nl(){return K.lFrame.currentTNode}function Bm(){let n=K.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xr(n,e){let t=K.lFrame;t.currentTNode=n,t.isParent=e}function Rl(){return K.lFrame.isParent}function jm(){K.lFrame.isParent=!1}function xl(){return Yu}function Hi(n){let e=Yu;return Yu=n,e}function Um(n){return K.lFrame.bindingIndex=n}function Pl(){return K.lFrame.bindingIndex++}function Hm(n){let e=K.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function $m(){return K.lFrame.inI18n}function zm(n,e){let t=K.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ws(e)}function qm(){return K.lFrame.currentDirectiveIndex}function Ws(n){K.lFrame.currentDirectiveIndex=n}function Gm(n){let e=K.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function kl(){return K.lFrame.currentQueryIndex}function Ks(n){K.lFrame.currentQueryIndex=n}function dD(n){let e=n[z];return e.type===2?e.declTNode:e.type===1?n[rt]:null}function Ol(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=dD(o),i===null||(o=o[jn],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=K.lFrame=Wm();return r.currentTNode=e,r.lView=n,!0}function Qs(n){let e=Wm(),t=n[z];K.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Wm(){let n=K.lFrame,e=n===null?null:n.child;return e===null?Km(n):e}function Km(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Qm(){let n=K.lFrame;return K.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Fl=Qm;function Ys(){let n=Qm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ym(n){return(K.lFrame.contextLView=Nm(n,K.lFrame.contextLView))[Pe]}function zn(){return K.lFrame.selectedIndex}function mn(n){K.lFrame.selectedIndex=n}function Bt(){K.lFrame.currentNamespace=Dl}function jt(){fD()}function fD(){K.lFrame.currentNamespace=null}function Zm(){return K.lFrame.currentNamespace}var Xm=!0;function Zs(){return Xm}function Xs(n){Xm=n}function Zu(n,e=null,t=null,r){let i=Jm(n,e,t,r);return i.resolveInjectorInitializers(),i}function Jm(n,e=null,t=null,r,i=new Set){let o=[t||et,Im(n)];return r=r||(typeof n=="object"?void 0:cn(n)),new On(o,e||Qi(),r||null,i)}var dn=class n{static THROW_IF_NOT_FOUND=Pn;static NULL=new Ui;static create(e,t){if(Array.isArray(e))return Zu({name:""},t,e,"");{let r=e.name??"";return Zu({name:r},e.parent,e.providers,r)}}static \u0275prov=le({token:n,providedIn:"any",factory:()=>oe(pl)});static __NG_ELEMENT_ID__=-1},lt=new re(""),to=(()=>{class n{static __NG_ELEMENT_ID__=hD;static __NG_ENV_ID__=t=>t}return n})(),xs=class extends to{_lView;constructor(e){super(),this._lView=e}get destroyed(){return $n(this._lView)}onDestroy(e){let t=this._lView;return Sl(t,e),()=>Rm(t,e)}};function hD(){return new xs(ge())}var ey=!1,Pr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Bi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ir(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xu=class extends Nt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Cm()&&(this.destroyRef=te(to,{optional:!0})??void 0,this.pendingTasks=te(Pr,{optional:!0})??void 0)}emit(e){let t=H(null);try{super.next(e)}finally{H(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Rt=Xu;function Ps(...n){}function Ll(n){let e,t;function r(){n=Ps;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Vl(n){return queueMicrotask(()=>n()),()=>{n=Ps}}var Bl="isAngularZone",$i=Bl+"_ID",pD=0,We=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Rt(!1);onMicrotaskEmpty=new Rt(!1);onStable=new Rt(!1);onError=new Rt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ey}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,yD(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bl)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gD,Ps,Ps);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},gD={};function jl(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function mD(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Ll(()=>{n.callbackScheduled=!1,Ju(n),n.isCheckStableRunning=!0,jl(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ju(n)}function yD(n){let e=()=>{mD(n)},t=pD++;n._inner=n._inner.fork({name:"angular",properties:{[Bl]:!0,[$i]:t,[$i+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(vD(u))return r.invokeTask(o,s,c,u);try{return um(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),lm(n)}},onInvoke:(r,i,o,s,c,u,d)=>{try{return um(n),r.invoke(o,s,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ED(u)&&e(),lm(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ju(n),jl(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ju(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function um(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lm(n){n._nesting--,jl(n)}var zi=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Rt;onMicrotaskEmpty=new Rt;onStable=new Rt;onError=new Rt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function vD(n){return ty(n,"__ignore_ng_zone__")}function ED(n){return ty(n,"__scheduler_tick__")}function ty(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Pt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},kr=new re("",{factory:()=>{let n=te(We),e=te(tt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Pt),t.handleError(r))})}}}),ny={provide:Wi,useValue:()=>{let n=te(Pt,{optional:!0})},multi:!0};function Ee(n,e){let[t,r,i]=Mu(n,e?.equal),o=t,s=o[Je];return o.set=r,o.update=i,o.asReadonly=ry.bind(o),o}function ry(){let n=this[Je];if(n.readonlyFn===void 0){let e=()=>this();e[Je]=n,n.readonlyFn=e}return n.readonlyFn}var Js=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=_D}return n})();function _D(){return new Js(ge(),Et())}var Fn=class{},no=new re("",{factory:()=>!0});var Ul=new re("");var ea=(()=>{class n{static \u0275prov=le({token:n,providedIn:"root",factory:()=>new el})}return n})(),el=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},ks=class{[Je];constructor(e){this[Je]=e}destroy(){this[Je].destroy()}};function ro(n,e){let t=e?.injector??te(dn),r=e?.manualCleanup!==!0?t.get(to):null,i,o=t.get(Js,null,{optional:!0}),s=t.get(Fn);return o!==null?(i=DD(o.view,s,n),r instanceof xs&&r._lView===o.view&&(r=null)):i=TD(n,t.get(ea),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new ks(i)}var iy=ye(Z({},Ru),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Hi(!1);try{xu(this)}finally{Hi(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=H(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],H(n)}}}),ID=ye(Z({},iy),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(mr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),wD=ye(Z({},iy),{consumerMarkedDirty(){this.view[$]|=8192,Rr(this.view),this.notifier.notify(13)},destroy(){if(mr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[un]?.delete(this)}});function DD(n,e,t){let r=Object.create(wD);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=oy(r,t),n[un]??=new Set,n[un].add(r),r.consumerMarkedDirty(r),r}function TD(n,e,t){let r=Object.create(ID);return r.fn=oy(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function oy(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function gd(n){return{toString:n}.toString()}function OD(n){return typeof n=="function"}function Ry(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var sa=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function FD(n){return n.type.prototype.ngOnChanges&&(n.setInput=VD),LD}function LD(){let n=Py(this),e=n?.current;if(e){let t=n.previous;if(t===Bn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VD(n,e,t,r,i){let o=this.declaredInputs[r],s=Py(n)||BD(n,{previous:Bn,current:null}),c=s.current||(s.current={}),u=s.previous,d=u[o];c[o]=new sa(d&&d.currentValue,t,u===Bn),Ry(n,e,i,t)}var xy="__ngSimpleChanges__";function Py(n){return n[xy]||null}function BD(n,e){return n[xy]=e}var sy=[];var ce=function(n,e=null,t){for(let r=0;r<sy.length;r++){let i=sy[r];i(n,e,t)}},ne=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ne||{});function jD(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=FD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function UD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function na(n,e,t){ky(n,e,3,t)}function ra(n,e,t,r){(n[$]&3)===t&&ky(n,e,t,r)}function Hl(n,e){let t=n[$];(t&3)===e&&(t&=16383,t+=1,n[$]=t)}function ky(n,e,t,r){let i=r!==void 0?n[Un]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Un]+=65536),(c<o||o==-1)&&(HD(n,t,e,u),n[Un]=(n[Un]&4294901760)+u+2),u++}function ay(n,e){ce(ne.LifecycleHookStart,n,e);let t=H(null);try{e.call(n)}finally{H(t),ce(ne.LifecycleHookEnd,n,e)}}function HD(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[$]>>14<n[Un]>>16&&(n[$]&3)===e&&(n[$]+=16384,ay(c,o)):ay(c,o)}var Fr=-1,so=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function $D(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];zD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function zD(n){return n.charCodeAt(0)===64}function ya(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cy(n,t,i,null,e[++r]):cy(n,t,i,null,null))}}return n}function cy(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Oy(n){return n!==Fr}function aa(n){return n&32767}function qD(n){return n>>16}function ca(n,e){let t=qD(n),r=e;for(;t>0;)r=r[jn],t--;return r}var Kl=!0;function uy(n){let e=Kl;return Kl=n,e}var GD=256,Fy=GD-1,Ly=5,WD=0,_t={};function KD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ln)&&(r=t[Ln]),r==null&&(r=t[Ln]=WD++);let i=r&Fy,o=1<<i;e.data[n+(i>>Ly)]|=o}function Vy(n,e){let t=By(n,e);if(t!==-1)return t;let r=e[z];r.firstCreatePass&&(n.injectorIndex=e.length,$l(r.data,n),$l(e,null),$l(r.blueprint,null));let i=md(n,e),o=n.injectorIndex;if(Oy(i)){let s=aa(i),c=ca(i,e),u=c[z].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|u[s+d]}return e[o+8]=i,o}function $l(n,e){n.push(0,0,0,0,0,0,0,0,e)}function By(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function md(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=zy(i),r===null)return Fr;if(t++,i=i[jn],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Fr}function QD(n,e,t){KD(n,e,t)}function jy(n,e,t){if(t&8||n!==void 0)return n;Vs(e,"NodeInjector")}function Uy(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[fn],o=Qe(void 0);try{return i?i.get(e,r,t&8):fl(e,r,t&8)}finally{Qe(o)}}return jy(r,e,t)}function Hy(n,e,t,r=0,i){if(n!==null){if(e[$]&2048&&!(r&2)){let s=JD(n,e,t,r,_t);if(s!==_t)return s}let o=$y(n,e,t,r,_t);if(o!==_t)return o}return Uy(e,t,r,i)}function $y(n,e,t,r,i){let o=ZD(t);if(typeof o=="function"){if(!Ol(e,n,r))return r&1?jy(i,t,r):Uy(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Vs(t);else return s}finally{Fl()}}else if(typeof o=="number"){let s=null,c=By(n,e),u=Fr,d=r&1?e[ct][rt]:null;for((c===-1||r&4)&&(u=c===-1?md(n,e):e[c+8],u===Fr||!dy(r,!1)?c=-1:(s=e[z],c=aa(u),e=ca(u,e)));c!==-1;){let h=e[z];if(ly(o,c,h.data)){let g=YD(c,e,t,s,r,d);if(g!==_t)return g}u=e[c+8],u!==Fr&&dy(r,e[z].data[c+8]===d)&&ly(o,c,e)?(s=h,c=aa(u),e=ca(u,e)):c=-1}}return i}function YD(n,e,t,r,i,o){let s=e[z],c=s.data[n+8],u=r==null?Ar(c)&&Kl:r!=s&&(c.type&3)!==0,d=i&1&&o===c,h=ia(c,s,t,u,d);return h!==null?ua(e,s,h,c,i):_t}function ia(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,d=n.directiveEnd,h=o>>20,g=r?c:c+h,m=i?c+h:d;for(let _=g;_<m;_++){let M=s[_];if(_<u&&t===M||_>=u&&M.type===t)return _}if(i){let _=s[u];if(_&&Mr(_)&&_.type===t)return u}return null}function ua(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof so){let c=o;if(c.resolving){let _=hm(s[t]);throw dl(_)}let u=uy(c.canSeeViewProviders);c.resolving=!0;let d=s[t].type||s[t],h,g=c.injectImpl?Qe(c.injectImpl):null,m=Ol(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&jD(t,s[t],e)}finally{g!==null&&Qe(g),uy(u),c.resolving=!1,Fl()}}return o}function ZD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ln)?n[Ln]:void 0;return typeof e=="number"?e>=0?e&Fy:XD:e}function ly(n,e,t){let r=1<<n;return!!(t[e+(n>>Ly)]&r)}function dy(n,e){return!(n&2)&&!(n&1&&e)}var qn=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Hy(this._tNode,this._lView,e,kn(r),t)}};function XD(){return new qn(Et(),ge())}function JD(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[$]&2048&&!Nr(s);){let c=$y(o,s,t,r|2,_t);if(c!==_t)return c;let u=o.parent;if(!u){let d=s[_l];if(d){let h=d.get(t,_t,r);if(h!==_t)return h}u=zy(s),s=s[jn]}o=u}return i}function zy(n){let e=n[z],t=e.type;return t===2?e.declTNode:t===1?n[rt]:null}function eT(){return Hr(Et(),ge())}function Hr(n,e){return new $r(Ft(n,e))}var $r=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=eT}return n})();function tT(n){return n instanceof $r?n.nativeElement:n}function nT(){return this._results[Symbol.iterator]()}var la=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Nt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=vm(e);(this._changesDetected=!ym(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nT};function qy(n){return(n.flags&128)===128}var yd=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(yd||{}),Gy=new Map,rT=0;function iT(){return rT++}function oT(n){Gy.set(n[Zi],n)}function Ql(n){Gy.delete(n[Zi])}var fy="__ngContext__";function Lr(n,e){Ot(e)?(n[fy]=e[Zi],oT(e)):n[fy]=e}function Wy(n){return Qy(n[Sr])}function Ky(n){return Qy(n[nt])}function Qy(n){for(;n!==null&&!ut(n);)n=n[nt];return n}var sT;function vd(n){sT=n}var va=new re("",{factory:()=>aT}),aT="ng";var Ea=new re(""),fo=new re("",{providedIn:"platform",factory:()=>"unknown"});var _a=new re("",{factory:()=>te(lt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Yy=!1,Zy=new re("",{factory:()=>Yy});var cT=(n,e,t,r)=>{};function uT(n,e,t,r){cT(n,e,t,r)}function Ed(n){return(n.flags&32)===32}var lT=()=>null;function Xy(n,e,t=!1){return lT(n,e,t)}function Jy(n,e){let t=n.contentQueries;if(t!==null){let r=H(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Ks(o),c.contentQueries(2,e[s],s)}}}finally{H(r)}}}function Yl(n,e,t){Ks(0);let r=H(null);try{e(n,t)}finally{H(r)}}function dT(n,e,t){if(Il(e)){let r=H(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{H(r)}}}var dt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(dt||{});var Zl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tl})`}};function ev(n){return n instanceof Zl?n.changingThisBreaksApplicationSecurity:n}function fT(n,e){return n.createText(e)}function hT(n,e,t){n.setValue(e,t)}function tv(n,e,t){return n.createElement(e,t)}function da(n,e,t,r,i){n.insertBefore(e,t,r,i)}function nv(n,e,t){n.appendChild(e,t)}function hy(n,e,t,r,i){r!==null?da(n,e,t,r,i):nv(n,e,t)}function pT(n,e,t,r){n.removeChild(null,e,t,r)}function gT(n,e,t){n.setAttribute(e,"style",t)}function mT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function rv(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&$D(n,e,r),i!==null&&mT(n,e,i),o!==null&&gT(n,e,o)}function Kn(n){return n.ownerDocument.defaultView}var yT="ng-template";function vT(n){return n.type===4&&n.value!==yT}function Xl(n){return(n&1)===0}function py(n,e){return n?":not("+e.trim()+")":e}function ET(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Xl(s)&&(e+=py(o,i),i=""),r=s,o=o||!Xl(r);t++}return i!==""&&(e+=py(o,i)),e}function _T(n){return n.map(ET).join(",")}function IT(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Xl(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ht={};function _d(n,e,t,r,i,o,s,c,u,d,h){let g=ze+r,m=g+i,_=wT(g,m),M=typeof d=="function"?d():d;return _[z]={type:n,blueprint:_,template:t,queries:null,viewQuery:c,declTNode:e,data:_.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:h}}function wT(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ht);return t}function DT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=_d(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Id(n,e,t,r,i,o,s,c,u,d,h){let g=e.blueprint.slice();return g[at]=i,g[$]=r|4|128|8|64|1024,(d!==null||n&&n[$]&2048)&&(g[$]|=2048),Cl(g),g[Ae]=g[jn]=n,g[Pe]=t,g[kt]=s||n&&n[kt],g[ke]=c||n&&n[ke],g[fn]=u||n&&n[fn]||null,g[rt]=o,g[Zi]=iT(),g[Yi]=h,g[_l]=d,g[ct]=e.type==2?n[ct]:g,g}function TT(n,e,t){let r=Ft(e,n),i=DT(t),o=n[kt].rendererFactory,s=wd(n,Id(n,i,null,iv(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function iv(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function ov(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function wd(n,e){return n[Sr]?n[El][nt]=e:n[Sr]=e,n[El]=e,e}function ho(n=1){sv(Vt(),ge(),zn()+n,!1)}function sv(n,e,t,r){if(!r)if((e[$]&3)===3){let o=n.preOrderCheckHooks;o!==null&&na(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ra(e,o,0,t)}mn(t)}var Ia=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ia||{});function Jl(n,e,t,r){let i=H(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Ia.SignalBased)!==0&&(u=e[o][Je]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Ry(e,u,o,r)}finally{H(i)}}var Ut=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ut||{}),CT;function Dd(n,e){return CT(n,e)}var Vr=new Set,Td=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Td||{}),po=new re(""),gy=new Set;function zr(n){gy.has(n)||(gy.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var av=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})();var bT=new re("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:te(tt)})});function cv(n,e,t){let r=n.get(bT);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function ST(n,e){for(let[t,r]of e)cv(n,r.animateFns)}function my(n,e,t,r){let i=n?.[Xi]?.enter;e!==null&&i&&i.has(t.index)&&ST(r,i)}function Or(n,e,t,r,i,o,s,c){if(i!=null){let u,d=!1;ut(i)?u=i:Ot(i)&&(d=!0,i=i[at]);let h=it(i);n===0&&r!==null?(my(c,r,o,t),s==null?nv(e,r,h):da(e,r,h,s||null,!0)):n===1&&r!==null?(my(c,r,o,t),da(e,r,h,s||null,!0)):n===2?yy(c,o,t,g=>{pT(e,h,d,g)}):n===3&&yy(c,o,t,()=>{e.destroyNode(h)}),u!=null&&jT(e,n,t,u,o,r,s)}}function AT(n,e){uv(n,e),e[at]=null,e[rt]=null}function MT(n,e,t,r,i,o){r[at]=i,r[rt]=e,wa(n,r,t,1,i,o)}function uv(n,e){e[kt].changeDetectionScheduler?.notify(9),wa(n,e,e[ke],2,null,null)}function NT(n){let e=n[Sr];if(!e)return zl(n[z],n);for(;e;){let t=null;if(Ot(e))t=e[Sr];else{let r=e[Le];r&&(t=r)}if(!t){for(;e&&!e[nt]&&e!==n;)Ot(e)&&zl(e[z],e),e=e[Ae];e===null&&(e=n),Ot(e)&&zl(e[z],e),t=e&&e[nt]}e=t}}function Cd(n,e){let t=n[Hn],r=t.indexOf(e);t.splice(r,1)}function bd(n,e){if($n(e))return;let t=e[ke];t.destroyNode&&wa(n,e,t,3,null,null),NT(e)}function zl(n,e){if($n(e))return;let t=H(null);try{e[$]&=-129,e[$]|=256,e[Ze]&&mr(e[Ze]),PT(n,e),xT(n,e),e[z].type===1&&e[ke].destroy();let r=e[hn];if(r!==null&&ut(e[Ae])){r!==e[Ae]&&Cd(r,e);let i=e[vt];i!==null&&i.detachView(n)}Ql(e)}finally{H(t)}}function yy(n,e,t,r){let i=n?.[Xi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Vr.add(n),cv(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let d=s.animateFns[u],{promise:h}=d();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),RT(n,r)}else n&&Vr.delete(n),r(!1)},i)}function RT(n,e){let t=n[Xi]?.running;if(t){t.then(()=>{n[Xi].running=void 0,Vr.delete(n),e(!0)});return}e(!1)}function xT(n,e){let t=n.cleanup,r=e[br];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[br]=null);let i=e[xt];if(i!==null){e[xt]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[un];if(o!==null){e[un]=null;for(let s of o)s.destroy()}}function PT(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof so)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ce(ne.LifecycleHookStart,c,u);try{u.call(c)}finally{ce(ne.LifecycleHookEnd,c,u)}}else{ce(ne.LifecycleHookStart,i,o);try{o.call(i)}finally{ce(ne.LifecycleHookEnd,i,o)}}}}}function kT(n,e,t){return OT(n,e.parent,t)}function OT(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[at];if(Ar(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===dt.None||i===dt.Emulated)return null}return Ft(r,t)}function FT(n,e,t){return VT(n,e,t)}function LT(n,e,t){return n.type&40?Ft(n,t):null}var VT=LT,vy;function Sd(n,e,t,r){let i=kT(n,r,e),o=e[ke],s=r.parent||e[rt],c=FT(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)hy(o,i,t[u],c,!1);else hy(o,i,t,c,!1);vy!==void 0&&vy(o,r,e,t,i)}function io(n,e){if(e!==null){let t=e.type;if(t&3)return Ft(e,n);if(t&4)return ed(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return io(n,r);{let i=n[e.index];return ut(i)?ed(-1,i):it(i)}}else{if(t&128)return io(n,e.next);if(t&32)return Dd(e,n)()||it(n[e.index]);{let r=lv(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ln(n[ct]);return io(i,r)}else return io(n,e.next)}}}return null}function lv(n,e){if(e!==null){let r=n[ct][rt],i=e.projection;return r.projection[i]}return null}function ed(n,e){let t=Le+n+1;if(t<e.length){let r=e[t],i=r[z].firstChild;if(i!==null)return io(r,i)}return e[pn]}function Ad(n,e,t,r,i,o,s){for(;t!=null;){let c=r[fn];if(t.type===128){t=t.next;continue}let u=r[t.index],d=t.type;if(s&&e===0&&(u&&Lr(it(u),r),t.flags|=2),!Ed(t))if(d&8)Ad(n,e,t.child,r,i,o,!1),Or(e,n,c,i,u,t,o,r);else if(d&32){let h=Dd(t,r),g;for(;g=h();)Or(e,n,c,i,g,t,o,r);Or(e,n,c,i,u,t,o,r)}else d&16?BT(n,e,r,t,i,o):Or(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function wa(n,e,t,r,i,o){Ad(t,r,n.firstChild,e,i,o,!1)}function BT(n,e,t,r,i,o){let s=t[ct],u=s[rt].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let h=u[d];Or(e,n,t[fn],i,h,r,o,t)}else{let d=u,h=s[Ae];qy(r)&&(d.flags|=128),Ad(n,e,d,h,i,o,!0)}}function jT(n,e,t,r,i,o,s){let c=r[pn],u=it(r);c!==u&&Or(e,n,t,o,c,i,s);for(let d=Le;d<r.length;d++){let h=r[d];wa(h[z],h,n,e,o,c)}}function UT(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ut.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ut.Important),n.setStyle(t,r,i,o))}}function dv(n,e,t,r,i){let o=zn(),s=r&2;try{mn(-1),s&&e.length>ze&&sv(n,e,ze,!1);let c=s?ne.TemplateUpdateStart:ne.TemplateCreateStart;ce(c,i,t),t(r,i)}finally{mn(o);let c=s?ne.TemplateUpdateEnd:ne.TemplateCreateEnd;ce(c,i,t)}}function HT(n,e,t){GT(n,e,t),(t.flags&64)===64&&WT(n,e,t)}function fv(n,e,t=Ft){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function $T(n,e,t,r){let o=r.get(Zy,Yy)||t===dt.ShadowDom||t===dt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return zT(s),s}function zT(n){qT(n)}var qT=()=>null;function GT(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ar(t)&&TT(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Vy(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=ua(e,n,s,t);if(Lr(u,e),o!==null&&QT(e,s-r,u,c,t,o),Mr(c)){let d=Lt(t.index,e);d[Pe]=ua(e,n,s,t)}}}function WT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=qm();try{mn(o);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];Ws(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&KT(u,d)}}finally{mn(-1),Ws(s)}}function KT(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QT(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1];Jl(r,t,u,d)}}function YT(n,e,t,r,i){let o=ze+t,s=e[z],c=i(s,e,n,r,t);e[o]=c,xr(n,!0);let u=n.type===2;return u?(rv(e[ke],c,n),(Pm()===0||wl(n))&&Lr(c,e),km()):Lr(c,e),Zs()&&(!u||!Ed(n))&&Sd(s,e,c,n),n}function ZT(n){let e=n;return Rl()?jm():(e=e.parent,xr(e,!1)),e}function XT(n,e){let t=n[fn];if(!t)return;let r;try{r=t.get(kr,null)}catch{r=null}r?.(e)}function JT(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],h=s[u+1],g=e.data[d];Jl(g,t[d],h,i),c=!0}if(o)for(let u of o){let d=t[u],h=e.data[u];Jl(h,d,r,i),c=!0}return c}function eC(n,e){let t=Lt(e,n),r=t[z];tC(r,t);let i=t[at];i!==null&&t[Yi]===null&&(t[Yi]=Xy(i,t[fn])),ce(ne.ComponentStart);try{Md(r,t,t[Pe])}finally{ce(ne.ComponentEnd,t[Pe])}}function tC(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Md(n,e,t){Qs(e);try{let r=n.viewQuery;r!==null&&Yl(1,r,t);let i=n.template;i!==null&&dv(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vt]?.finishViewCreation(n),n.staticContentQueries&&Jy(n,e),n.staticViewQueries&&Yl(2,n.viewQuery,t);let o=n.components;o!==null&&nC(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[$]&=-5,Ys()}}function nC(n,e){for(let t=0;t<e.length;t++)eC(n,e[t])}function hv(n,e,t,r){let i=H(null);try{let o=e.tView,c=n[$]&4096?4096:16,u=Id(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[hn]=d;let h=n[vt];return h!==null&&(u[vt]=h.createEmbeddedView(o)),Md(o,u,t),u}finally{H(i)}}function td(n,e){return!e||e.firstChild===null||qy(n)}function ao(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(it(o)),ut(o)&&pv(o,r);let s=t.type;if(s&8)ao(n,e,t.child,r);else if(s&32){let c=Dd(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=lv(e,t);if(Array.isArray(c))r.push(...c);else{let u=ln(e[ct]);ao(u[z],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function pv(n,e){for(let t=Le;t<n.length;t++){let r=n[t],i=r[z].firstChild;i!==null&&ao(r[z],r,i,e)}n[pn]!==n[at]&&e.push(n[pn])}function gv(n){if(n[$s]!==null){for(let e of n[$s])e.impl.addSequence(e);n[$s].length=0}}var mv=[];function rC(n){return n[Ze]??iC(n)}function iC(n){let e=mv.pop()??Object.create(sC);return e.lView=n,e}function oC(n){n.lView[Ze]!==n&&(n.lView=null,mv.push(n))}var sC=ye(Z({},gr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Rr(n.lView)},consumerOnSignalRead(){this.lView[Ze]=this}});function aC(n){let e=n[Ze]??Object.create(cC);return e.lView=n,e}var cC=ye(Z({},gr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ln(n.lView);for(;e&&!yv(e[z]);)e=ln(e);e&&bl(e)},consumerOnSignalRead(){this.lView[Ze]=this}});function yv(n){return n.type!==2}function vv(n){if(n[un]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[un])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[$]&8192)}}var uC=100;function Ev(n,e=0){let r=n[kt].rendererFactory,i=!1;i||r.begin?.();try{lC(n,e)}finally{i||r.end?.()}}function lC(n,e){let t=xl();try{Hi(!0),nd(n,e);let r=0;for(;eo(n);){if(r===uC)throw new ee(103,!1);r++,nd(n,1)}}finally{Hi(t)}}function dC(n,e,t,r){if($n(e))return;let i=e[$],o=!1,s=!1;Qs(e);let c=!0,u=null,d=null;o||(yv(n)?(d=rC(e),u=Li(d)):vs()===null?(c=!1,d=aC(e),u=Li(d)):e[Ze]&&(mr(e[Ze]),e[Ze]=null));try{Cl(e),Um(n.bindingStartIndex),t!==null&&dv(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&na(e,_,null)}else{let _=n.preOrderHooks;_!==null&&ra(e,_,0,null),Hl(e,0)}if(s||fC(e),vv(e),_v(e,0),n.contentQueries!==null&&Jy(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&na(e,_)}else{let _=n.contentHooks;_!==null&&ra(e,_,1),Hl(e,1)}pC(n,e);let g=n.components;g!==null&&wv(e,g,0);let m=n.viewQuery;if(m!==null&&Yl(2,m,r),!o)if(h){let _=n.viewCheckHooks;_!==null&&na(e,_)}else{let _=n.viewHooks;_!==null&&ra(e,_,2),Hl(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Hs]){for(let _ of e[Hs])_();e[Hs]=null}o||(gv(e),e[$]&=-73)}catch(h){throw o||Rr(e),h}finally{d!==null&&(Es(d,u),c&&oC(d)),Ys()}}function _v(n,e){for(let t=Wy(n);t!==null;t=Ky(t))for(let r=Le;r<t.length;r++){let i=t[r];Iv(i,e)}}function fC(n){for(let e=Wy(n);e!==null;e=Ky(e)){if(!(e[$]&2))continue;let t=e[Hn];for(let r=0;r<t.length;r++){let i=t[r];bl(i)}}}function hC(n,e,t){ce(ne.ComponentStart);let r=Lt(e,n);try{Iv(r,t)}finally{ce(ne.ComponentEnd,r[Pe])}}function Iv(n,e){qs(n)&&nd(n,e)}function nd(n,e){let r=n[z],i=n[$],o=n[Ze],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&_s(o)),s||=!1,o&&(o.dirty=!1),n[$]&=-9217,s)dC(r,n,r.template,n[Pe]);else if(i&8192){let c=H(null);try{vv(n),_v(n,1);let u=r.components;u!==null&&wv(n,u,1),gv(n)}finally{H(c)}}}function wv(n,e,t){for(let r=0;r<e.length;r++)hC(n,e[r],t)}function pC(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mn(~i);else{let o=i,s=t[++r],c=t[++r];zm(s,o);let u=e[o];ce(ne.HostBindingsUpdateStart,u);try{c(2,u)}finally{ce(ne.HostBindingsUpdateEnd,u)}}}}finally{mn(-1)}}function Nd(n,e){let t=xl()?64:1088;for(n[kt].changeDetectionScheduler?.notify(e);n;){n[$]|=t;let r=ln(n);if(Nr(n)&&!r)return n;n=r}return null}function Dv(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function gC(n,e){let t=Le+e;if(t<n.length)return n[t]}function Tv(n,e,t,r=!0){let i=e[z];if(yC(i,e,n,t),r){let s=ed(t,n),c=e[ke],u=c.parentNode(n[pn]);u!==null&&MT(i,n[rt],c,e,u,s)}let o=e[Yi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function mC(n,e){let t=fa(n,e);return t!==void 0&&bd(t[z],t),t}function fa(n,e){if(n.length<=Le)return;let t=Le+e,r=n[t];if(r){let i=r[hn];i!==null&&i!==n&&Cd(i,r),e>0&&(n[t-1][nt]=r[nt]);let o=Gi(n,Le+e);AT(r[z],r);let s=o[vt];s!==null&&s.detachView(o[z]),r[Ae]=null,r[nt]=null,r[$]&=-129}return r}function yC(n,e,t,r){let i=Le+r,o=t.length;r>0&&(t[i-1][nt]=e),r<o-Le?(e[nt]=t[i],hl(t,Le+r,e)):(t.push(e),e[nt]=null),e[Ae]=t;let s=e[hn];s!==null&&t!==s&&Cv(s,e);let c=e[vt];c!==null&&c.insertView(n),Gs(e),e[$]|=128}function Cv(n,e){let t=n[Hn],r=e[Ae];if(Ot(r))n[$]|=2;else{let i=r[Ae][ct];e[ct]!==i&&(n[$]|=2)}t===null?n[Hn]=[e]:t.push(e)}var Br=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[z];return ao(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Pe]}set context(e){this._lView[Pe]=e}get destroyed(){return $n(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ae];if(ut(e)){let t=e[Ji],r=t?t.indexOf(this):-1;r>-1&&(fa(e,r),Gi(t,r))}this._attachedToViewContainer=!1}bd(this._lView[z],this._lView)}onDestroy(e){Sl(this._lView,e)}markForCheck(){Nd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Gs(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,Ev(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Nr(this._lView),t=this._lView[hn];t!==null&&!e&&Cd(t,this._lView),uv(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=Nr(this._lView),r=this._lView[hn];r!==null&&!t&&Cv(r,this._lView),Gs(this._lView)}};var jr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=vC;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=hv(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Br(o)}}return n})();function vC(){return Rd(Et(),ge())}function Rd(n,e){return n.type&4?new jr(e,n,Hr(n,e)):null}function Da(n,e,t,r,i){let o=n.data[e];if(o===null)o=EC(n,e,t,r,i),$m()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Bm();o.injectorIndex=s===null?-1:s.injectorIndex}return xr(o,!0),o}function EC(n,e,t,r,i){let o=Nl(),s=Rl(),c=s?o:o&&o.parent,u=n.data[e]=IC(n,c,t,e,r,i);return _C(n,u,o,s),u}function _C(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function IC(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Fm()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var wC=()=>null,DC=()=>null;function Ey(n,e){return wC(n,e)}function TC(n,e,t){return DC(n,e,t)}var bv=class{},Ta=class{},rd=class{resolveComponentFactory(e){throw new ee(917,!1)}},Ca=class{static NULL=new rd},Gn=class{};var Sv=(()=>{class n{static \u0275prov=le({token:n,providedIn:"root",factory:()=>null})}return n})();var oa={},id=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,oa,r);return i!==oa||t===oa?i:this.parentInjector.get(e,t,r)}};function ha(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=rl(i,c);else if(o==2){let u=c,d=e[++s];r=rl(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function qr(n,e=0){let t=ge();if(t===null)return oe(n,e);let r=Et();return Hy(r,t,Ye(n),e)}function CC(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,d=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,d]=h.resolveHostDirectives(s);break}AC(n,e,t,c,o,u,d)}o!==null&&r!==null&&bC(t,r,o)}function bC(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}function SC(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function AC(n,e,t,r,i,o,s){let c=r.length,u=null;for(let m=0;m<c;m++){let _=r[m];u===null&&Mr(_)&&(u=_,SC(n,t,m)),QD(Vy(t,e),n,_.type)}kC(t,n.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let _=r[m];_.providersResolver&&_.providersResolver(_)}let d=!1,h=!1,g=ov(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let _=r[m];if(t.mergedAttrs=ya(t.mergedAttrs,_.hostAttrs),NC(n,t,e,g,_),PC(g,_,i),s!==null&&s.has(_)){let[x,S]=s.get(_);t.directiveToIndex.set(_.type,[g,x+t.directiveStart,S+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,g);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let M=_.type.prototype;!d&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}MC(n,t,o)}function MC(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))_y(0,e,i,r),_y(1,e,i,r),wy(e,r,!1);else{let o=t.get(i);Iy(0,e,o,r),Iy(1,e,o,r),wy(e,r,!0)}}}function _y(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Av(e,o)}}function Iy(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),Av(e,s)}}function Av(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function wy(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||vT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let d=i[u];for(let h of d)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let d=o[u];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function NC(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Tr(i.type,!0)),s=new so(o,Mr(i),qr,null);n.blueprint[r]=s,t[r]=s,RC(n,e,r,ov(n,t,i.hostVars,Ht),i)}function RC(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;xC(s)!=c&&s.push(c),s.push(t,r,o)}}function xC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function PC(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mr(e)&&(t[""]=n)}}function kC(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function OC(n,e,t,r,i,o,s,c){let u=e[z],d=u.consts,h=gn(d,s),g=Da(u,n,t,r,h);return o&&CC(u,e,g,gn(d,c),i),g.mergedAttrs=ya(g.mergedAttrs,g.attrs),g.attrs!==null&&ha(g,g.attrs,!1),g.mergedAttrs!==null&&ha(g,g.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,g),g}function FC(n,e){UD(n,e),Il(e)&&n.queries.elementEnd(e)}function LC(n,e,t,r,i,o){let s=e.consts,c=gn(s,i),u=Da(e,n,t,r,c);if(u.mergedAttrs=ya(u.mergedAttrs,u.attrs),o!=null){let d=gn(s,o);u.localNames=[];for(let h=0;h<d.length;h+=2)u.localNames.push(d[h],-1)}return u.attrs!==null&&ha(u,u.attrs,!1),u.mergedAttrs!==null&&ha(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function xd(n,e,t){if(t===Ht)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function VC(n,e,t){return function r(i){let o=Ar(n)?Lt(n.index,e):e;Nd(o,5);let s=e[Pe],c=Dy(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=Dy(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Dy(n,e,t,r){let i=H(null);try{return ce(ne.OutputStart,e,t),t(r)!==!1}catch(o){return XT(n,o),!1}finally{ce(ne.OutputEnd,e,t),H(i)}}function BC(n,e,t,r,i,o,s,c){let u=wl(n),d=!1,h=null;if(!r&&u&&(h=UC(e,t,o,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,d=!0}else{let g=Ft(n,t),m=r?r(g):g;uT(t,m,o,c);let _=i.listen(m,o,c);if(!jC(o)){let M=r?x=>r(it(x[n.index])):n.index;HC(M,e,t,o,c,_,!1)}}return d}function jC(n){return n.startsWith("animation")||n.startsWith("transition")}function UC(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[br],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function HC(n,e,t,r,i,o,s){let c=e.firstCreatePass?Ml(e):null,u=Al(t),d=u.length;u.push(i,o),c&&c.push(r,n,d,(d+1)*(s?-1:1))}var od=Symbol("BINDING");var sd=class extends Ca{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vn(e);return new co(t,this.ngModule)}};function $C(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ia.SignalBased)!==0};return i&&(o.transform=i),o})}function zC(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function qC(n,e,t){let r=e instanceof tt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new id(t,r):t}function GC(n){let e=n.get(Gn,null);if(e===null)throw new ee(407,!1);let t=n.get(Sv,null),r=n.get(Fn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function WC(n,e){let t=Mv(n);return tv(e,t,t==="svg"?Dl:t==="math"?Sm:null)}function Mv(n){return(n.selectors[0][0]||"div").toLowerCase()}var co=class extends Ta{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$C(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=zC(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_T(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ce(ne.DynamicComponentStart);let c=H(null);try{let u=this.componentDef,d=KC(r,u,s,o),h=qC(u,i||this.ngModule,e),g=GC(h),m=g.rendererFactory.createRenderer(null,u),_=r?$T(m,r,u.encapsulation,h):WC(u,m),M=s?.some(Ty)||o?.some(P=>typeof P!="function"&&P.bindings.some(Ty)),x=Id(null,d,null,512|iv(u),null,null,g,m,h,null,Xy(_,h,!0));x[ze]=_,Qs(x);let S=null;try{let P=OC(ze,x,2,"#host",()=>d.directiveRegistry,!0,0);rv(m,_,P),Lr(_,x),HT(d,x,P),dT(d,P,x),FC(d,P),t!==void 0&&YC(P,this.ngContentSelectors,t),S=Lt(P.index,x),x[Pe]=S[Pe],Md(d,x,null)}catch(P){throw S!==null&&Ql(S),Ql(x),P}finally{ce(ne.DynamicComponentEnd),Ys()}return new pa(this.componentType,x,!!M)}finally{H(c)}}};function KC(n,e,t,r){let i=n?["ng-version","21.0.6"]:IT(e.selectors[0]),o=null,s=null,c=0;if(t)for(let h of t)c+=h[od].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let m of g.bindings){c+=m[od].requiredVars;let _=h+1;m.create&&(m.targetIdx=_,(o??=[]).push(m)),m.update&&(m.targetIdx=_,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,m=cl(g);u.push(m)}return _d(0,null,QC(o,s),1,c,u,null,null,null,[i],null)}function QC(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Ty(n){let e=n[od].kind;return e==="input"||e==="twoWay"}var pa=class extends bv{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=zs(t[z],ze),this.location=Hr(this._tNode,t),this.instance=Lt(this._tNode.index,t)[Pe],this.hostView=this.changeDetectorRef=new Br(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=JT(r,i[z],i,e,t);this.previousInputValues.set(e,t);let s=Lt(r.index,i);Nd(s,1)}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function YC(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var go=(()=>{class n{static __NG_ELEMENT_ID__=ZC}return n})();function ZC(){let n=Et();return Rv(n,ge())}var XC=go,Nv=class extends XC{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Hr(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){let e=md(this._hostTNode,this._hostLView);if(Oy(e)){let t=ca(e,this._hostLView),r=aa(e),i=t[z].data[r+8];return new qn(i,t)}else return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Cy(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ey(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,td(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!OD(e),d;if(u)d=t;else{let S=t||{};d=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,c=S.bindings}let h=u?e:new co(Vn(e)),g=r||this.parentInjector;if(!o&&h.ngModule==null){let P=(u?g:this.parentInjector).get(tt,null);P&&(o=P)}let m=Vn(h.componentType??{}),_=Ey(this._lContainer,m?.id??null),M=_?.firstChild??null,x=h.create(g,i,M,o,s,c);return this.insertImpl(x.hostView,d,td(this._hostTNode,_)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Mm(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Ae],d=new Nv(u,u[rt],u[Ae]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Tv(s,i,o,r),e.attachToViewContainerRef(),hl(ql(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Cy(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=fa(this._lContainer,t);r&&(Gi(ql(this._lContainer),t),bd(r[z],r))}detach(e){let t=this._adjustIndex(e,-1),r=fa(this._lContainer,t);return r&&Gi(ql(this._lContainer),t)!=null?new Br(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Cy(n){return n[Ji]}function ql(n){return n[Ji]||(n[Ji]=[])}function Rv(n,e){let t,r=e[n.index];return ut(r)?t=r:(t=Dv(r,e,null,n),e[n.index]=t,wd(e,t)),eb(t,e,n,r),new Nv(t,n,e)}function JC(n,e){let t=n[ke],r=t.createComment(""),i=Ft(e,n),o=t.parentNode(i);return da(t,o,r,t.nextSibling(i),!1),r}var eb=rb,tb=()=>!1;function nb(n,e,t){return tb(n,e,t)}function rb(n,e,t,r){if(n[pn])return;let i;t.type&8?i=it(r):i=JC(e,t),n[pn]=i}var ad=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},cd=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Pd(e,t).matches!==null&&this.queries[t].setDirty()}},ud=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=db(e):this.predicate=e}},ld=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},dd=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,ib(t,o)),this.matchTNodeWithReadOption(e,t,ia(t,e,o,!1,!1))}else r===jr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ia(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===$r||i===go||i===jr&&t.type&4)this.addMatch(t.index,-2);else{let o=ia(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ib(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function ob(n,e){return n.type&11?Hr(n,e):n.type&4?Rd(n,e):null}function sb(n,e,t,r){return t===-1?ob(e,n):t===-2?ab(n,e,r):ua(n,n[z],t,e)}function ab(n,e,t){if(t===$r)return Hr(e,n);if(t===jr)return Rd(e,n);if(t===go)return Rv(e,n)}function xv(n,e,t,r){let i=e[vt].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let d=s[u];if(d<0)c.push(null);else{let h=o[d];c.push(sb(e,h,s[u+1],t.metadata.read))}}i.matches=c}return i.matches}function fd(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=xv(n,e,i,t);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let d=o[c+1],h=e[-u];for(let g=Le;g<h.length;g++){let m=h[g];m[hn]===m[Ae]&&fd(m[z],m,d,r)}if(h[Hn]!==null){let g=h[Hn];for(let m=0;m<g.length;m++){let _=g[m];fd(_[z],_,d,r)}}}}}return r}function cb(n,e){return n[vt].queries[e].queryList}function ub(n,e,t){let r=new la((t&4)===4);return xm(n,e,r,r.destroy),(e[vt]??=new cd).queries.push(new ad(r))-1}function lb(n,e,t){let r=Vt();return r.firstCreatePass&&(fb(r,new ud(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),ub(r,ge(),e)}function db(n){return n.split(",").map(e=>e.trim())}function fb(n,e,t){n.queries===null&&(n.queries=new ld),n.queries.track(new dd(e,t))}function Pd(n,e){return n.queries.getByIndex(e)}function hb(n,e){let t=n[z],r=Pd(t,e);return r.crossesNgTemplate?fd(t,n,e,[]):xv(t,n,r,e)}var ga=class{};var uo=class extends ga{injector;componentFactoryResolver=new sd(this);instance=null;constructor(e){super();let t=new On([...e.providers,{provide:ga,useValue:this},{provide:Ca,useValue:this.componentFactoryResolver}],e.parent||Qi(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pv(n,e,t=null){return new uo({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var pb=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=yl(!1,t.type),i=r.length>0?Pv([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:n,providedIn:"environment",factory:()=>new n(oe(tt))})}return n})();function kd(n){return gd(()=>{let e=vb(n),t=ye(Z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(pb).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||dt.Emulated,styles:n.styles||et,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&zr("NgStandalone"),Eb(t);let r=n.dependencies;return t.directiveDefs=by(r,gb),t.pipeDefs=by(r,fm),t.id=_b(t),t})}function gb(n){return Vn(n)||cl(n)}function ba(n){return gd(()=>({type:n.type,bootstrap:n.bootstrap||et,declarations:n.declarations||et,imports:n.imports||et,exports:n.exports||et,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mb(n,e){if(n==null)return Bn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Ia.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function yb(n){if(n==null)return Bn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function vb(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Bn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||et,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:mb(n.inputs,e),outputs:yb(n.outputs),debugInfo:null}}function Eb(n){n.features?.forEach(e=>e(n))}function by(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function _b(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ib(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=ya(n.mergedAttrs,n.attrs);let h=n.tView=_d(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),xr(n,!1);let u=wb(t,e,n,r);Zs()&&Sd(t,e,u,n),Lr(u,e);let d=Dv(u,e,u,n);e[r+ze]=d,wd(e,d),nb(d,n,e)}function kv(n,e,t,r,i,o,s,c,u,d,h){let g=t+ze,m;if(e.firstCreatePass){if(m=Da(e,g,4,s||null,c||null),d!=null){let _=gn(e.consts,d);m.localNames=[];for(let M=0;M<_.length;M+=2)m.localNames.push(_[M],-1)}}else m=e.data[g];return Ib(m,n,e,t,r,i,o,u),d!=null&&fv(n,m,h),m}var wb=Db;function Db(n,e,t,r){return Xs(!0),e[ke].createComment("")}var Od=new re("");function Fd(n){return!!n&&typeof n.then=="function"}function Ov(n){return!!n&&typeof n.subscribe=="function"}var Fv=new re("");var Ld=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=te(Fv,{optional:!0})??[];injector=te(dn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Us(this.injector,i);if(Fd(o))t.push(o);else if(Ov(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lv=new re("");function Vv(){Au(()=>{let n="";throw new ee(600,n)})}function Bv(n){return n.isBoundToModule}var Tb=10;var Sa=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=te(kr);afterRenderManager=te(av);zonelessEnabled=te(no);rootEffectScheduler=te(ea);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Nt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=te(Pr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ju(t=>!t))}constructor(){te(po,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=te(tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=dn.NULL){return this._injector.get(We).run(()=>{ce(ne.BootstrapComponentStart);let s=t instanceof Ta;if(!this._injector.get(Ld).done){let M="";throw new ee(405,M)}let u;s?u=t:u=this._injector.get(Ca).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let d=Bv(u)?void 0:this._injector.get(ga),h=r||u.selector,g=u.create(i,[],h,d),m=g.location.nativeElement,_=g.injector.get(Od,null);return _?.registerApplication(m),g.onDestroy(()=>{this.detachView(g.hostView),oo(this.components,g),_?.unregisterApplication(m)}),this._loadComponent(g),ce(ne.BootstrapComponentEnd,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ce(ne.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Td.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ce(ne.ChangeDetectionEnd),new ee(101,!1);let t=H(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,H(t),this.afterTick.next(),ce(ne.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Gn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Tb;){ce(ne.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ce(ne.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!eo(i))continue;let o=r&&!this.zonelessEnabled?0:1;Ev(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>eo(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;oo(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Lv,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>oo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var y1=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Aa(n,e,t,r,i,o,s,c){zr("NgControlFlow");let u=ge(),d=Vt(),h=gn(d.consts,o);return kv(u,d,n,e,t,r,i,h,256,s,c),Vd}function Vd(n,e,t,r,i,o,s,c){zr("NgControlFlow");let u=ge(),d=Vt(),h=gn(d.consts,o);return kv(u,d,n,e,t,r,i,h,512,s,c),Vd}function Ma(n,e){zr("NgControlFlow");let t=ge(),r=Pl(),i=t[r]!==Ht?t[r]:-1,o=i!==-1?Sy(t,ze+i):void 0,s=0;if(xd(t,r,n)){let c=H(null);try{if(o!==void 0&&mC(o,s),n!==-1){let u=ze+n,d=Sy(t,u),h=Cb(t[z],u),g=TC(d,h,t),m=hv(t,h,e,{dehydratedView:g});Tv(d,m,s,td(h,g))}}finally{H(c)}}else if(o!==void 0){let c=gC(o,s);c!==void 0&&(c[Pe]=e)}}function Sy(n,e){return n[e]}function Cb(n,e){return zs(n,e)}function fe(n,e,t,r){let i=ge(),o=i[z],s=n+ze,c=o.firstCreatePass?LC(s,o,2,e,t,r):o.data[s];return YT(c,i,n,e,bb),r!=null&&fv(i,c),fe}function Ce(){let n=Et(),e=ZT(n);return Lm(e)&&Vm(),Om(),Ce}function ft(n,e,t,r){return fe(n,e,t,r),Ce(),ft}var bb=(n,e,t,r,i)=>(Xs(!0),tv(e[ke],r,Zm()));function Bd(){return ge()}var mo="en-US";var Sb=mo;function jv(n){typeof n=="string"&&(Sb=n.toLowerCase().replace(/_/g,"-"))}function It(n,e,t){let r=ge(),i=Vt(),o=Et();return(o.type&3||t)&&BC(o,i,r,t,r[ke],n,e,VC(o,r,e)),It}function jd(n=1){return Ym(n)}function Na(n,e,t){return lb(n,e,t),Na}function yo(n){let e=ge(),t=Vt(),r=kl();Ks(r+1);let i=Pd(t,r);if(n.dirty&&Am(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=hb(e,r);n.reset(o,tT),n.notifyOnChanges()}return!0}return!1}function vo(){return cb(ge(),kl())}function ta(n,e){return n<<17|e<<2}function Wn(n){return n>>17&32767}function Ab(n){return(n&2)==2}function Mb(n,e){return n&131071|e<<17}function hd(n){return n|2}function Ur(n){return(n&131068)>>2}function Gl(n,e){return n&-131069|e<<2}function Nb(n){return(n&1)===1}function pd(n){return n|1}function Rb(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Wn(s),u=Ur(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Cr(g,h)>0)&&(d=!0)}else h=t;if(i)if(u!==0){let m=Wn(n[c+1]);n[r+1]=ta(m,c),m!==0&&(n[m+1]=Gl(n[m+1],r)),n[c+1]=Mb(n[c+1],r)}else n[r+1]=ta(c,0),c!==0&&(n[c+1]=Gl(n[c+1],r)),c=r;else n[r+1]=ta(u,0),c===0?c=r:n[u+1]=Gl(n[u+1],r),u=r;d&&(n[r+1]=hd(n[r+1])),Ay(n,h,r,!0),Ay(n,h,r,!1),xb(e,h,n,r,o),s=ta(c,u),o?e.classBindings=s:e.styleBindings=s}function xb(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Cr(o,e)>=0&&(t[r+1]=pd(t[r+1]))}function Ay(n,e,t,r){let i=n[t+1],o=e===null,s=r?Wn(i):Ur(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],d=n[s+1];Pb(u,e)&&(c=!0,n[s+1]=r?pd(d):hd(d)),s=r?Wn(d):Ur(d)}c&&(n[t+1]=r?hd(i):pd(i))}function Pb(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Cr(n,e)>=0:!1}function Ra(n,e){return kb(n,e,null,!0),Ra}function kb(n,e,t,r){let i=ge(),o=Vt(),s=Hm(2);if(o.firstUpdatePass&&Fb(o,n,s,r),e!==Ht&&xd(i,s,e)){let c=o.data[zn()];Ub(o,c,i,i[ke],n,i[s+1]=Hb(e,t),r,s)}}function Ob(n,e){return e>=n.expandoStartIndex}function Fb(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[zn()],s=Ob(n,t);$b(o,r)&&e===null&&!s&&(e=!1),e=Lb(i,o,e,r),Rb(i,o,e,t,s,r)}}function Lb(n,e,t,r){let i=Gm(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Wl(null,n,e,t,r),t=lo(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Wl(i,n,e,t,r),o===null){let u=Vb(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Wl(null,n,e,u[1],r),u=lo(u,e.attrs,r),Bb(n,e,r,u))}else o=jb(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Vb(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ur(r)!==0)return n[Wn(r)]}function Bb(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wn(i)]=r}function jb(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=lo(r,s,t)}return lo(r,e.attrs,t)}function Wl(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=lo(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function lo(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_m(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Ub(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,d=u[c+1],h=Nb(d)?My(u,e,t,i,Ur(d),s):void 0;if(!ma(h)){ma(o)||Ab(d)&&(o=My(u,null,t,i,c,s));let g=Tl(zn(),t);UT(r,s,g,i,o)}}function My(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],d=Array.isArray(u),h=d?u[1]:u,g=h===null,m=t[i+1];m===Ht&&(m=g?et:void 0);let _=g?js(m,r):h===r?m:void 0;if(d&&!ma(_)&&(_=js(u,r)),ma(_)&&(c=_,s))return c;let M=n[i+1];i=s?Wn(M):Ur(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=js(u,r))}return c}function ma(n){return n!==void 0}function Hb(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=cn(ev(n)))),n}function $b(n,e){return(n.flags&(e?8:16))!==0}function Qn(n,e=""){let t=ge(),r=Vt(),i=n+ze,o=r.firstCreatePass?Da(r,i,1,e,null):r.data[i],s=zb(r,t,o,e,n);t[i]=s,Zs()&&Sd(r,t,s,o),xr(o,!1)}var zb=(n,e,t,r,i)=>(Xs(!0),fT(e[ke],r));function qb(n,e,t,r=""){return xd(n,Pl(),t)?e+ll(t)+r:Ht}function xa(n,e,t){let r=ge(),i=qb(r,n,e,t);return i!==Ht&&Gb(r,zn(),i),xa}function Gb(n,e,t){let r=Tl(e,n);hT(n[ke],r,t)}var Uv=(()=>{class n{applicationErrorHandler=te(kr);appRef=te(Sa);taskService=te(Pr);ngZone=te(We);zonelessEnabled=te(no);tracing=te(po,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($i):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(Ul,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Vl:Ll;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($i+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Vl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ud(){return zr("NgZoneless"),ml([...Hd(),[]])}function Hd(){return[{provide:Fn,useExisting:Uv},{provide:We,useClass:zi},{provide:no,useValue:!0}]}function Wb(){return typeof $localize<"u"&&$localize.locale||mo}var $d=new re("",{factory:()=>te($d,{optional:!0,skipSelf:!0})||Wb()});function Eo(n,e){return Is(n,e?.equal)}var zd=new re(""),iS=new re("");function _o(n){return!n.moduleRef}function oS(n){let e=_o(n)?n.r3Injector:n.moduleRef.injector,t=e.get(We);return t.run(()=>{_o(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(kr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),_o(n)){let o=()=>e.destroy(),s=n.platformInjector.get(zd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(zd);s.add(o),n.moduleRef.onDestroy(()=>{oo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return aS(r,t,()=>{let o=e.get(Pr),s=o.add(),c=e.get(Ld);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get($d,mo);if(jv(u||mo),!e.get(iS,!0))return _o(n)?e.get(Sa):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(_o(n)){let h=e.get(Sa);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return sS?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var sS;function aS(n,e,t){try{let r=t();return Fd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Pa=null;function cS(n=[],e){return dn.create({name:e,providers:[{provide:Ki,useValue:"platform"},{provide:zd,useValue:new Set([()=>Pa=null])},...n]})}function uS(n=[]){if(Pa)return Pa;let e=cS(n);return Pa=e,Vv(),lS(e),e}function lS(n){let e=n.get(Ea,null);Us(n,()=>{e?.forEach(t=>t())})}function Hv(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ce(ne.BootstrapApplicationStart);try{let o=i?.injector??uS(r),s=[Hd(),ny,...t||[]],c=new uo({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return oS({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ce(ne.BootstrapApplicationEnd)}}var $v=null;function wo(){return $v}function qd(n){$v??=n}var Io=class{};var ka=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ba({type:n});static \u0275inj=qi({})}return n})();function Gd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Do=class{};var zv="browser";var To=class{_doc;constructor(e){this._doc=e}manager},Oa=(()=>{class n extends To{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(oe(lt))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Va=new re(""),Yd=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Oa));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Oa);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(oe(Va),oe(We))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Wd="ng-app-id";function qv(n){for(let e of n)e.remove()}function Gv(n,e){let t=e.createElement("style");return t.textContent=n,t}function fS(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Wd}="${e}"],link[${Wd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Wd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Qd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Zd=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,fS(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Gv);r?.forEach(i=>this.addUsage(i,this.external,Qd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(qv(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])qv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Gv(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Qd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(oe(lt),oe(va),oe(_a,8),oe(fo))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Kd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xd=/%COMP%/g;var Kv="%COMP%",hS=`_nghost-${Kv}`,pS=`_ngcontent-${Kv}`,gS=!0,mS=new re("",{factory:()=>gS});function yS(n){return pS.replace(Xd,n)}function vS(n){return hS.replace(Xd,n)}function Qv(n,e){return e.map(t=>t.replace(Xd,n))}var Jd=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=d,this.defaultRenderer=new Co(t,s,c,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof La?i.applyToHost(t):i instanceof bo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.tracingService;switch(r.encapsulation){case dt.Emulated:o=new La(u,d,r,this.appId,h,s,c,g);break;case dt.ShadowDom:return new Fa(u,t,r,s,c,this.nonce,g,d);case dt.ExperimentalIsolatedShadowDom:return new Fa(u,t,r,s,c,this.nonce,g);default:o=new bo(u,d,r,h,s,c,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(oe(Yd),oe(Zd),oe(va),oe(mS),oe(lt),oe(We),oe(_a),oe(po,8))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Co=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Kd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wv(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wv(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Kd[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Kd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ut.DashCase|Ut.Important)?e.style.setProperty(t,r,i&Ut.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ut.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=wo().getGlobalEventTarget(this.doc,e),!e))throw new ee(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Wv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Fa=class extends Co{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=Qv(r.id,d);for(let g of d){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=g,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let g of h){let m=Qd(g,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},bo=class extends Co{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?Qv(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Vr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},La=class extends bo{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,c,u,d),this.contentAttr=yS(d),this.hostAttr=vS(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ba=class n extends Io{supportsDOMEvents=!0;static makeCurrent(){qd(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=ES();return t==null?null:_S(t)}resetBaseElement(){So=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gd(document.cookie,e)}},So=null;function ES(){return So=So||document.head.querySelector("base"),So?So.getAttribute("href"):null}function _S(n){return new URL(n,document.baseURI).pathname}var IS=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Yv=["alt","control","meta","shift"],wS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DS={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Zv=(()=>{class n extends To{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wo().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Yv.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=wS[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yv.forEach(s=>{if(s!==i){let c=DS[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(oe(lt))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})();function ef(n,e,t){let r=Z({rootComponent:n,platformRef:t?.platformRef},TS(e));return Hv(r)}function TS(n){return{appProviders:[...MS,...n?.providers??[]],platformProviders:AS}}function CS(){Ba.makeCurrent()}function bS(){return new Pt}function SS(){return vd(document),document}var AS=[{provide:fo,useValue:zv},{provide:Ea,useValue:CS,multi:!0},{provide:lt,useFactory:SS}];var MS=[{provide:Ki,useValue:"root"},{provide:Pt,useFactory:bS},{provide:Va,useClass:Oa,multi:!0},{provide:Va,useClass:Zv,multi:!0},Jd,Zd,Yd,{provide:Gn,useExisting:Jd},{provide:Do,useClass:IS},[]];var Xv=()=>{};var tE=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},nE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,h=o>>2,g=(o&3)<<4|c>>4,m=(c&15)<<2|d>>6,_=d&63;u||(_=64,s||(m=64)),r.push(t[h],t[g],t[m],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new tf;let m=o<<2|c>>4;if(r.push(m),d!==64){let _=c<<4&240|d>>2;if(r.push(_),g!==64){let M=d<<6&192|g;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},RS=function(n){let e=tE(n);return nE.encodeByteArray(e,!0)},Mo=function(n){return RS(n).replace(/\./g,"")},rE=function(n){try{return nE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xS=()=>iE().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&rE(n[1]);return e&&JSON.parse(e)},nf=()=>{try{return Xv()||xS()||PS()||kS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OS=n=>nf()?.emulatorHosts?.[n],oE=n=>{let e=OS(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},rf=()=>nf()?.config;var ja=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ua(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sE(n){return(await fetch(n,{credentials:"include"})).ok}function aE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Z({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mo(JSON.stringify(t)),Mo(JSON.stringify(s)),""].join(".")}var Ao={};function FS(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ao))Ao[e]?n.emulator.push(e):n.prod.push(e);return n}function LS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Jv=!1;function cE(n,e){if(typeof window>"u"||typeof document>"u"||!Ua(window.location.host)||Ao[n]===e||Ao[n]||Jv)return;Ao[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=FS().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Jv=!0,s()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){let m=LS(r),_=t("text"),M=document.getElementById(_)||document.createElement("span"),x=t("learnmore"),S=document.getElementById(x)||document.createElement("a"),P=t("preprendIcon"),F=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let j=m.element;c(j),h(S,x);let L=d();u(F,P),j.append(F,M,S,L),document.body.appendChild(j)}o?(M.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function uE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VS(){let n=nf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lE(){return!VS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function of(){try{return typeof indexedDB=="object"}catch{return!1}}function dE(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var BS="FirebaseError",$t=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=BS,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,No.prototype.create)}},No=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?jS(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new $t(i,c,r)}};function jS(n,e){return n.replace(US,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var US=/\{\$([^}]+)}/g;function Gr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(eE(o)&&eE(s)){if(!Gr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function eE(n){return n!==null&&typeof n=="object"}var Aj=14400*1e3;function Wr(n){return n&&n._delegate?n._delegate:n}var zt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zn="[DEFAULT]";var sf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ja;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($S(e))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zn){return this.instances.has(e)}getOptions(e=Zn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HS(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zn){return this.component?this.component.multipleInstances?e:Zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HS(n){return n===Zn?void 0:n}function $S(n){return n.instantiationMode==="EAGER"}var Ha=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new sf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var zS=[],X=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(X||{}),qS={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},GS=X.INFO,WS={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},KS=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=WS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kr=class{constructor(e){this.name=e,this._logLevel=GS,this._logHandler=KS,this._userLogHandler=null,zS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var QS=(n,e)=>e.some(t=>n instanceof t),fE,hE;function YS(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZS(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pE=new WeakMap,cf=new WeakMap,gE=new WeakMap,af=new WeakMap,lf=new WeakMap;function XS(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(wt(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&pE.set(t,n)}).catch(()=>{}),lf.set(e,n),e}function JS(n){if(cf.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cf.set(n,e)}var uf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mE(n){uf=n(uf)}function e0(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call($a(this),e,...t);return gE.set(r,e.sort?e.sort():[e]),wt(r)}:ZS().includes(n)?function(...e){return n.apply($a(this),e),wt(pE.get(this))}:function(...e){return wt(n.apply($a(this),e))}}function t0(n){return typeof n=="function"?e0(n):(n instanceof IDBTransaction&&JS(n),QS(n,YS())?new Proxy(n,uf):n)}function wt(n){if(n instanceof IDBRequest)return XS(n);if(af.has(n))return af.get(n);let e=t0(n);return e!==n&&(af.set(n,e),lf.set(e,n)),e}var $a=n=>lf.get(n);function vE(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=wt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(wt(s.result),u.oldVersion,u.newVersion,wt(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var n0=["get","getKey","getAll","getAllKeys","count"],r0=["put","add","delete","clear"],df=new Map;function yE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(df.get(e))return df.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=r0.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n0.includes(t)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return df.set(e,o),o}mE(n=>ye(Z({},n),{get:(e,t,r)=>yE(e,t)||n.get(e,t,r),has:(e,t)=>!!yE(e,t)||n.has(e,t)}));var hf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i0(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function i0(n){return n.getComponent()?.type==="VERSION"}var pf="@firebase/app",EE="0.14.6";var qt=new Kr("@firebase/app"),o0="@firebase/app-compat",s0="@firebase/analytics-compat",a0="@firebase/analytics",c0="@firebase/app-check-compat",u0="@firebase/app-check",l0="@firebase/auth",d0="@firebase/auth-compat",f0="@firebase/database",h0="@firebase/data-connect",p0="@firebase/database-compat",g0="@firebase/functions",m0="@firebase/functions-compat",y0="@firebase/installations",v0="@firebase/installations-compat",E0="@firebase/messaging",_0="@firebase/messaging-compat",I0="@firebase/performance",w0="@firebase/performance-compat",D0="@firebase/remote-config",T0="@firebase/remote-config-compat",C0="@firebase/storage",b0="@firebase/storage-compat",S0="@firebase/firestore",A0="@firebase/ai",M0="@firebase/firestore-compat",N0="firebase",R0="12.6.0";var gf="[DEFAULT]",x0={[pf]:"fire-core",[o0]:"fire-core-compat",[a0]:"fire-analytics",[s0]:"fire-analytics-compat",[u0]:"fire-app-check",[c0]:"fire-app-check-compat",[l0]:"fire-auth",[d0]:"fire-auth-compat",[f0]:"fire-rtdb",[h0]:"fire-data-connect",[p0]:"fire-rtdb-compat",[g0]:"fire-fn",[m0]:"fire-fn-compat",[y0]:"fire-iid",[v0]:"fire-iid-compat",[E0]:"fire-fcm",[_0]:"fire-fcm-compat",[I0]:"fire-perf",[w0]:"fire-perf-compat",[D0]:"fire-rc",[T0]:"fire-rc-compat",[C0]:"fire-gcs",[b0]:"fire-gcs-compat",[S0]:"fire-fst",[M0]:"fire-fst-compat",[A0]:"fire-vertex","fire-js":"fire-js",[N0]:"fire-js-all"};var za=new Map,P0=new Map,mf=new Map;function _E(n,e){try{n.container.addComponent(e)}catch(t){qt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ro(n){let e=n.name;if(mf.has(e))return qt.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,n);for(let t of za.values())_E(t,n);for(let t of P0.values())_E(t,n);return!0}function TE(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function CE(n){return n==null?!1:n.settings!==void 0}var k0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yn=new No("app","Firebase",k0);var yf=class{constructor(e,t,r){this._isDeleted=!1,this._options=Z({},e),this._config=Z({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}};var bE=R0;function _f(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Z({name:gf,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yn.create("bad-app-name",{appName:String(i)});if(t||(t=rf()),!t)throw yn.create("no-options");let o=za.get(i);if(o){if(Gr(t,o.options)&&Gr(r,o.config))return o;throw yn.create("duplicate-app",{appName:i})}let s=new Ha(i);for(let u of mf.values())s.addComponent(u);let c=new yf(t,r,s);return za.set(i,c),c}function SE(n=gf){let e=za.get(n);if(!e&&n===gf&&rf())return _f();if(!e)throw yn.create("no-app",{appName:n});return e}function vn(n,e,t){let r=x0[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qt.warn(s.join(" "));return}Ro(new zt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var O0="firebase-heartbeat-database",F0=1,xo="firebase-heartbeat-store",ff=null;function AE(){return ff||(ff=vE(O0,F0,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xo)}catch(t){console.warn(t)}}}}).catch(n=>{throw yn.create("idb-open",{originalErrorMessage:n.message})})),ff}async function L0(n){try{let t=(await AE()).transaction(xo),r=await t.objectStore(xo).get(ME(n));return await t.done,r}catch(e){if(e instanceof $t)qt.warn(e.message);else{let t=yn.create("idb-get",{originalErrorMessage:e?.message});qt.warn(t.message)}}}async function IE(n,e){try{let r=(await AE()).transaction(xo,"readwrite");await r.objectStore(xo).put(e,ME(n)),await r.done}catch(t){if(t instanceof $t)qt.warn(t.message);else{let r=yn.create("idb-set",{originalErrorMessage:t?.message});qt.warn(r.message)}}}function ME(n){return`${n.name}!${n.options.appId}`}var V0=1024,B0=30,vf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ef(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>B0){let i=U0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=wE(),{heartbeatsToSend:t,unsentEntries:r}=j0(this._heartbeatsCache.heartbeats),i=Mo(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return qt.warn(e),""}}};function wE(){return new Date().toISOString().substring(0,10)}function j0(n,e=V0){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),DE(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),DE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ef=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return of()?dE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await L0(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function DE(n){return Mo(JSON.stringify({version:2,heartbeats:n})).length}function U0(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function H0(n){Ro(new zt("platform-logger",e=>new hf(e),"PRIVATE")),Ro(new zt("heartbeat",e=>new vf(e),"PRIVATE")),vn(pf,EE,n),vn(pf,EE,"esm2020"),vn("fire-js","")}H0("");var $0="firebase",z0="12.7.0";vn($0,z0,"app");var NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},RE={};var Gt,If;(function(){var n;function e(I,y){function E(){}E.prototype=y.prototype,I.F=y.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(D,w,C){for(var v=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)v[qe-2]=arguments[qe];return y.prototype[w].apply(D,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,E){E||(E=0);let D=Array(16);if(typeof y=="string")for(var w=0;w<16;++w)D[w]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(w=0;w<16;++w)D[w]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=I.g[0],E=I.g[1],w=I.g[2];let C=I.g[3],v;v=y+(C^E&(w^C))+D[0]+3614090360&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(w^y&(E^w))+D[1]+3905402710&4294967295,C=y+(v<<12&4294967295|v>>>20),v=w+(E^C&(y^E))+D[2]+606105819&4294967295,w=C+(v<<17&4294967295|v>>>15),v=E+(y^w&(C^y))+D[3]+3250441966&4294967295,E=w+(v<<22&4294967295|v>>>10),v=y+(C^E&(w^C))+D[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(w^y&(E^w))+D[5]+1200080426&4294967295,C=y+(v<<12&4294967295|v>>>20),v=w+(E^C&(y^E))+D[6]+2821735955&4294967295,w=C+(v<<17&4294967295|v>>>15),v=E+(y^w&(C^y))+D[7]+4249261313&4294967295,E=w+(v<<22&4294967295|v>>>10),v=y+(C^E&(w^C))+D[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(w^y&(E^w))+D[9]+2336552879&4294967295,C=y+(v<<12&4294967295|v>>>20),v=w+(E^C&(y^E))+D[10]+4294925233&4294967295,w=C+(v<<17&4294967295|v>>>15),v=E+(y^w&(C^y))+D[11]+2304563134&4294967295,E=w+(v<<22&4294967295|v>>>10),v=y+(C^E&(w^C))+D[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(w^y&(E^w))+D[13]+4254626195&4294967295,C=y+(v<<12&4294967295|v>>>20),v=w+(E^C&(y^E))+D[14]+2792965006&4294967295,w=C+(v<<17&4294967295|v>>>15),v=E+(y^w&(C^y))+D[15]+1236535329&4294967295,E=w+(v<<22&4294967295|v>>>10),v=y+(w^C&(E^w))+D[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^w&(y^E))+D[6]+3225465664&4294967295,C=y+(v<<9&4294967295|v>>>23),v=w+(y^E&(C^y))+D[11]+643717713&4294967295,w=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(w^C))+D[0]+3921069994&4294967295,E=w+(v<<20&4294967295|v>>>12),v=y+(w^C&(E^w))+D[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^w&(y^E))+D[10]+38016083&4294967295,C=y+(v<<9&4294967295|v>>>23),v=w+(y^E&(C^y))+D[15]+3634488961&4294967295,w=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(w^C))+D[4]+3889429448&4294967295,E=w+(v<<20&4294967295|v>>>12),v=y+(w^C&(E^w))+D[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^w&(y^E))+D[14]+3275163606&4294967295,C=y+(v<<9&4294967295|v>>>23),v=w+(y^E&(C^y))+D[3]+4107603335&4294967295,w=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(w^C))+D[8]+1163531501&4294967295,E=w+(v<<20&4294967295|v>>>12),v=y+(w^C&(E^w))+D[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^w&(y^E))+D[2]+4243563512&4294967295,C=y+(v<<9&4294967295|v>>>23),v=w+(y^E&(C^y))+D[7]+1735328473&4294967295,w=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(w^C))+D[12]+2368359562&4294967295,E=w+(v<<20&4294967295|v>>>12),v=y+(E^w^C)+D[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^w)+D[8]+2272392833&4294967295,C=y+(v<<11&4294967295|v>>>21),v=w+(C^y^E)+D[11]+1839030562&4294967295,w=C+(v<<16&4294967295|v>>>16),v=E+(w^C^y)+D[14]+4259657740&4294967295,E=w+(v<<23&4294967295|v>>>9),v=y+(E^w^C)+D[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^w)+D[4]+1272893353&4294967295,C=y+(v<<11&4294967295|v>>>21),v=w+(C^y^E)+D[7]+4139469664&4294967295,w=C+(v<<16&4294967295|v>>>16),v=E+(w^C^y)+D[10]+3200236656&4294967295,E=w+(v<<23&4294967295|v>>>9),v=y+(E^w^C)+D[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^w)+D[0]+3936430074&4294967295,C=y+(v<<11&4294967295|v>>>21),v=w+(C^y^E)+D[3]+3572445317&4294967295,w=C+(v<<16&4294967295|v>>>16),v=E+(w^C^y)+D[6]+76029189&4294967295,E=w+(v<<23&4294967295|v>>>9),v=y+(E^w^C)+D[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^w)+D[12]+3873151461&4294967295,C=y+(v<<11&4294967295|v>>>21),v=w+(C^y^E)+D[15]+530742520&4294967295,w=C+(v<<16&4294967295|v>>>16),v=E+(w^C^y)+D[2]+3299628645&4294967295,E=w+(v<<23&4294967295|v>>>9),v=y+(w^(E|~C))+D[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~w))+D[7]+1126891415&4294967295,C=y+(v<<10&4294967295|v>>>22),v=w+(y^(C|~E))+D[14]+2878612391&4294967295,w=C+(v<<15&4294967295|v>>>17),v=E+(C^(w|~y))+D[5]+4237533241&4294967295,E=w+(v<<21&4294967295|v>>>11),v=y+(w^(E|~C))+D[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~w))+D[3]+2399980690&4294967295,C=y+(v<<10&4294967295|v>>>22),v=w+(y^(C|~E))+D[10]+4293915773&4294967295,w=C+(v<<15&4294967295|v>>>17),v=E+(C^(w|~y))+D[1]+2240044497&4294967295,E=w+(v<<21&4294967295|v>>>11),v=y+(w^(E|~C))+D[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~w))+D[15]+4264355552&4294967295,C=y+(v<<10&4294967295|v>>>22),v=w+(y^(C|~E))+D[6]+2734768916&4294967295,w=C+(v<<15&4294967295|v>>>17),v=E+(C^(w|~y))+D[13]+1309151649&4294967295,E=w+(v<<21&4294967295|v>>>11),v=y+(w^(E|~C))+D[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~w))+D[11]+3174756917&4294967295,C=y+(v<<10&4294967295|v>>>22),v=w+(y^(C|~E))+D[2]+718787259&4294967295,w=C+(v<<15&4294967295|v>>>17),v=E+(C^(w|~y))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.v=function(I,y){y===void 0&&(y=I.length);let E=y-this.blockSize,D=this.C,w=this.h,C=0;for(;C<y;){if(w==0)for(;C<=E;)i(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<y;)if(D[w++]=I.charCodeAt(C++),w==this.blockSize){i(this,D),w=0;break}}else for(;C<y;)if(D[w++]=I[C++],w==this.blockSize){i(this,D),w=0;break}}this.h=w,this.o+=y},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;y=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=y&255,y/=256;for(this.v(I),I=Array(16),y=0,E=0;E<4;++E)for(let D=0;D<32;D+=8)I[y++]=this.g[E]>>>D&255;return I};function o(I,y){var E=c;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=y(I)}function s(I,y){this.h=y;let E=[],D=!0;for(let w=I.length-1;w>=0;w--){let C=I[w]|0;D&&C==y||(E[w]=C,D=!1)}this.g=E}var c={};function u(I){return-128<=I&&I<128?o(I,function(y){return new s([y|0],y<0?-1:0)}):new s([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return S(d(-I));let y=[],E=1;for(let D=0;I>=E;D++)y[D]=I/E|0,E*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return S(h(I.substring(1),y));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(y,8)),D=g;for(let C=0;C<I.length;C+=8){var w=Math.min(8,I.length-C);let v=parseInt(I.substring(C,C+w),y);w<8?(w=d(Math.pow(y,w)),D=D.j(w).add(d(v))):(D=D.j(E),D=D.add(d(v)))}return D}var g=u(0),m=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(x(this))return-S(this).m();let I=0,y=1;for(let E=0;E<this.g.length;E++){let D=this.i(E);I+=(D>=0?D:4294967296+D)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(x(this))return"-"+S(this).toString(I);let y=d(Math.pow(I,6));var E=this;let D="";for(;;){let w=L(E,y).g;E=P(E,w.j(y));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=w,M(E))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(let y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function x(I){return I.h==-1}n.l=function(I){return I=P(this,I),x(I)?-1:M(I)?0:1};function S(I){let y=I.g.length,E=[];for(let D=0;D<y;D++)E[D]=~I.g[D];return new s(E,~I.h).add(m)}n.abs=function(){return x(this)?S(this):this},n.add=function(I){let y=Math.max(this.g.length,I.g.length),E=[],D=0;for(let w=0;w<=y;w++){let C=D+(this.i(w)&65535)+(I.i(w)&65535),v=(C>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);D=v>>>16,C&=65535,v&=65535,E[w]=v<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function P(I,y){return I.add(S(y))}n.j=function(I){if(M(this)||M(I))return g;if(x(this))return x(I)?S(this).j(S(I)):S(S(this).j(I));if(x(I))return S(this.j(S(I)));if(this.l(_)<0&&I.l(_)<0)return d(this.m()*I.m());let y=this.g.length+I.g.length,E=[];for(var D=0;D<2*y;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(let w=0;w<I.g.length;w++){let C=this.i(D)>>>16,v=this.i(D)&65535,qe=I.i(w)>>>16,en=I.i(w)&65535;E[2*D+2*w]+=v*en,F(E,2*D+2*w),E[2*D+2*w+1]+=C*en,F(E,2*D+2*w+1),E[2*D+2*w+1]+=v*qe,F(E,2*D+2*w+1),E[2*D+2*w+2]+=C*qe,F(E,2*D+2*w+2)}for(I=0;I<y;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=y;I<2*y;I++)E[I]=0;return new s(E,0)};function F(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function j(I,y){this.g=I,this.h=y}function L(I,y){if(M(y))throw Error("division by zero");if(M(I))return new j(g,g);if(x(I))return y=L(S(I),y),new j(S(y.g),S(y.h));if(x(y))return y=L(I,S(y)),new j(S(y.g),y.h);if(I.g.length>30){if(x(I)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var E=m,D=y;D.l(I)<=0;)E=W(E),D=W(D);var w=se(E,1),C=se(D,1);for(D=se(D,2),E=se(E,2);!M(D);){var v=C.add(D);v.l(I)<=0&&(w=w.add(E),C=v),D=se(D,1),E=se(E,1)}return y=P(I,w.j(y)),new j(w,y)}for(w=g;I.l(y)>=0;){for(E=Math.max(1,Math.floor(I.m()/y.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=d(E),v=C.j(y);x(v)||v.l(I)>0;)E-=D,C=d(E),v=C.j(y);M(C)&&(C=m),w=w.add(C),I=P(I,v)}return new j(w,I)}n.B=function(I){return L(this,I).h},n.and=function(I){let y=Math.max(this.g.length,I.g.length),E=[];for(let D=0;D<y;D++)E[D]=this.i(D)&I.i(D);return new s(E,this.h&I.h)},n.or=function(I){let y=Math.max(this.g.length,I.g.length),E=[];for(let D=0;D<y;D++)E[D]=this.i(D)|I.i(D);return new s(E,this.h|I.h)},n.xor=function(I){let y=Math.max(this.g.length,I.g.length),E=[];for(let D=0;D<y;D++)E[D]=this.i(D)^I.i(D);return new s(E,this.h^I.h)};function W(I){let y=I.g.length+1,E=[];for(let D=0;D<y;D++)E[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(E,I.h)}function se(I,y){let E=y>>5;y%=32;let D=I.g.length-E,w=[];for(let C=0;C<D;C++)w[C]=y>0?I.i(C+E)>>>y|I.i(C+E+1)<<32-y:I.i(C+E);return new s(w,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,If=RE.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Gt=RE.Integer=s}).apply(typeof NE<"u"?NE:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wt={};var wf,q0,Qr,Df,Po,Ga,Tf,Cf,bf;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var l=0;l<a.length;++l){var f=a[l];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var f=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in f))break e;f=f[T]}a=a[a.length-1],p=f[a],l=l(p),l!=p&&l!=null&&e(f,a,{configurable:!0,writable:!0,value:l})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(l){var f=[],p;for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&f.push([p,l[p]]);return f}});var o=o||{},s=this||self;function c(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function u(a,l,f){return a.call.apply(a.bind,arguments)}function d(a,l,f){return d=u,d.apply(null,arguments)}function h(a,l){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function g(a,l){function f(){}f.prototype=l.prototype,a.Z=l.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(p,T,b){for(var R=Array(arguments.length-2),G=2;G<arguments.length;G++)R[G-2]=arguments[G];return l.prototype[T].apply(p,R)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){let l=a.length;if(l>0){let f=Array(l);for(let p=0;p<l;p++)f[p]=a[p];return f}return[]}function M(a,l){for(let p=1;p<arguments.length;p++){let T=arguments[p];var f=typeof T;if(f=f!="object"?f:T?Array.isArray(T)?"array":f:"null",f=="array"||f=="object"&&typeof T.length=="number"){f=a.length||0;let b=T.length||0;a.length=f+b;for(let R=0;R<b;R++)a[f+R]=T[R]}else a.push(T)}}class x{constructor(l,f){this.i=l,this.j=f,this.h=0,this.g=null}get(){let l;return this.h>0?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function S(a){s.setTimeout(()=>{throw a},0)}function P(){var a=I;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class F{constructor(){this.h=this.g=null}add(l,f){let p=j.get();p.set(l,f),this.h?this.h.next=p:this.g=p,this.h=p}}var j=new x(()=>new L,a=>a.reset());class L{constructor(){this.next=this.g=this.h=null}set(l,f){this.h=l,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let W,se=!1,I=new F,y=()=>{let a=Promise.resolve(void 0);W=()=>{a.then(E)}};function E(){for(var a;a=P();){try{a.h.call(a.g)}catch(f){S(f)}var l=j;l.j(a),l.h<100&&(l.h++,a.next=l.g,l.g=a)}se=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,l),s.removeEventListener("test",f,l)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function qe(a,l){w.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,l)}g(qe,w),qe.prototype.init=function(a,l){let f=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget,l||(f=="mouseover"?l=a.fromElement:f=="mouseout"&&(l=a.toElement)),this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var en="closure_listenable_"+(Math.random()*1e6|0),KI=0;function QI(a,l,f,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=f,this.capture=!!p,this.ha=T,this.key=++KI,this.da=this.fa=!1}function es(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ts(a,l,f){for(let p in a)l.call(f,a[p],p,a)}function YI(a,l){for(let f in a)l.call(void 0,a[f],f,a)}function kp(a){let l={};for(let f in a)l[f]=a[f];return l}let Op="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fp(a,l){let f,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(f in p)a[f]=p[f];for(let b=0;b<Op.length;b++)f=Op[b],Object.prototype.hasOwnProperty.call(p,f)&&(a[f]=p[f])}}function ns(a){this.src=a,this.g={},this.h=0}ns.prototype.add=function(a,l,f,p,T){let b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);let R=Kc(a,l,p,T);return R>-1?(l=a[R],f||(l.fa=!1)):(l=new QI(l,this.src,b,!!p,T),l.fa=f,a.push(l)),l};function Wc(a,l){let f=l.type;if(f in a.g){var p=a.g[f],T=Array.prototype.indexOf.call(p,l,void 0),b;(b=T>=0)&&Array.prototype.splice.call(p,T,1),b&&(es(l),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Kc(a,l,f,p){for(let T=0;T<a.length;++T){let b=a[T];if(!b.da&&b.listener==l&&b.capture==!!f&&b.ha==p)return T}return-1}var Qc="closure_lm_"+(Math.random()*1e6|0),Yc={};function Lp(a,l,f,p,T){if(p&&p.once)return Bp(a,l,f,p,T);if(Array.isArray(l)){for(let b=0;b<l.length;b++)Lp(a,l[b],f,p,T);return null}return f=eu(f),a&&a[en]?a.J(l,f,c(p)?!!p.capture:!!p,T):Vp(a,l,f,!1,p,T)}function Vp(a,l,f,p,T,b){if(!l)throw Error("Invalid event type");let R=c(T)?!!T.capture:!!T,G=Xc(a);if(G||(a[Qc]=G=new ns(a)),f=G.add(l,f,p,R,b),f.proxy)return f;if(p=ZI(),f.proxy=p,p.src=a,p.listener=f,a.addEventListener)C||(T=R),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(Up(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ZI(){function a(f){return l.call(a.src,a.listener,f)}let l=XI;return a}function Bp(a,l,f,p,T){if(Array.isArray(l)){for(let b=0;b<l.length;b++)Bp(a,l[b],f,p,T);return null}return f=eu(f),a&&a[en]?a.K(l,f,c(p)?!!p.capture:!!p,T):Vp(a,l,f,!0,p,T)}function jp(a,l,f,p,T){if(Array.isArray(l))for(var b=0;b<l.length;b++)jp(a,l[b],f,p,T);else p=c(p)?!!p.capture:!!p,f=eu(f),a&&a[en]?(a=a.i,b=String(l).toString(),b in a.g&&(l=a.g[b],f=Kc(l,f,p,T),f>-1&&(es(l[f]),Array.prototype.splice.call(l,f,1),l.length==0&&(delete a.g[b],a.h--)))):a&&(a=Xc(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Kc(l,f,p,T)),(f=a>-1?l[a]:null)&&Zc(f))}function Zc(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[en])Wc(l.i,a);else{var f=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(f,p,a.capture):l.detachEvent?l.detachEvent(Up(f),p):l.addListener&&l.removeListener&&l.removeListener(p),(f=Xc(l))?(Wc(f,a),f.h==0&&(f.src=null,l[Qc]=null)):es(a)}}}function Up(a){return a in Yc?Yc[a]:Yc[a]="on"+a}function XI(a,l){if(a.da)a=!0;else{l=new qe(l,this);let f=a.listener,p=a.ha||a.src;a.fa&&Zc(a),a=f.call(p,l)}return a}function Xc(a){return a=a[Qc],a instanceof ns?a:null}var Jc="__closure_events_fn_"+(Math.random()*1e9>>>0);function eu(a){return typeof a=="function"?a:(a[Jc]||(a[Jc]=function(l){return a.handleEvent(l)}),a[Jc])}function Oe(){D.call(this),this.i=new ns(this),this.M=this,this.G=null}g(Oe,D),Oe.prototype[en]=!0,Oe.prototype.removeEventListener=function(a,l,f,p){jp(this,a,l,f,p)};function Ue(a,l){var f,p=a.G;if(p)for(f=[];p;p=p.G)f.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new w(l,a);else if(l instanceof w)l.target=l.target||a;else{var T=l;l=new w(p,a),Fp(l,T)}T=!0;let b,R;if(f)for(R=f.length-1;R>=0;R--)b=l.g=f[R],T=rs(b,p,!0,l)&&T;if(b=l.g=a,T=rs(b,p,!0,l)&&T,T=rs(b,p,!1,l)&&T,f)for(R=0;R<f.length;R++)b=l.g=f[R],T=rs(b,p,!1,l)&&T}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var a=this.i;for(let l in a.g){let f=a.g[l];for(let p=0;p<f.length;p++)es(f[p]);delete a.g[l],a.h--}}this.G=null},Oe.prototype.J=function(a,l,f,p){return this.i.add(String(a),l,!1,f,p)},Oe.prototype.K=function(a,l,f,p){return this.i.add(String(a),l,!0,f,p)};function rs(a,l,f,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();let T=!0;for(let b=0;b<l.length;++b){let R=l[b];if(R&&!R.da&&R.capture==f){let G=R.listener,Te=R.ha||R.src;R.fa&&Wc(a.i,R),T=G.call(Te,p)!==!1&&T}}return T&&!p.defaultPrevented}function JI(a,l){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(l)>2147483647?-1:s.setTimeout(a,l||0)}function Hp(a){a.g=JI(()=>{a.g=null,a.i&&(a.i=!1,Hp(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class ew extends D{constructor(l,f){super(),this.m=l,this.l=f,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Hp(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(a){D.call(this),this.h=a,this.g={}}g(Ii,D);var $p=[];function zp(a){ts(a.g,function(l,f){this.g.hasOwnProperty(f)&&Zc(l)},a),a.g={}}Ii.prototype.N=function(){Ii.Z.N.call(this),zp(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tu=s.JSON.stringify,tw=s.JSON.parse,nw=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function qp(){}function Gp(){}var wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nu(){w.call(this,"d")}g(nu,w);function ru(){w.call(this,"c")}g(ru,w);var bn={},Wp=null;function is(){return Wp=Wp||new Oe}bn.Ia="serverreachability";function Kp(a){w.call(this,bn.Ia,a)}g(Kp,w);function Di(a){let l=is();Ue(l,new Kp(l))}bn.STAT_EVENT="statevent";function Qp(a,l){w.call(this,bn.STAT_EVENT,a),this.stat=l}g(Qp,w);function He(a){let l=is();Ue(l,new Qp(l,a))}bn.Ja="timingevent";function Yp(a,l){w.call(this,bn.Ja,a),this.size=l}g(Yp,w);function Ti(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},l)}function Ci(){this.g=!0}Ci.prototype.ua=function(){this.g=!1};function rw(a,l,f,p,T,b){a.info(function(){if(a.g)if(b){var R="",G=b.split("&");for(let ue=0;ue<G.length;ue++){var Te=G[ue].split("=");if(Te.length>1){let Se=Te[0];Te=Te[1];let mt=Se.split("_");R=mt.length>=2&&mt[1]=="type"?R+(Se+"="+Te+"&"):R+(Se+"=redacted&")}}}else R=null;else R=b;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+f+`
`+R})}function iw(a,l,f,p,T,b,R){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+f+`
`+b+" "+R})}function fr(a,l,f,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+sw(a,f)+(p?" "+p:"")})}function ow(a,l){a.info(function(){return"TIMEOUT: "+l})}Ci.prototype.info=function(){};function sw(a,l){if(!a.g)return l;if(!l)return null;try{let b=JSON.parse(l);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var p=f[1];if(Array.isArray(p)&&!(p.length<1)){var T=p[0];if(T!="noop"&&T!="stop"&&T!="close")for(let R=1;R<p.length;R++)p[R]=""}}}}return tu(b)}catch{return l}}var os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xp;function iu(){}g(iu,qp),iu.prototype.g=function(){return new XMLHttpRequest},Xp=new iu;function bi(a){return encodeURIComponent(String(a))}function aw(a){var l=1;a=a.split(":");let f=[];for(;l>0&&a.length;)f.push(a.shift()),l--;return a.length&&f.push(a.join(":")),f}function tn(a,l,f,p){this.j=a,this.i=l,this.l=f,this.S=p||1,this.V=new Ii(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jp}function Jp(){this.i=null,this.g="",this.h=!1}var eg={},ou={};function su(a,l,f){a.M=1,a.A=as(gt(l)),a.u=f,a.R=!0,tg(a,null)}function tg(a,l){a.F=Date.now(),ss(a),a.B=gt(a.A);var f=a.B,p=a.S;Array.isArray(p)||(p=[String(p)]),pg(f.i,"t",p),a.C=0,f=a.j.L,a.h=new Jp,a.g=xg(a.j,f?l:null,!a.u),a.P>0&&(a.O=new ew(d(a.Y,a,a.g),a.P)),l=a.V,f=a.g,p=a.ba;var T="readystatechange";Array.isArray(T)||(T&&($p[0]=T.toString()),T=$p);for(let b=0;b<T.length;b++){let R=Lp(f,T[b],p||l.handleEvent,!1,l.h||l);if(!R)break;l.g[R.key]=R}l=a.J?kp(a.J):{},a.u?(a.v||(a.v="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,l)):(a.v="GET",a.g.ea(a.B,a.v,null,l)),Di(),rw(a.i,a.v,a.B,a.l,a.S,a.u)}tn.prototype.ba=function(a){a=a.target;let l=this.O;l&&on(a)==3?l.j():this.Y(a)},tn.prototype.Y=function(a){try{if(a==this.g)e:{let G=on(this.g),Te=this.g.ya(),ue=this.g.ca();if(!(G<3)&&(G!=3||this.g&&(this.h.h||this.g.la()||Ig(this.g)))){this.K||G!=4||Te==7||(Te==8||ue<=0?Di(3):Di(2)),au(this);var l=this.g.ca();this.X=l;var f=cw(this);if(this.o=l==200,iw(this.i,this.v,this.B,this.l,this.S,G,l),this.o){if(this.U&&!this.L){t:{if(this.g){var p,T=this.g;if((p=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(p)){var b=p;break t}}b=null}if(a=b)fr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cu(this,a);else{this.o=!1,this.m=3,He(12),Sn(this),Si(this);break e}}if(this.R){a=!0;let Se;for(;!this.K&&this.C<f.length;)if(Se=uw(this,f),Se==ou){G==4&&(this.m=4,He(14),a=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Se==eg){this.m=4,He(15),fr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else fr(this.i,this.l,Se,null),cu(this,Se);if(ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||f.length!=0||this.h.h||(this.m=1,He(16),a=!1),this.o=this.o&&a,!a)fr(this.i,this.l,f,"[Invalid Chunked Response]"),Sn(this),Si(this);else if(f.length>0&&!this.W){this.W=!0;var R=this.j;R.g==this&&R.aa&&!R.P&&(R.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),gu(R),R.P=!0,He(11))}}else fr(this.i,this.l,f,null),cu(this,f);G==4&&Sn(this),this.o&&!this.K&&(G==4?Ag(this.j,this):(this.o=!1,ss(this)))}else Dw(this.g),l==400&&f.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Sn(this),Si(this)}}}catch{}finally{}};function cw(a){if(!ng(a))return a.g.la();let l=Ig(a.g);if(l==="")return"";let f="",p=l.length,T=on(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Sn(a),Si(a),"";a.h.i=new s.TextDecoder}for(let b=0;b<p;b++)a.h.h=!0,f+=a.h.i.decode(l[b],{stream:!(T&&b==p-1)});return l.length=0,a.h.g+=f,a.C=0,a.h.g}function ng(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function uw(a,l){var f=a.C,p=l.indexOf(`
`,f);return p==-1?ou:(f=Number(l.substring(f,p)),isNaN(f)?eg:(p+=1,p+f>l.length?ou:(l=l.slice(p,p+f),a.C=p+f,l)))}tn.prototype.cancel=function(){this.K=!0,Sn(this)};function ss(a){a.T=Date.now()+a.H,rg(a,a.H)}function rg(a,l){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ti(d(a.aa,a),l)}function au(a){a.D&&(s.clearTimeout(a.D),a.D=null)}tn.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(ow(this.i,this.B),this.M!=2&&(Di(),He(17)),Sn(this),this.m=2,Si(this)):rg(this,this.T-a)};function Si(a){a.j.I==0||a.K||Ag(a.j,a)}function Sn(a){au(a);var l=a.O;l&&typeof l.dispose=="function"&&l.dispose(),a.O=null,zp(a.V),a.g&&(l=a.g,a.g=null,l.abort(),l.dispose())}function cu(a,l){try{var f=a.j;if(f.I!=0&&(f.g==a||uu(f.h,a))){if(!a.L&&uu(f.h,a)&&f.I==3){try{var p=f.Ba.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)hs(f),ds(f);else break e;pu(f),He(18)}}else f.xa=T[1],0<f.xa-f.K&&T[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ti(d(f.Va,f),6e3));sg(f.h)<=1&&f.ta&&(f.ta=void 0)}else Mn(f,11)}else if((a.L||f.g==a)&&hs(f),!v(l))for(T=f.Ba.g.parse(l),l=0;l<T.length;l++){let ue=T[l],Se=ue[0];if(!(Se<=f.K))if(f.K=Se,ue=ue[1],f.I==2)if(ue[0]=="c"){f.M=ue[1],f.ba=ue[2];let mt=ue[3];mt!=null&&(f.ka=mt,f.j.info("VER="+f.ka));let Nn=ue[4];Nn!=null&&(f.za=Nn,f.j.info("SVER="+f.za));let sn=ue[5];sn!=null&&typeof sn=="number"&&sn>0&&(p=1.5*sn,f.O=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;let an=a.g;if(an){let gs=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var b=p.h;b.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(lu(b,b.h),b.h=null))}if(p.G){let mu=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;mu&&(p.wa=mu,de(p.J,p.G,mu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),p=f;var R=a;if(p.na=Rg(p,p.L?p.ba:null,p.W),R.L){ag(p.h,R);var G=R,Te=p.O;Te&&(G.H=Te),G.D&&(au(G),ss(G)),p.g=R}else bg(p);f.i.length>0&&fs(f)}else ue[0]!="stop"&&ue[0]!="close"||Mn(f,7);else f.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Mn(f,7):hu(f):ue[0]!="noop"&&f.l&&f.l.qa(ue),f.A=0)}}Di(4)}catch{}}var lw=class{constructor(a,l){this.g=a,this.map=l}};function ig(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function og(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function sg(a){return a.h?1:a.g?a.g.size:0}function uu(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function lu(a,l){a.g?a.g.add(l):a.h=l}function ag(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}ig.prototype.cancel=function(){if(this.i=cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function cg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let f of a.g.values())l=l.concat(f.G);return l}return _(a.i)}var ug=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dw(a,l){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let p=a[f].indexOf("="),T,b=null;p>=0?(T=a[f].substring(0,p),b=a[f].substring(p+1)):T=a[f],l(T,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function nn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let l;a instanceof nn?(this.l=a.l,Ai(this,a.j),this.o=a.o,this.g=a.g,Mi(this,a.u),this.h=a.h,du(this,gg(a.i)),this.m=a.m):a&&(l=String(a).match(ug))?(this.l=!1,Ai(this,l[1]||"",!0),this.o=Ni(l[2]||""),this.g=Ni(l[3]||"",!0),Mi(this,l[4]),this.h=Ni(l[5]||"",!0),du(this,l[6]||"",!0),this.m=Ni(l[7]||"")):(this.l=!1,this.i=new xi(null,this.l))}nn.prototype.toString=function(){let a=[];var l=this.j;l&&a.push(Ri(l,lg,!0),":");var f=this.g;return(f||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ri(l,lg,!0),"@"),a.push(bi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ri(f,f.charAt(0)=="/"?pw:hw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ri(f,mw)),a.join("")},nn.prototype.resolve=function(a){let l=gt(this),f=!!a.j;f?Ai(l,a.j):f=!!a.o,f?l.o=a.o:f=!!a.g,f?l.g=a.g:f=a.u!=null;var p=a.h;if(f)Mi(l,a.u);else if(f=!!a.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var T=l.h.lastIndexOf("/");T!=-1&&(p=l.h.slice(0,T+1)+p)}if(T=p,T==".."||T==".")p="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){p=T.lastIndexOf("/",0)==0,T=T.split("/");let b=[];for(let R=0;R<T.length;){let G=T[R++];G=="."?p&&R==T.length&&b.push(""):G==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),p&&R==T.length&&b.push("")):(b.push(G),p=!0)}p=b.join("/")}else p=T}return f?l.h=p:f=a.i.toString()!=="",f?du(l,gg(a.i)):f=!!a.m,f&&(l.m=a.m),l};function gt(a){return new nn(a)}function Ai(a,l,f){a.j=f?Ni(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Mi(a,l){if(l){if(l=Number(l),isNaN(l)||l<0)throw Error("Bad port number "+l);a.u=l}else a.u=null}function du(a,l,f){l instanceof xi?(a.i=l,yw(a.i,a.l)):(f||(l=Ri(l,gw)),a.i=new xi(l,a.l))}function de(a,l,f){a.i.set(l,f)}function as(a){return de(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ni(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ri(a,l,f){return typeof a=="string"?(a=encodeURI(a).replace(l,fw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lg=/[#\/\?@]/g,hw=/[#\?:]/g,pw=/[#\?]/g,gw=/[#\?@]/g,mw=/#/g;function xi(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function An(a){a.g||(a.g=new Map,a.h=0,a.i&&dw(a.i,function(l,f){a.add(decodeURIComponent(l.replace(/\+/g," ")),f)}))}n=xi.prototype,n.add=function(a,l){An(this),this.i=null,a=hr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(l),this.h+=1,this};function dg(a,l){An(a),l=hr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function fg(a,l){return An(a),l=hr(a,l),a.g.has(l)}n.forEach=function(a,l){An(this),this.g.forEach(function(f,p){f.forEach(function(T){a.call(l,T,p,this)},this)},this)};function hg(a,l){An(a);let f=[];if(typeof l=="string")fg(a,l)&&(f=f.concat(a.g.get(hr(a,l))));else for(a=Array.from(a.g.values()),l=0;l<a.length;l++)f=f.concat(a[l]);return f}n.set=function(a,l){return An(this),this.i=null,a=hr(this,a),fg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=hg(this,a),a.length>0?String(a[0]):l):l};function pg(a,l,f){dg(a,l),f.length>0&&(a.i=null,a.g.set(hr(a,l),_(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(let p=0;p<l.length;p++){var f=l[p];let T=bi(f);f=hg(this,f);for(let b=0;b<f.length;b++){let R=T;f[b]!==""&&(R+="="+bi(f[b])),a.push(R)}}return this.i=a.join("&")};function gg(a){let l=new xi;return l.i=a.i,a.g&&(l.g=new Map(a.g),l.h=a.h),l}function hr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function yw(a,l){l&&!a.j&&(An(a),a.i=null,a.g.forEach(function(f,p){let T=p.toLowerCase();p!=T&&(dg(this,p),pg(this,T,f))},a)),a.j=l}function vw(a,l){let f=new Ci;if(s.Image){let p=new Image;p.onload=h(rn,f,"TestLoadImage: loaded",!0,l,p),p.onerror=h(rn,f,"TestLoadImage: error",!1,l,p),p.onabort=h(rn,f,"TestLoadImage: abort",!1,l,p),p.ontimeout=h(rn,f,"TestLoadImage: timeout",!1,l,p),s.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function Ew(a,l){let f=new Ci,p=new AbortController,T=setTimeout(()=>{p.abort(),rn(f,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(b=>{clearTimeout(T),b.ok?rn(f,"TestPingServer: ok",!0,l):rn(f,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),rn(f,"TestPingServer: error",!1,l)})}function rn(a,l,f,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(f)}catch{}}function _w(){this.g=new nw}function cs(a){this.i=a.Sb||null,this.h=a.ab||!1}g(cs,qp),cs.prototype.g=function(){return new us(this.i,this.h)};function us(a,l){Oe.call(this),this.H=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(us,Oe),n=us.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=l,this.readyState=1,ki(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let l={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(l.body=a),(this.H||s).fetch(new Request(this.D,l)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function mg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.B.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Pi(this):ki(this),this.readyState==3&&mg(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,Pi(this))},n.Na=function(a){this.g&&(this.response=a,Pi(this))},n.ga=function(){this.g&&Pi(this)};function Pi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ki(a)}n.setRequestHeader=function(a,l){this.A.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var f=l.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=l.next();return a.join(`\r
`)};function ki(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yg(a){let l="";return ts(a,function(f,p){l+=p,l+=":",l+=f,l+=`\r
`}),l}function fu(a,l,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=yg(f),typeof a=="string"?f!=null&&bi(f):de(a,l,f))}function pe(a){Oe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(pe,Oe);var Iw=/^https?$/i,ww=["POST","PUT"];n=pe.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,l,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xp.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(b){vg(this,b);return}if(a=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)f.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let b of p.keys())f.set(b,p.get(b));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(ww,l,void 0)>=0)||p||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,R]of f)this.g.setRequestHeader(b,R);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){vg(this,b)}};function vg(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.o=5,Eg(a),ls(a)}function Eg(a){a.A||(a.A=!0,Ue(a,"complete"),Ue(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Ue(this,"complete"),Ue(this,"abort"),ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),pe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_g(this):this.Xa())},n.Xa=function(){_g(this)};function _g(a){if(a.h&&typeof o<"u"){if(a.v&&on(a)==4)setTimeout(a.Ca.bind(a),0);else if(Ue(a,"readystatechange"),on(a)==4){a.h=!1;try{let b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var f;if(!(f=l)){var p;if(p=b===0){let R=String(a.D).match(ug)[1]||null;!R&&s.self&&s.self.location&&(R=s.self.location.protocol.slice(0,-1)),p=!Iw.test(R?R.toLowerCase():"")}f=p}if(f)Ue(a,"complete"),Ue(a,"success");else{a.o=6;try{var T=on(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",Eg(a)}}finally{ls(a)}}}}function ls(a,l){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,l||Ue(a,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function on(a){return a.g?a.g.readyState:0}n.ca=function(){try{return on(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),tw(l)}};function Ig(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Dw(a){let l={};a=(a.g&&on(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(v(a[p]))continue;var f=aw(a[p]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let b=l[T]||[];l[T]=b,b.push(f)}YI(l,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(a,l,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||l}function wg(a){this.za=0,this.i=[],this.j=new Ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,a),this.Za=Oi("retryDelaySeedMs",1e4,a),this.Ta=Oi("forwardChannelMaxRetries",2,a),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ig(a&&a.concurrentRequestLimit),this.Ba=new _w,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=wg.prototype,n.ka=8,n.I=1,n.connect=function(a,l,f,p){He(0),this.W=a,this.H=l||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.J=Rg(this,null,this.W),fs(this)};function hu(a){if(Dg(a),a.I==3){var l=a.V++,f=gt(a.J);if(de(f,"SID",a.M),de(f,"RID",l),de(f,"TYPE","terminate"),Fi(a,f),l=new tn(a,a.j,l),l.M=2,l.A=as(gt(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(l.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=l.A,f=!0),f||(l.g=xg(l.j,null),l.g.ea(l.A)),l.F=Date.now(),ss(l)}Ng(a)}function ds(a){a.g&&(gu(a),a.g.cancel(),a.g=null)}function Dg(a){ds(a),a.v&&(s.clearTimeout(a.v),a.v=null),hs(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function fs(a){if(!og(a.h)&&!a.m){a.m=!0;var l=a.Ea;W||y(),se||(W(),se=!0),I.add(l,a),a.D=0}}function Tw(a,l){return sg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=l.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ti(d(a.Ea,a,l),Mg(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new tn(this,this.j,a),b=this.o;if(this.U&&(b?(b=kp(b),Fp(b,this.U)):b=this.U),this.u!==null||this.R||(T.J=b,b=null),this.S)e:{for(var l=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,l>4096){l=f;break e}if(l===4096||f===this.i.length-1){l=f+1;break e}}l=1e3}else l=1e3;l=Cg(this,T,l),f=gt(this.J),de(f,"RID",a),de(f,"CVER",22),this.G&&de(f,"X-HTTP-Session-Id",this.G),Fi(this,f),b&&(this.R?l="headers="+bi(yg(b))+"&"+l:this.u&&fu(f,this.u,b)),lu(this.h,T),this.Ra&&de(f,"TYPE","init"),this.S?(de(f,"$req",l),de(f,"SID","null"),T.U=!0,su(T,f,null)):su(T,f,l),this.I=2}}else this.I==3&&(a?Tg(this,a):this.i.length==0||og(this.h)||Tg(this))};function Tg(a,l){var f;l?f=l.l:f=a.V++;let p=gt(a.J);de(p,"SID",a.M),de(p,"RID",f),de(p,"AID",a.K),Fi(a,p),a.u&&a.o&&fu(p,a.u,a.o),f=new tn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),l&&(a.i=l.G.concat(a.i)),l=Cg(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),lu(a.h,f),su(f,p,l)}function Fi(a,l){a.H&&ts(a.H,function(f,p){de(l,p,f)}),a.l&&ts({},function(f,p){de(l,p,f)})}function Cg(a,l,f){f=Math.min(a.i.length,f);let p=a.l?d(a.l.Ka,a.l,a):null;e:{var T=a.i;let G=-1;for(;;){let Te=["count="+f];G==-1?f>0?(G=T[0].g,Te.push("ofs="+G)):G=0:Te.push("ofs="+G);let ue=!0;for(let Se=0;Se<f;Se++){var b=T[Se].g;let mt=T[Se].map;if(b-=G,b<0)G=Math.max(0,T[Se].g-100),ue=!1;else try{b="req"+b+"_"||"";try{var R=mt instanceof Map?mt:Object.entries(mt);for(let[Nn,sn]of R){let an=sn;c(sn)&&(an=tu(sn)),Te.push(b+Nn+"="+encodeURIComponent(an))}}catch(Nn){throw Te.push(b+"type="+encodeURIComponent("_badmap")),Nn}}catch{p&&p(mt)}}if(ue){R=Te.join("&");break e}}R=void 0}return a=a.i.splice(0,f),l.G=a,R}function bg(a){if(!a.g&&!a.v){a.Y=1;var l=a.Da;W||y(),se||(W(),se=!0),I.add(l,a),a.A=0}}function pu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ti(d(a.Da,a),Mg(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,Sg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ti(d(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),ds(this),Sg(this))};function gu(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function Sg(a){a.g=new tn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var l=gt(a.na);de(l,"RID","rpc"),de(l,"SID",a.M),de(l,"AID",a.K),de(l,"CI",a.F?"0":"1"),!a.F&&a.ia&&de(l,"TO",a.ia),de(l,"TYPE","xmlhttp"),Fi(a,l),a.u&&a.o&&fu(l,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=as(gt(l)),f.u=null,f.R=!0,tg(f,a)}n.Va=function(){this.C!=null&&(this.C=null,ds(this),pu(this),He(19))};function hs(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function Ag(a,l){var f=null;if(a.g==l){hs(a),gu(a),a.g=null;var p=2}else if(uu(a.h,l))f=l.G,ag(a.h,l),p=1;else return;if(a.I!=0){if(l.o)if(p==1){f=l.u?l.u.length:0,l=Date.now()-l.F;var T=a.D;p=is(),Ue(p,new Yp(p,f)),fs(a)}else bg(a);else if(T=l.m,T==3||T==0&&l.X>0||!(p==1&&Tw(a,l)||p==2&&pu(a)))switch(f&&f.length>0&&(l=a.h,l.i=l.i.concat(f)),T){case 1:Mn(a,5);break;case 4:Mn(a,10);break;case 3:Mn(a,6);break;default:Mn(a,2)}}}function Mg(a,l){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*l}function Mn(a,l){if(a.j.info("Error code "+l),l==2){var f=d(a.bb,a),p=a.Ua;let T=!p;p=new nn(p||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ai(p,"https"),as(p),T?vw(p.toString(),f):Ew(p.toString(),f)}else He(2);a.I=0,a.l&&a.l.pa(l),Ng(a),Dg(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Ng(a){if(a.I=0,a.ja=[],a.l){let l=cg(a.h);(l.length!=0||a.i.length!=0)&&(M(a.ja,l),M(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Rg(a,l,f){var p=f instanceof nn?gt(f):new nn(f);if(p.g!="")l&&(p.g=l+"."+p.g),Mi(p,p.u);else{var T=s.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;let b=new nn(null);p&&Ai(b,p),l&&(b.g=l),T&&Mi(b,T),f&&(b.h=f),p=b}return f=a.G,l=a.wa,f&&l&&de(p,f,l),de(p,"VER",a.ka),Fi(a,p),p}function xg(a,l,f){if(l&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Aa&&!a.ma?new pe(new cs({ab:f})):new pe(a.ma),l.Fa(a.L),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pg(){}n=Pg.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ps(){}ps.prototype.g=function(a,l){return new Ke(a,l)};function Ke(a,l){Oe.call(this),this.g=new wg(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.sa&&(a?a["X-WebChannel-Client-Profile"]=l.sa:a={"X-WebChannel-Client-Profile":l.sa}),this.g.U=a,(a=l&&l.Qb)&&!v(a)&&(this.g.u=a),this.A=l&&l.supportsCrossDomainXhr||!1,this.v=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!v(l)&&(this.g.G=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new pr(this)}g(Ke,Oe),Ke.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){hu(this.g)},Ke.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=tu(a),a=f);l.i.push(new lw(l.Ya++,a)),l.I==3&&fs(l)},Ke.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,Ke.Z.N.call(this)};function kg(a){nu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let f in l){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}g(kg,nu);function Og(){ru.call(this),this.status=1}g(Og,ru);function pr(a){this.g=a}g(pr,Pg),pr.prototype.ra=function(){Ue(this.g,"a")},pr.prototype.qa=function(a){Ue(this.g,new kg(a))},pr.prototype.pa=function(a){Ue(this.g,new Og)},pr.prototype.oa=function(){Ue(this.g,"b")},ps.prototype.createWebChannel=ps.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,bf=Wt.createWebChannelTransport=function(){return new ps},Cf=Wt.getStatEventTarget=function(){return is()},Tf=Wt.Event=bn,Ga=Wt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,Po=Wt.ErrorCode=os,Zp.COMPLETE="complete",Df=Wt.EventType=Zp,Gp.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,Qr=Wt.WebChannel=Gp,q0=Wt.FetchXmlHttpFactory=cs,pe.prototype.listenOnce=pe.prototype.K,pe.prototype.getLastError=pe.prototype.Ha,pe.prototype.getLastErrorCode=pe.prototype.ya,pe.prototype.getStatus=pe.prototype.ca,pe.prototype.getResponseJson=pe.prototype.La,pe.prototype.getResponseText=pe.prototype.la,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Fa,wf=Wt.XhrIo=pe}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});var xE="@firebase/firestore",PE="4.9.3";var Re=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");var yi="12.7.0";var rr=new Kr("@firebase/firestore");function Yr(){return rr.logLevel}function k(n,...e){if(rr.logLevel<=X.DEBUG){let t=e.map(fp);rr.debug(`Firestore (${yi}): ${n}`,...t)}}function Kt(n,...e){if(rr.logLevel<=X.ERROR){let t=e.map(fp);rr.error(`Firestore (${yi}): ${n}`,...t)}}function ii(n,...e){if(rr.logLevel<=X.WARN){let t=e.map(fp);rr.warn(`Firestore (${yi}): ${n}`,...t)}}function fp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function V(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,E_(n,r,t)}function E_(n,e,t){let r=`FIRESTORE (${yi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Kt(r),new Error(r)}function ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||E_(e,i,r)}function U(n,e){return n}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends $t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ja=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Re.UNAUTHENTICATED))}shutdown(){}},Pf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},kf=class{constructor(e){this.t=e,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Tt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Tt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string",31837,{l:r}),new Ja(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string",2055,{h:e}),new Re(e)}},Of=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ff=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Of(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Re.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ec=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Lf=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,CE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ie(this.o===void 0,3512);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ec(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ec(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function G0(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Bo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=G0(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Q(n,e){return n<e?-1:n>e?1:0}function Vf(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Sf(i)===Sf(o)?Q(i,o):Sf(i)?1:-1}return Q(n.length,e.length)}var W0=55296,K0=57343;function Sf(n){let e=n.charCodeAt(0);return e>=W0&&e<=K0}function oi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var kE="__name__",tc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&V(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&V(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Q(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Vf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gt.fromString(e.substring(4,e.length-2))}},ve=class n extends tc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Q0=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xe=class n extends tc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Q0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kE}static keyField(){return new n([kE])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new O(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new O(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};function Y0(n,e,t){if(!t)throw new O(A.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Z0(n,e,t,r){if(e===!0&&r===!0)throw new O(A.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OE(n){if(!B.isDocumentKey(n))throw new O(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function __(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":V(12329,{type:typeof n})}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=hp(n);throw new O(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function we(n,e){let t={typeString:n};return e&&(t.value=e),t}function Zo(n,e){if(!__(n))throw new O(A.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(A.INVALID_ARGUMENT,t);return!0}var FE=-62135596800,LE=1e6,De=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*LE);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FE)throw new O(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zo(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-FE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:we("string",De._jsonSchemaVersion),seconds:we("number"),nanoseconds:we("number")};var q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new De(0,0))}static max(){return new n(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jo=-1,Bf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Bf.UNKNOWN_ID=-1;function X0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new De(t+1,0):new De(t,r));return new ir(i,B.empty(),e)}function J0(n){return new ir(n.readTime,n.key,jo)}var ir=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),B.empty(),jo)}static max(){return new n(q.max(),B.empty(),jo)}};function eA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:Q(n.largestBatchId,e.largestBatchId))}var tA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function vi(n){if(n.code!==A.FAILED_PRECONDITION||n.message!==tA)throw n;k("LocalStore","Unexpectedly lost primary lease")}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&V(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let d=u;t(e[d]).next(h=>{s[d]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function nA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ei(n){return n.name==="IndexedDbTransactionError"}var pp=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),gp=-1;function kc(n){return n==null}function Uo(n){return n===0&&1/n==-1/0}function rA(n){return typeof n=="number"&&Number.isInteger(n)&&!Uo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var I_="";function iA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VE(e)),e=oA(n.get(t),e);return VE(e)}function oA(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case I_:t+="";break;default:t+=o}}return t}function VE(n){return n+I_+""}var sA="remoteDocuments",w_="owner";var D_="mutationQueues";var T_="mutations";var C_="documentMutations",aA="remoteDocumentsV14";var b_="remoteDocumentGlobal";var S_="targets";var A_="targetDocuments";var M_="targetGlobal",N_="collectionParents";var R_="clientMetadata";var x_="bundles";var P_="namedQueries";var cA="indexConfiguration";var uA="indexState";var lA="indexEntries";var k_="documentOverlays";var dA="globals";var fA=[D_,T_,C_,sA,S_,w_,M_,A_,R_,b_,N_,x_,P_],dU=[...fA,k_],hA=[D_,T_,C_,aA,S_,w_,M_,A_,R_,b_,N_,x_,P_,k_],pA=hA,gA=[...pA,cA,uA,lA];var fU=[...gA,dA];function BE(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function O_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var me=class n{constructor(e,t){this.comparator=e,this.root=t||Ct.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ei(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ei(this.root,e,this.comparator,!1)}getReverseIterator(){return new ei(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ei(this.root,e,this.comparator,!0)}},ei=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ct=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw V(43730,{key:this.key,value:this.value});if(this.right.isRed())throw V(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw V(27949);return e+(this.isRed()?0:1)}};Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw V(57766)}get value(){throw V(16141)}get color(){throw V(16727)}get left(){throw V(29726)}get right(){throw V(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nc(this.data.getIterator())}getIteratorFrom(e){return new nc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},nc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dt=class n{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(Xe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var rc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rc("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};je.EMPTY_BYTE_STRING=new je("");var mA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qt(n){if(ie(!!n,39018),typeof n=="string"){let e=0,t=mA.exec(n);if(ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:he(n.seconds),nanos:he(n.nanos)}}function he(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yt(n){return typeof n=="string"?je.fromBase64String(n):je.fromUint8Array(n)}var F_="server_timestamp",L_="__type__",V_="__previous_value__",B_="__local_write_time__";function mp(n){return(n?.mapValue?.fields||{})[L_]?.stringValue===F_}function Oc(n){let e=n.mapValue.fields[V_];return mp(e)?Oc(e):e}function Ho(n){let e=Qt(n.mapValue.fields[B_].timestampValue);return new De(e.seconds,e.nanos)}var Uf=class{constructor(e,t,r,i,o,s,c,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}},ic="(default)",oc=class n{constructor(e,t){this.projectId=e,this.database=t||ic}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ic}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var yp="__type__",j_="__max__",Wa={mapValue:{fields:{__type__:{stringValue:j_}}}},vp="__vector__",si="value";function Dn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mp(n)?4:H_(n)?9007199254740991:U_(n)?10:11:V(28295,{value:n})}function At(n,e){if(n===e)return!0;let t=Dn(n);if(t!==Dn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ho(n).isEqual(Ho(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Qt(i.timestampValue),c=Qt(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Yt(i.bytesValue).isEqual(Yt(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return he(i.geoPointValue.latitude)===he(o.geoPointValue.latitude)&&he(i.geoPointValue.longitude)===he(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return he(i.integerValue)===he(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=he(i.doubleValue),c=he(o.doubleValue);return s===c?Uo(s)===Uo(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return oi(n.arrayValue.values||[],e.arrayValue.values||[],At);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(BE(s)!==BE(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!At(s[u],c[u])))return!1;return!0})(n,e);default:return V(52216,{left:n})}}function $o(n,e){return(n.values||[]).find(t=>At(t,e))!==void 0}function ai(n,e){if(n===e)return 0;let t=Dn(n),r=Dn(e);if(t!==r)return Q(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Q(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=he(o.integerValue||o.doubleValue),u=he(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return jE(n.timestampValue,e.timestampValue);case 4:return jE(Ho(n),Ho(e));case 5:return Vf(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=Yt(o),u=Yt(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let d=0;d<c.length&&d<u.length;d++){let h=Q(c[d],u[d]);if(h!==0)return h}return Q(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=Q(he(o.latitude),he(s.latitude));return c!==0?c:Q(he(o.longitude),he(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UE(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},d=c[si]?.arrayValue,h=u[si]?.arrayValue,g=Q(d?.values?.length||0,h?.values?.length||0);return g!==0?g:UE(d,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Wa.mapValue&&s===Wa.mapValue)return 0;if(o===Wa.mapValue)return 1;if(s===Wa.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),d=s.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){let m=Vf(u[g],h[g]);if(m!==0)return m;let _=ai(c[u[g]],d[h[g]]);if(_!==0)return _}return Q(u.length,h.length)})(n.mapValue,e.mapValue);default:throw V(23264,{he:t})}}function jE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Q(n,e);let t=Qt(n),r=Qt(e),i=Q(t.seconds,r.seconds);return i!==0?i:Q(t.nanos,r.nanos)}function UE(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ai(t[i],r[i]);if(o)return o}return Q(t.length,r.length)}function ci(n){return Hf(n)}function Hf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Qt(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yt(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return B.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Hf(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Hf(t.fields[s])}`;return i+"}"})(n.mapValue):V(61005,{value:n})}function Ya(n){switch(Dn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Oc(n);return e?16+Ya(e):16;case 5:return 2*n.stringValue.length;case 6:return Yt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Ya(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return lr(r.fields,(o,s)=>{i+=o.length+Ya(s)}),i})(n.mapValue);default:throw V(13486,{value:n})}}function $f(n){return!!n&&"integerValue"in n}function Ep(n){return!!n&&"arrayValue"in n}function HE(n){return!!n&&"nullValue"in n}function $E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Za(n){return!!n&&"mapValue"in n}function U_(n){return(n?.mapValue?.fields||{})[yp]?.stringValue===vp}function Oo(n){if(n.geoPointValue)return{geoPointValue:Z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Oo(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oo(n.arrayValue.values[t]);return e}return Z({},n)}function H_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===j_}var pU={mapValue:{fields:{[yp]:{stringValue:vp},[si]:{arrayValue:{}}}}};var ht=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Za(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(t)}setAll(e){let t=Xe.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Oo(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Za(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return At(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Za(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Oo(this.value))}};function $_(n){let e=[];return lr(n.fields,(t,r)=>{let i=new Xe([t]);if(Za(r)){let o=$_(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Dt(e)}var pt=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),ht.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),ht.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),ht.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ui=class{constructor(e,t){this.position=e,this.inclusive=t}};function zE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),t.key):r=ai(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function qE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!At(n.position[t],e.position[t]))return!1;return!0}var li=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function yA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var sc=class{},be=class n extends sc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qf(e,t,r):t==="array-contains"?new Kf(e,r):t==="in"?new Qf(e,r):t==="not-in"?new Yf(e,r):t==="array-contains-any"?new Zf(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Gf(e,r):new Wf(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ai(t,this.value)):t!==null&&Dn(this.value)===Dn(t)&&this.matchesComparison(ai(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mt=class n extends sc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return z_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function z_(n){return n.op==="and"}function q_(n){return vA(n)&&z_(n)}function vA(n){for(let e of n.filters)if(e instanceof Mt)return!1;return!0}function zf(n){if(n instanceof be)return n.field.canonicalString()+n.op.toString()+ci(n.value);if(q_(n))return n.filters.map(e=>zf(e)).join(",");{let e=n.filters.map(t=>zf(t)).join(",");return`${n.op}(${e})`}}function G_(n,e){return n instanceof be?(function(r,i){return i instanceof be&&r.op===i.op&&r.field.isEqual(i.field)&&At(r.value,i.value)})(n,e):n instanceof Mt?(function(r,i){return i instanceof Mt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&G_(s,i.filters[c]),!0):!1})(n,e):void V(19439)}function W_(n){return n instanceof be?(function(t){return`${t.field.canonicalString()} ${t.op} ${ci(t.value)}`})(n):n instanceof Mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(W_).join(" ,")+"}"})(n):"Filter"}var qf=class extends be{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Gf=class extends be{constructor(e,t){super(e,"in",t),this.keys=K_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Wf=class extends be{constructor(e,t){super(e,"not-in",t),this.keys=K_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function K_(n,e){return(e.arrayValue?.values||[]).map(t=>B.fromName(t.referenceValue))}var Kf=class extends be{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ep(t)&&$o(t.arrayValue,this.value)}},Qf=class extends be{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$o(this.value.arrayValue,t)}},Yf=class extends be{constructor(e,t){super(e,"not-in",t)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$o(this.value.arrayValue,t)}},Zf=class extends be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$o(this.value.arrayValue,r))}};var Xf=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function GE(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Xf(n,e,t,r,i,o,s)}function _p(n){let e=U(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ci(r)).join(",")),e.Te=t}return e.Te}function Ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qE(n.startAt,e.startAt)&&qE(n.endAt,e.endAt)}function Jf(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var di=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function EA(n,e,t,r,i,o,s,c){return new di(n,e,t,r,i,o,s,c)}function Fc(n){return new di(n)}function WE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _A(n){return n.collectionGroup!==null}function Fo(n){let e=U(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new xe(Xe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new li(o,r))}),t.has(Xe.keyField().canonicalString())||e.Ie.push(new li(Xe.keyField(),r))}return e.Ie}function bt(n){let e=U(n);return e.Ee||(e.Ee=IA(e,Fo(n))),e.Ee}function IA(n,e){if(n.limitType==="F")return GE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new li(i.field,o)});let t=n.endAt?new ui(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ui(n.startAt.position,n.startAt.inclusive):null;return GE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function eh(n,e,t){return new di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lc(n,e){return Ip(bt(n),bt(e))&&n.limitType===e.limitType}function Q_(n){return`${_p(bt(n))}|lt:${n.limitType}`}function Zr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>W_(i)).join(", ")}]`),kc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ci(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ci(i)).join(",")),`Target(${r})`})(bt(n))}; limitType=${n.limitType})`}function Vc(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Fo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let d=zE(s,c,u);return s.inclusive?d<=0:d<0})(r.startAt,Fo(r),i)||r.endAt&&!(function(s,c,u){let d=zE(s,c,u);return s.inclusive?d>=0:d>0})(r.endAt,Fo(r),i))})(n,e)}function wA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y_(n){return(e,t)=>{let r=!1;for(let i of Fo(n)){let o=DA(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function DA(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),d=c.data.field(o);return u!==null&&d!==null?ai(u,d):V(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return V(19790,{direction:n.dir})}}var Zt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return O_(this.inner)}size(){return this.innerSize}};var TA=new me(B.comparator);function Xt(){return TA}var Z_=new me(B.comparator);function ko(...n){let e=Z_;for(let t of n)e=e.insert(t.key,t);return e}function X_(n){let e=Z_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xn(){return Lo()}function J_(){return Lo()}function Lo(){return new Zt(n=>n.toString(),(n,e)=>n.isEqual(e))}var CA=new me(B.comparator),bA=new xe(B.comparator);function Y(...n){let e=bA;for(let t of n)e=e.add(t);return e}var SA=new xe(Q);function AA(){return SA}function wp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uo(e)?"-0":e}}function eI(n){return{integerValue:""+n}}function MA(n,e){return rA(e)?eI(e):wp(n,e)}var fi=class{constructor(){this._=void 0}};function NA(n,e,t){return n instanceof hi?(function(i,o){let s={fields:{[L_]:{stringValue:F_},[B_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&mp(o)&&(o=Oc(o)),o&&(s.fields[V_]=o),{mapValue:s}})(t,e):n instanceof or?nI(n,e):n instanceof sr?rI(n,e):(function(i,o){let s=tI(i,o),c=KE(s)+KE(i.Ae);return $f(s)&&$f(i.Ae)?eI(c):wp(i.serializer,c)})(n,e)}function RA(n,e,t){return n instanceof or?nI(n,e):n instanceof sr?rI(n,e):t}function tI(n,e){return n instanceof pi?(function(r){return $f(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var hi=class extends fi{},or=class extends fi{constructor(e){super(),this.elements=e}};function nI(n,e){let t=iI(e);for(let r of n.elements)t.some(i=>At(i,r))||t.push(r);return{arrayValue:{values:t}}}var sr=class extends fi{constructor(e){super(),this.elements=e}};function rI(n,e){let t=iI(e);for(let r of n.elements)t=t.filter(i=>!At(i,r));return{arrayValue:{values:t}}}var pi=class extends fi{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function KE(n){return he(n.integerValue||n.doubleValue)}function iI(n){return Ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xA(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof or&&i instanceof or||r instanceof sr&&i instanceof sr?oi(r.elements,i.elements,At):r instanceof pi&&i instanceof pi?At(r.Ae,i.Ae):r instanceof hi&&i instanceof hi})(n.transform,e.transform)}var th=class{constructor(e,t){this.version=e,this.transformResults=t}},tr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Xa(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gi=class{};function oI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ac(n.key,tr.none()):new ar(n.key,n.data,tr.none());{let t=n.data,r=ht.empty(),i=new xe(Xe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Jt(n.key,r,new Dt(i.toArray()),tr.none())}}function PA(n,e,t){n instanceof ar?(function(i,o,s){let c=i.value.clone(),u=YE(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Jt?(function(i,o,s){if(!Xa(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=YE(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(sI(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Vo(n,e,t,r){return n instanceof ar?(function(o,s,c,u){if(!Xa(o.precondition,s))return c;let d=o.value.clone(),h=ZE(o.fieldTransforms,u,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Jt?(function(o,s,c,u){if(!Xa(o.precondition,s))return c;let d=ZE(o.fieldTransforms,u,s),h=s.data;return h.setAll(sI(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(o,s,c){return Xa(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function kA(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=tI(r.transform,i||null);o!=null&&(t===null&&(t=ht.empty()),t.set(r.field,o))}return t||null}function QE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oi(r,i,(o,s)=>xA(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ar=class extends gi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jt=class extends gi{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function sI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function YE(n,e,t){let r=new Map;ie(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,RA(s,c,t[i]))}return r}function ZE(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,NA(o,s,e))}return r}var ac=class extends gi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nh=class extends gi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&PA(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=J_();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=oI(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Y())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(t,r)=>QE(t,r))&&oi(this.baseMutations,e.baseMutations,(t,r)=>QE(t,r))}},ih=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return CA})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var oh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sh=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var _e,J;function OA(n){switch(n){case A.OK:return V(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return V(15467,{code:n})}}function aI(n){if(n===void 0)return Kt("GRPC error has no .code"),A.UNKNOWN;switch(n){case _e.OK:return A.OK;case _e.CANCELLED:return A.CANCELLED;case _e.UNKNOWN:return A.UNKNOWN;case _e.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case _e.INTERNAL:return A.INTERNAL;case _e.UNAVAILABLE:return A.UNAVAILABLE;case _e.UNAUTHENTICATED:return A.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case _e.NOT_FOUND:return A.NOT_FOUND;case _e.ALREADY_EXISTS:return A.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return A.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case _e.ABORTED:return A.ABORTED;case _e.OUT_OF_RANGE:return A.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return A.UNIMPLEMENTED;case _e.DATA_LOSS:return A.DATA_LOSS;default:return V(39323,{code:n})}}(J=_e||(_e={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";var FA=null;function LA(){return new TextEncoder}var VA=new Gt([4294967295,4294967295],0);function XE(n){let e=LA().encode(n),t=new If;return t.update(e),new Uint8Array(t.digest())}function JE(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gt([t,r],0),new Gt([i,o],0)]}var ah=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Jn(`Invalid padding: ${t}`);if(r<0)throw new Jn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Jn(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Gt.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Gt.fromNumber(r)));return i.compare(VA)===1&&(i=new Gt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=XE(e),[r,i]=JE(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=XE(e),[r,i]=JE(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Jn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,zo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new me(Q),Xt(),Y())}},zo=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Y(),Y(),Y())}};var ti=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},uc=class{constructor(e,t){this.targetId=e,this.Ce=t}},lc=class{constructor(e,t,r=je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},dc=class{constructor(){this.ve=0,this.Fe=e_(),this.Me=je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Y(),t=Y(),r=Y();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:V(38017,{changeType:o})}}),new zo(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=e_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},ch=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xt(),this.Je=Ka(),this.He=Ka(),this.Ye=new me(Q)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:V(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Jf(o))if(r===0){let s=new B(o.path);this.et(t,s,pt.newNoDocument(s,q.min()))}else ie(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}FA?.lt((function(h,g,m,_,M){let x={localCacheCount:h,existenceFilterCount:g.count,databaseId:m.database,projectId:m.projectId},S=g.unchangedNames;return S&&(x.bloomFilter={applied:M===0,hashCount:S?.hashCount??0,bitmapLength:S?.bits?.bitmap?.length??0,padding:S?.bits?.padding??0,mightContain:P=>_?.mightContain(P)??!1}),x})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=Yt(r).toUint8Array()}catch(u){if(u instanceof rc)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ah(s,i,o)}catch(u){return ii(u instanceof Jn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Jf(c.target)){let u=new B(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,pt.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=Y();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new cc(e,t,this.Ye,this.je,r);return this.je=Xt(),this.Je=Ka(),this.He=Ka(),this.Ye=new me(Q),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xe(Q),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xe(Q),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ka(){return new me(B.comparator)}function e_(){return new me(B.comparator)}var BA={asc:"ASCENDING",desc:"DESCENDING"},jA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UA={and:"AND",or:"OR"},uh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function lh(n,e){return n.useProto3Json||kc(e)?e:{value:e}}function fc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HA(n,e){return fc(n,e.toTimestamp())}function St(n){return ie(!!n,49232),q.fromTimestamp((function(t){let r=Qt(t);return new De(r.seconds,r.nanos)})(n))}function Dp(n,e){return dh(n,e).canonicalString()}function dh(n,e){let t=(function(i){return new ve(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function uI(n){let e=ve.fromString(n);return ie(pI(e),10190,{key:e.toString()}),e}function fh(n,e){return Dp(n.databaseId,e.path)}function Af(n,e){let t=uI(e);if(t.get(1)!==n.databaseId.projectId)throw new O(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(dI(t))}function lI(n,e){return Dp(n.databaseId,e)}function $A(n){let e=uI(n);return e.length===4?ve.emptyPath():dI(e)}function hh(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dI(n){return ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function t_(n,e,t){return{name:fh(n,e),fields:t.value.mapValue.fields}}function zA(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:V(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,h){return d.useProto3Json?(ie(h===void 0||typeof h=="string",58123),je.fromBase64String(h||"")):(ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),je.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(d){let h=d.code===void 0?A.UNKNOWN:aI(d.code);return new O(h,d.message||"")})(s);t=new lc(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Af(n,r.document.name),o=St(r.document.updateTime),s=r.document.createTime?St(r.document.createTime):q.min(),c=new ht({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(i,o,s,c),d=r.targetIds||[],h=r.removedTargetIds||[];t=new ti(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Af(n,r.document),o=r.readTime?St(r.readTime):q.min(),s=pt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new ti([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Af(n,r.document),o=r.removedTargetIds||[];t=new ti([],o,i,null)}else{if(!("filter"in e))return V(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new sh(i,o),c=r.targetId;t=new uc(c,s)}}return t}function qA(n,e){let t;if(e instanceof ar)t={update:t_(n,e.key,e.value)};else if(e instanceof ac)t={delete:fh(n,e.key)};else if(e instanceof Jt)t={update:t_(n,e.key,e.data),updateMask:eM(e.fieldMask)};else{if(!(e instanceof nh))return V(16599,{Vt:e.type});t={verify:fh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof hi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof or)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof sr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof pi)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw V(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:HA(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:V(27497)})(n,e.precondition)),t}function GA(n,e){return n&&n.length>0?(ie(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?St(i.updateTime):St(o);return s.isEqual(q.min())&&(s=St(o)),new th(s,i.transformResults||[])})(t,e))):[]}function WA(n,e){return{documents:[lI(n,e.path)]}}function KA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lI(n,i);let o=(function(d){if(d.length!==0)return hI(Mt.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(d){if(d.length!==0)return d.map(h=>(function(m){return{field:Xr(m.field),direction:ZA(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=lh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function QA(n){let e=$A(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ie(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(g){let m=fI(g);return m instanceof Mt&&q_(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map(m=>(function(M){return new li(Jr(M.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,kc(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(g){let m=!!g.before,_=g.values||[];return new ui(_,m)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let m=!g.before,_=g.values||[];return new ui(_,m)})(t.endAt)),EA(e,i,s,o,c,"F",u,d)}function YA(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Jr(t.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Jr(t.unaryFilter.field);return be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Jr(t.unaryFilter.field);return be.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Jr(t.unaryFilter.field);return be.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return V(61313);default:return V(60726)}})(n):n.fieldFilter!==void 0?(function(t){return be.create(Jr(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return V(58110);default:return V(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mt.create(t.compositeFilter.filters.map(r=>fI(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return V(1026)}})(t.compositeFilter.op))})(n):V(30097,{filter:n})}function ZA(n){return BA[n]}function XA(n){return jA[n]}function JA(n){return UA[n]}function Xr(n){return{fieldPath:n.canonicalString()}}function Jr(n){return Xe.fromServerFormat(n.fieldPath)}function hI(n){return n instanceof be?(function(t){if(t.op==="=="){if($E(t.value))return{unaryFilter:{field:Xr(t.field),op:"IS_NAN"}};if(HE(t.value))return{unaryFilter:{field:Xr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($E(t.value))return{unaryFilter:{field:Xr(t.field),op:"IS_NOT_NAN"}};if(HE(t.value))return{unaryFilter:{field:Xr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(t.field),op:XA(t.op),value:t.value}}})(n):n instanceof Mt?(function(t){let r=t.getFilters().map(i=>hI(i));return r.length===1?r[0]:{compositeFilter:{op:JA(t.op),filters:r}}})(n):V(54877,{filter:n})}function eM(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qo=class n{constructor(e,t,r,i,o=q.min(),s=q.min(),c=je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ph=class{constructor(e){this.yt=e}};function tM(n){let e=QA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?eh(e,e.limit,"L"):e}var hc=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(he(e.integerValue));else if("doubleValue"in e){let r=he(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Uo(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Qt(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Yt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?H_(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):U_(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):V(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=si,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(he(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),B.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};hc.Kt=new hc;var gh=class{constructor(){this.Cn=new mh}addToCollectionParentIndex(e,t){return this.Cn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(ir.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},mh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ve.comparator)).toArray()}};var gU=new Uint8Array(0);var n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gI=41943040,ot=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ot.DEFAULT_COLLECTION_PERCENTILE=10,ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ot.DEFAULT=new ot(gI,ot.DEFAULT_COLLECTION_PERCENTILE,ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ot.DISABLED=new ot(-1,0,0);var Go=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var r_="LruGarbageCollector",nM=1048576;function i_([n,e],[t,r]){let i=Q(n,t);return i===0?Q(e,r):i}var yh=class{constructor(e){this.Ir=e,this.buffer=new xe(i_),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();i_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},vh=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){k(r_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ei(t)?k(r_,"Ignoring IndexedDB error during garbage collection: ",t):await vi(t)}await this.Vr(3e5)})}},Eh=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(pp.ce);let r=new yh(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(n_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,u,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Yr()<=X.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function rM(n,e){return new Eh(n,e)}var _h=class{constructor(){this.changes=new Zt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ih=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var wh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vo(r.mutation,i,Dt.empty(),De.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Y()){let i=Xn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ko();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Xn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Y()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=Xt(),s=Lo(),c=(function(){return Lo()})();return t.forEach((u,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Jt)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Vo(h.mutation,d,h.mutation.getFieldMask(),De.now())):s.set(d.key,Dt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>c.set(d,new Ih(h,s.get(d)??null))),c))}recalculateAndSaveOverlays(e,t){let r=Lo(),i=new me((s,c)=>s-c),o=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let h=r.get(u)||Dt.empty();h=c.applyToLocalView(d,h),r.set(u,h);let g=(i.get(c.batchId)||Y()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,h=u.value,g=J_();h.forEach(m=>{if(!o.has(m)){let _=oI(t.get(m),r.get(m));_!==null&&g.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_A(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(Xn()),c=jo,u=o;return s.next(d=>N.forEach(d,(h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Y())).next(h=>({batchId:c,changes:X_(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=ko();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ko();return this.indexManager.getCollectionParents(e,o).next(c=>N.forEach(c,u=>{let d=(function(g,m){return new di(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,pt.newInvalidDocument(h)))});let c=ko();return s.forEach((u,d)=>{let h=o.get(u);h!==void 0&&Vo(h.mutation,d,Dt.empty(),De.now()),Vc(t,d)&&(c=c.insert(u,d))}),c})}};var Dh=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return N.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:St(i.createTime)}})(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:tM(i.bundledQuery),readTime:St(i.readTime)}})(t)),N.resolve()}};var Th=class{constructor(){this.overlays=new me(B.comparator),this.qr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xn();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=Xn(),o=t.length+1,s=new B(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new me((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Xn(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=Xn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return N.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new oh(t,r));let o=this.qr.get(t);o===void 0&&(o=Y(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Ch=class{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Wo=class{constructor(){this.Qr=new xe(Ie.$r),this.Ur=new xe(Ie.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ie(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ie(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new B(new ve([])),r=new Ie(t,e),i=new Ie(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new B(new ve([])),r=new Ie(t,e),i=new Ie(t,e+1),o=Y();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ie(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ie=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return B.comparator(e.key,t.key)||Q(e.Yr,t.Yr)}static Kr(e,t){return Q(e.Yr,t.Yr)||B.comparator(e.key,t.key)}};var bh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xe(Ie.$r)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new rh(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new Ie(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?gp:this.tr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ie(t,0),i=new Ie(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(Q);return t.forEach(i=>{let o=new Ie(i,0),s=new Ie(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),N.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ie(new B(o),0),c=new xe(Q);return this.Zr.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},s),N.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ie(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return N.forEach(t.mutations,i=>{let o=new Ie(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ie(t,0),i=this.Zr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Sh=class{constructor(e){this.ri=e,this.docs=(function(){return new me(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=Xt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Xt(),s=t.path,c=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:h}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||eA(J0(h),r)<=0||(i.has(h.key)||Vc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){V(9500)}ii(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ah(this)}getSize(e){return N.resolve(this.size)}},Ah=class extends _h{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Mh=class{constructor(e){this.persistence=e,this.si=new Zt(t=>_p(t),Ip),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.oi=0,this._i=new Wo,this.targetCount=0,this.ai=Go.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),N.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Go(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Pr(t),N.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this._i.containsKey(t))}};var pc=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new pp(0),this.li=!1,this.li=!0,this.hi=new Ch,this.referenceDelegate=e(this),this.Pi=new Mh(this),this.indexManager=new gh,this.remoteDocumentCache=(function(i){return new Sh(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new ph(t),this.Ii=new Dh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Th,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new bh(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Nh(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return N.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Nh=class extends jf{constructor(e){super(),this.currentSequenceNumber=e}},Rh=class n{constructor(e){this.persistence=e,this.Ri=new Wo,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw V(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.fi,r=>{let i=B.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,q.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return N.or([()=>N.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},gc=class n{constructor(e,t){this.persistence=e,this.pi=new Zt(r=>iA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rM(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return N.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ya(e.data.value)),t}br(e,t,r){return N.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Y(),i=Y();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Ph=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var kh=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lE()?8:nA(uE())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ph;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Yr()<=X.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),N.resolve()):(Yr()<=X.DEBUG&&k("QueryEngine","Query:",Zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yr()<=X.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bt(t))):N.resolve())}ys(e,t){if(WE(t))return N.resolve(null);let r=bt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=eh(t,null,"F"),r=bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Y(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.Ds(t,c);return this.Cs(t,d,s,u.readTime)?this.ys(e,eh(t,null,"F")):this.vs(e,d,t,u)}))})))}ws(e,t,r,i){return WE(t)||i.isEqual(q.min())?N.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?N.resolve(null):(Yr()<=X.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(t)),this.vs(e,s,t,X0(i,jo)).next(c=>c))})}Ds(e,t){let r=new xe(Y_(e));return t.forEach((i,o)=>{Vc(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Yr()<=X.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.ps.getDocumentsMatchingQuery(e,t,ir.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Tp="LocalStore",iM=3e8,Oh=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new me(Q),this.xs=new Zt(o=>_p(o),Ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wh(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function oM(n,e,t,r){return new Oh(n,e,t,r)}async function mI(n,e){let t=U(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=Y();for(let d of i){s.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}for(let d of o){c.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:c}))})})}function sM(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){let g=d.batch,m=g.keys(),_=N.resolve();return m.forEach(M=>{_=_.next(()=>h.getEntry(u,M)).next(x=>{let S=d.docVersions.get(M);ie(S!==null,48541),x.version.compareTo(S)<0&&(g.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,g))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=Y();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yI(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function aM(n,e){let t=U(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((h,g)=>{let m=i.get(g);if(!m)return;c.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,g)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(je.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(g,_),(function(x,S,P){return x.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=iM?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(m,_,h)&&c.push(t.Pi.updateTargetData(o,_))});let u=Xt(),d=Y();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(cM(o,s,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(q.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return N.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.Ms=i,o))}function cM(n,e,t){let r=Y(),i=Y();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Xt();return t.forEach((c,u)=>{let d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(q.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):k(Tp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:s,qs:i}})}function uM(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lM(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new qo(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Fh(n,e,t){let r=U(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ei(s))throw s;k(Tp,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function o_(n,e,t){let r=U(n),i=q.min(),o=Y();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,d,h){let g=U(u),m=g.xs.get(h);return m!==void 0?N.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,s,bt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:q.min(),t?o:Y())).next(c=>(dM(r,wA(e),c),{documents:c,Qs:o})))}function dM(n,e,t){let r=n.Os.get(e)||q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var mc=class{constructor(){this.activeTargetIds=AA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Lh=class{constructor(){this.Mo=new mc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vh=class{Oo(e){}shutdown(){}};var s_="ConnectivityMonitor",yc=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){k(s_,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){k(s_,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qa=null;function Bh(){return Qa===null?Qa=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qa++,"0x"+Qa.toString(16)}var Mf="RestConnection",fM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},jh=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ic?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Bh(),c=this.zo(e,t.toUriEncodedString());k(Mf,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:d}=new URL(c),h=Ua(d);return this.Jo(e,c,u,r,h).then(g=>(k(Mf,`Received RPC '${e}' ${s}: `,g),g),g=>{throw ii(Mf,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=fM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Uh=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ve="WebChannelConnection",Hh=class extends jh{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Bh();return new Promise((c,u)=>{let d=new wf;d.setWithCredentials(!0),d.listenOnce(Df.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Po.NO_ERROR:let g=d.getResponseJson();k(Ve,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case Po.TIMEOUT:k(Ve,`RPC '${e}' ${s} timed out`),u(new O(A.DEADLINE_EXCEEDED,"Request time out"));break;case Po.HTTP_ERROR:let m=d.getStatus();if(k(Ve,`RPC '${e}' ${s} failed with status:`,m,"response text:",d.getResponseText()),m>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);let M=_?.error;if(M&&M.status&&M.message){let x=(function(P){let F=P.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(F)>=0?F:A.UNKNOWN})(M.status);u(new O(x,M.message))}else u(new O(A.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new O(A.UNAVAILABLE,"Connection failed."));break;default:V(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{k(Ve,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);k(Ve,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Bh(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=bf(),c=Cf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(Ve,`Creating RPC '${e}' stream ${i}: ${h}`,u);let g=s.createWebChannel(h,u);this.I_(g);let m=!1,_=!1,M=new Uh({Yo:S=>{_?k(Ve,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(k(Ve,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),k(Ve,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},Zo:()=>g.close()}),x=(S,P,F)=>{S.listen(P,j=>{try{F(j)}catch(L){setTimeout(()=>{throw L},0)}})};return x(g,Qr.EventType.OPEN,()=>{_||(k(Ve,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),x(g,Qr.EventType.CLOSE,()=>{_||(_=!0,k(Ve,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(g))}),x(g,Qr.EventType.ERROR,S=>{_||(_=!0,ii(Ve,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),M.a_(new O(A.UNAVAILABLE,"The operation could not be completed")))}),x(g,Qr.EventType.MESSAGE,S=>{if(!_){let P=S.data[0];ie(!!P,16349);let F=P,j=F?.error||F[0]?.error;if(j){k(Ve,`RPC '${e}' stream ${i} received error:`,j);let L=j.status,W=(function(y){let E=_e[y];if(E!==void 0)return aI(E)})(L),se=j.message;W===void 0&&(W=A.INTERNAL,se="Unknown error status: "+L+" with message "+j.message),_=!0,M.a_(new O(W,se)),g.close()}else k(Ve,`RPC '${e}' stream ${i} received:`,P),M.u_(P)}}),x(c,Tf.STAT_EVENT,S=>{S.stat===Ga.PROXY?k(Ve,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Ga.NOPROXY&&k(Ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function Nf(){return typeof document<"u"?document:null}function Bc(n){return new uh(n,!0)}var vc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var a_="PersistentStream",Ec=class{constructor(e,t,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vc(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return k(a_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(k(a_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},$h=class extends Ec{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=zA(this.serializer,e),r=(function(o){if(!("targetChange"in o))return q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?q.min():s.readTime?St(s.readTime):q.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=hh(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=Jf(u)?{documents:WA(o,u)}:{query:KA(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=cI(o,s.resumeToken);let d=lh(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(q.min())>0){c.readTime=fc(o,s.snapshotVersion.toTimestamp());let d=lh(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);let r=YA(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=hh(this.serializer),t.removeTarget=e,this.q_(t)}},zh=class extends Ec{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=GA(e.writeResults,e.commitTime),r=St(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=hh(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>qA(this.serializer,r))};this.q_(t)}};var qh=class{},Gh=class extends qh{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(A.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,dh(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(A.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,dh(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(A.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Wh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kt(t),this.aa=!1):k("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var cr="RemoteStore",Kh=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{dr(this)&&(k(cr,"Restarting streams for network reachability change."),await(async function(u){let d=U(u);d.Ea.add(4),await Xo(d),d.Ra.set("Unknown"),d.Ea.delete(4),await jc(d)})(this))})}),this.Ra=new Wh(r,i)}};async function jc(n){if(dr(n))for(let e of n.da)await e(!0)}async function Xo(n){for(let e of n.da)await e(!1)}function vI(n,e){let t=U(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ap(t)?Sp(t):_i(t).O_()&&bp(t,e))}function Cp(n,e){let t=U(n),r=_i(t);t.Ia.delete(e),r.O_()&&EI(t,e),t.Ia.size===0&&(r.O_()?r.L_():dr(t)&&t.Ra.set("Unknown"))}function bp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_i(n).Y_(e)}function EI(n,e){n.Va.Ue(e),_i(n).Z_(e)}function Sp(n){n.Va=new ch({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_i(n).start(),n.Ra.ua()}function Ap(n){return dr(n)&&!_i(n).x_()&&n.Ia.size>0}function dr(n){return U(n).Ea.size===0}function _I(n){n.Va=void 0}async function hM(n){n.Ra.set("Online")}async function pM(n){n.Ia.forEach((e,t)=>{bp(n,e)})}async function gM(n,e){_I(n),Ap(n)?(n.Ra.ha(e),Sp(n)):n.Ra.set("Unknown")}async function mM(n,e,t){if(n.Ra.set("Online"),e instanceof lc&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){k(cr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _c(n,r)}else if(e instanceof ti?n.Va.Ze(e):e instanceof uc?n.Va.st(e):n.Va.tt(e),!t.isEqual(q.min()))try{let r=await yI(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,d)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(je.EMPTY_BYTE_STRING,h.snapshotVersion)),EI(o,u);let g=new qo(h.target,u,d,h.sequenceNumber);bp(o,g)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){k(cr,"Failed to raise snapshot:",r),await _c(n,r)}}async function _c(n,e,t){if(!Ei(e))throw e;n.Ea.add(1),await Xo(n),n.Ra.set("Offline"),t||(t=()=>yI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{k(cr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await jc(n)})}function II(n,e){return e().catch(t=>_c(n,t,e))}async function Uc(n){let e=U(n),t=Tn(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gp;for(;yM(e);)try{let i=await uM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,vM(e,i)}catch(i){await _c(e,i)}wI(e)&&DI(e)}function yM(n){return dr(n)&&n.Ta.length<10}function vM(n,e){n.Ta.push(e);let t=Tn(n);t.O_()&&t.X_&&t.ea(e.mutations)}function wI(n){return dr(n)&&!Tn(n).x_()&&n.Ta.length>0}function DI(n){Tn(n).start()}async function EM(n){Tn(n).ra()}async function _M(n){let e=Tn(n);for(let t of n.Ta)e.ea(t.mutations)}async function IM(n,e,t){let r=n.Ta.shift(),i=ih.from(r,e,t);await II(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Uc(n)}async function wM(n,e){e&&Tn(n).X_&&await(async function(r,i){if((function(s){return OA(s)&&s!==A.ABORTED})(i.code)){let o=r.Ta.shift();Tn(r).B_(),await II(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Uc(r)}})(n,e),wI(n)&&DI(n)}async function c_(n,e){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k(cr,"RemoteStore received new credentials");let r=dr(t);t.Ea.add(3),await Xo(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jc(t)}async function DM(n,e){let t=U(n);e?(t.Ea.delete(2),await jc(t)):e||(t.Ea.add(2),await Xo(t),t.Ra.set("Unknown"))}function _i(n){return n.ma||(n.ma=(function(t,r,i){let o=U(t);return o.sa(),new $h(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:hM.bind(null,n),t_:pM.bind(null,n),r_:gM.bind(null,n),H_:mM.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Ap(n)?Sp(n):n.Ra.set("Unknown")):(await n.ma.stop(),_I(n))})),n.ma}function Tn(n){return n.fa||(n.fa=(function(t,r,i){let o=U(t);return o.sa(),new zh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:EM.bind(null,n),r_:wM.bind(null,n),ta:_M.bind(null,n),na:IM.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Uc(n)):(await n.fa.stop(),n.Ta.length>0&&(k(cr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var Qh=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Mp(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),Ei(n))return new O(A.UNAVAILABLE,`${e}: ${n}`);throw n}var Ic=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=ko(),this.sortedSet=new me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var wc=class{constructor(){this.ga=new me(B.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):V(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},mi=class n{constructor(e,t,r,i,o,s,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Ic.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Yh=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Zh=class{constructor(){this.queries=u_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=u_(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new O(A.ABORTED,"Firestore shutting down"))}};function u_(){return new Zt(n=>Q_(n),Lc)}async function TI(n,e){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Yh,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let c=Mp(s,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Np(t)}async function CI(n,e){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function TM(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Np(t)}function CM(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function Np(n){n.Ca.forEach(e=>{e.next()})}var Xh,l_;(l_=Xh||(Xh={})).Ma="default",l_.Cache="cache";var Dc=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xh.Cache}};var Tc=class{constructor(e){this.key=e}},Cc=class{constructor(e){this.key=e}},Jh=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Y(),this.mutatedKeys=Y(),this.eu=Y_(e),this.tu=new Ic(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new wc,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let m=i.get(h),_=Vc(this.query,g)?g:null,M=!!m&&this.mutatedKeys.has(m.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;m&&_?m.data.isEqual(_.data)?M!==x&&(r.track({type:3,doc:_}),S=!0):this.su(m,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.eu(_,u)>0||d&&this.eu(_,d)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),S=!0):m&&!_&&(r.track({type:1,doc:m}),S=!0,(u||d)&&(c=!0)),S&&(_?(s=s.add(_),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,g)=>(function(_,M){let x=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V(20277,{Rt:S})}};return x(_)-x(M)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,s.length!==0||d?{snapshot:new mi(this.query,e.tu,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Y(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Cc(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Tc(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Y();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return mi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Rp="SyncEngine",ep=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},tp=class{constructor(e){this.key=e,this.hu=!1}},np=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Zt(c=>Q_(c),Lc),this.Iu=new Map,this.Eu=new Set,this.du=new me(B.comparator),this.Au=new Map,this.Ru=new Wo,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function bM(n,e,t=!0){let r=RI(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await bI(r,e,t,!0),i}async function SM(n,e){let t=RI(n);await bI(t,e,!0,!1)}async function bI(n,e,t,r){let i=await lM(n.localStore,bt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=await AM(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&vI(n.remoteStore,i),c}async function AM(n,e,t,r,i){n.pu=(g,m,_)=>(async function(x,S,P,F){let j=S.view.ru(P);j.Cs&&(j=await o_(x.localStore,S.query,!1).then(({documents:I})=>S.view.ru(I,j)));let L=F&&F.targetChanges.get(S.targetId),W=F&&F.targetMismatches.get(S.targetId)!=null,se=S.view.applyChanges(j,x.isPrimaryClient,L,W);return f_(x,S.targetId,se.au),se.snapshot})(n,g,m,_);let o=await o_(n.localStore,e,!0),s=new Jh(e,o.Qs),c=s.ru(o.documents),u=zo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,u);f_(n,t,d.au);let h=new ep(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function MM(n,e,t){let r=U(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Lc(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Cp(r.remoteStore,i.targetId),rp(r,i.targetId)}).catch(vi)):(rp(r,i.targetId),await Fh(r.localStore,i.targetId,!0))}async function NM(n,e){let t=U(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Cp(t.remoteStore,r.targetId))}async function RM(n,e,t){let r=VM(n);try{let i=await(function(s,c){let u=U(s),d=De.now(),h=c.reduce((_,M)=>_.add(M.key),Y()),g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let M=Xt(),x=Y();return u.Ns.getEntries(_,h).next(S=>{M=S,M.forEach((P,F)=>{F.isValidDocument()||(x=x.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,M)).next(S=>{g=S;let P=[];for(let F of c){let j=kA(F,g.get(F.key).overlayedDocument);j!=null&&P.push(new Jt(F.key,j,$_(j.value.mapValue),tr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,P,c)}).next(S=>{m=S;let P=S.applyToLocalDocumentSet(g,x);return u.documentOverlayCache.saveOverlays(_,S.batchId,P)})}).then(()=>({batchId:m.batchId,changes:X_(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let d=s.Vu[s.currentUser.toKey()];d||(d=new me(Q)),d=d.insert(c,u),s.Vu[s.currentUser.toKey()]=d})(r,i.batchId,t),await Jo(r,i.changes),await Uc(r.remoteStore)}catch(i){let o=Mp(i,"Failed to persist write");t.reject(o)}}async function SI(n,e){let t=U(n);try{let r=await aM(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ie(s.hu,14607):i.removedDocuments.size>0&&(ie(s.hu,42227),s.hu=!1))}),await Jo(t,r,e)}catch(r){await vi(r)}}function d_(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=U(s);u.onlineState=c;let d=!1;u.queries.forEach((h,g)=>{for(let m of g.Sa)m.va(c)&&(d=!0)}),d&&Np(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xM(n,e,t){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new me(B.comparator);s=s.insert(o,pt.newNoDocument(o,q.min()));let c=Y().add(o),u=new cc(q.min(),new Map,new me(Q),s,c);await SI(r,u),r.du=r.du.remove(o),r.Au.delete(e),xp(r)}else await Fh(r.localStore,e,!1).then(()=>rp(r,e,t)).catch(vi)}async function PM(n,e){let t=U(n),r=e.batch.batchId;try{let i=await sM(t.localStore,e);MI(t,r,null),AI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jo(t,i)}catch(i){await vi(i)}}async function kM(n,e,t){let r=U(n);try{let i=await(function(s,c){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(ie(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})})(r.localStore,e);MI(r,e,t),AI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jo(r,i)}catch(i){await vi(i)}}function AI(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function MI(n,e,t){let r=U(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function rp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||NI(n,r)})}function NI(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Cp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),xp(n))}function f_(n,e,t){for(let r of t)r instanceof Tc?(n.Ru.addReference(r.key,e),OM(n,r)):r instanceof Cc?(k(Rp,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||NI(n,r.key)):V(19791,{wu:r})}function OM(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(k(Rp,"New document in limbo: "+t),n.Eu.add(r),xp(n))}function xp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new B(ve.fromString(e)),r=n.fu.next();n.Au.set(r,new tp(t)),n.du=n.du.insert(t,r),vI(n.remoteStore,new qo(bt(Fc(t.path)),r,"TargetPurposeLimboResolution",pp.ce))}}async function Jo(n,e,t){let r=U(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);let h=xh.As(u.targetId,d);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,d){let h=U(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>N.forEach(d,m=>N.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>N.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!Ei(g))throw g;k(Tp,"Failed to update sequence numbers: "+g)}for(let g of d){let m=g.targetId;if(!g.fromCache){let _=h.Ms.get(m),M=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(M);h.Ms=h.Ms.insert(m,x)}}})(r.localStore,o))}async function FM(n,e){let t=U(n);if(!t.currentUser.isEqual(e)){k(Rp,"User change. New user:",e.toKey());let r=await mI(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new O(A.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jo(t,r.Ls)}}function LM(n,e){let t=U(n),r=t.Au.get(e);if(r&&r.hu)return Y().add(r.key);{let i=Y(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function RI(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xM.bind(null,e),e.Pu.H_=TM.bind(null,e.eventManager),e.Pu.yu=CM.bind(null,e.eventManager),e}function VM(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kM.bind(null,e),e}var xI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Bc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return oM(this.persistence,new kh,t.initialUser,this.serializer)}Cu(t){return new pc(Rh.mi,this.serializer)}Du(t){return new Lh}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),ip=class extends xI{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ie(this.persistence.referenceDelegate instanceof gc,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new vh(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?ot.withCacheSize(this.cacheSizeBytes):ot.DEFAULT;return new pc(r=>gc.mi(r,t),this.serializer)}};var BM=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>d_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FM.bind(null,this.syncEngine),await DM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Zh})()}createDatastore(t){let r=Bc(t.databaseInfo.databaseId),i=(function(s){return new Hh(s)})(t.databaseInfo);return(function(s,c,u,d){return new Gh(s,c,u,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new Kh(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>d_(this.syncEngine,r,0),(function(){return yc.v()?new yc:new Vh})())}createSyncEngine(t,r){return(function(o,s,c,u,d,h,g){let m=new np(o,s,c,u,d,h);return g&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=U(r);k(cr,"RemoteStore shutting down."),i.Ea.add(5),await Xo(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var bc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Cn="FirestoreClient",op=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Re.UNAUTHENTICATED,this.clientId=Bo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{k(Cn,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(k(Cn,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Mp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Rf(n,e){n.asyncQueue.verifyOperationInProgress(),k(Cn,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function h_(n,e){n.asyncQueue.verifyOperationInProgress();let t=await jM(n);k(Cn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>c_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>c_(e.remoteStore,i)),n._onlineComponents=e}async function jM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k(Cn,"Using user provided OfflineComponentProvider");try{await Rf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ii("Error using user provided cache. Falling back to memory cache: "+t),await Rf(n,new xI)}}else k(Cn,"Using default OfflineComponentProvider"),await Rf(n,new ip(void 0));return n._offlineComponents}async function PI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(k(Cn,"Using user provided OnlineComponentProvider"),await h_(n,n._uninitializedComponentsProvider._online)):(k(Cn,"Using default OnlineComponentProvider"),await h_(n,new BM))),n._onlineComponents}function UM(n){return PI(n).then(e=>e.syncEngine)}async function sp(n){let e=await PI(n),t=e.eventManager;return t.onListen=bM.bind(null,e.syncEngine),t.onUnlisten=MM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=SM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NM.bind(null,e.syncEngine),t}function HM(n,e,t={}){let r=new Tt;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,d){let h=new bc({next:m=>{h.Nu(),s.enqueueAndForget(()=>CI(o,g));let _=m.docs.has(c);!_&&m.fromCache?d.reject(new O(A.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?d.reject(new O(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new Dc(Fc(c.path),h,{includeMetadataChanges:!0,qa:!0});return TI(o,g)})(await sp(n),n.asyncQueue,e,t,r)),r.promise}function kI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var p_=new Map;var OI="firestore.googleapis.com",g_=!0,Sc=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OI,this.ssl=g_}else this.host=e.host,this.ssl=e.ssl??g_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nM)throw new O(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ko=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new xf;switch(r.type){case"firstParty":return new Ff(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=p_.get(t);r&&(k("ComponentProvider","Removing Datastore"),p_.delete(t),r.terminate())})(this),Promise.resolve()}};function $M(n,e,t,r={}){n=En(n,Ko);let i=Ua(e),o=n._getSettings(),s=ye(Z({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(sE(`https://${c}`),cE("Firestore",!0)),o.host!==OI&&o.host!==c&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ye(Z({},o),{host:c,ssl:i,emulatorOptions:r});if(!Gr(u,s)&&(n._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Re.MOCK_USER;else{d=aE(r.mockUserToken,n._app?.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new O(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Re(g)}n._authCredentials=new Pf(new Ja(d,h))}}var Ac=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Be=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Zo(t,n._jsonSchema))return new n(e,r||null,new B(ve.fromString(t.referencePath)))}};Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:we("string",Be._jsonSchemaVersion),referencePath:we("string")};var Qo=class n extends Ac{constructor(e,t,r){super(e,t,Fc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Hc(n,e,...t){if(n=Wr(n),arguments.length===1&&(e=Bo.newId()),Y0("doc","path",e),n instanceof Ko){let r=ve.fromString(e,...t);return OE(r),new Be(n,null,new B(r))}{if(!(n instanceof Be||n instanceof Qo))throw new O(A.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return OE(r),new Be(n.firestore,n instanceof Qo?n.converter:null,new B(r))}}var m_="AsyncQueue",Mc=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vc(this,"async_queue_retry"),this._c=()=>{let r=Nf();r&&k(m_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Nf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Nf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Tt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ei(e))throw e;k(m_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Kt("INTERNAL UNHANDLED ERROR: ",y_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Qh.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&V(47125,{Pc:y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function y_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function v_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ur=class extends Ko{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mc,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Mc(e),this._firestoreClient=void 0,await e}}};function FI(n,e){let t=typeof n=="object"?n:SE(),r=typeof n=="string"?n:e||ic,i=TE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=oE("firestore");o&&$M(i,...o)}return i}function Pp(n){if(n._terminated)throw new O(A.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zM(n),n._firestoreClient}function zM(n){let e=n._freezeSettings(),t=(function(i,o,s,c){return new Uf(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,kI(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new op(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var _n=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(je.fromBase64String(e))}catch(t){throw new O(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zo(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:we("string",_n._jsonSchemaVersion),bytes:we("string")};var Yo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nc=class{constructor(e){this._methodName=e}};var In=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Zo(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:we("string",In._jsonSchemaVersion),latitude:we("number"),longitude:we("number")};var wn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zo(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:we("string",wn._jsonSchemaVersion),vectorValues:we("object")};var qM=/^__.*__$/,ap=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jt(e,this.data,this.fieldMask,t,this.fieldTransforms):new ar(e,this.data,t,this.fieldTransforms)}};function LI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V(40011,{Ac:n})}}var cp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(Z(Z({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LI(this.Ac)&&qM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},up=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bc(e)}Cc(e,t,r,i=!1){return new cp({Ac:e,methodName:t,Dc:r,path:Xe.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function GM(n){let e=n._freezeSettings(),t=Bc(n._databaseId);return new up(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WM(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);UI("Data must be an object, but it was:",s,r);let c=BI(r,s),u,d;if(o.merge)u=new Dt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let m=KM(e,g,t);if(!s.contains(m))throw new O(A.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YM(h,m)||h.push(m)}u=new Dt(h),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new ap(new ht(c),u,d)}function VI(n,e){if(jI(n=Wr(n)))return UI("Unsupported field value:",e,n),BI(n,e);if(n instanceof Nc)return(function(r,i){if(!LI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=VI(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Wr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=De.fromDate(r);return{timestampValue:fc(i.serializer,o)}}if(r instanceof De){let o=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fc(i.serializer,o)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _n)return{bytesValue:cI(i.serializer,r._byteString)};if(r instanceof Be){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wn)return(function(s,c){return{mapValue:{fields:{[yp]:{stringValue:vp},[si]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return wp(c.serializer,d)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${hp(r)}`)})(n,e)}function BI(n,e){let t={};return O_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lr(n,(r,i)=>{let o=VI(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function jI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof De||n instanceof In||n instanceof _n||n instanceof Be||n instanceof Nc||n instanceof wn)}function UI(n,e,t){if(!jI(t)||!__(t)){let r=hp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function KM(n,e,t){if((e=Wr(e))instanceof Yo)return e._internalPath;if(typeof e=="string")return HI(n,e);throw Rc("Field path arguments must be of type string or ",n,!1,void 0,t)}var QM=new RegExp("[~\\*/\\[\\]]");function HI(n,e,t){if(e.search(QM)>=0)throw Rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yo(...e.split("."))._internalPath}catch{throw Rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rc(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(A.INVALID_ARGUMENT,c+n+u)}function YM(n,e){return n.some(t=>t.isEqual(e))}var xc=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new lp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($I("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},lp=class extends xc{data(){return super.data()}};function $I(n,e){return typeof e=="string"?HI(n,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}function ZM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dp=class{convertValue(e,t="none"){switch(Dn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return he(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw V(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return lr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[si].arrayValue?.values?.map(r=>he(r.doubleValue));return new wn(t)}convertGeoPoint(e){return new In(he(e.latitude),he(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Oc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ho(e));default:return null}}convertTimestamp(e){let t=Qt(e);return new De(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);ie(pI(r),9688,{name:e});let i=new oc(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function XM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var er=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nr=class n extends xc{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ni(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($I("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};nr._jsonSchemaVersion="firestore/documentSnapshot/1.0",nr._jsonSchema={type:we("string",nr._jsonSchemaVersion),bundleSource:we("string","DocumentSnapshot"),bundleName:we("string"),bundle:we("string")};var ni=class extends nr{data(e={}){return super.data(e)}},ri=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new er(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ni(this._firestore,this._userDataWriter,r.key,r,new er(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new ni(i._firestore,i._userDataWriter,c.doc.key,c.doc,new er(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ni(i._firestore,i._userDataWriter,c.doc.key,c.doc,new er(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:JM(c.type),doc:u,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function JM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V(61501,{type:n})}}function zI(n){n=En(n,Be);let e=En(n.firestore,ur);return HM(Pp(e),n._key).then(t=>WI(e,n,t))}ri._jsonSchemaVersion="firestore/querySnapshot/1.0",ri._jsonSchema={type:we("string",ri._jsonSchemaVersion),bundleSource:we("string","QuerySnapshot"),bundleName:we("string"),bundle:we("string")};var Pc=class extends dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,t)}};function qI(n,e,t){n=En(n,Be);let r=En(n.firestore,ur),i=XM(n.converter,e,t);return eN(r,[WM(GM(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,tr.none())])}function GI(n,...e){n=Wr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||v_(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(v_(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof Be)s=En(n.firestore,ur),c=Fc(n._key.path),o={next:u=>{e[r]&&e[r](WI(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=En(n,Ac);s=En(u.firestore,ur),c=u._query;let d=new Pc(s);o={next:h=>{e[r]&&e[r](new ri(s,d,u,h))},error:e[r+1],complete:e[r+2]},ZM(n._query)}return(function(d,h,g,m){let _=new bc(m),M=new Dc(h,_,g);return d.asyncQueue.enqueueAndForget(async()=>TI(await sp(d),M)),()=>{_.Nu(),d.asyncQueue.enqueueAndForget(async()=>CI(await sp(d),M))}})(Pp(s),c,i,o)}function eN(n,e){return(function(r,i){let o=new Tt;return r.asyncQueue.enqueueAndForget(async()=>RM(await UM(r),i,o)),o.promise})(Pp(n),e)}function WI(n,e,t){let r=t.docs.get(e._key),i=new Pc(n);return new nr(n,i,e._key,r,new er(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){yi=i})(bE),Ro(new zt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ur(new kf(r.getProvider("auth-internal")),new Lf(s,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new O(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(d.options.projectId,h)})(s,i),s);return o=Z({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),vn(xE,PE,e),vn(xE,PE,"esm2020")})();var tN={apiKey:"AIzaSyB_WSNJbHhEGi6EPYbBKJvlP-MH1nQ846Y",authDomain:"cross-plane-2f5de.firebaseapp.com",projectId:"cross-plane-2f5de",storageBucket:"cross-plane-2f5de.firebasestorage.app",messagingSenderId:"183248187868",appId:"1:183248187868:web:348f43d2a2c5e3e6f0df19"},$c=class n{constructor(){this.unsubscribe=null;this.sessionId="shared-grid";this.isSynced=Ee(!1);this.isLoading=Ee(!0);this.app=_f(tN),this.db=FI(this.app)}async saveCells(e){let t=Array.from(e.values()).filter(i=>i.confirmed),r=Hc(this.db,"grids",this.sessionId);await qI(r,{cells:t,updatedAt:new Date().toISOString()}),this.isSynced.set(!0)}async loadCells(){let e=Hc(this.db,"grids",this.sessionId),t=await zI(e);return t.exists()?t.data().cells||[]:[]}subscribeToChanges(e){let t=Hc(this.db,"grids",this.sessionId);this.unsubscribe=GI(t,r=>{if(r.exists()){let i=r.data();e(i?.cells||[])}})}destroy(){this.unsubscribe&&this.unsubscribe()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}};var zc=class n{constructor(){this.cellsMap=new Map;this.firebase=te($c);this.saveTimeout=null;this.isInitialized=!1;this.skipNextSync=!1;this.cells=Ee(new Map);this.viewportOffset=Ee({x:0,y:0});this.selectedCell=Ee(null);this.inputDirection=Ee("across");this.isLoading=Ee(!0);this.lastPlacedTime=Ee(0);this.loadFromFirebase(),this.firebase.subscribeToChanges(e=>{this.handleRemoteUpdate(e)}),ro(()=>{let e=this.cells();if(this.isInitialized){if(this.skipNextSync){this.skipNextSync=!1;return}this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveToFirebase()},1e3)}})}handleRemoteUpdate(e){let t=new Map;e.forEach(r=>{let i=`${r.x},${r.y}`;t.set(i,r)}),(this.cellsMap.size!==t.size||!this.mapsEqual(this.cellsMap,t))&&(this.skipNextSync=!0,this.cellsMap=t,this.cells.set(new Map(this.cellsMap)),console.log("Grid updated from Firebase (real-time sync)"))}mapsEqual(e,t){if(e.size!==t.size)return!1;for(let[r,i]of e){let o=t.get(r);if(!o||i.char!==o.char||i.confirmed!==o.confirmed)return!1}return!0}async loadFromFirebase(){try{let e=await this.firebase.loadCells();e.length>0?(e.forEach(t=>{let r=`${t.x},${t.y}`;this.cellsMap.set(r,t)}),this.cells.set(new Map(this.cellsMap))):this.initializeDefault()}catch(e){console.error("Failed to load from Firebase:",e),this.initializeDefault()}finally{this.isLoading.set(!1),this.isInitialized=!0}}initializeDefault(){this.setCell(-5,0,"C",!0),this.setCell(-4,0,"R",!0),this.setCell(-3,0,"O",!0),this.setCell(-2,0,"S",!0),this.setCell(-1,0,"S",!0),this.setCell(0,0,".",!0),this.setCell(1,0,"P",!0),this.setCell(2,0,"L",!0),this.setCell(3,0,"A",!0),this.setCell(4,0,"N",!0),this.setCell(5,0,"E",!0)}async saveToFirebase(){try{await this.firebase.saveCells(this.cellsMap),console.log("Grid saved to Firebase")}catch(e){console.error("Failed to save to Firebase:",e)}}getCell(e,t){return this.cellsMap.get(`${e},${t}`)}setCell(e,t,r,i){let o=`${e},${t}`;this.cellsMap.set(o,{x:e,y:t,char:r.toUpperCase(),confirmed:i}),this.cells.set(new Map(this.cellsMap))}removeCell(e,t){let r=`${e},${t}`;this.cellsMap.has(r)&&(this.cellsMap.delete(r),this.cells.set(new Map(this.cellsMap)))}isBlackSquare(e,t){if(Math.abs(e)<6&&Math.abs(t)<6)return!1;let r=Math.sin(e*12.9898+t*78.233)*43758.5453123%1;return Math.abs(r)>.88}isValidSlot(e,t){return!this.isBlackSquare(e,t)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}};var qc=class n{constructor(){}async validateWord(e){try{let t=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e.toLowerCase()}`);if(t.status===404)return{valid:!1,definition:"",reason:`"${e.toUpperCase()}" not found in dictionary`};if(!t.ok)throw new Error("Dictionary API error");let r=await t.json(),i="No definition found.";if(Array.isArray(r)&&r.length>0){let o=r[0];if(o.meanings&&o.meanings.length>0){let s=o.meanings[0];s.definitions&&s.definitions.length>0&&(i=s.definitions[0].definition)}}return{valid:!0,definition:i}}catch(t){return console.error("Dictionary validation error:",t),{valid:!1,definition:"",reason:"Validation service unavailable"}}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}};var iN=["hiddenInput"],oN=["gridCanvas"],sN=["progressPath"];function aN(n,e){n&1&&(fe(0,"div",12),ft(1,"div",29),Ce())}function cN(n,e){n&1&&(fe(0,"div",16),Bt(),fe(1,"svg",30),ft(2,"circle",31)(3,"path",32),Ce(),jt(),fe(4,"span",33),Qn(5,"Validating..."),Ce()())}function uN(n,e){if(n&1&&(fe(0,"div",34),Qn(1),Ce()),n&2){let t=jd();Ra("text-red-500",t.isError())("text-green-600",!t.isError()),ho(),xa(" ",t.validationMessage()," ")}}var Gc=class n{constructor(e,t){this.grid=e;this.dictionary=t;this.ngZone=te(We);this.animationFrameId=null;this.needsRender=!0;this.isPanning=!1;this.startX=0;this.startY=0;this.startOffsetX=0;this.startOffsetY=0;this.zoomLevel=Ee(1);this.MIN_ZOOM=.03;this.MAX_ZOOM=2;this.isPinching=!1;this.initialPinchDist=0;this.startZoom=1;this.CELL_SIZE=40;this.COOLDOWN_MS=15e3;this.pendingWordCoords=Ee([]);this.isValidating=Ee(!1);this.validationMessage=Ee("");this.isError=Ee(!1);this.cooldownProgress=Ee(1);this.entryStart=Ee(null);this.offsetX=Eo(()=>this.grid.viewportOffset().x);this.offsetY=Eo(()=>this.grid.viewportOffset().y);this.showText=Eo(()=>this.zoomLevel()>.35);ro(()=>{this.zoomLevel(),this.grid.viewportOffset(),this.grid.cells(),this.grid.selectedCell(),this.grid.inputDirection(),this.pendingWordCoords(),this.requestRender()})}ngOnInit(){let e=new URLSearchParams(window.location.search),t=e.get("x"),r=e.get("y");if(t&&r){let i=parseInt(t,10),o=parseInt(r,10);if(!isNaN(i)&&!isNaN(o)){let s=this.CELL_SIZE*this.zoomLevel();this.grid.viewportOffset.set({x:-i*s,y:-o*s})}}}ngAfterViewInit(){this.setupCanvas(),this.startRenderLoop(),window.addEventListener("resize",()=>this.resizeCanvas())}setupCanvas(){let e=this.gridCanvas.nativeElement;this.ctx=e.getContext("2d"),this.resizeCanvas()}resizeCanvas(){let e=this.gridCanvas.nativeElement,t=window.devicePixelRatio||1;e.width=window.innerWidth*t,e.height=window.innerHeight*t,e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",this.ctx.scale(t,t),this.requestRender()}requestRender(){this.needsRender=!0}startRenderLoop(){this.ngZone.runOutsideAngular(()=>{let e=()=>{this.needsRender&&(this.renderCanvas(),this.needsRender=!1);let t=Date.now(),r=this.grid.lastPlacedTime(),i=t-r,o=1;if(i<this.COOLDOWN_MS&&(o=i/this.COOLDOWN_MS),this.progressPath?.nativeElement){let s=(o*100).toFixed(1);this.progressPath.nativeElement.setAttribute("stroke-dasharray",`${s}, 100`),o>=1&&this.cooldownProgress()<1?this.ngZone.run(()=>this.cooldownProgress.set(1)):o<1}this.animationFrameId=requestAnimationFrame(e)};e()})}renderCanvas(){let e=this.ctx,t=window.innerWidth,r=window.innerHeight;e.clearRect(0,0,t,r);let i=this.zoomLevel(),o=this.grid.viewportOffset(),s=this.CELL_SIZE*i,c=t/2+o.x,u=r/2+o.y,d=Math.floor(-c/s)-1,h=Math.ceil((t-c)/s)+1,g=Math.floor(-u/s)-1,m=Math.ceil((r-u)/s)+1;e.strokeStyle="rgba(0,0,0,0.05)",e.lineWidth=1;for(let S=d;S<=h;S++){let P=c+S*s;e.beginPath(),e.moveTo(P,0),e.lineTo(P,r),e.stroke()}for(let S=g;S<=m;S++){let P=u+S*s;e.beginPath(),e.moveTo(0,P),e.lineTo(t,P),e.stroke()}e.fillStyle="#000000";for(let S=d;S<=h;S++)for(let P=g;P<=m;P++)if(this.grid.isBlackSquare(S,P)){let F=c+S*s,j=u+P*s;e.fillRect(F+.5,j+.5,s-1,s-1)}let _=this.showText(),M=this.grid.selectedCell(),x=Math.max(8,Math.floor(s*.55));if(e.font=`bold ${x}px ui-monospace, monospace`,e.textAlign="center",e.textBaseline="middle",this.grid.cells().forEach(S=>{let P=c+S.x*s,F=u+S.y*s;if(!(P+s<0||P>t||F+s<0||F>r))if(_){let j=M&&M.x===S.x&&M.y===S.y,L=S.y===0&&Math.abs(S.x)<=5&&S.x!==0;j?e.fillStyle="#dbeafe":L?e.fillStyle="#fef9c3":e.fillStyle="#ffffff",e.fillRect(P+1,F+1,s-2,s-2),L&&!j?e.strokeStyle="#fde047":e.strokeStyle="#d1d5db",e.lineWidth=1,e.strokeRect(P+1,F+1,s-2,s-2),e.fillStyle="#000000",e.fillText(S.char,P+s/2,F+s/2+1)}else e.fillStyle="#9ca3af",e.fillRect(P+1,F+1,s-2,s-2)}),this.pendingWordCoords().forEach(S=>{let P=c+S.x*s,F=u+S.y*s;if(!(P+s<0||P>t||F+s<0||F>r))if(_){let j=M&&M.x===S.x&&M.y===S.y;e.fillStyle=j?"#dbeafe":"#ffffff",e.fillRect(P+1,F+1,s-2,s-2),e.strokeStyle="#d1d5db",e.lineWidth=1,e.strokeRect(P+1,F+1,s-2,s-2),e.fillStyle="#2563eb",e.fillText(S.char,P+s/2,F+s/2+1)}else e.fillStyle="#93c5fd",e.fillRect(P+1,F+1,s-2,s-2)}),M&&_){let S=c+M.x*s-1,P=u+M.y*s-1;e.strokeStyle="#3b82f6",e.lineWidth=3,e.strokeRect(S,P,s+2,s+2),e.shadowColor="rgba(59, 130, 246, 0.5)",e.shadowBlur=10,e.strokeRect(S,P,s+2,s+2),e.shadowBlur=0;let F=this.grid.inputDirection()==="across",j=Math.max(12,s*.35);if(e.fillStyle="#3b82f6",e.beginPath(),F){let L=S+s+8,W=P+s/2;e.moveTo(L,W-j/2),e.lineTo(L+j,W),e.lineTo(L,W+j/2)}else{let L=S+s/2,W=P+s+8;e.moveTo(L-j/2,W),e.lineTo(L,W+j),e.lineTo(L+j/2,W)}e.fill()}}onCanvasClick(e){if(this.isPanning)return;let t=this.screenToGrid(e.clientX,e.clientY);this.grid.isBlackSquare(t.x,t.y)||this.selectCell(t.x,t.y)}onCanvasTouch(e){if(e.touches.length>1)return;let t=e.touches[0],r=this.screenToGrid(t.clientX,t.clientY);this.grid.isBlackSquare(r.x,r.y)||setTimeout(()=>{!this.isPanning&&!this.isPinching&&this.selectCell(r.x,r.y)},100)}screenToGrid(e,t){let r=this.zoomLevel(),i=this.grid.viewportOffset(),o=this.CELL_SIZE*r,s=window.innerWidth/2+i.x,c=window.innerHeight/2+i.y,u=Math.floor((e-s)/o),d=Math.floor((t-c)/o);return{x:u,y:d}}setZoom(e,t,r){let i=this.zoomLevel(),o=this.grid.viewportOffset(),s=Math.min(Math.max(e,this.MIN_ZOOM),this.MAX_ZOOM);if(s===i)return;let c=window.innerWidth,u=window.innerHeight,d=t-c/2,h=r-u/2,g=s/i,m=d-(d-o.x)*g,_=h-(h-o.y)*g;this.grid.viewportOffset.set({x:m,y:_}),this.zoomLevel.set(s)}zoomIn(){this.setZoom(this.zoomLevel()*1.2,window.innerWidth/2,window.innerHeight/2)}zoomOut(){this.setZoom(this.zoomLevel()/1.2,window.innerWidth/2,window.innerHeight/2)}onWheel(e){e.preventDefault();let i=1+-e.deltaY*.001;i>1.15&&(i=1.15),i<.85&&(i=.85);let o=this.zoomLevel()*i;this.setZoom(o,e.clientX,e.clientY)}selectCell(e,t){let r=this.grid.selectedCell();if(r&&r.x===e&&r.y===t){this.grid.inputDirection.update(o=>o==="across"?"down":"across");return}this.pendingWordCoords().some(o=>o.x===e&&o.y===t)||this.clearPending(),this.grid.selectedCell.set({x:e,y:t}),this.entryStart.set({x:e,y:t}),this.validationMessage.set(""),this.focusInput()}focusInput(){this.hiddenInput?.nativeElement?.focus()}onInput(e){let t=e.target,i=t.value.slice(-1).toUpperCase();t.value="",i.match(/[A-Z]/)&&this.processCharInput(i)}onGlobalKeyDown(e){if(this.grid.selectedCell()){if(e.key==="ArrowLeft"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x-1,y:r.y}:null);return}if(e.key==="ArrowRight"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x+1,y:r.y}:null);return}if(e.key==="ArrowUp"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y-1}:null);return}if(e.key==="ArrowDown"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y+1}:null);return}if(e.key==="Enter"){e.preventDefault(),this.submitWord();return}if(e.key===" "){e.preventDefault(),this.grid.inputDirection.update(r=>r==="across"?"down":"across");return}if(e.key==="Backspace"){this.handleBackspace();return}if(e.key==="Escape"){this.clearPending();return}if(e.key.length===1&&e.key.match(/[a-zA-Z]/)){if(document.activeElement===this.hiddenInput?.nativeElement)return;e.preventDefault(),this.processCharInput(e.key.toUpperCase())}}}processCharInput(e){let t=this.grid.selectedCell();if(!t||this.grid.isBlackSquare(t.x,t.y))return;let r=this.grid.getCell(t.x,t.y);if(r&&r.confirmed){if(r.char===e)this.moveCursor(1);else{let i=t.x,o=t.y;this.moveCursor(1);let s=this.grid.selectedCell();if(s&&s.x===i&&s.y===o){this.showError("Cannot change existing letters!");return}this.processCharInput(e)}return}this.addPendingChar(t.x,t.y,e),this.moveCursor(1),this.focusInput()}handleBackspace(){let e=this.grid.selectedCell(),t=this.entryStart();if(!e||!t)return;if(this.pendingWordCoords().some(h=>h.x===e.x&&h.y===e.y)){this.removePendingAt(e.x,e.y);return}let i=this.grid.inputDirection()==="across",o=i?-1:0,s=i?0:-1,c=e.x+o,u=e.y+s;if(e.x===t.x&&e.y===t.y||this.grid.isBlackSquare(c,u))return;this.grid.selectedCell.set({x:c,y:u}),this.pendingWordCoords().some(h=>h.x===c&&h.y===u)&&this.removePendingAt(c,u)}moveCursor(e){let t=this.grid.selectedCell();if(!t)return;let r=this.grid.inputDirection()==="across"?e:0,i=this.grid.inputDirection()==="down"?e:0,o=t.x+r,s=t.y+i;this.grid.isBlackSquare(o,s)||this.grid.selectedCell.set({x:o,y:s})}addPendingChar(e,t,r){this.pendingWordCoords.update(i=>[...i.filter(s=>!(s.x===e&&s.y===t)),{x:e,y:t,char:r}]),this.validationMessage.set("")}removePendingAt(e,t){this.pendingWordCoords.update(r=>r.filter(i=>!(i.x===e&&i.y===t)))}async submitWord(){if(this.pendingWordCoords().length===0)return;this.isValidating.set(!0),this.validationMessage.set(""),this.isError.set(!1);let t=this.grid.inputDirection()==="across",r=[...this.pendingWordCoords()].sort((L,W)=>t?L.x-W.x:L.y-W.y),i=r[0],o=r[r.length-1],s=i.x,c=i.y;for(;!this.grid.isBlackSquare(t?s-1:s,t?c:c-1);){let L=t?s-1:s,W=t?c:c-1,se=this.grid.getCell(L,W),I=this.pendingWordCoords().find(y=>y.x===L&&y.y===W);if(se||I)s=L,c=W;else break}let u=s,d=c;for(s=o.x,c=o.y;!this.grid.isBlackSquare(t?s+1:s,t?c:c+1);){let L=t?s+1:s,W=t?c:c+1,se=this.grid.getCell(L,W),I=this.pendingWordCoords().find(y=>y.x===L&&y.y===W);if(se||I)s=L,c=W;else break}let h=s,g=c,m="",_=!1,M=!1,x=t?h-u+1:g-d+1;for(let L=0;L<x;L++){let W=t?u+L:u,se=t?d:d+L,I=this.grid.getCell(W,se),y=this.pendingWordCoords().find(E=>E.x===W&&E.y===se);if(I&&I.confirmed)m+=I.char,_=!0;else if(y)m+=y.char,M=!0;else{this.showError("Word has gaps!"),this.isValidating.set(!1);return}}if(!M){this.showError("No new letters added."),this.isValidating.set(!1);return}if(!_&&this.grid.cells().size>0){this.showError("Must connect to existing words!"),this.isValidating.set(!1);return}if(m.length<2){this.showError("Word too short."),this.isValidating.set(!1);return}let S=Date.now(),P=this.grid.lastPlacedTime(),F=S-P;if(F<this.COOLDOWN_MS){let L=Math.ceil((this.COOLDOWN_MS-F)/1e3);this.showError(`Wait ${L}s to place next word.`),this.isValidating.set(!1);return}let j=await this.dictionary.validateWord(m);if(j.valid){for(let L=0;L<x;L++){let W=t?u+L:u,se=t?d:d+L,I=m[L];this.grid.getCell(W,se)||this.grid.setCell(W,se,I,!0)}this.grid.lastPlacedTime.set(Date.now()),this.pendingWordCoords.set([]),this.validationMessage.set(`Placed: "${m}"
${j.definition}`),this.isError.set(!1)}else this.showError(j.reason||`"${m}" not found.`);this.isValidating.set(!1)}clearPending(){this.pendingWordCoords.set([]),this.validationMessage.set(""),this.hiddenInput?.nativeElement&&(this.hiddenInput.nativeElement.value="");let e=this.grid.selectedCell();e&&this.entryStart.set(e)}showError(e){this.validationMessage.set(e),this.isError.set(!0)}startPan(e){e.button===0&&(this.isPanning=!0,this.startX=e.clientX,this.startY=e.clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}startPanTouch(e){if(e.touches.length===2){this.isPinching=!0,this.isPanning=!1,this.initialPinchDist=this.getDist(e.touches),this.startZoom=this.zoomLevel();return}e.touches.length===1&&(this.isPanning=!0,this.isPinching=!1,this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}pan(e){if(!this.isPanning)return;let t=e.clientX-this.startX,r=e.clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r})}panTouch(e){if(this.isPinching&&e.touches.length===2){let r=this.getDist(e.touches)/this.initialPinchDist,i=(e.touches[0].clientX+e.touches[1].clientX)/2,o=(e.touches[0].clientY+e.touches[1].clientY)/2,s=this.startZoom*r;this.setZoom(s,i,o),e.preventDefault();return}if(this.isPanning&&e.touches.length===1){let t=e.touches[0].clientX-this.startX,r=e.touches[0].clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r}),e.cancelable&&e.preventDefault()}}endPan(){this.isPanning=!1,this.isPinching=!1}getDist(e){let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)}resetView(){this.grid.viewportOffset.set({x:0,y:0}),this.zoomLevel.set(1)}sharePosition(){let e=this.screenToGrid(window.innerWidth/2,window.innerHeight/2),t=new URL(window.location.href);t.searchParams.set("x",e.x.toString()),t.searchParams.set("y",e.y.toString()),navigator.clipboard.writeText(t.toString()).then(()=>{this.validationMessage.set("Link copied to clipboard!"),this.isError.set(!1),setTimeout(()=>{this.validationMessage()==="Link copied to clipboard!"&&this.validationMessage.set("")},3e3)})}isCellSelected(e,t){let r=this.grid.selectedCell();return!!r&&r.x===e&&r.y===t}static{this.\u0275fac=function(t){return new(t||n)(qr(zc),qr(qc))}}static{this.\u0275cmp=kd({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Na(iN,5)(oN,5)(sN,5),t&2){let i;yo(i=vo())&&(r.hiddenInput=i.first),yo(i=vo())&&(r.gridCanvas=i.first),yo(i=vo())&&(r.progressPath=i.first)}},decls:36,vars:2,consts:[["gridCanvas",""],["progressPath",""],["hiddenInput",""],[1,"relative","w-full","h-full","overflow-hidden","bg-white","select-none","cursor-grab","active:cursor-grabbing","font-mono",3,"mousedown","touchstart","mousemove","touchmove","mouseup","touchend","keydown","wheel"],[1,"absolute","inset-0","w-full","h-full",3,"click","touchstart"],[1,"absolute","top-0","left-0","right-0","p-4","pointer-events-none","z-50","flex","justify-center","md:justify-start"],[1,"bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","px-4","py-3","rounded-xl","pointer-events-auto","max-w-sm","w-full","md:w-auto","text-center","md:text-left"],[1,"flex","items-center","gap-3","mb-1"],[1,"relative","w-6","h-6","flex-shrink-0"],["viewBox","0 0 36 36",1,"transform","-rotate-90","w-full","h-full"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-gray-200"],["stroke-dasharray","100, 100","d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-blue-500","transition-[stroke-dasharray]","duration-100","ease-linear"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-xl","font-black","tracking-tighter"],[1,"hidden","md:block","text-xs","text-gray-500","mb-2","leading-relaxed"],[1,"min-h-[24px]","flex","flex-col","justify-center","items-center","md:items-start"],[1,"flex","items-center","space-x-2","text-blue-600","animate-pulse"],[1,"text-sm","font-medium","whitespace-pre-wrap",3,"text-red-500","text-green-600"],[1,"absolute","top-4","right-4","flex","flex-col","gap-2","z-50","pointer-events-auto"],["title","Center View",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Share Position",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"],["title","Zoom In",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["title","Zoom Out",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],["type","text","inputmode","text","autocomplete","off","autocorrect","off","autocapitalize","characters",1,"absolute","opacity-0","top-0","left-0","w-px","h-px","overflow-hidden","-z-10",3,"input"],[1,"w-2","h-2","bg-blue-500","rounded-full"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-semibold"],[1,"text-sm","font-medium","whitespace-pre-wrap"]],template:function(t,r){if(t&1){let i=Bd();fe(0,"div",3),It("mousedown",function(s){return Me(i),Ne(r.startPan(s))})("touchstart",function(s){return Me(i),Ne(r.startPanTouch(s))})("mousemove",function(s){return Me(i),Ne(r.pan(s))},Kn)("touchmove",function(s){return Me(i),Ne(r.panTouch(s))},Kn)("mouseup",function(){return Me(i),Ne(r.endPan())},Kn)("touchend",function(){return Me(i),Ne(r.endPan())},Kn)("keydown",function(s){return Me(i),Ne(r.onGlobalKeyDown(s))},Kn)("wheel",function(s){return Me(i),Ne(r.onWheel(s))}),fe(1,"canvas",4,0),It("click",function(s){return Me(i),Ne(r.onCanvasClick(s))})("touchstart",function(s){return Me(i),Ne(r.onCanvasTouch(s))}),Ce(),fe(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8),Bt(),fe(7,"svg",9),ft(8,"path",10)(9,"path",11,1),Ce(),Aa(11,aN,2,0,"div",12),Ce(),jt(),fe(12,"h1",13),Qn(13,"Cross.plane"),Ce()(),fe(14,"p",14),Qn(15," Infinite, procedural, collaborative crossword. "),ft(16,"br"),Qn(17," Click to select. Space to rotate. Type to type. "),Ce(),fe(18,"div",15),Aa(19,cN,6,0,"div",16)(20,uN,2,5,"div",17),Ce()()(),fe(21,"div",18)(22,"button",19),It("click",function(){return Me(i),Ne(r.resetView())}),Bt(),fe(23,"svg",20),ft(24,"path",21),Ce()(),jt(),fe(25,"button",22),It("click",function(){return Me(i),Ne(r.sharePosition())}),Bt(),fe(26,"svg",20),ft(27,"path",23),Ce()(),jt(),fe(28,"button",24),It("click",function(){return Me(i),Ne(r.zoomIn())}),Bt(),fe(29,"svg",20),ft(30,"path",25),Ce()(),jt(),fe(31,"button",26),It("click",function(){return Me(i),Ne(r.zoomOut())}),Bt(),fe(32,"svg",20),ft(33,"path",27),Ce()()(),jt(),fe(34,"input",28,2),It("input",function(s){return Me(i),Ne(r.onInput(s))}),Ce()()}t&2&&(ho(11),Ma(r.cooldownProgress()>=1?11:-1),ho(8),Ma(r.isValidating()?19:r.validationMessage()?20:-1))},dependencies:[ka],encapsulation:2})}};ef(Gc,{providers:[Ud()]}).catch(n=>console.error(n));
