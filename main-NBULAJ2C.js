var _C=Object.defineProperty,EC=Object.defineProperties;var IC=Object.getOwnPropertyDescriptors;var ya=Object.getOwnPropertySymbols;var cv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable;var av=(n,e,t)=>e in n?_C(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})cv.call(e,t)&&av(n,t,e[t]);if(ya)for(var t of ya(e))uv.call(e,t)&&av(n,t,e[t]);return n},me=(n,e)=>EC(n,IC(e));var va=(n,e)=>{var t={};for(var r in n)cv.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&ya)for(var r of ya(n))e.indexOf(r)<0&&uv.call(n,r)&&(t[r]=n[r]);return t};var ze=null,_a=!1,Wl=1,wC=null,ht=Symbol("SIGNAL");function K(n){let e=ze;return ze=n,e}function Ia(){return ze}var ii={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Kl(n){if(_a)throw new Error("");if(ze===null)return;ze.consumerOnSignalRead(n);let e=ze.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ze.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ze.producers,t!==void 0&&t.producer===n)){ze.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ze&&(!r||DC(i,ze)))return;let o=si(ze),s={producer:n,consumer:ze,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ze.producersTail=s,e!==void 0?e.nextProducer=s:ze.producers=s,o&&hv(n,s)}function lv(){Wl++}function Ql(n){if(!(si(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Wl)){if(!n.producerMustRecompute(n)&&!Ta(n)){Gl(n);return}n.producerRecomputeValue(n),Gl(n)}}function Yl(n){if(n.consumers===void 0)return;let e=_a;_a=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||TC(r)}}finally{_a=e}}function Zl(){return ze?.consumerAllowSignalWrites!==!1}function TC(n){n.dirty=!0,Yl(n),n.consumerMarkedDirty?.(n)}function Gl(n){n.dirty=!1,n.lastCleanEpoch=Wl}function No(n){return n&&dv(n),K(n)}function dv(n){n.producersTail=void 0,n.recomputing=!0}function wa(n,e){K(e),n&&fv(n)}function fv(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(si(n))do t=Jl(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ta(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Ql(t),r!==t.version))return!0}return!1}function oi(n){if(si(n)){let e=n.producers;for(;e!==void 0;)e=Jl(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function hv(n,e){let t=n.consumersTail,r=si(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)hv(i.producer,i)}function Jl(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!si(e)){let o=e.producers;for(;o!==void 0;)o=Jl(o)}return t}function si(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Xl(n){wC?.(n)}function DC(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function ed(n,e){return Object.is(n,e)}function Da(n,e){let t=Object.create(bC);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ql(t),Kl(t),t.value===Ea)throw t.error;return t.value};return r[ht]=t,Xl(t),r}var zl=Symbol("UNSET"),ql=Symbol("COMPUTING"),Ea=Symbol("ERRORED"),bC=me(U({},ii),{value:zl,dirty:!0,error:null,equal:ed,kind:"computed",producerMustRecompute(n){return n.value===zl||n.value===ql},producerRecomputeValue(n){if(n.value===ql)throw new Error("");let e=n.value;n.value=ql;let t=No(n),r,i=!1;try{r=n.computation(),K(null),i=e!==zl&&e!==Ea&&r!==Ea&&n.equal(e,r)}catch(o){r=Ea,n.error=o}finally{wa(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function CC(){throw new Error}var pv=CC;function gv(n){pv(n)}function td(n){pv=n}var SC=null;function nd(n,e){let t=Object.create(vv);t.value=n,e!==void 0&&(t.equal=e);let r=()=>mv(t);return r[ht]=t,Xl(t),[r,s=>rd(t,s),s=>yv(t,s)]}function mv(n){return Kl(n),n.value}function rd(n,e){Zl()||gv(n),n.equal(n.value,e)||(n.value=e,AC(n))}function yv(n,e){Zl()||gv(n),rd(n,e(n.value))}var vv=me(U({},ii),{equal:ed,value:void 0,kind:"signal"});function AC(n){n.version++,lv(),Yl(n),SC?.(n)}function id(n){let e=K(null);try{return n()}finally{K(e)}}var od=me(U({},ii),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function sd(n){if(n.dirty=!1,n.version>0&&!Ta(n))return;n.version++;let e=No(n);try{n.cleanup(),n.fn()}finally{wa(n,e)}}function ot(n){return typeof n=="function"}function ba(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ca=ba(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ro(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ot(r))try{r()}catch(o){e=o instanceof Ca?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_v(o)}catch(s){e=e??[],s instanceof Ca?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ca(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_v(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ro(t,e)}remove(e){let{_finalizers:t}=this;t&&Ro(t,e),e instanceof n&&e._removeParent(this)}};tt.EMPTY=(()=>{let n=new tt;return n.closed=!0,n})();var ad=tt.EMPTY;function Sa(n){return n instanceof tt||n&&"closed"in n&&ot(n.remove)&&ot(n.add)&&ot(n.unsubscribe)}function _v(n){ot(n)?n():n.unsubscribe()}var Dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ai={setTimeout(n,e,...t){let{delegate:r}=ai;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ai;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ev(n){ai.setTimeout(()=>{let{onUnhandledError:e}=Dt;if(e)e(n);else throw n})}function cd(){}var Iv=ud("C",void 0,void 0);function wv(n){return ud("E",void 0,n)}function Tv(n){return ud("N",n,void 0)}function ud(n,e,t){return{kind:n,value:e,error:t}}var hr=null;function ci(n){if(Dt.useDeprecatedSynchronousErrorHandling){let e=!hr;if(e&&(hr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=hr;if(hr=null,t)throw r}}else n()}function Dv(n){Dt.useDeprecatedSynchronousErrorHandling&&hr&&(hr.errorThrown=!0,hr.error=n)}var pr=class extends tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sa(e)&&e.add(this)):this.destination=MC}static create(e,t,r){return new ui(e,t,r)}next(e){this.isStopped?dd(Tv(e),this):this._next(e)}error(e){this.isStopped?dd(wv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dd(Iv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NC=Function.prototype.bind;function ld(n,e){return NC.call(n,e)}var fd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Aa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Aa(r)}else Aa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Aa(t)}}},ui=class extends pr{constructor(e,t,r){super();let i;if(ot(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Dt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ld(e.next,o),error:e.error&&ld(e.error,o),complete:e.complete&&ld(e.complete,o)}):i=e}this.destination=new fd(i)}};function Aa(n){Dt.useDeprecatedSynchronousErrorHandling?Dv(n):Ev(n)}function RC(n){throw n}function dd(n,e){let{onStoppedNotification:t}=Dt;t&&ai.setTimeout(()=>t(n,e))}var MC={closed:!0,next:cd,error:RC,complete:cd};var bv=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Cv(n){return n}function Sv(n){return n.length===0?Cv:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var li=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=PC(t)?t:new ui(t,r,i);return ci(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Av(r),new r((i,o)=>{let s=new ui({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[bv](){return this}pipe(...t){return Sv(t)(this)}toPromise(t){return t=Av(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Av(n){var e;return(e=n??Dt.Promise)!==null&&e!==void 0?e:Promise}function xC(n){return n&&ot(n.next)&&ot(n.error)&&ot(n.complete)}function PC(n){return n&&n instanceof pr||xC(n)&&Sa(n)}function kC(n){return ot(n?.lift)}function Nv(n){return e=>{if(kC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Rv(n,e,t,r,i){return new hd(n,e,t,r,i)}var hd=class extends pr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Mv=ba(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var an=(()=>{class n extends li{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Na(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Mv}next(t){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ad:(this.currentObservers=null,o.push(t),new tt(()=>{this.currentObservers=null,Ro(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new li;return t.source=this,t}}return n.create=(e,t)=>new Na(e,t),n})(),Na=class extends an{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ad}};var Mo=class extends an{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function pd(n,e){return Nv((t,r)=>{let i=0;t.subscribe(Rv(r,o=>{r.next(n.call(e,o,i++))}))})}var gd;function Ra(){return gd}function Vt(n){let e=gd;return gd=n,e}var xv=Symbol("NotFound");function di(n){return n===xv||n?.name==="\u0275NotFound"}var Va="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ee=class extends Error{code;constructor(e,t){super(Ba(e,t)),this.code=e}};function OC(n){return`NG0${Math.abs(n)}`}function Ba(n,e){return`${OC(n)}${e?": "+e:""}`}function he(n){for(let e in n)if(n[e]===he)return e;throw Error("")}function kn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(kn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Nd(n,e){return n?e?`${n} ${e}`:n:e||""}var LC=he({__forward_ref__:he});function ja(n){return n.__forward_ref__=ja,n.toString=function(){return kn(this())},n}function ut(n){return Fv(n)?n():n}function Fv(n){return typeof n=="function"&&n.hasOwnProperty(LC)&&n.__forward_ref__===ja}function ae(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Fo(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ua(n){return FC(n,Ha)}function FC(n,e){return n.hasOwnProperty(e)&&n[e]||null}function VC(n){let e=n?.[Ha]??null;return e||null}function yd(n){return n&&n.hasOwnProperty(xa)?n[xa]:null}var Ha=he({\u0275prov:he}),xa=he({\u0275inj:he}),ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Rd(n){return n&&!!n.\u0275providers}var Md=he({\u0275cmp:he}),xd=he({\u0275dir:he}),Pd=he({\u0275pipe:he});var vd=he({\u0275fac:he}),_r=he({__NG_ELEMENT_ID__:he}),Pv=he({__NG_ENV_ID__:he});function Er(n){return Od(n,"@Component"),n[Md]||null}function kd(n){return Od(n,"@Directive"),n[xd]||null}function Vv(n){return Od(n,"@Pipe"),n[Pd]||null}function Od(n,e){if(n==null)throw new ee(-919,!1)}function $a(n){return typeof n=="string"?n:n==null?"":String(n)}function Bv(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():$a(n)}var jv=he({ngErrorCode:he}),BC=he({ngErrorMessage:he}),jC=he({ngTokenPath:he});function Ld(n,e){return Uv("",-200,e)}function za(n,e){throw new ee(-201,!1)}function Uv(n,e,t){let r=new ee(e,n);return r[jv]=e,r[BC]=n,t&&(r[jC]=t),r}function UC(n){return n[jv]}var _d;function Hv(){return _d}function ct(n){let e=_d;return _d=n,e}function Fd(n,e,t){let r=Ua(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;za(n,"")}var HC={},gr=HC,$C="__NG_DI_FLAG__",Ed=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=mr(t)||0;try{return this.injector.get(e,r&8?null:gr,r)}catch(i){if(di(i))return i;throw i}}};function zC(n,e=0){let t=Ra();if(t===void 0)throw new ee(-203,!1);if(t===null)return Fd(n,void 0,e);{let r=qC(e),i=t.retrieve(n,r);if(di(i)){if(r.optional)return null;throw i}return i}}function se(n,e=0){return(Hv()||zC)(ut(n),e)}function z(n,e){return se(n,mr(e))}function mr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qC(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Id(n){let e=[];for(let t=0;t<n.length;t++){let r=ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=GC(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(se(i,o))}else e.push(se(r))}return e}function GC(n){return n[$C]}function hi(n,e){let t=n.hasOwnProperty(vd);return t?n[vd]:null}function $v(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function zv(n){return n.flat(Number.POSITIVE_INFINITY)}function qa(n,e){n.forEach(t=>Array.isArray(t)?qa(t,e):e(t))}function Vd(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qv(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Gv(n,e,t){let r=pi(n,e);return r>=0?n[r|1]=t:(r=~r,qv(n,r,e,t)),r}function Ga(n,e){let t=pi(n,e);if(t>=0)return n[t|1]}function pi(n,e){return WC(n,e,1)}function WC(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ir={},pt=[],Bo=new ce(""),Bd=new ce("",-1),jd=new ce(""),Po=class{get(e,t=gr){if(t===gr){let i=Uv("",-201);throw i.name="\u0275NotFound",i}return t}};function Ud(n){return{\u0275providers:n}}function Wv(...n){return{\u0275providers:Hd(!0,n),\u0275fromNgModule:!0}}function Hd(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return qa(e,s=>{let c=s;Pa(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Kv(i,o),t}function Kv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$d(i,o=>{e(o,r)})}}function Pa(n,e,t,r){if(n=ut(n),!n)return!1;let i=null,o=yd(n),s=!o&&Er(n);if(!o&&!s){let u=n.ngModule;if(o=yd(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Pa(l,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{qa(o.imports,h=>{Pa(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Kv(l,e)}if(!c){let l=hi(i)||(()=>new i);e({provide:i,useFactory:l,deps:pt},i),e({provide:jd,useValue:i,multi:!0},i),e({provide:Bo,useValue:()=>se(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=n;$d(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function $d(n,e){for(let t of n)Rd(t)&&(t=t.\u0275providers),Array.isArray(t)?$d(t,e):e(t)}var KC=he({provide:String,useValue:he});function Qv(n){return n!==null&&typeof n=="object"&&KC in n}function QC(n){return!!(n&&n.useExisting)}function YC(n){return!!(n&&n.useFactory)}function ka(n){return typeof n=="function"}var jo=new ce(""),Ma={},kv={},md;function Uo(){return md===void 0&&(md=new Po),md}var gt=class{},yr=class extends gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Td(e,s=>this.processProvider(s)),this.records.set(Bd,fi(void 0,this)),i.has("environment")&&this.records.set(gt,fi(void 0,this));let o=this.records.get(jo);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jd,pt,{self:!0}))}retrieve(e,t){let r=mr(t)||0;try{return this.get(e,gr,r)}catch(i){if(di(i))return i;throw i}}destroy(){xo(this),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return xo(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){xo(this);let t=Vt(this),r=ct(void 0),i;try{return e()}finally{Vt(t),ct(r)}}get(e,t=gr,r){if(xo(this),e.hasOwnProperty(Pv))return e[Pv](this);let i=mr(r),o,s=Vt(this),c=ct(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=t0(e)&&Ua(e);h&&this.injectableDefInScope(h)?l=fi(wd(e),Ma):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Uo():this.parent;return t=i&8&&t===gr?null:t,u.get(e,t)}catch(u){let l=UC(u);throw l===-200||l===-201?new ee(l,null):u}finally{ct(c),Vt(s)}}resolveInjectorInitializers(){let e=K(null),t=Vt(this),r=ct(void 0),i;try{let o=this.get(Bo,pt,{self:!0});for(let s of o)s()}finally{Vt(t),ct(r),K(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ut(e);let t=ka(e)?e:ut(e&&e.provide),r=JC(e);if(!ka(e)&&e.multi===!0){let i=this.records.get(t);i||(i=fi(void 0,Ma,!0),i.factory=()=>Id(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=K(null);try{if(t.value===kv)throw Ld(kn(e));return t.value===Ma&&(t.value=kv,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&e0(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wd(n){let e=Ua(n),t=e!==null?e.factory:hi(n);if(t!==null)return t;if(n instanceof ce)throw new ee(204,!1);if(n instanceof Function)return ZC(n);throw new ee(204,!1)}function ZC(n){if(n.length>0)throw new ee(204,!1);let t=VC(n);return t!==null?()=>t.factory(n):()=>new n}function JC(n){if(Qv(n))return fi(void 0,n.useValue);{let e=Yv(n);return fi(e,Ma)}}function Yv(n,e,t){let r;if(ka(n)){let i=ut(n);return hi(i)||wd(i)}else if(Qv(n))r=()=>ut(n.useValue);else if(YC(n))r=()=>n.useFactory(...Id(n.deps||[]));else if(QC(n))r=(i,o)=>se(ut(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ut(n&&(n.useClass||n.provide));if(XC(n))r=()=>new i(...Id(n.deps));else return hi(i)||wd(i)}return r}function xo(n){if(n.destroyed)throw new ee(205,!1)}function fi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function XC(n){return!!n.deps}function e0(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function t0(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Td(n,e){for(let t of n)Array.isArray(t)?Td(t,e):t&&Rd(t)?Td(t.\u0275providers,e):e(t)}function Wa(n,e){let t;n instanceof yr?(xo(n),t=n):t=new Ed(n);let r,i=Vt(t),o=ct(void 0);try{return e()}finally{Vt(i),ct(o)}}function Zv(){return Hv()!==void 0||Ra()!=null}var bt=0,q=1,$=2,Fe=3,mt=4,yt=5,Ho=6,gi=7,We=8,Vn=9,Bt=10,Ve=11,mi=12,zd=13,wr=14,Ct=15,Bn=16,Tr=17,jt=18,$o=19,qd=20,cn=21,Ka=22,On=23,lt=24,Qa=25,zo=26,st=27,Jv=1;var jn=7,qo=8,Dr=9,nt=10;function ln(n){return Array.isArray(n)&&typeof n[Jv]=="object"}function St(n){return Array.isArray(n)&&n[Jv]===!0}function Gd(n){return(n.flags&4)!==0}function br(n){return n.componentOffset>-1}function Go(n){return(n.flags&1)===1}function Cr(n){return!!n.template}function yi(n){return(n[$]&512)!==0}function Sr(n){return(n[$]&256)===256}var Wd="svg",Xv="math";function vt(n){for(;Array.isArray(n);)n=n[bt];return n}function Kd(n,e){return vt(e[n])}function Ut(n,e){return vt(e[n.index])}function Ya(n,e){return n.data[e]}function e_(n,e){return n[e]}function Ht(n,e){let t=e[n];return ln(t)?t:t[bt]}function t_(n){return(n[$]&4)===4}function Za(n){return(n[$]&128)===128}function n_(n){return St(n[Fe])}function Wo(n,e){return e==null?null:n[e]}function Qd(n){n[Tr]=0}function Yd(n){n[$]&1024||(n[$]|=1024,Za(n)&&vi(n))}function r_(n,e){for(;n>0;)e=e[wr],n--;return e}function Ko(n){return!!(n[$]&9216||n[lt]?.dirty)}function Ja(n){n[Bt].changeDetectionScheduler?.notify(8),n[$]&64&&(n[$]|=1024),Ko(n)&&vi(n)}function vi(n){n[Bt].changeDetectionScheduler?.notify(0);let e=Ln(n);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Za(e)));)e=Ln(e)}function Zd(n,e){if(Sr(n))throw new ee(911,!1);n[cn]===null&&(n[cn]=[]),n[cn].push(e)}function i_(n,e){if(n[cn]===null)return;let t=n[cn].indexOf(e);t!==-1&&n[cn].splice(t,1)}function Ln(n){let e=n[Fe];return St(e)?e[Fe]:e}function Jd(n){return n[gi]??=[]}function Xd(n){return n.cleanup??=[]}function o_(n,e,t,r){let i=Jd(e);i.push(t),n.firstCreatePass&&Xd(n).push(r,i.length-1)}var Z={lFrame:w_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Dd=!1;function s_(){return Z.lFrame.elementDepthCount}function a_(){Z.lFrame.elementDepthCount++}function c_(){Z.lFrame.elementDepthCount--}function ef(){return Z.bindingsEnabled}function u_(){return Z.skipHydrationRootTNode!==null}function l_(n){return Z.skipHydrationRootTNode===n}function d_(){Z.skipHydrationRootTNode=null}function _e(){return Z.lFrame.lView}function $t(){return Z.lFrame.tView}function J(n){return Z.lFrame.contextLView=n,n[We]}function X(n){return Z.lFrame.contextLView=null,n}function zt(){let n=tf();for(;n!==null&&n.type===64;)n=n.parent;return n}function tf(){return Z.lFrame.currentTNode}function f_(){let n=Z.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function _i(n,e){let t=Z.lFrame;t.currentTNode=n,t.isParent=e}function nf(){return Z.lFrame.isParent}function h_(){Z.lFrame.isParent=!1}function p_(){return Z.lFrame.contextLView}function rf(){return Dd}function ko(n){let e=Dd;return Dd=n,e}function g_(n){return Z.lFrame.bindingIndex=n}function of(){return Z.lFrame.bindingIndex++}function m_(n){let e=Z.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function y_(){return Z.lFrame.inI18n}function v_(n,e){let t=Z.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xa(e)}function __(){return Z.lFrame.currentDirectiveIndex}function Xa(n){Z.lFrame.currentDirectiveIndex=n}function E_(n){let e=Z.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function sf(){return Z.lFrame.currentQueryIndex}function ec(n){Z.lFrame.currentQueryIndex=n}function n0(n){let e=n[q];return e.type===2?e.declTNode:e.type===1?n[yt]:null}function af(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=n0(o),i===null||(o=o[wr],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Z.lFrame=I_();return r.currentTNode=e,r.lView=n,!0}function tc(n){let e=I_(),t=n[q];Z.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function I_(){let n=Z.lFrame,e=n===null?null:n.child;return e===null?w_(n):e}function w_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function T_(){let n=Z.lFrame;return Z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cf=T_;function nc(){let n=T_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function D_(n){return(Z.lFrame.contextLView=r_(n,Z.lFrame.contextLView))[We]}function Ar(){return Z.lFrame.selectedIndex}function Un(n){Z.lFrame.selectedIndex=n}function b_(){let n=Z.lFrame;return Ya(n.tView,n.selectedIndex)}function Ke(){Z.lFrame.currentNamespace=Wd}function qt(){r0()}function r0(){Z.lFrame.currentNamespace=null}function C_(){return Z.lFrame.currentNamespace}var S_=!0;function rc(){return S_}function ic(n){S_=n}function bd(n,e=null,t=null,r){let i=A_(n,e,t,r);return i.resolveInjectorInitializers(),i}function A_(n,e=null,t=null,r,i=new Set){let o=[t||pt,Wv(n)];return r=r||(typeof n=="object"?void 0:kn(n)),new yr(o,e||Uo(),r||null,i)}var Fn=class n{static THROW_IF_NOT_FOUND=gr;static NULL=new Po;static create(e,t){if(Array.isArray(e))return bd({name:""},t,e,"");{let r=e.name??"";return bd({name:r},e.parent,e.providers,r)}}static \u0275prov=ae({token:n,providedIn:"any",factory:()=>se(Bd)});static __NG_ELEMENT_ID__=-1},At=new ce(""),Qo=(()=>{class n{static __NG_ELEMENT_ID__=i0;static __NG_ENV_ID__=t=>t}return n})(),Oa=class extends Qo{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Sr(this._lView)}onDestroy(e){let t=this._lView;return Zd(t,e),()=>i_(t,e)}};function i0(){return new Oa(_e())}var N_=!1,Ei=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Mo(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new li(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ae({token:n,providedIn:"root",factory:()=>new n})}return n})(),Cd=class extends an{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Zv()&&(this.destroyRef=z(Qo,{optional:!0})??void 0,this.pendingTasks=z(Ei,{optional:!0})??void 0)}emit(e){let t=K(null);try{super.next(e)}finally{K(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof tt&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},qe=Cd;function La(...n){}function uf(n){let e,t;function r(){n=La;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function lf(n){return queueMicrotask(()=>n()),()=>{n=La}}var df="isAngularZone",Oo=df+"_ID",o0=0,Ge=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new qe(!1);onMicrotaskEmpty=new qe(!1);onStable=new qe(!1);onError=new qe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=N_}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,c0(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(df)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,s0,La,La);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},s0={};function ff(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function a0(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uf(()=>{n.callbackScheduled=!1,Sd(n),n.isCheckStableRunning=!0,ff(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Sd(n)}function c0(n){let e=()=>{a0(n)},t=o0++;n._inner=n._inner.fork({name:"angular",properties:{[df]:!0,[Oo]:t,[Oo+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(u0(u))return r.invokeTask(o,s,c,u);try{return Ov(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Lv(n)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return Ov(n),r.invoke(o,s,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!l0(u)&&e(),Lv(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Sd(n),ff(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Sd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Ov(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Lv(n){n._nesting--,ff(n)}var Lo=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new qe;onMicrotaskEmpty=new qe;onStable=new qe;onError=new qe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function u0(n){return R_(n,"__ignore_ng_zone__")}function l0(n){return R_(n,"__scheduler_tick__")}function R_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var un=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nr=new ce("",{factory:()=>{let n=z(Ge),e=z(gt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(un),t.handleError(r))})}}}),M_={provide:Bo,useValue:()=>{let n=z(un,{optional:!0})},multi:!0};function de(n,e){let[t,r,i]=nd(n,e?.equal),o=t,s=o[ht];return o.set=r,o.update=i,o.asReadonly=x_.bind(o),o}function x_(){let n=this[ht];if(n.readonlyFn===void 0){let e=()=>this();e[ht]=n,n.readonlyFn=e}return n.readonlyFn}var oc=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=d0}return n})();function d0(){return new oc(_e(),zt())}var vr=class{},Yo=new ce("",{factory:()=>!0});var hf=new ce("");var sc=(()=>{class n{static \u0275prov=ae({token:n,providedIn:"root",factory:()=>new Ad})}return n})(),Ad=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Fa=class{[ht];constructor(e){this[ht]=e}destroy(){this[ht].destroy()}};function _t(n,e){let t=e?.injector??z(Fn),r=e?.manualCleanup!==!0?t.get(Qo):null,i,o=t.get(oc,null,{optional:!0}),s=t.get(vr);return o!==null?(i=p0(o.view,s,n),r instanceof Oa&&r._lView===o.view&&(r=null)):i=g0(n,t.get(sc),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Fa(i)}var P_=me(U({},od),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=ko(!1);try{sd(this)}finally{ko(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=K(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],K(n)}}}),f0=me(U({},P_),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(oi(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),h0=me(U({},P_),{consumerMarkedDirty(){this.view[$]|=8192,vi(this.view),this.notifier.notify(13)},destroy(){if(oi(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[On]?.delete(this)}});function p0(n,e,t){let r=Object.create(h0);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=k_(r,t),n[On]??=new Set,n[On].add(r),r.consumerMarkedDirty(r),r}function g0(n,e,t){let r=Object.create(f0);return r.fn=k_(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function k_(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Zo(n){return id(n)}function Ic(n){return{toString:n}.toString()}function b0(n){return typeof n=="function"}function uE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var fc=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function C0(n){return n.type.prototype.ngOnChanges&&(n.setInput=A0),S0}function S0(){let n=dE(this),e=n?.current;if(e){let t=n.previous;if(t===Ir)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function A0(n,e,t,r,i){let o=this.declaredInputs[r],s=dE(n)||N0(n,{previous:Ir,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new fc(l&&l.currentValue,t,u===Ir),uE(n,e,i,t)}var lE="__ngSimpleChanges__";function dE(n){return n[lE]||null}function N0(n,e){return n[lE]=e}var O_=[];var pe=function(n,e=null,t){for(let r=0;r<O_.length;r++){let i=O_[r];i(n,e,t)}},ue=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ue||{});function R0(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=C0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function fE(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function cc(n,e,t){hE(n,e,3,t)}function uc(n,e,t,r){(n[$]&3)===t&&hE(n,e,t,r)}function pf(n,e){let t=n[$];(t&3)===e&&(t&=16383,t+=1,n[$]=t)}function hE(n,e,t,r){let i=r!==void 0?n[Tr]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Tr]+=65536),(c<o||o==-1)&&(M0(n,t,e,u),n[Tr]=(n[Tr]&4294901760)+u+2),u++}function L_(n,e){pe(ue.LifecycleHookStart,n,e);let t=K(null);try{e.call(n)}finally{K(t),pe(ue.LifecycleHookEnd,n,e)}}function M0(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[$]>>14<n[Tr]>>16&&(n[$]&3)===e&&(n[$]+=16384,L_(c,o)):L_(c,o)}var wi=-1,es=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function x0(n){return(n.flags&8)!==0}function P0(n){return(n.flags&16)!==0}function k0(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];L0(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function O0(n){return n===3||n===4||n===6}function L0(n){return n.charCodeAt(0)===64}function jf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?F_(n,t,i,null,e[++r]):F_(n,t,i,null,null))}}return n}function F_(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function pE(n){return n!==wi}function hc(n){return n&32767}function F0(n){return n>>16}function pc(n,e){let t=F0(n),r=e;for(;t>0;)r=r[wr],t--;return r}var If=!0;function V_(n){let e=If;return If=n,e}var V0=256,gE=V0-1,mE=5,B0=0,Gt={};function j0(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_r)&&(r=t[_r]),r==null&&(r=t[_r]=B0++);let i=r&gE,o=1<<i;e.data[n+(i>>mE)]|=o}function yE(n,e){let t=vE(n,e);if(t!==-1)return t;let r=e[q];r.firstCreatePass&&(n.injectorIndex=e.length,gf(r.data,n),gf(e,null),gf(r.blueprint,null));let i=Uf(n,e),o=n.injectorIndex;if(pE(i)){let s=hc(i),c=pc(i,e),u=c[q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function gf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Uf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=TE(i),r===null)return wi;if(t++,i=i[wr],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return wi}function U0(n,e,t){j0(n,e,t)}function _E(n,e,t){if(t&8||n!==void 0)return n;za(e,"NodeInjector")}function EE(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Vn],o=ct(void 0);try{return i?i.get(e,r,t&8):Fd(e,r,t&8)}finally{ct(o)}}return _E(r,e,t)}function IE(n,e,t,r=0,i){if(n!==null){if(e[$]&2048&&!(r&2)){let s=q0(n,e,t,r,Gt);if(s!==Gt)return s}let o=wE(n,e,t,r,Gt);if(o!==Gt)return o}return EE(e,t,r,i)}function wE(n,e,t,r,i){let o=$0(t);if(typeof o=="function"){if(!af(e,n,r))return r&1?_E(i,t,r):EE(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))za(t);else return s}finally{cf()}}else if(typeof o=="number"){let s=null,c=vE(n,e),u=wi,l=r&1?e[Ct][yt]:null;for((c===-1||r&4)&&(u=c===-1?Uf(n,e):e[c+8],u===wi||!j_(r,!1)?c=-1:(s=e[q],c=hc(u),e=pc(u,e)));c!==-1;){let h=e[q];if(B_(o,c,h.data)){let p=H0(c,e,t,s,r,l);if(p!==Gt)return p}u=e[c+8],u!==wi&&j_(r,e[q].data[c+8]===l)&&B_(o,c,e)?(s=h,c=hc(u),e=pc(u,e)):c=-1}}return i}function H0(n,e,t,r,i,o){let s=e[q],c=s.data[n+8],u=r==null?br(c)&&If:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=lc(c,s,t,u,l);return h!==null?gc(e,s,h,c,i):Gt}function lc(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let E=p;E<m;E++){let A=s[E];if(E<u&&t===A||E>=u&&A.type===t)return E}if(i){let E=s[u];if(E&&Cr(E)&&E.type===t)return u}return null}function gc(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof es){let c=o;if(c.resolving){let E=Bv(s[t]);throw Ld(E)}let u=V_(c.canSeeViewProviders);c.resolving=!0;let l=s[t].type||s[t],h,p=c.injectImpl?ct(c.injectImpl):null,m=af(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&R0(t,s[t],e)}finally{p!==null&&ct(p),V_(u),c.resolving=!1,cf()}}return o}function $0(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_r)?n[_r]:void 0;return typeof e=="number"?e>=0?e&gE:z0:e}function B_(n,e,t){let r=1<<n;return!!(t[e+(n>>mE)]&r)}function j_(n,e){return!(n&2)&&!(n&1&&e)}var Rr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return IE(this._tNode,this._lView,e,mr(r),t)}};function z0(){return new Rr(zt(),_e())}function q0(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[$]&2048&&!yi(s);){let c=wE(o,s,t,r|2,Gt);if(c!==Gt)return c;let u=o.parent;if(!u){let l=s[qd];if(l){let h=l.get(t,Gt,r);if(h!==Gt)return h}u=TE(s),s=s[wr]}o=u}return i}function TE(n){let e=n[q],t=e.type;return t===2?e.declTNode:t===1?n[yt]:null}function G0(){return Si(zt(),_e())}function Si(n,e){return new Ai(Ut(n,e))}var Ai=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=G0}return n})();function W0(n){return n instanceof Ai?n.nativeElement:n}function K0(){return this._results[Symbol.iterator]()}var mc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new an}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=zv(e);(this._changesDetected=!$v(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=K0};function DE(n){return(n.flags&128)===128}var Hf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Hf||{}),bE=new Map,Q0=0;function Y0(){return Q0++}function Z0(n){bE.set(n[$o],n)}function wf(n){bE.delete(n[$o])}var U_="__ngContext__";function Ti(n,e){ln(e)?(n[U_]=e[$o],Z0(e)):n[U_]=e}function CE(n){return AE(n[mi])}function SE(n){return AE(n[mt])}function AE(n){for(;n!==null&&!St(n);)n=n[mt];return n}var J0;function $f(n){J0=n}var wc=new ce("",{factory:()=>X0}),X0="ng";var Tc=new ce(""),ss=new ce("",{providedIn:"platform",factory:()=>"unknown"});var Dc=new ce("",{factory:()=>z(At).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var NE=!1,RE=new ce("",{factory:()=>NE});var eS=(n,e,t,r)=>{};function tS(n,e,t,r){eS(n,e,t,r)}function zf(n){return(n.flags&32)===32}var nS=()=>null;function ME(n,e,t=!1){return nS(n,e,t)}function xE(n,e){let t=n.contentQueries;if(t!==null){let r=K(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];ec(o),c.contentQueries(2,e[s],s)}}}finally{K(r)}}}function Tf(n,e,t){ec(0);let r=K(null);try{e(n,t)}finally{K(r)}}function PE(n,e,t){if(Gd(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{K(r)}}}var Rt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Rt||{});var yc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Va})`}};function qf(n){return n instanceof yc?n.changingThisBreaksApplicationSecurity:n}function kE(n,e){let t=OE(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Va})`)}return t===e}function OE(n){return n instanceof yc&&n.getTypeName()||null}var rS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LE(n){return n=String(n),n.match(rS)?n:"unsafe:"+n}function iS(n,e){return n.createText(e)}function oS(n,e,t){n.setValue(e,t)}function FE(n,e,t){return n.createElement(e,t)}function vc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function VE(n,e,t){n.appendChild(e,t)}function H_(n,e,t,r,i){r!==null?vc(n,e,t,r,i):VE(n,e,t)}function sS(n,e,t,r){n.removeChild(null,e,t,r)}function aS(n,e,t){n.setAttribute(e,"style",t)}function cS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function BE(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&k0(n,e,r),i!==null&&cS(n,e,i),o!==null&&aS(n,e,o)}var Gf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Gf||{});function Wf(n){let e=uS();return e?e.sanitize(Gf.URL,n)||"":kE(n,"URL")?qf(n):LE($a(n))}function uS(){let n=_e();return n&&n[Bt].sanitizer}function Pr(n){return n.ownerDocument.defaultView}function lS(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var jE="ng-template";function dS(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&lS(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Kf(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Kf(n){return n.type===4&&n.value!==jE}function fS(n,e,t){let r=n.type===4&&!t?jE:n.value;return e===r}function hS(n,e,t){let r=4,i=n.attrs,o=i!==null?mS(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Nt(r)&&!Nt(u))return!1;if(s&&Nt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!fS(n,u,t)||u===""&&e.length===1){if(Nt(r))return!1;s=!0}}else if(r&8){if(i===null||!dS(n,i,u,t)){if(Nt(r))return!1;s=!0}}else{let l=e[++c],h=pS(u,i,Kf(n),t);if(h===-1){if(Nt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nt(r))return!1;s=!0}}}}return Nt(r)||s}function Nt(n){return(n&1)===0}function pS(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yS(e,n)}function gS(n,e,t=!1){for(let r=0;r<e.length;r++)if(hS(n,e[r],t))return!0;return!1}function mS(n){for(let e=0;e<n.length;e++){let t=n[e];if(O0(t))return e}return n.length}function yS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $_(n,e){return n?":not("+e.trim()+")":e}function vS(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nt(s)&&(e+=$_(o,i),i=""),r=s,o=o||!Nt(r);t++}return i!==""&&(e+=$_(o,i)),e}function _S(n){return n.map(vS).join(",")}function ES(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Nt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var $n={};function Qf(n,e,t,r,i,o,s,c,u,l,h){let p=st+r,m=p+i,E=IS(p,m),A=typeof l=="function"?l():l;return E[q]={type:n,blueprint:E,template:t,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function IS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:$n);return t}function wS(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Qf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Yf(n,e,t,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[bt]=i,p[$]=r|4|128|8|64|1024,(l!==null||n&&n[$]&2048)&&(p[$]|=2048),Qd(p),p[Fe]=p[wr]=n,p[We]=t,p[Bt]=s||n&&n[Bt],p[Ve]=c||n&&n[Ve],p[Vn]=u||n&&n[Vn]||null,p[yt]=o,p[$o]=Y0(),p[Ho]=h,p[qd]=l,p[Ct]=e.type==2?n[Ct]:p,p}function TS(n,e,t){let r=Ut(e,n),i=wS(t),o=n[Bt].rendererFactory,s=Zf(n,Yf(n,i,null,UE(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function UE(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function HE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zf(n,e){return n[mi]?n[zd][mt]=e:n[mi]=e,n[zd]=e,e}function ie(n=1){$E($t(),_e(),Ar()+n,!1)}function $E(n,e,t,r){if(!r)if((e[$]&3)===3){let o=n.preOrderCheckHooks;o!==null&&cc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&uc(e,o,0,t)}Un(t)}var bc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(bc||{});function Df(n,e,t,r){let i=K(null);try{let[o,s,c]=n.inputs[t],u=null;(s&bc.SignalBased)!==0&&(u=e[o][ht]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):uE(e,u,o,r)}finally{K(i)}}var Wt=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Wt||{}),DS;function Jf(n,e){return DS(n,e)}var Di=new Set,Xf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Xf||{}),as=new ce(""),z_=new Set;function eh(n){z_.has(n)||(z_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var zE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ae({token:n,providedIn:"root",factory:()=>new n})}return n})();var bS=new ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:z(gt)})});function qE(n,e,t){let r=n.get(bS);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function CS(n,e){for(let[t,r]of e)qE(n,r.animateFns)}function q_(n,e,t,r){let i=n?.[zo]?.enter;e!==null&&i&&i.has(t.index)&&CS(r,i)}function Ii(n,e,t,r,i,o,s,c){if(i!=null){let u,l=!1;St(i)?u=i:ln(i)&&(l=!0,i=i[bt]);let h=vt(i);n===0&&r!==null?(q_(c,r,o,t),s==null?VE(e,r,h):vc(e,r,h,s||null,!0)):n===1&&r!==null?(q_(c,r,o,t),vc(e,r,h,s||null,!0)):n===2?G_(c,o,t,p=>{sS(e,h,l,p)}):n===3&&G_(c,o,t,()=>{e.destroyNode(h)}),u!=null&&BS(e,n,t,u,o,r,s)}}function SS(n,e){GE(n,e),e[bt]=null,e[yt]=null}function AS(n,e,t,r,i,o){r[bt]=i,r[yt]=e,Cc(n,r,t,1,i,o)}function GE(n,e){e[Bt].changeDetectionScheduler?.notify(9),Cc(n,e,e[Ve],2,null,null)}function NS(n){let e=n[mi];if(!e)return mf(n[q],n);for(;e;){let t=null;if(ln(e))t=e[mi];else{let r=e[nt];r&&(t=r)}if(!t){for(;e&&!e[mt]&&e!==n;)ln(e)&&mf(e[q],e),e=e[Fe];e===null&&(e=n),ln(e)&&mf(e[q],e),t=e&&e[mt]}e=t}}function th(n,e){let t=n[Dr],r=t.indexOf(e);t.splice(r,1)}function WE(n,e){if(Sr(e))return;let t=e[Ve];t.destroyNode&&Cc(n,e,t,3,null,null),NS(e)}function mf(n,e){if(Sr(e))return;let t=K(null);try{e[$]&=-129,e[$]|=256,e[lt]&&oi(e[lt]),xS(n,e),MS(n,e),e[q].type===1&&e[Ve].destroy();let r=e[Bn];if(r!==null&&St(e[Fe])){r!==e[Fe]&&th(r,e);let i=e[jt];i!==null&&i.detachView(n)}wf(e)}finally{K(t)}}function G_(n,e,t,r){let i=n?.[zo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Di.add(n),qE(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),RS(n,r)}else n&&Di.delete(n),r(!1)},i)}function RS(n,e){let t=n[zo]?.running;if(t){t.then(()=>{n[zo].running=void 0,Di.delete(n),e(!0)});return}e(!1)}function MS(n,e){let t=n.cleanup,r=e[gi];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[gi]=null);let i=e[cn];if(i!==null){e[cn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[On];if(o!==null){e[On]=null;for(let s of o)s.destroy()}}function xS(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof es)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];pe(ue.LifecycleHookStart,c,u);try{u.call(c)}finally{pe(ue.LifecycleHookEnd,c,u)}}else{pe(ue.LifecycleHookStart,i,o);try{o.call(i)}finally{pe(ue.LifecycleHookEnd,i,o)}}}}}function PS(n,e,t){return kS(n,e.parent,t)}function kS(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[bt];if(br(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Rt.None||i===Rt.Emulated)return null}return Ut(r,t)}function OS(n,e,t){return FS(n,e,t)}function LS(n,e,t){return n.type&40?Ut(n,t):null}var FS=LS,W_;function nh(n,e,t,r){let i=PS(n,r,e),o=e[Ve],s=r.parent||e[yt],c=OS(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)H_(o,i,t[u],c,!1);else H_(o,i,t,c,!1);W_!==void 0&&W_(o,r,e,t,i)}function Jo(n,e){if(e!==null){let t=e.type;if(t&3)return Ut(e,n);if(t&4)return bf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Jo(n,r);{let i=n[e.index];return St(i)?bf(-1,i):vt(i)}}else{if(t&128)return Jo(n,e.next);if(t&32)return Jf(e,n)()||vt(n[e.index]);{let r=KE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ln(n[Ct]);return Jo(i,r)}else return Jo(n,e.next)}}}return null}function KE(n,e){if(e!==null){let r=n[Ct][yt],i=e.projection;return r.projection[i]}return null}function bf(n,e){let t=nt+n+1;if(t<e.length){let r=e[t],i=r[q].firstChild;if(i!==null)return Jo(r,i)}return e[jn]}function rh(n,e,t,r,i,o,s){for(;t!=null;){let c=r[Vn];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&Ti(vt(u),r),t.flags|=2),!zf(t))if(l&8)rh(n,e,t.child,r,i,o,!1),Ii(e,n,c,i,u,t,o,r);else if(l&32){let h=Jf(t,r),p;for(;p=h();)Ii(e,n,c,i,p,t,o,r);Ii(e,n,c,i,u,t,o,r)}else l&16?VS(n,e,r,t,i,o):Ii(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Cc(n,e,t,r,i,o){rh(t,r,n.firstChild,e,i,o,!1)}function VS(n,e,t,r,i,o){let s=t[Ct],u=s[yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ii(e,n,t[Vn],i,h,r,o,t)}else{let l=u,h=s[Fe];DE(r)&&(l.flags|=128),rh(n,e,l,h,i,o,!0)}}function BS(n,e,t,r,i,o,s){let c=r[jn],u=vt(r);c!==u&&Ii(e,n,t,o,c,i,s);for(let l=nt;l<r.length;l++){let h=r[l];Cc(h[q],h,n,e,o,c)}}function jS(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Wt.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wt.Important),n.setStyle(t,r,i,o))}}function QE(n,e,t,r,i){let o=Ar(),s=r&2;try{Un(-1),s&&e.length>st&&$E(n,e,st,!1);let c=s?ue.TemplateUpdateStart:ue.TemplateCreateStart;pe(c,i,t),t(r,i)}finally{Un(o);let c=s?ue.TemplateUpdateEnd:ue.TemplateCreateEnd;pe(c,i,t)}}function ih(n,e,t){KS(n,e,t),(t.flags&64)===64&&QS(n,e,t)}function YE(n,e,t=Ut){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function US(n,e,t,r){let o=r.get(RE,NE)||t===Rt.ShadowDom||t===Rt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return HS(s),s}function HS(n){$S(n)}var $S=()=>null;function zS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qS(n,e,t,r,i,o){let s=e[q];if(oh(n,s,e,t,r)){br(n)&&WS(e,n.index);return}n.type&3&&(t=zS(t)),GS(n,e,t,r,i,o)}function GS(n,e,t,r,i,o){if(n.type&3){let s=Ut(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function WS(n,e){let t=Ht(e,n);t[$]&16||(t[$]|=64)}function KS(n,e,t){let r=t.directiveStart,i=t.directiveEnd;br(t)&&TS(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||yE(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=gc(e,n,s,t);if(Ti(u,e),o!==null&&ZS(e,s-r,u,c,t,o),Cr(c)){let l=Ht(t.index,e);l[We]=gc(e,n,s,t)}}}function QS(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=__();try{Un(o);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];Xa(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&YS(u,l)}}finally{Un(-1),Xa(s)}}function YS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function ZE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];gS(e,o.selectors,!1)&&(r??=[],Cr(o)?r.unshift(o):r.push(o))}return r}function ZS(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Df(r,t,u,l)}}function JS(n,e,t,r,i){let o=st+t,s=e[q],c=i(s,e,n,r,t);e[o]=c,_i(n,!0);let u=n.type===2;return u?(BE(e[Ve],c,n),(s_()===0||Go(n))&&Ti(c,e),a_()):Ti(c,e),rc()&&(!u||!zf(n))&&nh(s,e,c,n),n}function XS(n){let e=n;return nf()?h_():(e=e.parent,_i(e,!1)),e}function eA(n,e){let t=n[Vn];if(!t)return;let r;try{r=t.get(Nr,null)}catch{r=null}r?.(e)}function oh(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Df(p,t[l],h,i),c=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Df(h,l,r,i),c=!0}return c}function tA(n,e){let t=Ht(e,n),r=t[q];nA(r,t);let i=t[bt];i!==null&&t[Ho]===null&&(t[Ho]=ME(i,t[Vn])),pe(ue.ComponentStart);try{sh(r,t,t[We])}finally{pe(ue.ComponentEnd,t[We])}}function nA(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function sh(n,e,t){tc(e);try{let r=n.viewQuery;r!==null&&Tf(1,r,t);let i=n.template;i!==null&&QE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[jt]?.finishViewCreation(n),n.staticContentQueries&&xE(n,e),n.staticViewQueries&&Tf(2,n.viewQuery,t);let o=n.components;o!==null&&rA(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[$]&=-5,nc()}}function rA(n,e){for(let t=0;t<e.length;t++)tA(n,e[t])}function iA(n,e,t,r){let i=K(null);try{let o=e.tView,c=n[$]&4096?4096:16,u=Yf(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Bn]=l;let h=n[jt];return h!==null&&(u[jt]=h.createEmbeddedView(o)),sh(o,u,t),u}finally{K(i)}}function K_(n,e){return!e||e.firstChild===null||DE(n)}function ts(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(vt(o)),St(o)&&JE(o,r);let s=t.type;if(s&8)ts(n,e,t.child,r);else if(s&32){let c=Jf(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=KE(e,t);if(Array.isArray(c))r.push(...c);else{let u=Ln(e[Ct]);ts(u[q],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function JE(n,e){for(let t=nt;t<n.length;t++){let r=n[t],i=r[q].firstChild;i!==null&&ts(r[q],r,i,e)}n[jn]!==n[bt]&&e.push(n[jn])}function XE(n){if(n[Qa]!==null){for(let e of n[Qa])e.impl.addSequence(e);n[Qa].length=0}}var eI=[];function oA(n){return n[lt]??sA(n)}function sA(n){let e=eI.pop()??Object.create(cA);return e.lView=n,e}function aA(n){n.lView[lt]!==n&&(n.lView=null,eI.push(n))}var cA=me(U({},ii),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{vi(n.lView)},consumerOnSignalRead(){this.lView[lt]=this}});function uA(n){let e=n[lt]??Object.create(lA);return e.lView=n,e}var lA=me(U({},ii),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ln(n.lView);for(;e&&!tI(e[q]);)e=Ln(e);e&&Yd(e)},consumerOnSignalRead(){this.lView[lt]=this}});function tI(n){return n.type!==2}function nI(n){if(n[On]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[On])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[$]&8192)}}var dA=100;function rI(n,e=0){let r=n[Bt].rendererFactory,i=!1;i||r.begin?.();try{fA(n,e)}finally{i||r.end?.()}}function fA(n,e){let t=rf();try{ko(!0),Cf(n,e);let r=0;for(;Ko(n);){if(r===dA)throw new ee(103,!1);r++,Cf(n,1)}}finally{ko(t)}}function hA(n,e,t,r){if(Sr(e))return;let i=e[$],o=!1,s=!1;tc(e);let c=!0,u=null,l=null;o||(tI(n)?(l=oA(e),u=No(l)):Ia()===null?(c=!1,l=uA(e),u=No(l)):e[lt]&&(oi(e[lt]),e[lt]=null));try{Qd(e),g_(n.bindingStartIndex),t!==null&&QE(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let E=n.preOrderCheckHooks;E!==null&&cc(e,E,null)}else{let E=n.preOrderHooks;E!==null&&uc(e,E,0,null),pf(e,0)}if(s||pA(e),nI(e),iI(e,0),n.contentQueries!==null&&xE(n,e),!o)if(h){let E=n.contentCheckHooks;E!==null&&cc(e,E)}else{let E=n.contentHooks;E!==null&&uc(e,E,1),pf(e,1)}mA(n,e);let p=n.components;p!==null&&sI(e,p,0);let m=n.viewQuery;if(m!==null&&Tf(2,m,r),!o)if(h){let E=n.viewCheckHooks;E!==null&&cc(e,E)}else{let E=n.viewHooks;E!==null&&uc(e,E,2),pf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ka]){for(let E of e[Ka])E();e[Ka]=null}o||(XE(e),e[$]&=-73)}catch(h){throw o||vi(e),h}finally{l!==null&&(wa(l,u),c&&aA(l)),nc()}}function iI(n,e){for(let t=CE(n);t!==null;t=SE(t))for(let r=nt;r<t.length;r++){let i=t[r];oI(i,e)}}function pA(n){for(let e=CE(n);e!==null;e=SE(e)){if(!(e[$]&2))continue;let t=e[Dr];for(let r=0;r<t.length;r++){let i=t[r];Yd(i)}}}function gA(n,e,t){pe(ue.ComponentStart);let r=Ht(e,n);try{oI(r,t)}finally{pe(ue.ComponentEnd,r[We])}}function oI(n,e){Za(n)&&Cf(n,e)}function Cf(n,e){let r=n[q],i=n[$],o=n[lt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ta(o)),s||=!1,o&&(o.dirty=!1),n[$]&=-9217,s)hA(r,n,r.template,n[We]);else if(i&8192){let c=K(null);try{nI(n),iI(n,1);let u=r.components;u!==null&&sI(n,u,1),XE(n)}finally{K(c)}}}function sI(n,e,t){for(let r=0;r<e.length;r++)gA(n,e[r],t)}function mA(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Un(~i);else{let o=i,s=t[++r],c=t[++r];v_(s,o);let u=e[o];pe(ue.HostBindingsUpdateStart,u);try{c(2,u)}finally{pe(ue.HostBindingsUpdateEnd,u)}}}}finally{Un(-1)}}function ah(n,e){let t=rf()?64:1088;for(n[Bt].changeDetectionScheduler?.notify(e);n;){n[$]|=t;let r=Ln(n);if(yi(n)&&!r)return n;n=r}return null}function aI(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yA(n,e,t,r=!0){let i=e[q];if(vA(i,e,n,t),r){let s=bf(t,n),c=e[Ve],u=c.parentNode(n[jn]);u!==null&&AS(i,n[yt],c,e,u,s)}let o=e[Ho];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Sf(n,e){if(n.length<=nt)return;let t=nt+e,r=n[t];if(r){let i=r[Bn];i!==null&&i!==n&&th(i,r),e>0&&(n[t-1][mt]=r[mt]);let o=Vo(n,nt+e);SS(r[q],r);let s=o[jt];s!==null&&s.detachView(o[q]),r[Fe]=null,r[mt]=null,r[$]&=-129}return r}function vA(n,e,t,r){let i=nt+r,o=t.length;r>0&&(t[i-1][mt]=e),r<o-nt?(e[mt]=t[i],Vd(t,nt+r,e)):(t.push(e),e[mt]=null),e[Fe]=t;let s=e[Bn];s!==null&&t!==s&&cI(s,e);let c=e[jt];c!==null&&c.insertView(n),Ja(e),e[$]|=128}function cI(n,e){let t=n[Dr],r=e[Fe];if(ln(r))n[$]|=2;else{let i=r[Fe][Ct];e[Ct]!==i&&(n[$]|=2)}t===null?n[Dr]=[e]:t.push(e)}var bi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[q];return ts(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[We]}set context(e){this._lView[We]=e}get destroyed(){return Sr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(St(e)){let t=e[qo],r=t?t.indexOf(this):-1;r>-1&&(Sf(e,r),Vo(t,r))}this._attachedToViewContainer=!1}WE(this._lView[q],this._lView)}onDestroy(e){Zd(this._lView,e)}markForCheck(){ah(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Ja(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,rI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=yi(this._lView),t=this._lView[Bn];t!==null&&!e&&th(t,this._lView),GE(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=yi(this._lView),r=this._lView[Bn];r!==null&&!t&&cI(r,this._lView),Ja(this._lView)}};var Hn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_A;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=iA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new bi(o)}}return n})();function _A(){return ch(zt(),_e())}function ch(n,e){return n.type&4?new Hn(e,n,Si(n,e)):null}function uh(n,e,t,r,i){let o=n.data[e];if(o===null)o=EA(n,e,t,r,i),y_()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=f_();o.injectorIndex=s===null?-1:s.injectorIndex}return _i(o,!0),o}function EA(n,e,t,r,i){let o=tf(),s=nf(),c=s?o:o&&o.parent,u=n.data[e]=wA(n,c,t,e,r,i);return IA(n,u,o,s),u}function IA(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function wA(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return u_()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var TA=()=>null;function Q_(n,e){return TA(n,e)}var uI=class{},Sc=class{},Af=class{resolveComponentFactory(e){throw new ee(917,!1)}},Ac=class{static NULL=new Af},Mr=class{};var lI=(()=>{class n{static \u0275prov=ae({token:n,providedIn:"root",factory:()=>null})}return n})();var dc={},Nf=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,dc,r);return i!==dc||t===dc?i:this.parentInjector.get(e,t,r)}};function Y_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Nd(i,c);else if(o==2){let u=c,l=e[++s];r=Nd(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Mt(n,e=0){let t=_e();if(t===null)return se(n,e);let r=zt();return IE(r,t,ut(n),e)}function dI(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}CA(n,e,t,c,o,u,l)}o!==null&&r!==null&&DA(t,r,o)}function DA(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}function bA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function CA(n,e,t,r,i,o,s){let c=r.length,u=null;for(let m=0;m<c;m++){let E=r[m];u===null&&Cr(E)&&(u=E,bA(n,t,m)),U0(yE(t,e),n,E.type)}xA(t,n.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let E=r[m];E.providersResolver&&E.providersResolver(E)}let l=!1,h=!1,p=HE(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let E=r[m];if(t.mergedAttrs=jf(t.mergedAttrs,E.hostAttrs),AA(n,t,e,p,E),MA(p,E,i),s!==null&&s.has(E)){let[M,S]=s.get(E);t.directiveToIndex.set(E.type,[p,M+t.directiveStart,S+t.directiveStart])}else(o===null||!o.has(E))&&t.directiveToIndex.set(E.type,p);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let A=E.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}SA(n,t,o)}function SA(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Z_(0,e,i,r),Z_(1,e,i,r),X_(e,r,!1);else{let o=t.get(i);J_(0,e,o,r),J_(1,e,o,r),X_(e,r,!0)}}}function Z_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),fI(e,o)}}function J_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),fI(e,s)}}function fI(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function X_(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Kf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function AA(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=hi(i.type,!0)),s=new es(o,Cr(i),Mt,null);n.blueprint[r]=s,t[r]=s,NA(n,e,r,HE(n,t,i.hostVars,$n),i)}function NA(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;RA(s)!=c&&s.push(c),s.push(t,r,o)}}function RA(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function MA(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Cr(e)&&(t[""]=n)}}function xA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function hI(n,e,t,r,i,o,s,c){let u=e[q],l=u.consts,h=Wo(l,s),p=uh(u,n,t,r,h);return o&&dI(u,e,p,Wo(l,c),i),p.mergedAttrs=jf(p.mergedAttrs,p.attrs),p.attrs!==null&&Y_(p,p.attrs,!1),p.mergedAttrs!==null&&Y_(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function pI(n,e){fE(n,e),Gd(e)&&n.queries.elementEnd(e)}function lh(n){return mI(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function mI(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function dh(n,e,t){if(t===$n)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function yf(n,e,t){return function r(i){let o=br(n)?Ht(n.index,e):e;ah(o,5);let s=e[We],c=eE(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=eE(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function eE(n,e,t,r){let i=K(null);try{return pe(ue.OutputStart,e,t),t(r)!==!1}catch(o){return eA(n,o),!1}finally{pe(ue.OutputEnd,e,t),K(i)}}function PA(n,e,t,r,i,o,s,c){let u=Go(n),l=!1,h=null;if(!r&&u&&(h=OA(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Ut(n,t),m=r?r(p):p;tS(t,m,o,c);let E=i.listen(m,o,c);if(!kA(o)){let A=r?M=>r(vt(M[n.index])):n.index;yI(A,e,t,o,c,E,!1)}}return l}function kA(n){return n.startsWith("animation")||n.startsWith("transition")}function OA(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[gi],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function yI(n,e,t,r,i,o,s){let c=e.firstCreatePass?Xd(e):null,u=Jd(t),l=u.length;u.push(i,o),c&&c.push(r,n,l,(l+1)*(s?-1:1))}function tE(n,e,t,r,i,o){let s=e[t],c=e[q],l=c.data[t].outputs[r],p=s[l].subscribe(o);yI(n.index,c,e,i,o,p,!0)}var Rf=Symbol("BINDING");var Mf=class extends Ac{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Er(e);return new ns(t,this.ngModule)}};function LA(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&bc.SignalBased)!==0};return i&&(o.transform=i),o})}function FA(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function VA(n,e,t){let r=e instanceof gt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Nf(t,r):t}function BA(n){let e=n.get(Mr,null);if(e===null)throw new ee(407,!1);let t=n.get(lI,null),r=n.get(vr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function jA(n,e){let t=vI(n);return FE(e,t,t==="svg"?Wd:t==="math"?Xv:null)}function vI(n){return(n.selectors[0][0]||"div").toLowerCase()}var ns=class extends Sc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=LA(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=FA(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_S(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){pe(ue.DynamicComponentStart);let c=K(null);try{let u=this.componentDef,l=UA(r,u,s,o),h=VA(u,i||this.ngModule,e),p=BA(h),m=p.rendererFactory.createRenderer(null,u),E=r?US(m,r,u.encapsulation,h):jA(u,m),A=s?.some(nE)||o?.some(P=>typeof P!="function"&&P.bindings.some(nE)),M=Yf(null,l,null,512|UE(u),null,null,p,m,h,null,ME(E,h,!0));M[st]=E,tc(M);let S=null;try{let P=hI(st,M,2,"#host",()=>l.directiveRegistry,!0,0);BE(m,E,P),Ti(E,M),ih(l,M,P),PE(l,P,M),pI(l,P),t!==void 0&&$A(P,this.ngContentSelectors,t),S=Ht(P.index,M),M[We]=S[We],sh(l,M,null)}catch(P){throw S!==null&&wf(S),wf(M),P}finally{pe(ue.DynamicComponentEnd),nc()}return new _c(this.componentType,M,!!A)}finally{K(c)}}};function UA(n,e,t,r){let i=n?["ng-version","21.0.6"]:ES(e.selectors[0]),o=null,s=null,c=0;if(t)for(let h of t)c+=h[Rf].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[Rf].requiredVars;let E=h+1;m.create&&(m.targetIdx=E,(o??=[]).push(m)),m.update&&(m.targetIdx=E,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=kd(p);u.push(m)}return Qf(0,null,HA(o,s),1,c,u,null,null,null,[i],null)}function HA(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function nE(n){let e=n[Rf].kind;return e==="input"||e==="twoWay"}var _c=class extends uI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ya(t[q],st),this.location=Si(this._tNode,t),this.instance=Ht(this._tNode.index,t)[We],this.hostView=this.changeDetectorRef=new bi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=oh(r,i[q],i,e,t);this.previousInputValues.set(e,t);let s=Ht(r.index,i);ah(s,1)}get injector(){return new Rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $A(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var kr=(()=>{class n{static __NG_ELEMENT_ID__=zA}return n})();function zA(){let n=zt();return EI(n,_e())}var qA=kr,_I=class extends qA{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Si(this._hostTNode,this._hostLView)}get injector(){return new Rr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Uf(this._hostTNode,this._hostLView);if(pE(e)){let t=pc(e,this._hostLView),r=hc(e),i=t[q].data[r+8];return new Rr(i,t)}else return new Rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=rE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Q_(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,K_(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!b0(e),l;if(u)l=t;else{let S=t||{};l=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,c=S.bindings}let h=u?e:new ns(Er(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let P=(u?p:this.parentInjector).get(gt,null);P&&(o=P)}let m=Er(h.componentType??{}),E=Q_(this._lContainer,m?.id??null),A=E?.firstChild??null,M=h.create(p,i,A,o,s,c);return this.insertImpl(M.hostView,l,K_(this._hostTNode,E)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(n_(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Fe],l=new _I(u,u[yt],u[Fe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return yA(s,i,o,r),e.attachToViewContainerRef(),Vd(vf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=rE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Sf(this._lContainer,t);r&&(Vo(vf(this._lContainer),t),WE(r[q],r))}detach(e){let t=this._adjustIndex(e,-1),r=Sf(this._lContainer,t);return r&&Vo(vf(this._lContainer),t)!=null?new bi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function rE(n){return n[qo]}function vf(n){return n[qo]||(n[qo]=[])}function EI(n,e){let t,r=e[n.index];return St(r)?t=r:(t=aI(r,e,null,n),e[n.index]=t,Zf(e,t)),WA(t,e,n,r),new _I(t,n,e)}function GA(n,e){let t=n[Ve],r=t.createComment(""),i=Ut(e,n),o=t.parentNode(i);return vc(t,o,r,t.nextSibling(i),!1),r}var WA=YA,KA=()=>!1;function QA(n,e,t){return KA(n,e,t)}function YA(n,e,t,r){if(n[jn])return;let i;t.type&8?i=vt(r):i=GA(e,t),n[jn]=i}var xf=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Pf=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)fh(e,t).matches!==null&&this.queries[t].setDirty()}},kf=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=iN(e):this.predicate=e}},Of=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Lf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,ZA(t,o)),this.matchTNodeWithReadOption(e,t,lc(t,e,o,!1,!1))}else r===Hn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,lc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ai||i===kr||i===Hn&&t.type&4)this.addMatch(t.index,-2);else{let o=lc(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ZA(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function JA(n,e){return n.type&11?Si(n,e):n.type&4?ch(n,e):null}function XA(n,e,t,r){return t===-1?JA(e,n):t===-2?eN(n,e,r):gc(n,n[q],t,e)}function eN(n,e,t){if(t===Ai)return Si(e,n);if(t===Hn)return ch(e,n);if(t===kr)return EI(e,n)}function II(n,e,t,r){let i=e[jt].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)c.push(null);else{let h=o[l];c.push(XA(e,h,s[u+1],t.metadata.read))}}i.matches=c}return i.matches}function Ff(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=II(n,e,i,t);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let l=o[c+1],h=e[-u];for(let p=nt;p<h.length;p++){let m=h[p];m[Bn]===m[Fe]&&Ff(m[q],m,l,r)}if(h[Dr]!==null){let p=h[Dr];for(let m=0;m<p.length;m++){let E=p[m];Ff(E[q],E,l,r)}}}}}return r}function tN(n,e){return n[jt].queries[e].queryList}function nN(n,e,t){let r=new mc((t&4)===4);return o_(n,e,r,r.destroy),(e[jt]??=new Pf).queries.push(new xf(r))-1}function rN(n,e,t){let r=$t();return r.firstCreatePass&&(oN(r,new kf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),nN(r,_e(),e)}function iN(n){return n.split(",").map(e=>e.trim())}function oN(n,e,t){n.queries===null&&(n.queries=new Of),n.queries.track(new Lf(e,t))}function fh(n,e){return n.queries.getByIndex(e)}function sN(n,e){let t=n[q],r=fh(t,e);return r.crossesNgTemplate?Ff(t,n,e,[]):II(t,n,r,e)}var rs=class{};var is=class extends rs{injector;componentFactoryResolver=new Mf(this);instance=null;constructor(e){super();let t=new yr([...e.providers,{provide:rs,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver}],e.parent||Uo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wI(n,e,t=null){return new is({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var aN=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Hd(!1,t.type),i=r.length>0?wI([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ae({token:n,providedIn:"environment",factory:()=>new n(se(gt))})}return n})();function cs(n){return Ic(()=>{let e=TI(n),t=me(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Hf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(aN).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rt.Emulated,styles:n.styles||pt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&eh("NgStandalone"),DI(t);let r=n.dependencies;return t.directiveDefs=iE(r,cN),t.pipeDefs=iE(r,Vv),t.id=dN(t),t})}function cN(n){return Er(n)||kd(n)}function Nc(n){return Ic(()=>({type:n.type,bootstrap:n.bootstrap||pt,declarations:n.declarations||pt,imports:n.imports||pt,exports:n.exports||pt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uN(n,e){if(n==null)return Ir;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=bc.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function lN(n){if(n==null)return Ir;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rc(n){return Ic(()=>{let e=TI(n);return DI(e),e})}function TI(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ir,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||pt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:uN(n.inputs,e),outputs:lN(n.outputs),debugInfo:null}}function DI(n){n.features?.forEach(e=>e(n))}function iE(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function dN(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fN(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=jf(n.mergedAttrs,n.attrs);let h=n.tView=Qf(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),_i(n,!1);let u=pN(t,e,n,r);rc()&&nh(t,e,u,n),Ti(u,e);let l=aI(u,e,u,n);e[r+st]=l,Zf(e,l),QA(l,n,e)}function hN(n,e,t,r,i,o,s,c,u,l,h){let p=t+st,m;return e.firstCreatePass?(m=uh(e,p,4,s||null,c||null),ef()&&dI(e,n,m,Wo(e.consts,l),ZE),fE(e,m)):m=e.data[p],fN(m,n,e,t,r,i,o,u),Go(m)&&ih(e,n,m),l!=null&&YE(n,m,h),m}function Be(n,e,t,r,i,o,s,c){let u=_e(),l=$t(),h=Wo(l.consts,o);return hN(u,l,n,e,t,r,i,h,void 0,s,c),Be}var pN=gN;function gN(n,e,t,r){return ic(!0),e[Ve].createComment("")}var hh=new ce("");function Mc(n){return!!n&&typeof n.then=="function"}function ph(n){return!!n&&typeof n.subscribe=="function"}var bI=new ce("");var gh=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=z(bI,{optional:!0})??[];injector=z(Fn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Wa(this.injector,i);if(Mc(o))t.push(o);else if(ph(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CI=new ce("");function SI(){td(()=>{let n="";throw new ee(600,n)})}function AI(n){return n.isBoundToModule}var mN=10;var xc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z(Nr);afterRenderManager=z(zE);zonelessEnabled=z(Yo);rootEffectScheduler=z(sc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new an;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=z(Ei);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pd(t=>!t))}constructor(){z(as,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=z(gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Fn.NULL){return this._injector.get(Ge).run(()=>{pe(ue.BootstrapComponentStart);let s=t instanceof Sc;if(!this._injector.get(gh).done){let A="";throw new ee(405,A)}let u;s?u=t:u=this._injector.get(Ac).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=AI(u)?void 0:this._injector.get(rs),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,E=p.injector.get(hh,null);return E?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Xo(this.components,p),E?.unregisterApplication(m)}),this._loadComponent(p),pe(ue.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(ue.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Xf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pe(ue.ChangeDetectionEnd),new ee(101,!1);let t=K(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,K(t),this.afterTick.next(),pe(ue.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<mN;){pe(ue.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pe(ue.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ko(i))continue;let o=r&&!this.zonelessEnabled?0:1;rI(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ko(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Xo(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(CI,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Xo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var yV=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function le(n,e,t){let r=_e(),i=of();if(dh(r,i,e)){let o=$t(),s=b_();qS(s,r,n,e,r[Ve],t)}return le}function oE(n,e,t,r,i){oh(e,n,t,i?"class":"style",r)}function O(n,e,t,r){let i=_e(),o=i[q],s=n+st,c=o.firstCreatePass?hI(s,i,2,e,ZE,ef(),t,r):o.data[s];if(JS(c,i,n,e,yN),Go(c)){let u=i[q];ih(u,i,c),PE(u,c,i)}return r!=null&&YE(i,c),O}function F(){let n=$t(),e=zt(),t=XS(e);return n.firstCreatePass&&pI(n,t),l_(t)&&d_(),c_(),t.classesWithoutHost!=null&&x0(t)&&oE(n,t,_e(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&P0(t)&&oE(n,t,_e(),t.stylesWithoutHost,!1),F}function we(n,e,t,r){return O(n,e,t,r),F(),we}var yN=(n,e,t,r,i)=>(ic(!0),FE(e[Ve],r,C_()));function Et(){return _e()}var us="en-US";var vN=us;function NI(n){typeof n=="string"&&(vN=n.toLowerCase().replace(/_/g,"-"))}function Ee(n,e,t){let r=_e(),i=$t(),o=zt();return _N(i,r,r[Ve],o,n,e,t),Ee}function _N(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=yf(r,e,o),PA(r,n,e,s,t,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],E=h[p+1];u??=yf(r,e,o),tE(r,e,m,E,i,u)}if(l&&l.length)for(let p of l)u??=yf(r,e,o),tE(r,e,p,i,i,u)}}function ve(n=1){return D_(n)}function Ni(n,e,t){return rN(n,e,t),Ni}function Ri(n){let e=_e(),t=$t(),r=sf();ec(r+1);let i=fh(t,r);if(n.dirty&&t_(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=sN(e,r);n.reset(o,W0),n.notifyOnChanges()}return!0}return!1}function Mi(){return tN(_e(),sf())}function Or(n){let e=p_();return e_(e,st+n)}function ac(n,e){return n<<17|e<<2}function xr(n){return n>>17&32767}function EN(n){return(n&2)==2}function IN(n,e){return n&131071|e<<17}function Vf(n){return n|2}function Ci(n){return(n&131068)>>2}function _f(n,e){return n&-131069|e<<2}function wN(n){return(n&1)===1}function Bf(n){return n|1}function TN(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=xr(s),u=Ci(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||pi(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=xr(n[c+1]);n[r+1]=ac(m,c),m!==0&&(n[m+1]=_f(n[m+1],r)),n[c+1]=IN(n[c+1],r)}else n[r+1]=ac(c,0),c!==0&&(n[c+1]=_f(n[c+1],r)),c=r;else n[r+1]=ac(u,0),c===0?c=r:n[u+1]=_f(n[u+1],r),u=r;l&&(n[r+1]=Vf(n[r+1])),sE(n,h,r,!0),sE(n,h,r,!1),DN(e,h,n,r,o),s=ac(c,u),o?e.classBindings=s:e.styleBindings=s}function DN(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&pi(o,e)>=0&&(t[r+1]=Bf(t[r+1]))}function sE(n,e,t,r){let i=n[t+1],o=e===null,s=r?xr(i):Ci(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],l=n[s+1];bN(u,e)&&(c=!0,n[s+1]=r?Bf(l):Vf(l)),s=r?xr(l):Ci(l)}c&&(n[t+1]=r?Vf(i):Bf(i))}function bN(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?pi(n,e)>=0:!1}function ls(n,e,t){return RI(n,e,t,!1),ls}function dn(n,e){return RI(n,e,null,!0),dn}function RI(n,e,t,r){let i=_e(),o=$t(),s=m_(2);if(o.firstUpdatePass&&SN(o,n,s,r),e!==$n&&dh(i,s,e)){let c=o.data[Ar()];xN(o,c,i,i[Ve],n,i[s+1]=PN(e,t),r,s)}}function CN(n,e){return e>=n.expandoStartIndex}function SN(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ar()],s=CN(n,t);kN(o,r)&&e===null&&!s&&(e=!1),e=AN(i,o,e,r),TN(i,o,e,t,s,r)}}function AN(n,e,t,r){let i=E_(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ef(null,n,e,t,r),t=os(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ef(i,n,e,t,r),o===null){let u=NN(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Ef(null,n,e,u[1],r),u=os(u,e.attrs,r),RN(n,e,r,u))}else o=MN(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function NN(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ci(r)!==0)return n[xr(r)]}function RN(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[xr(i)]=r}function MN(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=os(r,s,t)}return os(r,e.attrs,t)}function Ef(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=os(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function os(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Gv(n,s,t?!0:e[++o]))}return n===void 0?null:n}function xN(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,l=u[c+1],h=wN(l)?aE(u,e,t,i,Ci(l),s):void 0;if(!Ec(h)){Ec(o)||EN(l)&&(o=aE(u,null,t,i,c,s));let p=Kd(Ar(),t);jS(r,s,p,i,o)}}function aE(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===$n&&(m=p?pt:void 0);let E=p?Ga(m,r):h===r?m:void 0;if(l&&!Ec(E)&&(E=Ga(u,r)),Ec(E)&&(c=E,s))return c;let A=n[i+1];i=s?xr(A):Ci(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Ga(u,r))}return c}function Ec(n){return n!==void 0}function PN(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kn(qf(n)))),n}function kN(n,e){return(n.flags&(e?8:16))!==0}function De(n,e=""){let t=_e(),r=$t(),i=n+st,o=r.firstCreatePass?uh(r,i,1,e,null):r.data[i],s=ON(r,t,o,e,n);t[i]=s,rc()&&nh(r,t,s,o),_i(o,!1)}var ON=(n,e,t,r,i)=>(ic(!0),iS(e[Ve],r));function LN(n,e,t,r=""){return dh(n,of(),t)?e+$a(t)+r:$n}function fn(n){return ds("",n),fn}function ds(n,e,t){let r=_e(),i=LN(r,n,e,t);return i!==$n&&FN(r,Ar(),i),ds}function FN(n,e,t){let r=Kd(e,n);oS(n[Ve],r,t)}var MI=(()=>{class n{applicationErrorHandler=z(Nr);appRef=z(xc);taskService=z(Ei);ngZone=z(Ge);zonelessEnabled=z(Yo);tracing=z(as,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new tt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Oo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(hf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?lf:uf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Oo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mh(){return eh("NgZoneless"),Ud([...yh(),[]])}function yh(){return[{provide:vr,useExisting:MI},{provide:Ge,useClass:Lo},{provide:Yo,useValue:!0}]}function VN(){return typeof $localize<"u"&&$localize.locale||us}var Pc=new ce("",{factory:()=>z(Pc,{optional:!0,skipSelf:!0})||VN()});function vh(n,e){return Da(n,e?.equal)}var _h=new ce(""),XN=new ce("");function fs(n){return!n.moduleRef}function eR(n){let e=fs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ge);return t.run(()=>{fs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Nr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),fs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(_h);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(_h);s.add(o),n.moduleRef.onDestroy(()=>{Xo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return nR(r,t,()=>{let o=e.get(Ei),s=o.add(),c=e.get(gh);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Pc,us);if(NI(u||us),!e.get(XN,!0))return fs(n)?e.get(xc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(fs(n)){let h=e.get(xc);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return tR?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var tR;function nR(n,e,t){try{let r=t();return Mc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var kc=null;function rR(n=[],e){return Fn.create({name:e,providers:[{provide:jo,useValue:"platform"},{provide:_h,useValue:new Set([()=>kc=null])},...n]})}function iR(n=[]){if(kc)return kc;let e=rR(n);return kc=e,SI(),oR(e),e}function oR(n){let e=n.get(Tc,null);Wa(n,()=>{e?.forEach(t=>t())})}var Eh=class{constructor(){}supports(e){return lh(e)}create(e){return new Ih(e)}},sR=(n,e)=>e,Ih=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||sR}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<xI(r,i,o)?t:r,c=xI(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let E=m<o.length?o[m]:o[m]=0,A=E+m;h<=A&&A<l&&(o[m]=E+1)}let p=s.previousIndex;o[p]=h-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!lh(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,gI(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new wh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Oc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Oc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},wh=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Th=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Oc=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Th,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xI(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function PI(){return new Dh([new Eh])}var Dh=(()=>{class n{factories;static \u0275prov=ae({token:n,providedIn:"root",factory:PI});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=z(n,{optional:!0,skipSelf:!0});return n.create(t,r||PI())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();function OI(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;pe(ue.BootstrapApplicationStart);try{let o=i?.injector??iR(r),s=[yh(),M_,...t||[]],c=new is({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return eR({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{pe(ue.BootstrapApplicationEnd)}}var LI=null;function ps(){return LI}function bh(n){LI??=n}var hs=class{};var Lc=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Lc(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),FI(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);FI(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Mt(kr),Mt(Hn),Mt(Dh))};static \u0275dir=Rc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function FI(n,e){n.context.$implicit=e.item}var Ch=(()=>{class n{_viewContainer;_context=new Fc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){VI(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){VI(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Mt(kr),Mt(Hn))};static \u0275dir=Rc({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Fc=class{$implicit=null;ngIf=null};function VI(n,e){if(n&&!n.createEmbeddedView)throw new ee(2020,!1)}var xi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Nc({type:n});static \u0275inj=Fo({})}return n})();function Sh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var gs=class{};var BI="browser";var ms=class{_doc;constructor(e){this._doc=e}manager},Bc=(()=>{class n extends ms{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(se(At))};static \u0275prov=ae({token:n,factory:n.\u0275fac})}return n})(),Hc=new ce(""),Mh=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Bc));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Bc);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(se(Hc),se(Ge))};static \u0275prov=ae({token:n,factory:n.\u0275fac})}return n})(),Ah="ng-app-id";function jI(n){for(let e of n)e.remove()}function UI(n,e){let t=e.createElement("style");return t.textContent=n,t}function cR(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ah}="${e}"],link[${Ah}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ah),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Rh(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var xh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,cR(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,UI);r?.forEach(i=>this.addUsage(i,this.external,Rh))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(jI(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])jI(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,UI(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Rh(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(se(At),se(wc),se(Dc,8),se(ss))};static \u0275prov=ae({token:n,factory:n.\u0275fac})}return n})(),Nh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ph=/%COMP%/g;var $I="%COMP%",uR=`_nghost-${$I}`,lR=`_ngcontent-${$I}`,dR=!0,fR=new ce("",{factory:()=>dR});function hR(n){return lR.replace(Ph,n)}function pR(n){return uR.replace(Ph,n)}function zI(n,e){return e.map(t=>t.replace(Ph,n))}var kh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new ys(t,s,c,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Uc?i.applyToHost(t):i instanceof vs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Rt.Emulated:o=new Uc(u,l,r,this.appId,h,s,c,p);break;case Rt.ShadowDom:return new jc(u,t,r,s,c,this.nonce,p,l);case Rt.ExperimentalIsolatedShadowDom:return new jc(u,t,r,s,c,this.nonce,p);default:o=new vs(u,l,r,h,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(se(Mh),se(xh),se(wc),se(fR),se(At),se(Ge),se(Dc),se(as,8))};static \u0275prov=ae({token:n,factory:n.\u0275fac})}return n})(),ys=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Nh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(HI(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(HI(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Nh[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Nh[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wt.DashCase|Wt.Important)?e.style.setProperty(t,r,i&Wt.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ps().getGlobalEventTarget(this.doc,e),!e))throw new ee(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function HI(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jc=class extends ys{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=zI(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=Rh(p,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},vs=class extends ys{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?zI(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Di.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Uc=class extends vs{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,t,r,o,s,c,u,l),this.contentAttr=hR(l),this.hostAttr=pR(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var $c=class n extends hs{supportsDOMEvents=!0;static makeCurrent(){bh(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=gR();return t==null?null:mR(t)}resetBaseElement(){_s=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sh(document.cookie,e)}},_s=null;function gR(){return _s=_s||document.head.querySelector("base"),_s?_s.getAttribute("href"):null}function mR(n){return new URL(n,document.baseURI).pathname}var yR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ae({token:n,factory:n.\u0275fac})}return n})(),qI=["alt","control","meta","shift"],vR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_R={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GI=(()=>{class n extends ms{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ps().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),qI.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=vR[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qI.forEach(s=>{if(s!==i){let c=_R[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(se(At))};static \u0275prov=ae({token:n,factory:n.\u0275fac})}return n})();function Oh(n,e,t){let r=U({rootComponent:n,platformRef:t?.platformRef},ER(e));return OI(r)}function ER(n){return{appProviders:[...bR,...n?.providers??[]],platformProviders:DR}}function IR(){$c.makeCurrent()}function wR(){return new un}function TR(){return $f(document),document}var DR=[{provide:ss,useValue:BI},{provide:Tc,useValue:IR,multi:!0},{provide:At,useFactory:TR}];var bR=[{provide:jo,useValue:"root"},{provide:un,useFactory:wR},{provide:Hc,useClass:Bc,multi:!0},{provide:Hc,useClass:GI,multi:!0},kh,xh,Mh,{provide:Mr,useExisting:kh},{provide:gs,useClass:yR},[]];var WI=()=>{};var YI=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},CR=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ZI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,E=l&63;u||(E=64,s||(m=64)),r.push(t[h],t[p],t[m],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(YI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Fh;let m=o<<2|c>>4;if(r.push(m),l!==64){let E=c<<4&240|l>>2;if(r.push(E),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Fh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},SR=function(n){let e=YI(n);return ZI.encodeByteArray(e,!0)},Is=function(n){return SR(n).replace(/\./g,"")},qc=function(n){try{return ZI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var AR=()=>JI().__FIREBASE_DEFAULTS__,NR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&qc(n[1]);return e&&JSON.parse(e)},Gc=()=>{try{return WI()||AR()||NR()||RR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bh=n=>Gc()?.emulatorHosts?.[n],XI=n=>{let e=Bh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jh=()=>Gc()?.config,Uh=n=>Gc()?.[`_${n}`];var zc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function zn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wc(n){return(await fetch(n,{credentials:"include"})).ok}function ew(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=U({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Is(JSON.stringify(t)),Is(JSON.stringify(s)),""].join(".")}var Es={};function MR(){let n={prod:[],emulator:[]};for(let e of Object.keys(Es))Es[e]?n.emulator.push(e):n.prod.push(e);return n}function xR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var KI=!1;function Kc(n,e){if(typeof window>"u"||typeof document>"u"||!zn(window.location.host)||Es[n]===e||Es[n]||KI)return;Es[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=MR().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,E){m.setAttribute("width","24"),m.setAttribute("id",E),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{KI=!0,s()},m}function h(m,E){m.setAttribute("id",E),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=xR(r),E=t("text"),A=document.getElementById(E)||document.createElement("span"),M=t("learnmore"),S=document.getElementById(M)||document.createElement("a"),P=t("preprendIcon"),V=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let W=m.element;c(W),h(S,M);let Se=l();u(V,P),W.append(V,A,S,Se),document.body.appendChild(W)}o?(A.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function PR(){let n=Gc()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rw(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ow(){let n=je();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sw(){return!PR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hh(){try{return typeof indexedDB=="object"}catch{return!1}}function aw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var kR="FirebaseError",dt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kR,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hn.prototype.create)}},hn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?OR(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new dt(i,c,r)}};function OR(n,e){return n.replace(LR,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var LR=/\{\$([^}]+)}/g;function cw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(QI(o)&&QI(s)){if(!Qt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function QI(n){return n!==null&&typeof n=="object"}function Pi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ki(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Oi(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uw(n,e){let t=new Vh(n,e);return t.subscribe.bind(t)}var Vh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Lh),i.error===void 0&&(i.error=Lh),i.complete===void 0&&(i.complete=Lh);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lh(){}var v6=14400*1e3;function Qe(n){return n&&n._delegate?n._delegate:n}var It=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lr="[DEFAULT]";var $h=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new zc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BR(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lr){return this.instances.has(e)}getOptions(e=Lr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lr){return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function VR(n){return n===Lr?void 0:n}function BR(n){return n.instantiationMode==="EAGER"}var Qc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $h(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var jR=[],te=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(te||{}),UR={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},HR=te.INFO,$R={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},zR=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=$R[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qn=class{constructor(e){this.name=e,this._logLevel=HR,this._logHandler=zR,this._userLogHandler=null,jR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var qR=(n,e)=>e.some(t=>n instanceof t),lw,dw;function GR(){return lw||(lw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WR(){return dw||(dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fw=new WeakMap,qh=new WeakMap,hw=new WeakMap,zh=new WeakMap,Wh=new WeakMap;function KR(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Yt(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&fw.set(t,n)}).catch(()=>{}),Wh.set(e,n),e}function QR(n){if(qh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});qh.set(n,e)}var Gh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pw(n){Gh=n(Gh)}function YR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Yc(this),e,...t);return hw.set(r,e.sort?e.sort():[e]),Yt(r)}:WR().includes(n)?function(...e){return n.apply(Yc(this),e),Yt(fw.get(this))}:function(...e){return Yt(n.apply(Yc(this),e))}}function ZR(n){return typeof n=="function"?YR(n):(n instanceof IDBTransaction&&QR(n),qR(n,GR())?new Proxy(n,Gh):n)}function Yt(n){if(n instanceof IDBRequest)return KR(n);if(zh.has(n))return zh.get(n);let e=ZR(n);return e!==n&&(zh.set(n,e),Wh.set(e,n)),e}var Yc=n=>Wh.get(n);function mw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Yt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Yt(s.result),u.oldVersion,u.newVersion,Yt(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var JR=["get","getKey","getAll","getAllKeys","count"],XR=["put","add","delete","clear"],Kh=new Map;function gw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=XR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JR.includes(t)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[t](...c),i&&u.done]))[0]};return Kh.set(e,o),o}pw(n=>me(U({},n),{get:(e,t,r)=>gw(e,t)||n.get(e,t,r),has:(e,t)=>!!gw(e,t)||n.has(e,t)}));var Yh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eM(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function eM(n){return n.getComponent()?.type==="VERSION"}var Zh="@firebase/app",yw="0.14.6";var pn=new qn("@firebase/app"),tM="@firebase/app-compat",nM="@firebase/analytics-compat",rM="@firebase/analytics",iM="@firebase/app-check-compat",oM="@firebase/app-check",sM="@firebase/auth",aM="@firebase/auth-compat",cM="@firebase/database",uM="@firebase/data-connect",lM="@firebase/database-compat",dM="@firebase/functions",fM="@firebase/functions-compat",hM="@firebase/installations",pM="@firebase/installations-compat",gM="@firebase/messaging",mM="@firebase/messaging-compat",yM="@firebase/performance",vM="@firebase/performance-compat",_M="@firebase/remote-config",EM="@firebase/remote-config-compat",IM="@firebase/storage",wM="@firebase/storage-compat",TM="@firebase/firestore",DM="@firebase/ai",bM="@firebase/firestore-compat",CM="firebase",SM="12.6.0";var Jh="[DEFAULT]",AM={[Zh]:"fire-core",[tM]:"fire-core-compat",[rM]:"fire-analytics",[nM]:"fire-analytics-compat",[oM]:"fire-app-check",[iM]:"fire-app-check-compat",[sM]:"fire-auth",[aM]:"fire-auth-compat",[cM]:"fire-rtdb",[uM]:"fire-data-connect",[lM]:"fire-rtdb-compat",[dM]:"fire-fn",[fM]:"fire-fn-compat",[hM]:"fire-iid",[pM]:"fire-iid-compat",[gM]:"fire-fcm",[mM]:"fire-fcm-compat",[yM]:"fire-perf",[vM]:"fire-perf-compat",[_M]:"fire-rc",[EM]:"fire-rc-compat",[IM]:"fire-gcs",[wM]:"fire-gcs-compat",[TM]:"fire-fst",[bM]:"fire-fst-compat",[DM]:"fire-vertex","fire-js":"fire-js",[CM]:"fire-js-all"};var Zc=new Map,NM=new Map,Xh=new Map;function vw(n,e){try{n.container.addComponent(e)}catch(t){pn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wn(n){let e=n.name;if(Xh.has(e))return pn.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,n);for(let t of Zc.values())vw(t,n);for(let t of NM.values())vw(t,n);return!0}function Ts(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rt(n){return n==null?!1:n.settings!==void 0}var RM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new hn("app","Firebase",RM);var ep=class{constructor(e,t,r){this._isDeleted=!1,this._options=U({},e),this._config=U({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new It("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}};var Kn=SM;function rp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=U({name:Jh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(t||(t=jh()),!t)throw Gn.create("no-options");let o=Zc.get(i);if(o){if(Qt(t,o.options)&&Qt(r,o.config))return o;throw Gn.create("duplicate-app",{appName:i})}let s=new Qc(i);for(let u of Xh.values())s.addComponent(u);let c=new ep(t,r,s);return Zc.set(i,c),c}function Jc(n=Jh){let e=Zc.get(n);if(!e&&n===Jh&&jh())return rp();if(!e)throw Gn.create("no-app",{appName:n});return e}function xt(n,e,t){let r=AM[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pn.warn(s.join(" "));return}Wn(new It(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var MM="firebase-heartbeat-database",xM=1,ws="firebase-heartbeat-store",Qh=null;function ww(){return Qh||(Qh=mw(MM,xM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ws)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gn.create("idb-open",{originalErrorMessage:n.message})})),Qh}async function PM(n){try{let t=(await ww()).transaction(ws),r=await t.objectStore(ws).get(Tw(n));return await t.done,r}catch(e){if(e instanceof dt)pn.warn(e.message);else{let t=Gn.create("idb-get",{originalErrorMessage:e?.message});pn.warn(t.message)}}}async function _w(n,e){try{let r=(await ww()).transaction(ws,"readwrite");await r.objectStore(ws).put(e,Tw(n)),await r.done}catch(t){if(t instanceof dt)pn.warn(t.message);else{let r=Gn.create("idb-set",{originalErrorMessage:t?.message});pn.warn(r.message)}}}function Tw(n){return`${n.name}!${n.options.appId}`}var kM=1024,OM=30,tp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new np(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ew();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>OM){let i=FM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Ew(),{heartbeatsToSend:t,unsentEntries:r}=LM(this._heartbeatsCache.heartbeats),i=Is(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return pn.warn(e),""}}};function Ew(){return new Date().toISOString().substring(0,10)}function LM(n,e=kM){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Iw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Iw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var np=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hh()?aw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await PM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return _w(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return _w(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Iw(n){return Is(JSON.stringify({version:2,heartbeats:n})).length}function FM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function VM(n){Wn(new It("platform-logger",e=>new Yh(e),"PRIVATE")),Wn(new It("heartbeat",e=>new tp(e),"PRIVATE")),xt(Zh,yw,n),xt(Zh,yw,"esm2020"),xt("fire-js","")}VM("");var BM="firebase",jM="12.7.0";xt(BM,jM,"app");var Dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bw={};var gn,ip;(function(){var n;function e(T,y){function v(){}v.prototype=y.prototype,T.F=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.D=function(w,I,b){for(var _=Array(arguments.length-2),it=2;it<arguments.length;it++)_[it-2]=arguments[it];return y.prototype[I].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,v){v||(v=0);let w=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)w[I]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(I=0;I<16;++I)w[I]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],I=T.g[2];let b=T.g[3],_;_=y+(b^v&(I^b))+w[0]+3614090360&4294967295,y=v+(_<<7&4294967295|_>>>25),_=b+(I^y&(v^I))+w[1]+3905402710&4294967295,b=y+(_<<12&4294967295|_>>>20),_=I+(v^b&(y^v))+w[2]+606105819&4294967295,I=b+(_<<17&4294967295|_>>>15),_=v+(y^I&(b^y))+w[3]+3250441966&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(b^v&(I^b))+w[4]+4118548399&4294967295,y=v+(_<<7&4294967295|_>>>25),_=b+(I^y&(v^I))+w[5]+1200080426&4294967295,b=y+(_<<12&4294967295|_>>>20),_=I+(v^b&(y^v))+w[6]+2821735955&4294967295,I=b+(_<<17&4294967295|_>>>15),_=v+(y^I&(b^y))+w[7]+4249261313&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(b^v&(I^b))+w[8]+1770035416&4294967295,y=v+(_<<7&4294967295|_>>>25),_=b+(I^y&(v^I))+w[9]+2336552879&4294967295,b=y+(_<<12&4294967295|_>>>20),_=I+(v^b&(y^v))+w[10]+4294925233&4294967295,I=b+(_<<17&4294967295|_>>>15),_=v+(y^I&(b^y))+w[11]+2304563134&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(b^v&(I^b))+w[12]+1804603682&4294967295,y=v+(_<<7&4294967295|_>>>25),_=b+(I^y&(v^I))+w[13]+4254626195&4294967295,b=y+(_<<12&4294967295|_>>>20),_=I+(v^b&(y^v))+w[14]+2792965006&4294967295,I=b+(_<<17&4294967295|_>>>15),_=v+(y^I&(b^y))+w[15]+1236535329&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(I^b&(v^I))+w[1]+4129170786&4294967295,y=v+(_<<5&4294967295|_>>>27),_=b+(v^I&(y^v))+w[6]+3225465664&4294967295,b=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(b^y))+w[11]+643717713&4294967295,I=b+(_<<14&4294967295|_>>>18),_=v+(b^y&(I^b))+w[0]+3921069994&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(I^b&(v^I))+w[5]+3593408605&4294967295,y=v+(_<<5&4294967295|_>>>27),_=b+(v^I&(y^v))+w[10]+38016083&4294967295,b=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(b^y))+w[15]+3634488961&4294967295,I=b+(_<<14&4294967295|_>>>18),_=v+(b^y&(I^b))+w[4]+3889429448&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(I^b&(v^I))+w[9]+568446438&4294967295,y=v+(_<<5&4294967295|_>>>27),_=b+(v^I&(y^v))+w[14]+3275163606&4294967295,b=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(b^y))+w[3]+4107603335&4294967295,I=b+(_<<14&4294967295|_>>>18),_=v+(b^y&(I^b))+w[8]+1163531501&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(I^b&(v^I))+w[13]+2850285829&4294967295,y=v+(_<<5&4294967295|_>>>27),_=b+(v^I&(y^v))+w[2]+4243563512&4294967295,b=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(b^y))+w[7]+1735328473&4294967295,I=b+(_<<14&4294967295|_>>>18),_=v+(b^y&(I^b))+w[12]+2368359562&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(v^I^b)+w[5]+4294588738&4294967295,y=v+(_<<4&4294967295|_>>>28),_=b+(y^v^I)+w[8]+2272392833&4294967295,b=y+(_<<11&4294967295|_>>>21),_=I+(b^y^v)+w[11]+1839030562&4294967295,I=b+(_<<16&4294967295|_>>>16),_=v+(I^b^y)+w[14]+4259657740&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(v^I^b)+w[1]+2763975236&4294967295,y=v+(_<<4&4294967295|_>>>28),_=b+(y^v^I)+w[4]+1272893353&4294967295,b=y+(_<<11&4294967295|_>>>21),_=I+(b^y^v)+w[7]+4139469664&4294967295,I=b+(_<<16&4294967295|_>>>16),_=v+(I^b^y)+w[10]+3200236656&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(v^I^b)+w[13]+681279174&4294967295,y=v+(_<<4&4294967295|_>>>28),_=b+(y^v^I)+w[0]+3936430074&4294967295,b=y+(_<<11&4294967295|_>>>21),_=I+(b^y^v)+w[3]+3572445317&4294967295,I=b+(_<<16&4294967295|_>>>16),_=v+(I^b^y)+w[6]+76029189&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(v^I^b)+w[9]+3654602809&4294967295,y=v+(_<<4&4294967295|_>>>28),_=b+(y^v^I)+w[12]+3873151461&4294967295,b=y+(_<<11&4294967295|_>>>21),_=I+(b^y^v)+w[15]+530742520&4294967295,I=b+(_<<16&4294967295|_>>>16),_=v+(I^b^y)+w[2]+3299628645&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(I^(v|~b))+w[0]+4096336452&4294967295,y=v+(_<<6&4294967295|_>>>26),_=b+(v^(y|~I))+w[7]+1126891415&4294967295,b=y+(_<<10&4294967295|_>>>22),_=I+(y^(b|~v))+w[14]+2878612391&4294967295,I=b+(_<<15&4294967295|_>>>17),_=v+(b^(I|~y))+w[5]+4237533241&4294967295,v=I+(_<<21&4294967295|_>>>11),_=y+(I^(v|~b))+w[12]+1700485571&4294967295,y=v+(_<<6&4294967295|_>>>26),_=b+(v^(y|~I))+w[3]+2399980690&4294967295,b=y+(_<<10&4294967295|_>>>22),_=I+(y^(b|~v))+w[10]+4293915773&4294967295,I=b+(_<<15&4294967295|_>>>17),_=v+(b^(I|~y))+w[1]+2240044497&4294967295,v=I+(_<<21&4294967295|_>>>11),_=y+(I^(v|~b))+w[8]+1873313359&4294967295,y=v+(_<<6&4294967295|_>>>26),_=b+(v^(y|~I))+w[15]+4264355552&4294967295,b=y+(_<<10&4294967295|_>>>22),_=I+(y^(b|~v))+w[6]+2734768916&4294967295,I=b+(_<<15&4294967295|_>>>17),_=v+(b^(I|~y))+w[13]+1309151649&4294967295,v=I+(_<<21&4294967295|_>>>11),_=y+(I^(v|~b))+w[4]+4149444226&4294967295,y=v+(_<<6&4294967295|_>>>26),_=b+(v^(y|~I))+w[11]+3174756917&4294967295,b=y+(_<<10&4294967295|_>>>22),_=I+(y^(b|~v))+w[2]+718787259&4294967295,I=b+(_<<15&4294967295|_>>>17),_=v+(b^(I|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+b&4294967295}r.prototype.v=function(T,y){y===void 0&&(y=T.length);let v=y-this.blockSize,w=this.C,I=this.h,b=0;for(;b<y;){if(I==0)for(;b<=v;)i(this,T,b),b+=this.blockSize;if(typeof T=="string"){for(;b<y;)if(w[I++]=T.charCodeAt(b++),I==this.blockSize){i(this,w),I=0;break}}else for(;b<y;)if(w[I++]=T[b++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var v=T.length-8;v<T.length;++v)T[v]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,v=0;v<4;++v)for(let w=0;w<32;w+=8)T[y++]=this.g[v]>>>w&255;return T};function o(T,y){var v=c;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function s(T,y){this.h=y;let v=[],w=!0;for(let I=T.length-1;I>=0;I--){let b=T[I]|0;w&&b==y||(v[I]=b,w=!1)}this.g=v}var c={};function u(T){return-128<=T&&T<128?o(T,function(y){return new s([y|0],y<0?-1:0)}):new s([T|0],T<0?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return S(l(-T));let y=[],v=1;for(let w=0;T>=v;w++)y[w]=T/v|0,v*=4294967296;return new s(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return S(h(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let v=l(Math.pow(y,8)),w=p;for(let b=0;b<T.length;b+=8){var I=Math.min(8,T.length-b);let _=parseInt(T.substring(b,b+I),y);I<8?(I=l(Math.pow(y,I)),w=w.j(I).add(l(_))):(w=w.j(v),w=w.add(l(_)))}return w}var p=u(0),m=u(1),E=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-S(this).m();let T=0,y=1;for(let v=0;v<this.g.length;v++){let w=this.i(v);T+=(w>=0?w:4294967296+w)*y,y*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(M(this))return"-"+S(this).toString(T);let y=l(Math.pow(T,6));var v=this;let w="";for(;;){let I=Se(v,y).g;v=P(v,I.j(y));let b=((v.g.length>0?v.g[0]:v.h)>>>0).toString(T);if(v=I,A(v))return b+w;for(;b.length<6;)b="0"+b;w=b+w}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function M(T){return T.h==-1}n.l=function(T){return T=P(this,T),M(T)?-1:A(T)?0:1};function S(T){let y=T.g.length,v=[];for(let w=0;w<y;w++)v[w]=~T.g[w];return new s(v,~T.h).add(m)}n.abs=function(){return M(this)?S(this):this},n.add=function(T){let y=Math.max(this.g.length,T.g.length),v=[],w=0;for(let I=0;I<=y;I++){let b=w+(this.i(I)&65535)+(T.i(I)&65535),_=(b>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);w=_>>>16,b&=65535,_&=65535,v[I]=_<<16|b}return new s(v,v[v.length-1]&-2147483648?-1:0)};function P(T,y){return T.add(S(y))}n.j=function(T){if(A(this)||A(T))return p;if(M(this))return M(T)?S(this).j(S(T)):S(S(this).j(T));if(M(T))return S(this.j(S(T)));if(this.l(E)<0&&T.l(E)<0)return l(this.m()*T.m());let y=this.g.length+T.g.length,v=[];for(var w=0;w<2*y;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(let I=0;I<T.g.length;I++){let b=this.i(w)>>>16,_=this.i(w)&65535,it=T.i(I)>>>16,Sn=T.i(I)&65535;v[2*w+2*I]+=_*Sn,V(v,2*w+2*I),v[2*w+2*I+1]+=b*Sn,V(v,2*w+2*I+1),v[2*w+2*I+1]+=_*it,V(v,2*w+2*I+1),v[2*w+2*I+2]+=b*it,V(v,2*w+2*I+2)}for(T=0;T<y;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=y;T<2*y;T++)v[T]=0;return new s(v,0)};function V(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function W(T,y){this.g=T,this.h=y}function Se(T,y){if(A(y))throw Error("division by zero");if(A(T))return new W(p,p);if(M(T))return y=Se(S(T),y),new W(S(y.g),S(y.h));if(M(y))return y=Se(T,S(y)),new W(S(y.g),y.h);if(T.g.length>30){if(M(T)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,w=y;w.l(T)<=0;)v=Pe(v),w=Pe(w);var I=Ae(v,1),b=Ae(w,1);for(w=Ae(w,2),v=Ae(v,2);!A(w);){var _=b.add(w);_.l(T)<=0&&(I=I.add(v),b=_),w=Ae(w,1),v=Ae(v,1)}return y=P(T,I.j(y)),new W(I,y)}for(I=p;T.l(y)>=0;){for(v=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),b=l(v),_=b.j(y);M(_)||_.l(T)>0;)v-=w,b=l(v),_=b.j(y);A(b)&&(b=m),I=I.add(b),T=P(T,_)}return new W(I,T)}n.B=function(T){return Se(this,T).h},n.and=function(T){let y=Math.max(this.g.length,T.g.length),v=[];for(let w=0;w<y;w++)v[w]=this.i(w)&T.i(w);return new s(v,this.h&T.h)},n.or=function(T){let y=Math.max(this.g.length,T.g.length),v=[];for(let w=0;w<y;w++)v[w]=this.i(w)|T.i(w);return new s(v,this.h|T.h)},n.xor=function(T){let y=Math.max(this.g.length,T.g.length),v=[];for(let w=0;w<y;w++)v[w]=this.i(w)^T.i(w);return new s(v,this.h^T.h)};function Pe(T){let y=T.g.length+1,v=[];for(let w=0;w<y;w++)v[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(v,T.h)}function Ae(T,y){let v=y>>5;y%=32;let w=T.g.length-v,I=[];for(let b=0;b<w;b++)I[b]=y>0?T.i(b+v)>>>y|T.i(b+v+1)<<32-y:T.i(b+v);return new s(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ip=bw.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,gn=bw.Integer=s}).apply(typeof Dw<"u"?Dw:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mn={};var op,UM,Li,sp,Ds,eu,ap,cp,up;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in f))break e;f=f[D]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,f){return a.call.apply(a.bind,arguments)}function l(a,d,f){return l=u,l.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,D,C){for(var x=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)x[Y-2]=arguments[Y];return d.prototype[D].apply(g,x)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function E(a){let d=a.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function A(a,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;let C=D.length||0;a.length=f+C;for(let x=0;x<C;x++)a[f+x]=D[x]}else a.push(D)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function S(a){s.setTimeout(()=>{throw a},0)}function P(){var a=T;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class V{constructor(){this.h=this.g=null}add(d,f){let g=W.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var W=new M(()=>new Se,a=>a.reset());class Se{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,Ae=!1,T=new V,y=()=>{let a=Promise.resolve(void 0);Pe=()=>{a.then(v)}};function v(){for(var a;a=P();){try{a.h.call(a.g)}catch(f){S(f)}var d=W;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Ae=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function it(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(it,I),it.prototype.init=function(a,d){let f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Sn="closure_listenable_"+(Math.random()*1e6|0),Hb=0;function $b(a,d,f,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++Hb,this.da=this.fa=!1}function ta(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function na(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function zb(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function oy(a){let d={};for(let f in a)d[f]=a[f];return d}let sy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ay(a,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)a[f]=g[f];for(let C=0;C<sy.length;C++)f=sy[C],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function ra(a){this.src=a,this.g={},this.h=0}ra.prototype.add=function(a,d,f,g,D){let C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);let x=Il(a,d,g,D);return x>-1?(d=a[x],f||(d.fa=!1)):(d=new $b(d,this.src,C,!!g,D),d.fa=f,a.push(d)),d};function El(a,d){let f=d.type;if(f in a.g){var g=a.g[f],D=Array.prototype.indexOf.call(g,d,void 0),C;(C=D>=0)&&Array.prototype.splice.call(g,D,1),C&&(ta(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Il(a,d,f,g){for(let D=0;D<a.length;++D){let C=a[D];if(!C.da&&C.listener==d&&C.capture==!!f&&C.ha==g)return D}return-1}var wl="closure_lm_"+(Math.random()*1e6|0),Tl={};function cy(a,d,f,g,D){if(g&&g.once)return ly(a,d,f,g,D);if(Array.isArray(d)){for(let C=0;C<d.length;C++)cy(a,d[C],f,g,D);return null}return f=Sl(f),a&&a[Sn]?a.J(d,f,c(g)?!!g.capture:!!g,D):uy(a,d,f,!1,g,D)}function uy(a,d,f,g,D,C){if(!d)throw Error("Invalid event type");let x=c(D)?!!D.capture:!!D,Y=bl(a);if(Y||(a[wl]=Y=new ra(a)),f=Y.add(d,f,g,x,C),f.proxy)return f;if(g=qb(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)b||(D=x),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(fy(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function qb(){function a(f){return d.call(a.src,a.listener,f)}let d=Gb;return a}function ly(a,d,f,g,D){if(Array.isArray(d)){for(let C=0;C<d.length;C++)ly(a,d[C],f,g,D);return null}return f=Sl(f),a&&a[Sn]?a.K(d,f,c(g)?!!g.capture:!!g,D):uy(a,d,f,!0,g,D)}function dy(a,d,f,g,D){if(Array.isArray(d))for(var C=0;C<d.length;C++)dy(a,d[C],f,g,D);else g=c(g)?!!g.capture:!!g,f=Sl(f),a&&a[Sn]?(a=a.i,C=String(d).toString(),C in a.g&&(d=a.g[C],f=Il(d,f,g,D),f>-1&&(ta(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[C],a.h--)))):a&&(a=bl(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Il(d,f,g,D)),(f=a>-1?d[a]:null)&&Dl(f))}function Dl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Sn])El(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(fy(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=bl(d))?(El(f,a),f.h==0&&(f.src=null,d[wl]=null)):ta(a)}}}function fy(a){return a in Tl?Tl[a]:Tl[a]="on"+a}function Gb(a,d){if(a.da)a=!0;else{d=new it(d,this);let f=a.listener,g=a.ha||a.src;a.fa&&Dl(a),a=f.call(g,d)}return a}function bl(a){return a=a[wl],a instanceof ra?a:null}var Cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sl(a){return typeof a=="function"?a:(a[Cl]||(a[Cl]=function(d){return a.handleEvent(d)}),a[Cl])}function $e(){w.call(this),this.i=new ra(this),this.M=this,this.G=null}p($e,w),$e.prototype[Sn]=!0,$e.prototype.removeEventListener=function(a,d,f,g){dy(this,a,d,f,g)};function Xe(a,d){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var D=d;d=new I(g,a),ay(d,D)}D=!0;let C,x;if(f)for(x=f.length-1;x>=0;x--)C=d.g=f[x],D=ia(C,g,!0,d)&&D;if(C=d.g=a,D=ia(C,g,!0,d)&&D,D=ia(C,g,!1,d)&&D,f)for(x=0;x<f.length;x++)C=d.g=f[x],D=ia(C,g,!1,d)&&D}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let g=0;g<f.length;g++)ta(f[g]);delete a.g[d],a.h--}}this.G=null},$e.prototype.J=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},$e.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function ia(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let C=0;C<d.length;++C){let x=d[C];if(x&&!x.da&&x.capture==f){let Y=x.listener,ke=x.ha||x.src;x.fa&&El(a.i,x),D=Y.call(ke,g)!==!1&&D}}return D&&!g.defaultPrevented}function Wb(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function hy(a){a.g=Wb(()=>{a.g=null,a.i&&(a.i=!1,hy(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class Kb extends w{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:hy(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ho(a){w.call(this),this.h=a,this.g={}}p(ho,w);var py=[];function gy(a){na(a.g,function(d,f){this.g.hasOwnProperty(f)&&Dl(d)},a),a.g={}}ho.prototype.N=function(){ho.Z.N.call(this),gy(this)},ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Al=s.JSON.stringify,Qb=s.JSON.parse,Yb=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function my(){}function yy(){}var po={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nl(){I.call(this,"d")}p(Nl,I);function Rl(){I.call(this,"c")}p(Rl,I);var cr={},vy=null;function oa(){return vy=vy||new $e}cr.Ia="serverreachability";function _y(a){I.call(this,cr.Ia,a)}p(_y,I);function go(a){let d=oa();Xe(d,new _y(d))}cr.STAT_EVENT="statevent";function Ey(a,d){I.call(this,cr.STAT_EVENT,a),this.stat=d}p(Ey,I);function et(a){let d=oa();Xe(d,new Ey(d,a))}cr.Ja="timingevent";function Iy(a,d){I.call(this,cr.Ja,a),this.size=d}p(Iy,I);function mo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function yo(){this.g=!0}yo.prototype.ua=function(){this.g=!1};function Zb(a,d,f,g,D,C){a.info(function(){if(a.g)if(C){var x="",Y=C.split("&");for(let ge=0;ge<Y.length;ge++){var ke=Y[ge].split("=");if(ke.length>1){let Le=ke[0];ke=ke[1];let Ft=Le.split("_");x=Ft.length>=2&&Ft[1]=="type"?x+(Le+"="+ke+"&"):x+(Le+"=redacted&")}}}else x=null;else x=C;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+x})}function Jb(a,d,f,g,D,C,x){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+C+" "+x})}function ti(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+eC(a,f)+(g?" "+g:"")})}function Xb(a,d){a.info(function(){return"TIMEOUT: "+d})}yo.prototype.info=function(){};function eC(a,d){if(!a.g)return d;if(!d)return null;try{let C=JSON.parse(d);if(C){for(a=0;a<C.length;a++)if(Array.isArray(C[a])){var f=C[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let x=1;x<g.length;x++)g[x]=""}}}}return Al(C)}catch{return d}}var sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ty;function Ml(){}p(Ml,my),Ml.prototype.g=function(){return new XMLHttpRequest},Ty=new Ml;function vo(a){return encodeURIComponent(String(a))}function tC(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function An(a,d,f,g){this.j=a,this.i=d,this.l=f,this.S=g||1,this.V=new ho(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dy}function Dy(){this.i=null,this.g="",this.h=!1}var by={},xl={};function Pl(a,d,f){a.M=1,a.A=ca(Lt(d)),a.u=f,a.R=!0,Cy(a,null)}function Cy(a,d){a.F=Date.now(),aa(a),a.B=Lt(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),By(f.i,"t",g),a.C=0,f=a.j.L,a.h=new Dy,a.g=rv(a.j,f?d:null,!a.u),a.P>0&&(a.O=new Kb(l(a.Y,a,a.g),a.P)),d=a.V,f=a.g,g=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(py[0]=D.toString()),D=py);for(let C=0;C<D.length;C++){let x=cy(f,D[C],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.J?oy(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),go(),Zb(a.i,a.v,a.B,a.l,a.S,a.u)}An.prototype.ba=function(a){a=a.target;let d=this.O;d&&Mn(a)==3?d.j():this.Y(a)},An.prototype.Y=function(a){try{if(a==this.g)e:{let Y=Mn(this.g),ke=this.g.ya(),ge=this.g.ca();if(!(Y<3)&&(Y!=3||this.g&&(this.h.h||this.g.la()||Gy(this.g)))){this.K||Y!=4||ke==7||(ke==8||ge<=0?go(3):go(2)),kl(this);var d=this.g.ca();this.X=d;var f=nC(this);if(this.o=d==200,Jb(this.i,this.v,this.B,this.l,this.S,Y,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var C=g;break t}}C=null}if(a=C)ti(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ol(this,a);else{this.o=!1,this.m=3,et(12),ur(this),_o(this);break e}}if(this.R){a=!0;let Le;for(;!this.K&&this.C<f.length;)if(Le=rC(this,f),Le==xl){Y==4&&(this.m=4,et(14),a=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==by){this.m=4,et(15),ti(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ti(this.i,this.l,Le,null),Ol(this,Le);if(Sy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Y!=4||f.length!=0||this.h.h||(this.m=1,et(16),a=!1),this.o=this.o&&a,!a)ti(this.i,this.l,f,"[Invalid Chunked Response]"),ur(this),_o(this);else if(f.length>0&&!this.W){this.W=!0;var x=this.j;x.g==this&&x.aa&&!x.P&&(x.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Hl(x),x.P=!0,et(11))}}else ti(this.i,this.l,f,null),Ol(this,f);Y==4&&ur(this),this.o&&!this.K&&(Y==4?Xy(this.j,this):(this.o=!1,aa(this)))}else yC(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),ur(this),_o(this)}}}catch{}finally{}};function nC(a){if(!Sy(a))return a.g.la();let d=Gy(a.g);if(d==="")return"";let f="",g=d.length,D=Mn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ur(a),_o(a),"";a.h.i=new s.TextDecoder}for(let C=0;C<g;C++)a.h.h=!0,f+=a.h.i.decode(d[C],{stream:!(D&&C==g-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function Sy(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function rC(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?xl:(f=Number(d.substring(f,g)),isNaN(f)?by:(g+=1,g+f>d.length?xl:(d=d.slice(g,g+f),a.C=g+f,d)))}An.prototype.cancel=function(){this.K=!0,ur(this)};function aa(a){a.T=Date.now()+a.H,Ay(a,a.H)}function Ay(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=mo(l(a.aa,a),d)}function kl(a){a.D&&(s.clearTimeout(a.D),a.D=null)}An.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(Xb(this.i,this.B),this.M!=2&&(go(),et(17)),ur(this),this.m=2,_o(this)):Ay(this,this.T-a)};function _o(a){a.j.I==0||a.K||Xy(a.j,a)}function ur(a){kl(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,gy(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function Ol(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||Ll(f.h,a))){if(!a.L&&Ll(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)pa(f),fa(f);else break e;Ul(f),et(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=mo(l(f.Va,f),6e3));My(f.h)<=1&&f.ta&&(f.ta=void 0)}else dr(f,11)}else if((a.L||f.g==a)&&pa(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let ge=D[d],Le=ge[0];if(!(Le<=f.K))if(f.K=Le,ge=ge[1],f.I==2)if(ge[0]=="c"){f.M=ge[1],f.ba=ge[2];let Ft=ge[3];Ft!=null&&(f.ka=Ft,f.j.info("VER="+f.ka));let fr=ge[4];fr!=null&&(f.za=fr,f.j.info("SVER="+f.za));let xn=ge[5];xn!=null&&typeof xn=="number"&&xn>0&&(g=1.5*xn,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Pn=a.g;if(Pn){let ma=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var C=g.h;C.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Fl(C,C.h),C.h=null))}if(g.G){let $l=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&(g.wa=$l,ye(g.J,g.G,$l))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var x=a;if(g.na=nv(g,g.L?g.ba:null,g.W),x.L){xy(g.h,x);var Y=x,ke=g.O;ke&&(Y.H=ke),Y.D&&(kl(Y),aa(Y)),g.g=x}else Zy(g);f.i.length>0&&ha(f)}else ge[0]!="stop"&&ge[0]!="close"||dr(f,7);else f.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?dr(f,7):jl(f):ge[0]!="noop"&&f.l&&f.l.qa(ge),f.A=0)}}go(4)}catch{}}var iC=class{constructor(a,d){this.g=a,this.map=d}};function Ny(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ry(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function My(a){return a.h?1:a.g?a.g.size:0}function Ll(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Fl(a,d){a.g?a.g.add(d):a.h=d}function xy(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Ny.prototype.cancel=function(){if(this.i=Py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Py(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return E(a.i)}var ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oC(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let g=a[f].indexOf("="),D,C=null;g>=0?(D=a[f].substring(0,g),C=a[f].substring(g+1)):D=a[f],d(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Nn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Nn?(this.l=a.l,Eo(this,a.j),this.o=a.o,this.g=a.g,Io(this,a.u),this.h=a.h,Vl(this,jy(a.i)),this.m=a.m):a&&(d=String(a).match(ky))?(this.l=!1,Eo(this,d[1]||"",!0),this.o=wo(d[2]||""),this.g=wo(d[3]||"",!0),Io(this,d[4]),this.h=wo(d[5]||"",!0),Vl(this,d[6]||"",!0),this.m=wo(d[7]||"")):(this.l=!1,this.i=new Do(null,this.l))}Nn.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(To(d,Oy,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(To(d,Oy,!0),"@"),a.push(vo(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(To(f,f.charAt(0)=="/"?cC:aC,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",To(f,lC)),a.join("")},Nn.prototype.resolve=function(a){let d=Lt(this),f=!!a.j;f?Eo(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var g=a.h;if(f)Io(d,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let C=[];for(let x=0;x<D.length;){let Y=D[x++];Y=="."?g&&x==D.length&&C.push(""):Y==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),g&&x==D.length&&C.push("")):(C.push(Y),g=!0)}g=C.join("/")}else g=D}return f?d.h=g:f=a.i.toString()!=="",f?Vl(d,jy(a.i)):f=!!a.m,f&&(d.m=a.m),d};function Lt(a){return new Nn(a)}function Eo(a,d,f){a.j=f?wo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Io(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function Vl(a,d,f){d instanceof Do?(a.i=d,dC(a.i,a.l)):(f||(d=To(d,uC)),a.i=new Do(d,a.l))}function ye(a,d,f){a.i.set(d,f)}function ca(a){return ye(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function wo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function To(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,sC),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function sC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Oy=/[#\/\?@]/g,aC=/[#\?:]/g,cC=/[#\?]/g,uC=/[#\?@]/g,lC=/#/g;function Do(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function lr(a){a.g||(a.g=new Map,a.h=0,a.i&&oC(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Do.prototype,n.add=function(a,d){lr(this),this.i=null,a=ni(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Ly(a,d){lr(a),d=ni(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Fy(a,d){return lr(a),d=ni(a,d),a.g.has(d)}n.forEach=function(a,d){lr(this),this.g.forEach(function(f,g){f.forEach(function(D){a.call(d,D,g,this)},this)},this)};function Vy(a,d){lr(a);let f=[];if(typeof d=="string")Fy(a,d)&&(f=f.concat(a.g.get(ni(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}n.set=function(a,d){return lr(this),this.i=null,a=ni(this,a),Fy(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=Vy(this,a),a.length>0?String(a[0]):d):d};function By(a,d,f){Ly(a,d),f.length>0&&(a.i=null,a.g.set(ni(a,d),E(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let D=vo(f);f=Vy(this,f);for(let C=0;C<f.length;C++){let x=D;f[C]!==""&&(x+="="+vo(f[C])),a.push(x)}}return this.i=a.join("&")};function jy(a){let d=new Do;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function ni(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function dC(a,d){d&&!a.j&&(lr(a),a.i=null,a.g.forEach(function(f,g){let D=g.toLowerCase();g!=D&&(Ly(this,g),By(this,D,f))},a)),a.j=d}function fC(a,d){let f=new yo;if(s.Image){let g=new Image;g.onload=h(Rn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(Rn,f,"TestLoadImage: error",!1,d,g),g.onabort=h(Rn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(Rn,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function hC(a,d){let f=new yo,g=new AbortController,D=setTimeout(()=>{g.abort(),Rn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(C=>{clearTimeout(D),C.ok?Rn(f,"TestPingServer: ok",!0,d):Rn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Rn(f,"TestPingServer: error",!1,d)})}function Rn(a,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function pC(){this.g=new Yb}function ua(a){this.i=a.Sb||null,this.h=a.ab||!1}p(ua,my),ua.prototype.g=function(){return new la(this.i,this.h)};function la(a,d){$e.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(la,$e),n=la.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Co(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uy(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uy(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?bo(this):Co(this),this.readyState==3&&Uy(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,bo(this))},n.Na=function(a){this.g&&(this.response=a,bo(this))},n.ga=function(){this.g&&bo(this)};function bo(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Co(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Co(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Hy(a){let d="";return na(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Bl(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Hy(f),typeof a=="string"?f!=null&&vo(f):ye(a,d,f))}function Te(a){$e.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Te,$e);var gC=/^https?$/i,mC=["POST","PUT"];n=Te.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ty.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(C){$y(this,C);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())f.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(C=>C.toLowerCase()=="content-type"),D=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(mC,d,void 0)>=0)||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,x]of f)this.g.setRequestHeader(C,x);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(C){$y(this,C)}};function $y(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,zy(a),da(a)}function zy(a){a.A||(a.A=!0,Xe(a,"complete"),Xe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Xe(this,"complete"),Xe(this,"abort"),da(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),Te.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qy(this):this.Xa())},n.Xa=function(){qy(this)};function qy(a){if(a.h&&typeof o<"u"){if(a.v&&Mn(a)==4)setTimeout(a.Ca.bind(a),0);else if(Xe(a,"readystatechange"),Mn(a)==4){a.h=!1;try{let C=a.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=C===0){let x=String(a.D).match(ky)[1]||null;!x&&s.self&&s.self.location&&(x=s.self.location.protocol.slice(0,-1)),g=!gC.test(x?x.toLowerCase():"")}f=g}if(f)Xe(a,"complete"),Xe(a,"success");else{a.o=6;try{var D=Mn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",zy(a)}}finally{da(a)}}}}function da(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||Xe(a,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Mn(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Mn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Qb(d)}};function Gy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function yC(a){let d={};a=(a.g&&Mn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=tC(a[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let C=d[D]||[];d[D]=C,C.push(f)}zb(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Wy(a){this.za=0,this.i=[],this.j=new yo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=So("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=So("baseRetryDelayMs",5e3,a),this.Za=So("retryDelaySeedMs",1e4,a),this.Ta=So("forwardChannelMaxRetries",2,a),this.va=So("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ny(a&&a.concurrentRequestLimit),this.Ba=new pC,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Wy.prototype,n.ka=8,n.I=1,n.connect=function(a,d,f,g){et(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=nv(this,null,this.W),ha(this)};function jl(a){if(Ky(a),a.I==3){var d=a.V++,f=Lt(a.J);if(ye(f,"SID",a.M),ye(f,"RID",d),ye(f,"TYPE","terminate"),Ao(a,f),d=new An(a,a.j,d),d.M=2,d.A=ca(Lt(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=rv(d.j,null),d.g.ea(d.A)),d.F=Date.now(),aa(d)}tv(a)}function fa(a){a.g&&(Hl(a),a.g.cancel(),a.g=null)}function Ky(a){fa(a),a.v&&(s.clearTimeout(a.v),a.v=null),pa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function ha(a){if(!Ry(a.h)&&!a.m){a.m=!0;var d=a.Ea;Pe||y(),Ae||(Pe(),Ae=!0),T.add(d,a),a.D=0}}function vC(a,d){return My(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=mo(l(a.Ea,a,d),ev(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let D=new An(this,this.j,a),C=this.o;if(this.U&&(C?(C=oy(C),ay(C,this.U)):C=this.U),this.u!==null||this.R||(D.J=C,C=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Yy(this,D,d),f=Lt(this.J),ye(f,"RID",a),ye(f,"CVER",22),this.G&&ye(f,"X-HTTP-Session-Id",this.G),Ao(this,f),C&&(this.R?d="headers="+vo(Hy(C))+"&"+d:this.u&&Bl(f,this.u,C)),Fl(this.h,D),this.Ra&&ye(f,"TYPE","init"),this.S?(ye(f,"$req",d),ye(f,"SID","null"),D.U=!0,Pl(D,f,null)):Pl(D,f,d),this.I=2}}else this.I==3&&(a?Qy(this,a):this.i.length==0||Ry(this.h)||Qy(this))};function Qy(a,d){var f;d?f=d.l:f=a.V++;let g=Lt(a.J);ye(g,"SID",a.M),ye(g,"RID",f),ye(g,"AID",a.K),Ao(a,g),a.u&&a.o&&Bl(g,a.u,a.o),f=new An(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Yy(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Fl(a.h,f),Pl(f,g,d)}function Ao(a,d){a.H&&na(a.H,function(f,g){ye(d,g,f)}),a.l&&na({},function(f,g){ye(d,g,f)})}function Yy(a,d,f){f=Math.min(a.i.length,f);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var D=a.i;let Y=-1;for(;;){let ke=["count="+f];Y==-1?f>0?(Y=D[0].g,ke.push("ofs="+Y)):Y=0:ke.push("ofs="+Y);let ge=!0;for(let Le=0;Le<f;Le++){var C=D[Le].g;let Ft=D[Le].map;if(C-=Y,C<0)Y=Math.max(0,D[Le].g-100),ge=!1;else try{C="req"+C+"_"||"";try{var x=Ft instanceof Map?Ft:Object.entries(Ft);for(let[fr,xn]of x){let Pn=xn;c(xn)&&(Pn=Al(xn)),ke.push(C+fr+"="+encodeURIComponent(Pn))}}catch(fr){throw ke.push(C+"type="+encodeURIComponent("_badmap")),fr}}catch{g&&g(Ft)}}if(ge){x=ke.join("&");break e}}x=void 0}return a=a.i.splice(0,f),d.G=a,x}function Zy(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;Pe||y(),Ae||(Pe(),Ae=!0),T.add(d,a),a.A=0}}function Ul(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=mo(l(a.Da,a),ev(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,Jy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=mo(l(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),fa(this),Jy(this))};function Hl(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function Jy(a){a.g=new An(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Lt(a.na);ye(d,"RID","rpc"),ye(d,"SID",a.M),ye(d,"AID",a.K),ye(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&ye(d,"TO",a.ia),ye(d,"TYPE","xmlhttp"),Ao(a,d),a.u&&a.o&&Bl(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=ca(Lt(d)),f.u=null,f.R=!0,Cy(f,a)}n.Va=function(){this.C!=null&&(this.C=null,fa(this),Ul(this),et(19))};function pa(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function Xy(a,d){var f=null;if(a.g==d){pa(a),Hl(a),a.g=null;var g=2}else if(Ll(a.h,d))f=d.G,xy(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=a.D;g=oa(),Xe(g,new Iy(g,f)),ha(a)}else Zy(a);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&vC(a,d)||g==2&&Ul(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),D){case 1:dr(a,5);break;case 4:dr(a,10);break;case 3:dr(a,6);break;default:dr(a,2)}}}function ev(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function dr(a,d){if(a.j.info("Error code "+d),d==2){var f=l(a.bb,a),g=a.Ua;let D=!g;g=new Nn(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Eo(g,"https"),ca(g),D?fC(g.toString(),f):hC(g.toString(),f)}else et(2);a.I=0,a.l&&a.l.pa(d),tv(a),Ky(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function tv(a){if(a.I=0,a.ja=[],a.l){let d=Py(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ja,d),A(a.ja,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.oa()}}function nv(a,d,f){var g=f instanceof Nn?Lt(f):new Nn(f);if(g.g!="")d&&(g.g=d+"."+g.g),Io(g,g.u);else{var D=s.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let C=new Nn(null);g&&Eo(C,g),d&&(C.g=d),D&&Io(C,D),f&&(C.h=f),g=C}return f=a.G,d=a.wa,f&&d&&ye(g,f,d),ye(g,"VER",a.ka),Ao(a,g),g}function rv(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Te(new ua({ab:f})):new Te(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iv(){}n=iv.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ga(){}ga.prototype.g=function(a,d){return new at(a,d)};function at(a,d){$e.call(this),this.g=new Wy(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ri(this)}p(at,$e),at.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},at.prototype.close=function(){jl(this.g)},at.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Al(a),a=f);d.i.push(new iC(d.Ya++,a)),d.I==3&&ha(d)},at.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,at.Z.N.call(this)};function ov(a){Nl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(ov,Nl);function sv(){Rl.call(this),this.status=1}p(sv,Rl);function ri(a){this.g=a}p(ri,iv),ri.prototype.ra=function(){Xe(this.g,"a")},ri.prototype.qa=function(a){Xe(this.g,new ov(a))},ri.prototype.pa=function(a){Xe(this.g,new sv)},ri.prototype.oa=function(){Xe(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,at.prototype.send=at.prototype.o,at.prototype.open=at.prototype.m,at.prototype.close=at.prototype.close,up=mn.createWebChannelTransport=function(){return new ga},cp=mn.getStatEventTarget=function(){return oa()},ap=mn.Event=cr,eu=mn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,Ds=mn.ErrorCode=sa,wy.COMPLETE="complete",sp=mn.EventType=wy,yy.EventType=po,po.OPEN="a",po.CLOSE="b",po.ERROR="c",po.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Li=mn.WebChannel=yy,UM=mn.FetchXmlHttpFactory=ua,Te.prototype.listenOnce=Te.prototype.K,Te.prototype.getLastError=Te.prototype.Ha,Te.prototype.getLastErrorCode=Te.prototype.ya,Te.prototype.getStatus=Te.prototype.ca,Te.prototype.getResponseJson=Te.prototype.La,Te.prototype.getResponseText=Te.prototype.la,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Fa,op=mn.XhrIo=Te}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});var Cw="@firebase/firestore",Sw="4.9.3";var Ue=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");var ro="12.7.0";var Hr=new qn("@firebase/firestore");function Fi(){return Hr.logLevel}function k(n,...e){if(Hr.logLevel<=te.DEBUG){let t=e.map(Zg);Hr.debug(`Firestore (${ro}): ${n}`,...t)}}function yn(n,...e){if(Hr.logLevel<=te.ERROR){let t=e.map(Zg);Hr.error(`Firestore (${ro}): ${n}`,...t)}}function qi(n,...e){if(Hr.logLevel<=te.WARN){let t=e.map(Zg);Hr.warn(`Firestore (${ro}): ${n}`,...t)}}function Zg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function B(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,hT(n,r,t)}function hT(n,e,t){let r=`FIRESTORE (${ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yn(r),new Error(r)}function fe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||hT(e,i,r)}function G(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends dt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Jt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var au=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ue.UNAUTHENTICATED))}shutdown(){}},mp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yp=class{constructor(e){this.t=e,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new au(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new Ue(e)}},vp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},_p=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new vp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ep=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){fe(this.o===void 0,3512);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cu(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function HM(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Rs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=HM(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ne(n,e){return n<e?-1:n>e?1:0}function Ip(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return lp(i)===lp(o)?ne(i,o):lp(i)?1:-1}return ne(n.length,e.length)}var $M=55296,zM=57343;function lp(n){let e=n.charCodeAt(0);return e>=$M&&e<=zM}function Gi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Aw="__name__",uu=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&B(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gn.fromString(e.substring(4,e.length-2))}},Ce=class n extends uu{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},qM=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=class n extends uu{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return qM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Aw}static keyField(){return new n([Aw])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ce.fromString(e))}static fromName(e){return new n(Ce.fromString(e).popFirst(5))}static empty(){return new n(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ce(e.slice()))}};function GM(n,e,t){if(!t)throw new L(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WM(n,e,t,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nw(n){if(!j.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B(12329,{type:typeof n})}function Qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jg(n);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Me(n,e){let t={typeString:n};return e&&(t.value=e),t}function $s(n,e){if(!pT(n))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new L(N.INVALID_ARGUMENT,t);return!0}var Rw=-62135596800,Mw=1e6,xe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Mw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Rw)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mw}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($s(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Me("string",xe._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};var Q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new xe(0,0))}static max(){return new n(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ms=-1,wp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};wp.UNKNOWN_ID=-1;function KM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new xe(t+1,0):new xe(t,r));return new $r(i,j.empty(),e)}function QM(n){return new $r(n.readTime,n.key,Ms)}var $r=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),j.empty(),Ms)}static max(){return new n(Q.max(),j.empty(),Ms)}};function YM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:ne(n.largestBatchId,e.largestBatchId))}var ZM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function io(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==ZM)throw n;k("LocalStore","Unexpectedly lost primary lease")}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function JM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oo(n){return n.name==="IndexedDbTransactionError"}var Xg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),em=-1;function Uu(n){return n==null}function xs(n){return n===0&&1/n==-1/0}function XM(n){return typeof n=="number"&&Number.isInteger(n)&&!xs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var gT="";function ex(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xw(e)),e=tx(n.get(t),e);return xw(e)}function tx(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case gT:t+="";break;default:t+=o}}return t}function xw(n){return n+gT+""}var nx="remoteDocuments",mT="owner";var yT="mutationQueues";var vT="mutations";var _T="documentMutations",rx="remoteDocumentsV14";var ET="remoteDocumentGlobal";var IT="targets";var wT="targetDocuments";var TT="targetGlobal",DT="collectionParents";var bT="clientMetadata";var CT="bundles";var ST="namedQueries";var ix="indexConfiguration";var ox="indexState";var sx="indexEntries";var AT="documentOverlays";var ax="globals";var cx=[yT,vT,_T,nx,IT,mT,TT,wT,bT,ET,DT,CT,ST],t5=[...cx,AT],ux=[yT,vT,_T,rx,IT,mT,TT,wT,bT,ET,DT,CT,ST,AT],lx=ux,dx=[...lx,ix,ox,sx];var n5=[...dx,ax];function Pw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var be=class n{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ui(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ui(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ui(this.root,e,this.comparator,!0)}},Ui=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xt=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var He=class n{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lu(this.data.getIterator())}getIteratorFrom(e){return new lu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zt=class n{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new n([])}unionWith(e){let t=new He(ft.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var du=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new du("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var fx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vn(n){if(fe(!!n,39018),typeof n=="string"){let e=0,t=fx.exec(n);if(fe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(n.seconds),nanos:Ie(n.nanos)}}function Ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _n(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}var RT="server_timestamp",MT="__type__",xT="__previous_value__",PT="__local_write_time__";function tm(n){return(n?.mapValue?.fields||{})[MT]?.stringValue===RT}function Hu(n){let e=n.mapValue.fields[xT];return tm(e)?Hu(e):e}function Ps(n){let e=vn(n.mapValue.fields[PT].timestampValue);return new xe(e.seconds,e.nanos)}var Dp=class{constructor(e,t,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},fu="(default)",hu=class n{constructor(e,t){this.projectId=e,this.database=t||fu}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===fu}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var nm="__type__",kT="__max__",tu={mapValue:{fields:{__type__:{stringValue:kT}}}},rm="__vector__",Wi="value";function Xn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tm(n)?4:LT(n)?9007199254740991:OT(n)?10:11:B(28295,{value:n})}function nn(n,e){if(n===e)return!0;let t=Xn(n);if(t!==Xn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ps(n).isEqual(Ps(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=vn(i.timestampValue),c=vn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return _n(i.bytesValue).isEqual(_n(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ie(i.geoPointValue.latitude)===Ie(o.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ie(i.integerValue)===Ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ie(i.doubleValue),c=Ie(o.doubleValue);return s===c?xs(s)===xs(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return Gi(n.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Pw(s)!==Pw(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!nn(s[u],c[u])))return!1;return!0})(n,e);default:return B(52216,{left:n})}}function ks(n,e){return(n.values||[]).find(t=>nn(t,e))!==void 0}function Ki(n,e){if(n===e)return 0;let t=Xn(n),r=Xn(e);if(t!==r)return ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ie(o.integerValue||o.doubleValue),u=Ie(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return kw(n.timestampValue,e.timestampValue);case 4:return kw(Ps(n),Ps(e));case 5:return Ip(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=_n(o),u=_n(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ne(c[l],u[l]);if(h!==0)return h}return ne(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=ne(Ie(o.latitude),Ie(s.latitude));return c!==0?c:ne(Ie(o.longitude),Ie(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ow(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[Wi]?.arrayValue,h=u[Wi]?.arrayValue,p=ne(l?.values?.length||0,h?.values?.length||0);return p!==0?p:Ow(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===tu.mapValue&&s===tu.mapValue)return 0;if(o===tu.mapValue)return 1;if(s===tu.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Ip(u[p],h[p]);if(m!==0)return m;let E=Ki(c[u[p]],l[h[p]]);if(E!==0)return E}return ne(u.length,h.length)})(n.mapValue,e.mapValue);default:throw B(23264,{he:t})}}function kw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ne(n,e);let t=vn(n),r=vn(e),i=ne(t.seconds,r.seconds);return i!==0?i:ne(t.nanos,r.nanos)}function Ow(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ki(t[i],r[i]);if(o)return o}return ne(t.length,r.length)}function Qi(n){return bp(n)}function bp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=vn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return _n(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return j.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=bp(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${bp(t.fields[s])}`;return i+"}"})(n.mapValue):B(61005,{value:n})}function iu(n){switch(Xn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Hu(n);return e?16+iu(e):16;case 5:return 2*n.stringValue.length;case 6:return _n(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+iu(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Yr(r.fields,(o,s)=>{i+=o.length+iu(s)}),i})(n.mapValue);default:throw B(13486,{value:n})}}function Cp(n){return!!n&&"integerValue"in n}function im(n){return!!n&&"arrayValue"in n}function Lw(n){return!!n&&"nullValue"in n}function Fw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ou(n){return!!n&&"mapValue"in n}function OT(n){return(n?.mapValue?.fields||{})[nm]?.stringValue===rm}function Cs(n){if(n.geoPointValue)return{geoPointValue:U({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:U({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Yr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cs(n.arrayValue.values[t]);return e}return U({},n)}function LT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kT}var i5={mapValue:{fields:{[nm]:{stringValue:rm},[Wi]:{arrayValue:{}}}}};var Pt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cs(t)}setAll(e){let t=ft.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Cs(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ou(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Cs(this.value))}};function FT(n){let e=[];return Yr(n.fields,(t,r)=>{let i=new ft([t]);if(ou(r)){let o=FT(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}var kt=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),Pt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),Pt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),Pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yi=class{constructor(e,t){this.position=e,this.inclusive=t}};function Vw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),t.key):r=Ki(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nn(n.position[t],e.position[t]))return!1;return!0}var Zi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function hx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pu=class{},Oe=class n extends pu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ap(e,t,r):t==="array-contains"?new Mp(e,r):t==="in"?new xp(e,r):t==="not-in"?new Pp(e,r):t==="array-contains-any"?new kp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Np(e,r):new Rp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ki(t,this.value)):t!==null&&Xn(this.value)===Xn(t)&&this.matchesComparison(Ki(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},rn=class n extends pu{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return VT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function VT(n){return n.op==="and"}function BT(n){return px(n)&&VT(n)}function px(n){for(let e of n.filters)if(e instanceof rn)return!1;return!0}function Sp(n){if(n instanceof Oe)return n.field.canonicalString()+n.op.toString()+Qi(n.value);if(BT(n))return n.filters.map(e=>Sp(e)).join(",");{let e=n.filters.map(t=>Sp(t)).join(",");return`${n.op}(${e})`}}function jT(n,e){return n instanceof Oe?(function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&nn(r.value,i.value)})(n,e):n instanceof rn?(function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&jT(s,i.filters[c]),!0):!1})(n,e):void B(19439)}function UT(n){return n instanceof Oe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qi(t.value)}`})(n):n instanceof rn?(function(t){return t.op.toString()+" {"+t.getFilters().map(UT).join(" ,")+"}"})(n):"Filter"}var Ap=class extends Oe{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},Np=class extends Oe{constructor(e,t){super(e,"in",t),this.keys=HT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Rp=class extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=HT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function HT(n,e){return(e.arrayValue?.values||[]).map(t=>j.fromName(t.referenceValue))}var Mp=class extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return im(t)&&ks(t.arrayValue,this.value)}},xp=class extends Oe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ks(this.value.arrayValue,t)}},Pp=class extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ks(this.value.arrayValue,t)}},kp=class extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!im(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ks(this.value.arrayValue,r))}};var Op=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function jw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Op(n,e,t,r,i,o,s)}function om(n){let e=G(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Uu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qi(r)).join(",")),e.Te=t}return e.Te}function sm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bw(n.startAt,e.startAt)&&Bw(n.endAt,e.endAt)}function Lp(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ji=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function gx(n,e,t,r,i,o,s,c){return new Ji(n,e,t,r,i,o,s,c)}function $u(n){return new Ji(n)}function Uw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mx(n){return n.collectionGroup!==null}function Ss(n){let e=G(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new He(ft.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Zi(o,r))}),t.has(ft.keyField().canonicalString())||e.Ie.push(new Zi(ft.keyField(),r))}return e.Ie}function en(n){let e=G(n);return e.Ee||(e.Ee=yx(e,Ss(n))),e.Ee}function yx(n,e){if(n.limitType==="F")return jw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zi(i.field,o)});let t=n.endAt?new Yi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yi(n.startAt.position,n.startAt.inclusive):null;return jw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fp(n,e,t){return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zu(n,e){return sm(en(n),en(e))&&n.limitType===e.limitType}function $T(n){return`${om(en(n))}|lt:${n.limitType}`}function Vi(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>UT(i)).join(", ")}]`),Uu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qi(i)).join(",")),`Target(${r})`})(en(n))}; limitType=${n.limitType})`}function qu(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ss(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=Vw(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Ss(r),i)||r.endAt&&!(function(s,c,u){let l=Vw(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Ss(r),i))})(n,e)}function vx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zT(n){return(e,t)=>{let r=!1;for(let i of Ss(n)){let o=_x(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _x(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Ki(u,l):B(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:n.dir})}}var En=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return NT(this.inner)}size(){return this.innerSize}};var Ex=new be(j.comparator);function In(){return Ex}var qT=new be(j.comparator);function bs(...n){let e=qT;for(let t of n)e=e.insert(t.key,t);return e}function GT(n){let e=qT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fr(){return As()}function WT(){return As()}function As(){return new En(n=>n.toString(),(n,e)=>n.isEqual(e))}var Ix=new be(j.comparator),wx=new He(j.comparator);function re(...n){let e=wx;for(let t of n)e=e.add(t);return e}var Tx=new He(ne);function Dx(){return Tx}function am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xs(e)?"-0":e}}function KT(n){return{integerValue:""+n}}function QT(n,e){return XM(e)?KT(e):am(n,e)}var Xi=class{constructor(){this._=void 0}};function bx(n,e,t){return n instanceof eo?(function(i,o){let s={fields:{[MT]:{stringValue:RT},[PT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&tm(o)&&(o=Hu(o)),o&&(s.fields[xT]=o),{mapValue:s}})(t,e):n instanceof zr?ZT(n,e):n instanceof qr?JT(n,e):(function(i,o){let s=YT(i,o),c=Hw(s)+Hw(i.Ae);return Cp(s)&&Cp(i.Ae)?KT(c):am(i.serializer,c)})(n,e)}function Cx(n,e,t){return n instanceof zr?ZT(n,e):n instanceof qr?JT(n,e):t}function YT(n,e){return n instanceof Gr?(function(r){return Cp(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var eo=class extends Xi{},zr=class extends Xi{constructor(e){super(),this.elements=e}};function ZT(n,e){let t=XT(e);for(let r of n.elements)t.some(i=>nn(i,r))||t.push(r);return{arrayValue:{values:t}}}var qr=class extends Xi{constructor(e){super(),this.elements=e}};function JT(n,e){let t=XT(e);for(let r of n.elements)t=t.filter(i=>!nn(i,r));return{arrayValue:{values:t}}}var Gr=class extends Xi{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Hw(n){return Ie(n.integerValue||n.doubleValue)}function XT(n){return im(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Vp=class{constructor(e,t){this.field=e,this.transform=t}};function Sx(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof zr&&i instanceof zr||r instanceof qr&&i instanceof qr?Gi(r.elements,i.elements,nn):r instanceof Gr&&i instanceof Gr?nn(r.Ae,i.Ae):r instanceof eo&&i instanceof eo})(n.transform,e.transform)}var Bp=class{constructor(e,t){this.version=e,this.transformResults=t}},jr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function su(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var to=class{};function eD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gu(n.key,jr.none()):new Wr(n.key,n.data,jr.none());{let t=n.data,r=Pt.empty(),i=new He(ft.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new wn(n.key,r,new Zt(i.toArray()),jr.none())}}function Ax(n,e,t){n instanceof Wr?(function(i,o,s){let c=i.value.clone(),u=zw(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof wn?(function(i,o,s){if(!su(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=zw(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(tD(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Ns(n,e,t,r){return n instanceof Wr?(function(o,s,c,u){if(!su(o.precondition,s))return c;let l=o.value.clone(),h=qw(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof wn?(function(o,s,c,u){if(!su(o.precondition,s))return c;let l=qw(o.fieldTransforms,u,s),h=s.data;return h.setAll(tD(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,c){return su(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function Nx(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=YT(r.transform,i||null);o!=null&&(t===null&&(t=Pt.empty()),t.set(r.field,o))}return t||null}function $w(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gi(r,i,(o,s)=>Sx(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wr=class extends to{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},wn=class extends to{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tD(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zw(n,e,t){let r=new Map;fe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,Cx(s,c,t[i]))}return r}function qw(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,bx(o,s,e))}return r}var gu=class extends to{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},jp=class extends to{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Up=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Ax(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ns(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ns(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=eD(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(t,r)=>$w(t,r))&&Gi(this.baseMutations,e.baseMutations,(t,r)=>$w(t,r))}},Hp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Ix})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var $p=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ne,oe;function Rx(n){switch(n){case N.OK:return B(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return B(15467,{code:n})}}function nD(n){if(n===void 0)return yn("GRPC error has no .code"),N.UNKNOWN;switch(n){case Ne.OK:return N.OK;case Ne.CANCELLED:return N.CANCELLED;case Ne.UNKNOWN:return N.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return N.INTERNAL;case Ne.UNAVAILABLE:return N.UNAVAILABLE;case Ne.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ne.NOT_FOUND:return N.NOT_FOUND;case Ne.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ne.ABORTED:return N.ABORTED;case Ne.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ne.DATA_LOSS:return N.DATA_LOSS;default:return B(39323,{code:n})}}(oe=Ne||(Ne={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var Mx=null;function xx(){return new TextEncoder}var Px=new gn([4294967295,4294967295],0);function Gw(n){let e=xx().encode(n),t=new ip;return t.update(e),new Uint8Array(t.digest())}function Ww(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gn([t,r],0),new gn([i,o],0)]}var qp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vr(`Invalid padding: ${t}`);if(r<0)throw new Vr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vr(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(gn.fromNumber(r)));return i.compare(Px)===1&&(i=new gn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Gw(e),[r,i]=Ww(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=Gw(e),[r,i]=Ww(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Vr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Os.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new be(ne),In(),re())}},Os=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,re(),re(),re())}};var Hi=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},yu=class{constructor(e,t){this.targetId=e,this.Ce=t}},vu=class{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},_u=class{constructor(){this.ve=0,this.Fe=Kw(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),t=re(),r=re();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new Os(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Kw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Gp=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=In(),this.Je=nu(),this.He=nu(),this.Ye=new be(ne)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Lp(o))if(r===0){let s=new j(o.path);this.et(t,s,kt.newNoDocument(s,Q.min()))}else fe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}Mx?.lt((function(h,p,m,E,A){let M={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},S=p.unchangedNames;return S&&(M.bloomFilter={applied:A===0,hashCount:S?.hashCount??0,bitmapLength:S?.bits?.bitmap?.length??0,padding:S?.bits?.padding??0,mightContain:P=>E?.mightContain(P)??!1}),M})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=_n(r).toUint8Array()}catch(u){if(u instanceof du)return qi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new qp(s,i,o)}catch(u){return qi(u instanceof Vr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Lp(c.target)){let u=new j(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,kt.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=re();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new mu(e,t,this.Ye,this.je,r);return this.je=In(),this.Je=nu(),this.He=nu(),this.Ye=new be(ne),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _u,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new He(ne),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new He(ne),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _u),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function nu(){return new be(j.comparator)}function Kw(){return new be(j.comparator)}var kx={asc:"ASCENDING",desc:"DESCENDING"},Ox={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lx={and:"AND",or:"OR"},Wp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Kp(n,e){return n.useProto3Json||Uu(e)?e:{value:e}}function Eu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fx(n,e){return Eu(n,e.toTimestamp())}function tn(n){return fe(!!n,49232),Q.fromTimestamp((function(t){let r=vn(t);return new xe(r.seconds,r.nanos)})(n))}function cm(n,e){return Qp(n,e).canonicalString()}function Qp(n,e){let t=(function(i){return new Ce(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iD(n){let e=Ce.fromString(n);return fe(uD(e),10190,{key:e.toString()}),e}function Yp(n,e){return cm(n.databaseId,e.path)}function dp(n,e){let t=iD(e);if(t.get(1)!==n.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(sD(t))}function oD(n,e){return cm(n.databaseId,e)}function Vx(n){let e=iD(n);return e.length===4?Ce.emptyPath():sD(e)}function Zp(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sD(n){return fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Qw(n,e,t){return{name:Yp(n,e),fields:t.value.mapValue.fields}}function Bx(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(fe(h===void 0||typeof h=="string",58123),Je.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Je.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:nD(l.code);return new L(h,l.message||"")})(s);t=new vu(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=dp(n,r.document.name),o=tn(r.document.updateTime),s=r.document.createTime?tn(r.document.createTime):Q.min(),c=new Pt({mapValue:{fields:r.document.fields}}),u=kt.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Hi(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=dp(n,r.document),o=r.readTime?tn(r.readTime):Q.min(),s=kt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Hi([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=dp(n,r.document),o=r.removedTargetIds||[];t=new Hi([],o,i,null)}else{if(!("filter"in e))return B(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new zp(i,o),c=r.targetId;t=new yu(c,s)}}return t}function jx(n,e){let t;if(e instanceof Wr)t={update:Qw(n,e.key,e.value)};else if(e instanceof gu)t={delete:Yp(n,e.key)};else if(e instanceof wn)t={update:Qw(n,e.key,e.data),updateMask:Qx(e.fieldMask)};else{if(!(e instanceof jp))return B(16599,{Vt:e.type});t={verify:Yp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof eo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gr)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw B(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Fx(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)})(n,e.precondition)),t}function Ux(n,e){return n&&n.length>0?(fe(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?tn(i.updateTime):tn(o);return s.isEqual(Q.min())&&(s=tn(o)),new Bp(s,i.transformResults||[])})(t,e))):[]}function Hx(n,e){return{documents:[oD(n,e.path)]}}function $x(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oD(n,i);let o=(function(l){if(l.length!==0)return cD(rn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Bi(m.field),direction:Gx(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Kp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function zx(n){let e=Vx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){fe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=aD(p);return m instanceof rn&&BT(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(A){return new Zi(ji(A.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Uu(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,E=p.values||[];return new Yi(E,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,E=p.values||[];return new Yi(E,m)})(t.endAt)),gx(e,i,s,o,c,"F",u,l)}function qx(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aD(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ji(t.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ji(t.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ji(t.unaryFilter.field);return Oe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ji(t.unaryFilter.field);return Oe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Oe.create(ji(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rn.create(t.compositeFilter.filters.map(r=>aD(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}})(t.compositeFilter.op))})(n):B(30097,{filter:n})}function Gx(n){return kx[n]}function Wx(n){return Ox[n]}function Kx(n){return Lx[n]}function Bi(n){return{fieldPath:n.canonicalString()}}function ji(n){return ft.fromServerFormat(n.fieldPath)}function cD(n){return n instanceof Oe?(function(t){if(t.op==="=="){if(Fw(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NAN"}};if(Lw(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fw(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NOT_NAN"}};if(Lw(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(t.field),op:Wx(t.op),value:t.value}}})(n):n instanceof rn?(function(t){let r=t.getFilters().map(i=>cD(i));return r.length===1?r[0]:{compositeFilter:{op:Kx(t.op),filters:r}}})(n):B(54877,{filter:n})}function Qx(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ls=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),c=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jp=class{constructor(e){this.yt=e}};function Yx(n){let e=zx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fp(e,e.limit,"L"):e}var Iu=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),xs(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=vn(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_n(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?LT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):OT(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):B(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Wi,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ie(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),j.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Iu.Kt=new Iu;var Xp=class{constructor(){this.Cn=new eg}addToCollectionParentIndex(e,t){return this.Cn.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve($r.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},eg=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new He(Ce.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(Ce.comparator)).toArray()}};var o5=new Uint8Array(0);var Yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lD=41943040,wt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(lD,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);var Fs=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var Zw="LruGarbageCollector",Zx=1048576;function Jw([n,e],[t,r]){let i=ne(n,t);return i===0?ne(e,r):i}var tg=class{constructor(e){this.Ir=e,this.buffer=new He(Jw),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Jw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ng=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){k(Zw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oo(t)?k(Zw,"Ignoring IndexedDB error during garbage collection: ",t):await io(t)}await this.Vr(3e5)})}},rg=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return R.resolve(Xg.ce);let r=new tg(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Yw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Fi()<=te.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Jx(n,e){return new rg(n,e)}var ig=class{constructor(){this.changes=new En(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var og=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var sg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ns(r.mutation,i,Zt.empty(),xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=re()){let i=Fr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=bs();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Fr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,re()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=In(),s=As(),c=(function(){return As()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof wn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ns(h.mutation,l,h.mutation.getFieldMask(),xe.now())):s.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>c.set(l,new og(h,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,t){let r=As(),i=new be((s,c)=>s-c),o=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Zt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||re()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=WT();h.forEach(m=>{if(!o.has(m)){let E=eD(t.get(m),r.get(m));E!==null&&p.set(m,E),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(Fr()),c=Ms,u=o;return s.next(l=>R.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?R.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,re())).next(h=>({batchId:c,changes:GT(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=bs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=bs();return this.indexManager.getCollectionParents(e,o).next(c=>R.forEach(c,u=>{let l=(function(p,m){return new Ji(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,kt.newInvalidDocument(h)))});let c=bs();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ns(h.mutation,l,Zt.empty(),xe.now()),qu(t,l)&&(c=c.insert(u,l))}),c})}};var ag=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return R.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}})(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Yx(i.bundledQuery),readTime:tn(i.readTime)}})(t)),R.resolve()}};var cg=class{constructor(){this.overlays=new be(j.comparator),this.qr=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fr();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=Fr(),o=t.length+1,s=new j(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Fr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Fr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return R.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new $p(t,r));let o=this.qr.get(t);o===void 0&&(o=re(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var ug=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Vs=class{constructor(){this.Qr=new He(Re.$r),this.Ur=new He(Re.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Re(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Re(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new j(new Ce([])),r=new Re(t,e),i=new Re(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new j(new Ce([])),r=new Re(t,e),i=new Re(t,e+1),o=re();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Re(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Re=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return j.comparator(e.key,t.key)||ne(e.Yr,t.Yr)}static Kr(e,t){return ne(e.Yr,t.Yr)||j.comparator(e.key,t.key)}};var lg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new He(Re.$r)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Up(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new Re(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,t){return R.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?em:this.tr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Re(t,0),i=new Re(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new He(ne);return t.forEach(i=>{let o=new Re(i,0),s=new Re(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),R.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new Re(new j(o),0),c=new He(ne);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),R.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){fe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return R.forEach(t.mutations,i=>{let o=new Re(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Re(t,0),i=this.Zr.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var dg=class{constructor(e){this.ri=e,this.docs=(function(){return new be(j.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(t))}getEntries(e,t){let r=In();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():kt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=In(),s=t.path,c=new j(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||YM(QM(h),r)<=0||(i.has(h.key)||qu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){B(9500)}ii(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fg(this)}getSize(e){return R.resolve(this.size)}},fg=class extends ig{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var hg=class{constructor(e){this.persistence=e,this.si=new En(t=>om(t),sm),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new Vs,this.targetCount=0,this.ai=Fs.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),R.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Fs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Pr(t),R.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this._i.containsKey(t))}};var wu=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xg(0),this.li=!1,this.li=!0,this.hi=new ug,this.referenceDelegate=e(this),this.Pi=new hg(this),this.indexManager=new Xp,this.remoteDocumentCache=(function(i){return new dg(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Jp(t),this.Ii=new ag(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new lg(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new pg(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return R.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},pg=class extends Tp{constructor(e){super(),this.currentSequenceNumber=e}},gg=class n{constructor(e){this.persistence=e,this.Ri=new Vs,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw B(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),R.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.fi,r=>{let i=j.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return R.or([()=>R.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Tu=class n{constructor(e,t){this.persistence=e,this.pi=new En(r=>ex(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Jx(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return R.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return R.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?R.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,Q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),R.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),R.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),R.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),R.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=iu(e.data.value)),t}br(e,t,r){return R.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return R.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var mg=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=re(),i=re();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var yg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var vg=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sw()?8:JM(je())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new yg;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Fi()<=te.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Vi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),R.resolve()):(Fi()<=te.DEBUG&&k("QueryEngine","Query:",Vi(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Fi()<=te.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Vi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(t))):R.resolve())}ys(e,t){if(Uw(t))return R.resolve(null);let r=en(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fp(t,null,"F"),r=en(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=re(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,c);return this.Cs(t,l,s,u.readTime)?this.ys(e,Fp(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return Uw(t)||i.isEqual(Q.min())?R.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?R.resolve(null):(Fi()<=te.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vi(t)),this.vs(e,s,t,KM(i,Ms)).next(c=>c))})}Ds(e,t){let r=new He(zT(e));return t.forEach((i,o)=>{qu(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Fi()<=te.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Vi(t)),this.ps.getDocumentsMatchingQuery(e,t,$r.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var um="LocalStore",Xx=3e8,_g=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new be(ne),this.xs=new En(o=>om(o),sm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sg(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function eP(n,e,t,r){return new _g(n,e,t,r)}async function dD(n,e){let t=G(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=re();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function tP(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),E=R.resolve();return m.forEach(A=>{E=E.next(()=>h.getEntry(u,A)).next(M=>{let S=l.docVersions.get(A);fe(S!==null,48541),M.version.compareTo(S)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=re();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fD(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function nP(n,e){let t=G(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let E=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(Je.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(p,E),(function(M,S,P){return M.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=Xx?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(m,E,h)&&c.push(t.Pi.updateTargetData(o,E))});let u=In(),l=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(rP(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(Q.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return R.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function rP(n,e,t){let r=re(),i=re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=In();return t.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):k(um,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function iP(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=em),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oP(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Ls(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Eg(n,e,t){let r=G(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!oo(s))throw s;k(um,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Xw(n,e,t){let r=G(n),i=Q.min(),o=re();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=G(u),m=p.xs.get(h);return m!==void 0?R.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,s,en(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:re())).next(c=>(sP(r,vx(e),c),{documents:c,Qs:o})))}function sP(n,e,t){let r=n.Os.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Du=class{constructor(){this.activeTargetIds=Dx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ig=class{constructor(){this.Mo=new Du,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Du,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var wg=class{Oo(e){}shutdown(){}};var eT="ConnectivityMonitor",bu=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){k(eT,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){k(eT,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ru=null;function Tg(){return ru===null?ru=(function(){return 268435456+Math.round(2147483648*Math.random())})():ru++,"0x"+ru.toString(16)}var fp="RestConnection",aP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Dg=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Tg(),c=this.zo(e,t.toUriEncodedString());k(fp,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),h=zn(l);return this.Jo(e,c,u,r,h).then(p=>(k(fp,`Received RPC '${e}' ${s}: `,p),p),p=>{throw qi(fp,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=aP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var bg=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ye="WebChannelConnection",Cg=class extends Dg{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Tg();return new Promise((c,u)=>{let l=new op;l.setWithCredentials(!0),l.listenOnce(sp.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ds.NO_ERROR:let p=l.getResponseJson();k(Ye,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Ds.TIMEOUT:k(Ye,`RPC '${e}' ${s} timed out`),u(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ds.HTTP_ERROR:let m=l.getStatus();if(k(Ye,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let E=l.getResponseJson();Array.isArray(E)&&(E=E[0]);let A=E?.error;if(A&&A.status&&A.message){let M=(function(P){let V=P.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(V)>=0?V:N.UNKNOWN})(A.status);u(new L(M,A.message))}else u(new L(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(N.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{k(Ye,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);k(Ye,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Tg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=up(),c=cp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(Ye,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let m=!1,E=!1,A=new bg({Yo:S=>{E?k(Ye,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(k(Ye,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(Ye,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),M=(S,P,V)=>{S.listen(P,W=>{try{V(W)}catch(Se){setTimeout(()=>{throw Se},0)}})};return M(p,Li.EventType.OPEN,()=>{E||(k(Ye,`RPC '${e}' stream ${i} transport opened.`),A.o_())}),M(p,Li.EventType.CLOSE,()=>{E||(E=!0,k(Ye,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(p))}),M(p,Li.EventType.ERROR,S=>{E||(E=!0,qi(Ye,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),A.a_(new L(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,Li.EventType.MESSAGE,S=>{if(!E){let P=S.data[0];fe(!!P,16349);let V=P,W=V?.error||V[0]?.error;if(W){k(Ye,`RPC '${e}' stream ${i} received error:`,W);let Se=W.status,Pe=(function(y){let v=Ne[y];if(v!==void 0)return nD(v)})(Se),Ae=W.message;Pe===void 0&&(Pe=N.INTERNAL,Ae="Unknown error status: "+Se+" with message "+W.message),E=!0,A.a_(new L(Pe,Ae)),p.close()}else k(Ye,`RPC '${e}' stream ${i} received:`,P),A.u_(P)}}),M(c,ap.STAT_EVENT,S=>{S.stat===eu.PROXY?k(Ye,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===eu.NOPROXY&&k(Ye,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.__()},0),A}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function hp(){return typeof document<"u"?document:null}function Gu(n){return new Wp(n,!0)}var Cu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var tT="PersistentStream",Su=class{constructor(e,t,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Cu(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(yn(t.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return k(tT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(k(tT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sg=class extends Su{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Bx(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?tn(s.readTime):Q.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=Zp(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=Lp(u)?{documents:Hx(o,u)}:{query:$x(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=rD(o,s.resumeToken);let l=Kp(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){c.readTime=Eu(o,s.snapshotVersion.toTimestamp());let l=Kp(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=qx(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}},Ag=class extends Su{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Ux(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>jx(this.serializer,r))};this.q_(t)}};var Ng=class{},Rg=class extends Ng{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Qp(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Qp(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Mg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yn(t),this.aa=!1):k("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Kr="RemoteStore",xg=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Zr(this)&&(k(Kr,"Restarting streams for network reachability change."),await(async function(u){let l=G(u);l.Ea.add(4),await zs(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Wu(l)})(this))})}),this.Ra=new Mg(r,i)}};async function Wu(n){if(Zr(n))for(let e of n.da)await e(!0)}async function zs(n){for(let e of n.da)await e(!1)}function hD(n,e){let t=G(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hm(t)?fm(t):so(t).O_()&&dm(t,e))}function lm(n,e){let t=G(n),r=so(t);t.Ia.delete(e),r.O_()&&pD(t,e),t.Ia.size===0&&(r.O_()?r.L_():Zr(t)&&t.Ra.set("Unknown"))}function dm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}so(n).Y_(e)}function pD(n,e){n.Va.Ue(e),so(n).Z_(e)}function fm(n){n.Va=new Gp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),so(n).start(),n.Ra.ua()}function hm(n){return Zr(n)&&!so(n).x_()&&n.Ia.size>0}function Zr(n){return G(n).Ea.size===0}function gD(n){n.Va=void 0}async function cP(n){n.Ra.set("Online")}async function uP(n){n.Ia.forEach((e,t)=>{dm(n,e)})}async function lP(n,e){gD(n),hm(n)?(n.Ra.ha(e),fm(n)):n.Ra.set("Unknown")}async function dP(n,e,t){if(n.Ra.set("Online"),e instanceof vu&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){k(Kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Au(n,r)}else if(e instanceof Hi?n.Va.Ze(e):e instanceof yu?n.Va.st(e):n.Va.tt(e),!t.isEqual(Q.min()))try{let r=await fD(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Je.EMPTY_BYTE_STRING,h.snapshotVersion)),pD(o,u);let p=new Ls(h.target,u,l,h.sequenceNumber);dm(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){k(Kr,"Failed to raise snapshot:",r),await Au(n,r)}}async function Au(n,e,t){if(!oo(e))throw e;n.Ea.add(1),await zs(n),n.Ra.set("Offline"),t||(t=()=>fD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{k(Kr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Wu(n)})}function mD(n,e){return e().catch(t=>Au(n,t,e))}async function Ku(n){let e=G(n),t=er(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:em;for(;fP(e);)try{let i=await iP(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,hP(e,i)}catch(i){await Au(e,i)}yD(e)&&vD(e)}function fP(n){return Zr(n)&&n.Ta.length<10}function hP(n,e){n.Ta.push(e);let t=er(n);t.O_()&&t.X_&&t.ea(e.mutations)}function yD(n){return Zr(n)&&!er(n).x_()&&n.Ta.length>0}function vD(n){er(n).start()}async function pP(n){er(n).ra()}async function gP(n){let e=er(n);for(let t of n.Ta)e.ea(t.mutations)}async function mP(n,e,t){let r=n.Ta.shift(),i=Hp.from(r,e,t);await mD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ku(n)}async function yP(n,e){e&&er(n).X_&&await(async function(r,i){if((function(s){return Rx(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();er(r).B_(),await mD(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ku(r)}})(n,e),yD(n)&&vD(n)}async function nT(n,e){let t=G(n);t.asyncQueue.verifyOperationInProgress(),k(Kr,"RemoteStore received new credentials");let r=Zr(t);t.Ea.add(3),await zs(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wu(t)}async function vP(n,e){let t=G(n);e?(t.Ea.delete(2),await Wu(t)):e||(t.Ea.add(2),await zs(t),t.Ra.set("Unknown"))}function so(n){return n.ma||(n.ma=(function(t,r,i){let o=G(t);return o.sa(),new Sg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:cP.bind(null,n),t_:uP.bind(null,n),r_:lP.bind(null,n),H_:dP.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),hm(n)?fm(n):n.Ra.set("Unknown")):(await n.ma.stop(),gD(n))})),n.ma}function er(n){return n.fa||(n.fa=(function(t,r,i){let o=G(t);return o.sa(),new Ag(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pP.bind(null,n),r_:yP.bind(null,n),ta:gP.bind(null,n),na:mP.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Ku(n)):(await n.fa.stop(),n.Ta.length>0&&(k(Kr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var Pg=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pm(n,e){if(yn("AsyncQueue",`${e}: ${n}`),oo(n))return new L(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Nu=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=bs(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ru=class{constructor(){this.ga=new be(j.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):B(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},no=class n{constructor(e,t,r,i,o,s,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Nu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var kg=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Og=class{constructor(){this.queries=rT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=G(t),o=i.queries;i.queries=rT(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function rT(){return new En(n=>$T(n),zu)}async function _D(n,e){let t=G(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new kg,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let c=pm(s,`Initialization of query '${Vi(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&gm(t)}async function ED(n,e){let t=G(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _P(n,e){let t=G(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&gm(t)}function EP(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function gm(n){n.Ca.forEach(e=>{e.next()})}var Lg,iT;(iT=Lg||(Lg={})).Ma="default",iT.Cache="cache";var Mu=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new no(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lg.Cache}};var xu=class{constructor(e){this.key=e}},Pu=class{constructor(e){this.key=e}},Fg=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=zT(e),this.tu=new Nu(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Ru,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),E=qu(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),M=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),S=!1;m&&E?m.data.isEqual(E.data)?A!==M&&(r.track({type:3,doc:E}),S=!0):this.su(m,E)||(r.track({type:2,doc:E}),S=!0,(u&&this.eu(E,u)>0||l&&this.eu(E,l)<0)&&(c=!0)):!m&&E?(r.track({type:0,doc:E}),S=!0):m&&!E&&(r.track({type:1,doc:m}),S=!0,(u||l)&&(c=!0)),S&&(E?(s=s.add(E),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(E,A){let M=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Rt:S})}};return M(E)-M(A)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new no(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ru,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Pu(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new xu(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=re();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return no.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},mm="SyncEngine",Vg=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Bg=class{constructor(e){this.key=e,this.hu=!1}},jg=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new En(c=>$T(c),zu),this.Iu=new Map,this.Eu=new Set,this.du=new be(j.comparator),this.Au=new Map,this.Ru=new Vs,this.Vu={},this.mu=new Map,this.fu=Fs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function IP(n,e,t=!0){let r=CD(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await ID(r,e,t,!0),i}async function wP(n,e){let t=CD(n);await ID(t,e,!0,!1)}async function ID(n,e,t,r){let i=await oP(n.localStore,en(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=await TP(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&hD(n.remoteStore,i),c}async function TP(n,e,t,r,i){n.pu=(p,m,E)=>(async function(M,S,P,V){let W=S.view.ru(P);W.Cs&&(W=await Xw(M.localStore,S.query,!1).then(({documents:T})=>S.view.ru(T,W)));let Se=V&&V.targetChanges.get(S.targetId),Pe=V&&V.targetMismatches.get(S.targetId)!=null,Ae=S.view.applyChanges(W,M.isPrimaryClient,Se,Pe);return sT(M,S.targetId,Ae.au),Ae.snapshot})(n,p,m,E);let o=await Xw(n.localStore,e,!0),s=new Fg(e,o.Qs),c=s.ru(o.documents),u=Os.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(c,n.isPrimaryClient,u);sT(n,t,l.au);let h=new Vg(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function DP(n,e,t){let r=G(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!zu(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Eg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lm(r.remoteStore,i.targetId),Ug(r,i.targetId)}).catch(io)):(Ug(r,i.targetId),await Eg(r.localStore,i.targetId,!0))}async function bP(n,e){let t=G(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lm(t.remoteStore,r.targetId))}async function CP(n,e,t){let r=PP(n);try{let i=await(function(s,c){let u=G(s),l=xe.now(),h=c.reduce((E,A)=>E.add(A.key),re()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=In(),M=re();return u.Ns.getEntries(E,h).next(S=>{A=S,A.forEach((P,V)=>{V.isValidDocument()||(M=M.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,A)).next(S=>{p=S;let P=[];for(let V of c){let W=Nx(V,p.get(V.key).overlayedDocument);W!=null&&P.push(new wn(V.key,W,FT(W.value.mapValue),jr.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,P,c)}).next(S=>{m=S;let P=S.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(E,S.batchId,P)})}).then(()=>({batchId:m.batchId,changes:GT(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new be(ne)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),await qs(r,i.changes),await Ku(r.remoteStore)}catch(i){let o=pm(i,"Failed to persist write");t.reject(o)}}async function wD(n,e){let t=G(n);try{let r=await nP(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?fe(s.hu,14607):i.removedDocuments.size>0&&(fe(s.hu,42227),s.hu=!1))}),await qs(t,r,e)}catch(r){await io(r)}}function oT(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=G(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(c)&&(l=!0)}),l&&gm(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SP(n,e,t){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new be(j.comparator);s=s.insert(o,kt.newNoDocument(o,Q.min()));let c=re().add(o),u=new mu(Q.min(),new Map,new be(ne),s,c);await wD(r,u),r.du=r.du.remove(o),r.Au.delete(e),ym(r)}else await Eg(r.localStore,e,!1).then(()=>Ug(r,e,t)).catch(io)}async function AP(n,e){let t=G(n),r=e.batch.batchId;try{let i=await tP(t.localStore,e);DD(t,r,null),TD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await qs(t,i)}catch(i){await io(i)}}async function NP(n,e,t){let r=G(n);try{let i=await(function(s,c){let u=G(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(fe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);DD(r,e,t),TD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await qs(r,i)}catch(i){await io(i)}}function TD(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function DD(n,e,t){let r=G(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ug(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||bD(n,r)})}function bD(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(lm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ym(n))}function sT(n,e,t){for(let r of t)r instanceof xu?(n.Ru.addReference(r.key,e),RP(n,r)):r instanceof Pu?(k(mm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||bD(n,r.key)):B(19791,{wu:r})}function RP(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(k(mm,"New document in limbo: "+t),n.Eu.add(r),ym(n))}function ym(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new j(Ce.fromString(e)),r=n.fu.next();n.Au.set(r,new Bg(t)),n.du=n.du.insert(t,r),hD(n.remoteStore,new Ls(en($u(t.path)),r,"TargetPurposeLimboResolution",Xg.ce))}}async function qs(n,e,t){let r=G(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=mg.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=G(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>R.forEach(l,m=>R.forEach(m.Es,E=>h.persistence.referenceDelegate.addReference(p,m.targetId,E)).next(()=>R.forEach(m.ds,E=>h.persistence.referenceDelegate.removeReference(p,m.targetId,E)))))}catch(p){if(!oo(p))throw p;k(um,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let E=h.Ms.get(m),A=E.snapshotVersion,M=E.withLastLimboFreeSnapshotVersion(A);h.Ms=h.Ms.insert(m,M)}}})(r.localStore,o))}async function MP(n,e){let t=G(n);if(!t.currentUser.isEqual(e)){k(mm,"User change. New user:",e.toKey());let r=await dD(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new L(N.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qs(t,r.Ls)}}function xP(n,e){let t=G(n),r=t.Au.get(e);if(r&&r.hu)return re().add(r.key);{let i=re(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function CD(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SP.bind(null,e),e.Pu.H_=_P.bind(null,e.eventManager),e.Pu.yu=EP.bind(null,e.eventManager),e}function PP(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NP.bind(null,e),e}var SD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Gu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return eP(this.persistence,new vg,t.initialUser,this.serializer)}Cu(t){return new wu(gg.mi,this.serializer)}Du(t){return new Ig}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Hg=class extends SD{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){fe(this.persistence.referenceDelegate instanceof Tu,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ng(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new wu(r=>Tu.mi(r,t),this.serializer)}};var kP=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MP.bind(null,this.syncEngine),await vP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Og})()}createDatastore(t){let r=Gu(t.databaseInfo.databaseId),i=(function(s){return new Cg(s)})(t.databaseInfo);return(function(s,c,u,l){return new Rg(s,c,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new xg(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>oT(this.syncEngine,r,0),(function(){return bu.v()?new bu:new wg})())}createSyncEngine(t,r){return(function(o,s,c,u,l,h,p){let m=new jg(o,s,c,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=G(r);k(Kr,"RemoteStore shutting down."),i.Ea.add(5),await zs(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var ku=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var tr="FirestoreClient",$g=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ue.UNAUTHENTICATED,this.clientId=Rs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{k(tr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(k(tr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=pm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function pp(n,e){n.asyncQueue.verifyOperationInProgress(),k(tr,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function aT(n,e){n.asyncQueue.verifyOperationInProgress();let t=await OP(n);k(tr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nT(e.remoteStore,i)),n._onlineComponents=e}async function OP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k(tr,"Using user provided OfflineComponentProvider");try{await pp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;qi("Error using user provided cache. Falling back to memory cache: "+t),await pp(n,new SD)}}else k(tr,"Using default OfflineComponentProvider"),await pp(n,new Hg(void 0));return n._offlineComponents}async function AD(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(k(tr,"Using user provided OnlineComponentProvider"),await aT(n,n._uninitializedComponentsProvider._online)):(k(tr,"Using default OnlineComponentProvider"),await aT(n,new kP))),n._onlineComponents}function LP(n){return AD(n).then(e=>e.syncEngine)}async function zg(n){let e=await AD(n),t=e.eventManager;return t.onListen=IP.bind(null,e.syncEngine),t.onUnlisten=DP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bP.bind(null,e.syncEngine),t}function FP(n,e,t={}){let r=new Jt;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let h=new ku({next:m=>{h.Nu(),s.enqueueAndForget(()=>ED(o,p));let E=m.docs.has(c);!E&&m.fromCache?l.reject(new L(N.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&u.source==="server"?l.reject(new L(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu($u(c.path),h,{includeMetadataChanges:!0,qa:!0});return _D(o,p)})(await zg(n),n.asyncQueue,e,t,r)),r.promise}function ND(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var cT=new Map;var RD="firestore.googleapis.com",uT=!0,Ou=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RD,this.ssl=uT}else this.host=e.host,this.ssl=e.ssl??uT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zx)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ND(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ou({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ou(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gp;switch(r.type){case"firstParty":return new _p(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=cT.get(t);r&&(k("ComponentProvider","Removing Datastore"),cT.delete(t),r.terminate())})(this),Promise.resolve()}};function VP(n,e,t,r={}){n=Qn(n,Bs);let i=zn(e),o=n._getSettings(),s=me(U({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(Wc(`https://${c}`),Kc("Firestore",!0)),o.host!==RD&&o.host!==c&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=me(U({},o),{host:c,ssl:i,emulatorOptions:r});if(!Qt(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Ue.MOCK_USER;else{l=ew(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ue(p)}n._authCredentials=new mp(new au(l,h))}}var Lu=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ze=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if($s(t,n._jsonSchema))return new n(e,r||null,new j(Ce.fromString(t.referencePath)))}};Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:Me("string",Ze._jsonSchemaVersion),referencePath:Me("string")};var js=class n extends Lu{constructor(e,t,r){super(e,t,$u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Jr(n,e,...t){if(n=Qe(n),arguments.length===1&&(e=Rs.newId()),GM("doc","path",e),n instanceof Bs){let r=Ce.fromString(e,...t);return Nw(r),new Ze(n,null,new j(r))}{if(!(n instanceof Ze||n instanceof js))throw new L(N.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return Nw(r),new Ze(n.firestore,n instanceof js?n.converter:null,new j(r))}}var lT="AsyncQueue",Fu=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Cu(this,"async_queue_retry"),this._c=()=>{let r=hp();r&&k(lT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Jt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oo(e))throw e;k(lT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,yn("INTERNAL UNHANDLED ERROR: ",dT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Pg.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&B(47125,{Pc:dT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function dT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function fT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Qr=class extends Bs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fu,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Fu(e),this._firestoreClient=void 0,await e}}};function MD(n,e){let t=typeof n=="object"?n:Jc(),r=typeof n=="string"?n:e||fu,i=Ts(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=XI("firestore");o&&VP(i,...o)}return i}function vm(n){if(n._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BP(n),n._firestoreClient}function BP(n){let e=n._freezeSettings(),t=(function(i,o,s,c){return new Dp(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ND(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new $g(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Yn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($s(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Me("string",Yn._jsonSchemaVersion),bytes:Me("string")};var Us=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hs=class{constructor(e){this._methodName=e}};var Zn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if($s(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Zn._jsonSchemaVersion="firestore/geoPoint/1.0",Zn._jsonSchema={type:Me("string",Zn._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};var Jn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($s(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:Me("string",Jn._jsonSchemaVersion),vectorValues:Me("object")};var jP=/^__.*__$/,qg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wr(e,this.data,t,this.fieldTransforms)}};function xD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ac:n})}}var Gg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(U(U({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xD(this.Ac)&&jP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Wg=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gu(e)}Cc(e,t,r,i=!1){return new Gg({Ac:e,methodName:t,Dc:r,path:ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function UP(n){let e=n._freezeSettings(),t=Gu(n._databaseId);return new Wg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HP(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);LD("Data must be an object, but it was:",s,r);let c=kD(r,s),u,l;if(o.merge)u=new Zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=$P(e,p,t);if(!s.contains(m))throw new L(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qP(h,m)||h.push(m)}u=new Zt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new qg(new Pt(c),u,l)}var Kg=class n extends Hs{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){let t=new Gr(e.serializer,QT(e.serializer,this.Fc));return new Vp(e.path,t)}isEqual(e){return e instanceof n&&this.Fc===e.Fc}};function PD(n,e){if(OD(n=Qe(n)))return LD("Unsupported field value:",e,n),kD(n,e);if(n instanceof Hs)return(function(r,i){if(!xD(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=PD(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=xe.fromDate(r);return{timestampValue:Eu(i.serializer,o)}}if(r instanceof xe){let o=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Eu(i.serializer,o)}}if(r instanceof Zn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:rD(i.serializer,r._byteString)};if(r instanceof Ze){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jn)return(function(s,c){return{mapValue:{fields:{[nm]:{stringValue:rm},[Wi]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return am(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Jg(r)}`)})(n,e)}function kD(n,e){let t={};return NT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(n,(r,i)=>{let o=PD(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function OD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xe||n instanceof Zn||n instanceof Yn||n instanceof Ze||n instanceof Hs||n instanceof Jn)}function LD(n,e,t){if(!OD(t)||!pT(t)){let r=Jg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function $P(n,e,t){if((e=Qe(e))instanceof Us)return e._internalPath;if(typeof e=="string")return FD(n,e);throw Vu("Field path arguments must be of type string or ",n,!1,void 0,t)}var zP=new RegExp("[~\\*/\\[\\]]");function FD(n,e,t){if(e.search(zP)>=0)throw Vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Us(...e.split("."))._internalPath}catch{throw Vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vu(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(N.INVALID_ARGUMENT,c+n+u)}function qP(n,e){return n.some(t=>t.isEqual(e))}var Bu=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(VD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Qg=class extends Bu{data(){return super.data()}};function VD(n,e){return typeof e=="string"?FD(n,e):e instanceof Us?e._internalPath:e._delegate._internalPath}function GP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yg=class{convertValue(e,t="none"){switch(Xn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Yr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Wi].arrayValue?.values?.map(r=>Ie(r.doubleValue));return new Jn(t)}convertGeoPoint(e){return new Zn(Ie(e.latitude),Ie(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Hu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ps(e));default:return null}}convertTimestamp(e){let t=vn(e);return new xe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ce.fromString(e);fe(uD(r),9688,{name:e});let i=new hu(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(t)||yn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function WP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Br=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ur=class n extends Bu{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(VD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Me("string",Ur._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};var $i=class extends Ur{data(e={}){return super.data(e)}},zi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Br(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $i(this._firestore,this._userDataWriter,r.key,r,new Br(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new $i(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Br(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new $i(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Br(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:KP(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function KP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:n})}}function _m(n){n=Qn(n,Ze);let e=Qn(n.firestore,Qr);return FP(vm(e),n._key).then(t=>jD(e,n,t))}zi._jsonSchemaVersion="firestore/querySnapshot/1.0",zi._jsonSchema={type:Me("string",zi._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};var ju=class extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,t)}};function Qu(n,e,t){n=Qn(n,Ze);let r=Qn(n.firestore,Qr),i=WP(n.converter,e,t);return QP(r,[HP(UP(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,jr.none())])}function BD(n,...e){n=Qe(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||fT(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(fT(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof Ze)s=Qn(n.firestore,Qr),c=$u(n._key.path),o={next:u=>{e[r]&&e[r](jD(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=Qn(n,Lu);s=Qn(u.firestore,Qr),c=u._query;let l=new ju(s);o={next:h=>{e[r]&&e[r](new zi(s,l,u,h))},error:e[r+1],complete:e[r+2]},GP(n._query)}return(function(l,h,p,m){let E=new ku(m),A=new Mu(h,E,p);return l.asyncQueue.enqueueAndForget(async()=>_D(await zg(l),A)),()=>{E.Nu(),l.asyncQueue.enqueueAndForget(async()=>ED(await zg(l),A))}})(vm(s),c,i,o)}function QP(n,e){return(function(r,i){let o=new Jt;return r.asyncQueue.enqueueAndForget(async()=>CP(await LP(r),i,o)),o.promise})(vm(n),e)}function jD(n,e,t){let r=t.docs.get(e._key),i=new ju(n);return new Ur(n,i,e._key,r,new Br(t.hasPendingWrites,t.fromCache),e.converter)}function UD(n){return new Kg("increment",n)}(function(e,t=!0){(function(i){ro=i})(Kn),Wn(new It("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Qr(new yp(r.getProvider("auth-internal")),new Ep(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(l.options.projectId,h)})(s,i),s);return o=U({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),xt(Cw,Sw,e),xt(Cw,Sw,"esm2020")})();function rb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ib=rb,ob=new hn("auth","Firebase",rb());var tl=new qn("@firebase/auth");function YP(n,...e){tl.logLevel<=te.WARN&&tl.warn(`Auth (${Kn}): ${n}`,...e)}function Zu(n,...e){tl.logLevel<=te.ERROR&&tl.error(`Auth (${Kn}): ${n}`,...e)}function Tt(n,...e){throw Hm(n,...e)}function Ot(n,...e){return Hm(n,...e)}function Um(n,e,t){let r=me(U({},ib()),{[e]:t});return new hn("auth","Firebase",r).create(e,{appName:n.name})}function bn(n){return Um(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZP(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tt(n,"argument-error"),Um(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hm(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ob.create(n,...e)}function H(n,e,...t){if(!n)throw Hm(e,...t)}function Tn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Zu(e),new Error(e)}function Cn(n,e){n||Tn(e)}function wm(){return typeof self<"u"&&self.location?.href||""}function JP(){return HD()==="http:"||HD()==="https:"}function HD(){return typeof self<"u"&&self.location?.protocol||null}function XP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JP()||rw()||"connection"in navigator)?navigator.onLine:!0}function e1(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cn(t>e,"Short delay should be less than long delay!"),this.isMobile=tw()||iw()}get(){return XP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $m(n,e){Cn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var nl=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var t1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var n1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r1=new Xr(3e4,6e4);function ir(n,e){return n.tenantId&&!e.tenantId?me(U({},e),{tenantId:n.tenantId}):e}async function or(n,e,t,r,i={}){return sb(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=Pi(U({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=U({method:e,headers:u},o);return nw()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&zn(n.emulatorConfig.host)&&(l.credentials="include"),nl.fetch()(await ab(n,n.config.apiHost,t,c),l)})}async function sb(n,e,t){n._canInitEmulator=!1;let r=U(U({},t1),e);try{let i=new Tm(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Yu(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Yu(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Yu(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Um(n,h,l);Tt(n,h)}}catch(i){if(i instanceof dt)throw i;Tt(n,"network-request-failed",{message:String(i)})}}async function ea(n,e,t,r,i={}){let o=await or(n,e,t,r,i);return"mfaPendingCredential"in o&&Tt(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function ab(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?$m(n.config,i):`${n.config.apiScheme}://${i}`;return n1.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function i1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Tm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ot(this.auth,"network-request-failed")),r1.get())})}};function Yu(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ot(n,e,r);return i.customData._tokenResponse=t,i}function $D(n){return n!==void 0&&n.enterprise!==void 0}var Dm=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return i1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function o1(n,e){return or(n,"GET","/v2/recaptchaConfig",ir(n,e))}async function s1(n,e){return or(n,"POST","/v1/accounts:delete",e)}async function rl(n,e){return or(n,"POST","/v1/accounts:lookup",e)}function Ws(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cb(n,e=!1){let t=Qe(n),r=await t.getIdToken(e),i=zm(r);H(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ws(Em(i.auth_time)),issuedAtTime:Ws(Em(i.iat)),expirationTime:Ws(Em(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Em(n){return Number(n)*1e3}function zm(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{let i=qc(t);return i?JSON.parse(i):(Zu("Failed to decode base64 JWT payload"),null)}catch(i){return Zu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zD(n){let e=zm(n);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Qs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof dt&&a1(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function a1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var bm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Ys=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ws(this.lastLoginAt),this.creationTime=Ws(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function il(n){let e=n.auth,t=await n.getIdToken(),r=await Qs(n,rl(e,{idToken:t}));H(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?lb(i.providerUserInfo):[],s=c1(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ys(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function ub(n){let e=Qe(n);await il(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c1(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lb(n){return n.map(r=>{var i=r,{providerId:e}=i,t=va(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function u1(n,e){let t=await sb(n,{},async()=>{let r=Pi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await ab(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&zn(n.emulatorConfig.host)&&(u.credentials="include"),nl.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function l1(n,e){return or(n,"POST","/v2/accounts:revokeToken",ir(n,e))}var Ks=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){H(e.length!==0,"internal-error");let t=zD(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await u1(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(H(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(H(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Tn("not implemented")}};function nr(n,e){H(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var rr=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=va(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ys(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Qs(this,this.stsTokenManager.getToken(this.auth,e));return H(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cb(this,e)}reload(){return ub(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>U({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(me(U({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await il(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rt(this.auth.app))return Promise.reject(bn(this.auth));let e=await this.getIdToken();return await Qs(this,s1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return me(U({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>U({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:E,providerData:A,stsTokenManager:M}=t;H(p&&M,e,"internal-error");let S=Ks.fromJSON(this.name,M);H(typeof p=="string",e,"internal-error"),nr(r,e.name),nr(i,e.name),H(typeof m=="boolean",e,"internal-error"),H(typeof E=="boolean",e,"internal-error"),nr(o,e.name),nr(s,e.name),nr(c,e.name),nr(u,e.name),nr(l,e.name),nr(h,e.name);let P=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:E,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:S,createdAt:l,lastLoginAt:h});return A&&Array.isArray(A)&&(P.providerData=A.map(V=>U({},V))),u&&(P._redirectEventId=u),P}static async _fromIdTokenResponse(e,t,r=!1){let i=new Ks;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await il(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];H(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lb(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Ks;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ys(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var qD=new Map;function Dn(n){Cn(n instanceof Function,"Expected a class definition");let e=qD.get(n);return e?(Cn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qD.set(n,e),e)}var d1=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Cm=d1;function Ju(n,e,t){return`firebase:${n}:${e}:${t}`}var ol=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ju(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ju("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await rl(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Dn(Cm),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Dn(Cm),s=Ju(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await rl(e,{idToken:h}).catch(()=>{});if(!m)break;p=await rr._fromGetAccountInfoResponse(e,m,h)}else p=rr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function GD(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(db(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mb(e))return"Blackberry";if(yb(e))return"Webos";if(fb(e))return"Safari";if((e.includes("chrome/")||hb(e))&&!e.includes("edge/"))return"Chrome";if(gb(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function db(n=je()){return/firefox\//i.test(n)}function fb(n=je()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hb(n=je()){return/crios\//i.test(n)}function pb(n=je()){return/iemobile/i.test(n)}function gb(n=je()){return/android/i.test(n)}function mb(n=je()){return/blackberry/i.test(n)}function yb(n=je()){return/webos/i.test(n)}function qm(n=je()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f1(n=je()){return qm(n)&&!!window.navigator?.standalone}function h1(){return ow()&&document.documentMode===10}function vb(n=je()){return qm(n)||gb(n)||yb(n)||mb(n)||/windows phone/i.test(n)||pb(n)}function _b(n,e=[]){let t;switch(n){case"Browser":t=GD(je());break;case"Worker":t=`${GD(je())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kn}/${r}`}var Sm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function p1(n,e={}){return or(n,"GET","/v2/passwordPolicy",ir(n,e))}var g1=6,Am=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??g1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Nm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sl(this),this.idTokenSubscription=new sl(this),this.beforeStateQueue=new Sm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ol.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await rl(this,{idToken:e}),r=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(rt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await il(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rt(this.app))return Promise.reject(bn(this));let t=e?Qe(e):null;return t&&H(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rt(this.app)?Promise.reject(bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rt(this.app)?Promise.reject(bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await p1(this),t=new Am(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await l1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Dn(e)||this._popupRedirectResolver;H(t,this,"argument-error"),this.redirectPersistenceManager=await ol.create(this,[Dn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_b(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(rt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YP(`Error while retrieving App Check token: ${e.error}`),e?.token}};function sr(n){return Qe(n)}var sl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uw(t=>this.observer=t)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var gl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m1(n){gl=n}function Eb(n){return gl.loadJS(n)}function y1(){return gl.recaptchaEnterpriseScript}function v1(){return gl.gapiScript}function Ib(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Rm=class{constructor(){this.enterprise=new Mm}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Mm=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var _1="recaptcha-enterprise",wb="NO_RECAPTCHA",xm=class{constructor(e){this.type=_1,this.auth=sr(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,c)=>{o1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new Dm(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{c(u)})})}function i(o,s,c){let u=window.grecaptcha;$D(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(wb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(c=>{if(!t&&$D(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=y1();u.length!==0&&(u+=c),Eb(u).then(()=>{i(c,o,s)}).catch(l=>{s(l)})}}).catch(c=>{s(c)})})}};async function Gs(n,e,t,r=!1,i=!1){let o=new xm(n),s;if(i)s=wb;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let c=U({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let u=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:s}):Object.assign(c,{captchaResponse:s}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Pm(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=await Gs(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=await Gs(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=await Gs(n,e,t);return r(n,o).catch(async s=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let c=await Gs(n,e,t,!1,!0);return r(n,c)}return Promise.reject(s)})}else{let o=await Gs(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")}function Tb(n,e){let t=Ts(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Qt(o,e??{}))return i;Tt(i,"already-initialized")}return t.initialize({options:e})}function E1(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Dn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Db(n,e,t){let r=sr(n);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=bb(e),{host:s,port:c}=I1(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(Qt(l,r.config.emulator)&&Qt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zn(s)?(Wc(`${o}//${s}${u}`),Kc("Auth",!0)):i||w1()}function bb(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function I1(n){let e=bb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WD(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WD(s)}}}function WD(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function w1(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var co=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,t){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}};async function T1(n,e){return or(n,"POST","/v1/accounts:signUp",e)}async function D1(n,e){return ea(n,"POST","/v1/accounts:signInWithPassword",ir(n,e))}async function b1(n,e){return ea(n,"POST","/v1/accounts:signInWithEmailLink",ir(n,e))}async function C1(n,e){return ea(n,"POST","/v1/accounts:signInWithEmailLink",ir(n,e))}var Zs=class n extends co{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pm(e,t,"signInWithPassword",D1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return b1(e,{email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pm(e,r,"signUpPassword",T1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return C1(e,{idToken:t,email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function ao(n,e){return ea(n,"POST","/v1/accounts:signInWithIdp",ir(n,e))}var S1="http://localhost",al=class n extends co{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let c=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=c,o=va(c,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return ao(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ao(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ao(e,t)}buildRequest(){let e={requestUri:S1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pi(t)}return e}};function A1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N1(n){let e=ki(Oi(n)).link,t=e?ki(Oi(e)).deep_link_id:null,r=ki(Oi(n)).deep_link_id;return(r?ki(Oi(r)).link:null)||r||t||e||n}var cl=class n{constructor(e){let t=ki(Oi(e)),r=t.apiKey??null,i=t.oobCode??null,o=A1(t.mode??null);H(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=N1(e);try{return new n(t)}catch{return null}}};var Cb=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Zs._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=cl.parseLink(r);return H(i,"argument-error"),Zs._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Js=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ul=class extends Js{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Gm=(()=>{class n extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return al._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();async function R1(n,e){return ea(n,"POST","/v1/accounts:signUp",ir(n,e))}var uo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await rr._fromIdTokenResponse(e,r,i),s=KD(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=KD(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function KD(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var km=class n extends dt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Sb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(n,o,e,r):o})}async function M1(n,e,t=!1){let r=await Qs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return uo._forOperation(n,"link",r)}async function x1(n,e,t=!1){let{auth:r}=n;if(rt(r.app))return Promise.reject(bn(r));let i="reauthenticate";try{let o=await Qs(n,Sb(r,i,e,n),t);H(o.idToken,r,"internal-error");let s=zm(o.idToken);H(s,r,"internal-error");let{sub:c}=s;return H(n.uid===c,r,"user-mismatch"),uo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Tt(r,"user-mismatch"),o}}async function Ab(n,e,t=!1){if(rt(n.app))return Promise.reject(bn(n));let r="signIn",i=await Sb(n,r,e),o=await uo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function Nb(n,e){return Ab(sr(n),e)}async function Rb(n){let e=sr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wm(n,e,t){if(rt(n.app))return Promise.reject(bn(n));let r=sr(n),s=await Pm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",R1,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Rb(n),u}),c=await uo._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(c.user),c}function Km(n,e,t){return rt(n.app)?Promise.reject(bn(n)):Nb(Qe(n),Cb.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Rb(n),r})}function Mb(n,e,t,r){return Qe(n).onIdTokenChanged(e,t,r)}function xb(n,e,t){return Qe(n).beforeAuthStateChanged(e,t)}function Qm(n,e,t,r){return Qe(n).onAuthStateChanged(e,t,r)}function Ym(n){return Qe(n).signOut()}var ll="__sak";var dl=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ll,"1"),this.storage.removeItem(ll),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var P1=1e3,k1=10,O1=(()=>{class n extends dl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);h1()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,k1):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},P1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),Pb=O1;var L1=(()=>{class n extends dl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Zm=L1;function F1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var V1=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async h=>h(r.origin,s)),l=await F1(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Jm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Om=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=Jm("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function on(){return window}function B1(n){on().location.href=n}function kb(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}async function j1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U1(){return navigator?.serviceWorker?.controller||null}function H1(){return kb()?self:null}var Ob="firebaseLocalStorageDb",$1=1,fl="firebaseLocalStorage",Lb="fbase_key",ei=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ml(n,e){return n.transaction([fl],e?"readwrite":"readonly").objectStore(fl)}function z1(){let n=indexedDB.deleteDatabase(Ob);return new ei(n).toPromise()}function Lm(){let n=indexedDB.open(Ob,$1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(fl,{keyPath:Lb})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(fl)?e(r):(r.close(),await z1(),e(await Lm()))})})}async function QD(n,e,t){let r=ml(n,!0).put({[Lb]:e,value:t});return new ei(r).toPromise()}async function q1(n,e){let t=ml(n,!1).get(e),r=await new ei(t).toPromise();return r===void 0?null:r.value}function YD(n,e){let t=ml(n,!0).delete(e);return new ei(t).toPromise()}var G1=800,W1=3,K1=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>W1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V1._getInstance(H1()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await j1(),!this.activeServiceWorker)return;this.sender=new Om(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||U1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Lm();return await QD(t,ll,"1"),await YD(t,ll),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>QD(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>q1(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>YD(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=ml(o,!1).getAll();return new ei(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Fb=K1;var p5=Ib("rcb"),g5=new Xr(3e4,6e4);function Vb(n,e){return e?Dn(e):(H(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xs=class extends co{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ao(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Q1(n){return Ab(n.auth,new Xs(n),n.bypassAuthState)}function Y1(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),x1(t,new Xs(n),n.bypassAuthState)}async function Z1(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),M1(t,new Xs(n),n.bypassAuthState)}var hl=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q1;case"linkViaPopup":case"linkViaRedirect":return Z1;case"reauthViaPopup":case"reauthViaRedirect":return Y1;default:Tt(this.auth,"internal-error")}}resolve(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var J1=new Xr(2e3,1e4);async function Xm(n,e,t){if(rt(n.app))return Promise.reject(Ot(n,"operation-not-supported-in-this-environment"));let r=sr(n);ZP(n,e,Js);let i=Vb(r,t);return new X1(r,"signInViaPopup",e,i).executeNotNull()}var X1=(()=>{class n extends hl{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return H(t,this.auth,"internal-error"),t}async onExecution(){Cn(this.filter.length===1,"Popup operations only handle one event");let t=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,J1.get())};t()}}n.currentPopupAction=null;return n})(),ek="pendingRedirect",Xu=new Map,Fm=class extends hl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{let r=await tk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function tk(n,e){let t=ik(e),r=rk(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function nk(n,e){Xu.set(n._key(),e)}function rk(n){return Dn(n._redirectPersistence)}function ik(n){return Ju(ek,n.config.apiKey,n.name)}async function ok(n,e,t=!1){if(rt(n.app))return Promise.reject(bn(n));let r=sr(n),i=Vb(r,e),s=await new Fm(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var sk=600*1e3,Vm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ak(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Bb(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ot(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sk&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZD(e))}saveEventToCache(e){this.cachedEventUids.add(ZD(e)),this.lastProcessedEventTime=Date.now()}};function ZD(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bb({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ak(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bb(n);default:return!1}}async function ck(n,e={}){return or(n,"GET","/v1/projects",e)}var uk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lk=/^https?/;async function dk(n){if(n.config.emulator)return;let{authorizedDomains:e}=await ck(n);for(let t of e)try{if(fk(t))return}catch{}Tt(n,"unauthorized-domain")}function fk(n){let e=wm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!lk.test(t))return!1;if(uk.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var hk=new Xr(3e4,6e4);function JD(){let n=on().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pk(n){return new Promise((e,t)=>{function r(){JD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JD(),t(Ot(n,"network-request-failed"))},timeout:hk.get()})}if(on().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(on().gapi?.load)r();else{let i=Ib("iframefcb");return on()[i]=()=>{gapi.load?r():t(Ot(n,"network-request-failed"))},Eb(`${v1()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw el=null,e})}var el=null;function gk(n){return el=el||pk(n),el}var mk=new Xr(5e3,15e3),yk="__/auth/iframe",vk="emulator/auth/iframe",_k={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ek=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ik(n){let e=n.config;H(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?$m(e,vk):`https://${n.config.authDomain}/${yk}`,r={apiKey:e.apiKey,appName:n.name,v:Kn},i=Ek.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Pi(r).slice(1)}`}async function wk(n){let e=await gk(n),t=on().gapi;return H(t,n,"internal-error"),e.open({where:document.body,url:Ik(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_k,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Ot(n,"network-request-failed"),c=on().setTimeout(()=>{o(s)},mk.get());function u(){on().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var Tk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dk=500,bk=600,Ck="_blank",Sk="http://localhost",pl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ak(n,e,t,r=Dk,i=bk){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=me(U({},Tk),{width:r.toString(),height:i.toString(),top:o,left:s}),l=je().toLowerCase();t&&(c=hb(l)?Ck:t),db(l)&&(e=e||Sk,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[E,A])=>`${m}${E}=${A},`,"");if(f1(l)&&c!=="_self")return Nk(e||"",c),new pl(null);let p=window.open(e||"",c,h);H(p,n,"popup-blocked");try{p.focus()}catch{}return new pl(p)}function Nk(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Rk="__/auth/handler",Mk="emulator/auth/handler",xk=encodeURIComponent("fac");async function XD(n,e,t,r,i,o){H(n.config.authDomain,n,"auth-domain-config-required"),H(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kn,eventId:i};if(e instanceof Js){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",cw(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ul){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=await n._getAppCheckToken(),l=u?`#${xk}=${encodeURIComponent(u)}`:"";return`${Pk(n)}?${Pi(c).slice(1)}${l}`}function Pk({config:n}){return n.emulator?$m(n,Mk):`https://${n.authDomain}/${Rk}`}var Im="webStorageSupport",Bm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zm,this._completeRedirectFn=ok,this._overrideRedirectResult=nk}async _openPopup(e,t,r,i){Cn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await XD(e,t,r,wm(),i);return Ak(e,o,Jm())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await XD(e,t,r,wm(),i);return B1(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Cn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await wk(e),r=new Vm(e);return t.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Im,{type:Im},i=>{let o=i?.[0]?.[Im];o!==void 0&&t(!!o),Tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vb()||fb()||qm()}},jb=Bm;var eb="@firebase/auth",tb="1.12.0";var jm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ok(n){Wn(new It("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;H(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_b(n)},l=new Nm(r,i,o,u);return E1(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wn(new It("auth-internal",e=>{let t=sr(e.getProvider("auth").getImmediate());return(r=>new jm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xt(eb,tb,kk(n)),xt(eb,tb,"esm2020")}var Lk=300,Fk=Uh("authIdTokenMaxAge")||Lk,nb=null,Vk=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Fk)return;let i=t?.token;nb!==i&&(nb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ey(n=Jc()){let e=Ts(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Tb(n,{popupRedirectResolver:jb,persistence:[Fb,Pb,Zm]}),r=Uh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Vk(o.toString());xb(t,s,()=>s(t.currentUser)),Mb(t,c=>s(c))}}let i=Bh("auth");return i&&Db(t,`http://${i}`),t}function Bk(){return document.getElementsByTagName("head")?.[0]??document}m1({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ot("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Bk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ok("Browser");var Ub={production:!0,firebaseConfig:{apiKey:"AIzaSyB_WSNJbHhEGi6EPYbBKJvlP-MH1nQ846Y",authDomain:"cross-plane-2f5de.firebaseapp.com",projectId:"cross-plane-2f5de",storageBucket:"cross-plane-2f5de.firebasestorage.app",messagingSenderId:"183248187868",appId:"1:183248187868:web:348f43d2a2c5e3e6f0df19"}};var jk=Ub.firebaseConfig,ar=class n{constructor(){this.app=rp(jk);this.db=MD(this.app);this.auth=ey(this.app);this.unsubscribe=null;this.sessionId="shared-grid";this.isSynced=de(!1);this.isLoading=de(!0);this.currentUser=de(null);Qm(this.auth,e=>{this.currentUser.set(e)})}async saveCells(e){let t=Array.from(e.values()).filter(i=>i.confirmed),r=Jr(this.db,"grids",this.sessionId);await Qu(r,{cells:t,updatedAt:new Date().toISOString()}),this.isSynced.set(!0)}async loadCells(){let e=Jr(this.db,"grids",this.sessionId),t=await _m(e);return t.exists()?t.data().cells||[]:[]}subscribeToChanges(e){let t=Jr(this.db,"grids",this.sessionId);this.unsubscribe=BD(t,r=>{if(r.exists()){let i=r.data();e(i?.cells||[])}})}destroy(){this.unsubscribe&&this.unsubscribe()}async signInWithGoogle(){let e=new Gm;try{await Xm(this.auth,e)}catch(t){throw console.error("Error signing in with Google",t),t}}async loginEmail(e,t){await Km(this.auth,e,t)}async registerEmail(e,t){await Wm(this.auth,e,t)}async signOut(){try{await Ym(this.auth)}catch(e){throw console.error("Error signing out",e),e}}async saveUserData(e,t){let r=Jr(this.db,"users",e);await Qu(r,t,{merge:!0})}async getUserData(e){let t=Jr(this.db,"users",e),r=await _m(t);return r.exists()?r.data():null}async incrementProfanityCount(){let e=this.currentUser();if(e)try{let t=Jr(this.db,"users",e.uid);await Qu(t,{profanityAttempts:UD(1),lastProfanityAttempt:new Date().toISOString()},{merge:!0})}catch(t){console.warn("Failed to track profanity attempt:",t)}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}};var sn=class n{constructor(){this.cellsMap=new Map;this.firebase=z(ar);this.saveTimeout=null;this.isInitialized=!1;this.skipNextSync=!1;this.cells=de(new Map);this.viewportOffset=de({x:0,y:0});this.selectedCell=de(null);this.inputDirection=de("across");this.isLoading=de(!0);this.lastPlacedTime=de(0);this.wordsPlacedCount=de(0);let e=this.getCookie("cross_plane_last_placed");e&&this.lastPlacedTime.set(parseInt(e,10));let t=this.getCookie("cross_plane_words_placed");t&&this.wordsPlacedCount.set(parseInt(t,10)),this.loadFromFirebase(),this.firebase.subscribeToChanges(r=>{this.handleRemoteUpdate(r)}),_t(()=>{let r=this.cells();if(this.isInitialized){if(this.skipNextSync){this.skipNextSync=!1;return}this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveToFirebase()},1e3)}}),_t(()=>{let r=this.lastPlacedTime();r>0&&this.setCookie("cross_plane_last_placed",r.toString(),365)}),_t(()=>{let r=this.wordsPlacedCount();this.setCookie("cross_plane_words_placed",r.toString(),365);let i=Zo(()=>this.firebase.currentUser());i&&this.firebase.saveUserData(i.uid,{wordsPlacedCount:r})}),_t(()=>{let r=this.firebase.currentUser();r&&this.syncUserStats(r.uid)})}async syncUserStats(e){if(!this.skipNextSync)try{let t=await this.firebase.getUserData(e),r=this.wordsPlacedCount();if(t&&typeof t.wordsPlacedCount=="number"){let i=t.wordsPlacedCount;i>r?this.wordsPlacedCount.set(i):r>i&&this.firebase.saveUserData(e,{wordsPlacedCount:r})}else r>0&&this.firebase.saveUserData(e,{wordsPlacedCount:r})}catch(t){console.error("Error syncing user stats",t)}}resetUserStats(){this.wordsPlacedCount.set(0),this.setCookie("cross_plane_words_placed","0",365)}setCookie(e,t,r){let i="";if(r){let o=new Date;o.setTime(o.getTime()+r*24*60*60*1e3),i="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}getCookie(e){let t=e+"=",r=document.cookie.split(";");for(let i=0;i<r.length;i++){let o=r[i];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null}handleRemoteUpdate(e){let t=new Map;e.forEach(r=>{let i=`${r.x},${r.y} `;t.set(i,r)}),(this.cellsMap.size!==t.size||!this.mapsEqual(this.cellsMap,t))&&(this.skipNextSync=!0,this.cellsMap=t,this.cells.set(new Map(this.cellsMap)),console.log("Grid updated from Firebase (real-time sync)"))}mapsEqual(e,t){if(e.size!==t.size)return!1;for(let[r,i]of e){let o=t.get(r);if(!o||i.char!==o.char||i.confirmed!==o.confirmed)return!1}return!0}async loadFromFirebase(){try{let e=await this.firebase.loadCells();e.length>0?(e.forEach(t=>{let r=`${t.x},${t.y} `;this.cellsMap.set(r,t)}),this.cells.set(new Map(this.cellsMap))):this.initializeDefault()}catch(e){console.error("Failed to load from Firebase - Check Firestore Rules in Console!",e),this.initializeDefault()}finally{this.isLoading.set(!1),this.isInitialized=!0}}initializeDefault(){this.setCell(-5,0,"C",!0),this.setCell(-4,0,"R",!0),this.setCell(-3,0,"O",!0),this.setCell(-2,0,"S",!0),this.setCell(-1,0,"S",!0),this.setCell(0,0,".",!0),this.setCell(1,0,"P",!0),this.setCell(2,0,"L",!0),this.setCell(3,0,"A",!0),this.setCell(4,0,"N",!0),this.setCell(5,0,"E",!0)}async saveToFirebase(){try{await this.firebase.saveCells(this.cellsMap),console.log("Grid saved to Firebase")}catch(e){console.error("Failed to save to Firebase - Check Firestore Rules in Console!",e)}}getCell(e,t){return this.cellsMap.get(`${e},${t} `)}setCell(e,t,r,i){let o=`${e},${t} `;this.cellsMap.set(o,{x:e,y:t,char:r.toUpperCase(),confirmed:i}),this.cells.set(new Map(this.cellsMap))}removeCell(e,t){let r=`${e},${t} `;this.cellsMap.has(r)&&(this.cellsMap.delete(r),this.cells.set(new Map(this.cellsMap)))}isBlackSquare(e,t){if(Math.abs(e)<6&&Math.abs(t)<6)return!1;let r=Math.sin(e*12.9898+t*78.233)*43758.5453123%1;return Math.abs(r)>.88}isValidSlot(e,t){return!this.isBlackSquare(e,t)}incrementWordsPlaced(){this.wordsPlacedCount.update(e=>e+1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}};var yl=class n{constructor(e){this.grid=e;this.ngZone=z(Ge);this.animationFrameId=null;this.needsRender=!0;this.CELL_SIZE=40}setCanvas(e){this.canvasElement=e,this.ctx=e.getContext("2d"),this.resizeCanvas()}resizeCanvas(){if(!this.canvasElement)return;let e=window.devicePixelRatio||1,t=window.innerWidth,r=window.innerHeight;this.canvasElement.width=t*e,this.canvasElement.height=r*e,this.canvasElement.style.width=t+"px",this.canvasElement.style.height=r+"px",this.ctx.scale(e,e),this.requestRender()}requestRender(){this.needsRender=!0}startRenderLoop(e){this.ngZone.runOutsideAngular(()=>{let t=()=>{this.needsRender&&(this.renderCanvas(e()),this.needsRender=!1),this.animationFrameId=requestAnimationFrame(t)};t()})}stopRenderLoop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}renderCanvas(e){if(!this.ctx)return;let t=this.ctx,r=window.innerWidth,i=window.innerHeight,{zoomLevel:o,theme:s,font:c,showText:u,pendingWords:l}=e,h=s.colors;t.clearRect(0,0,r,i),t.fillStyle=h.bg,t.fillRect(0,0,r,i);let p=this.grid.viewportOffset(),m=this.CELL_SIZE*o,E=r/2+p.x,A=i/2+p.y,M=Math.floor(-E/m)-1,S=Math.ceil((r-E)/m)+1,P=Math.floor(-A/m)-1,V=Math.ceil((i-A)/m)+1;t.strokeStyle=h.gridLines,t.lineWidth=1;for(let y=M;y<=S;y++){let v=E+y*m;t.beginPath(),t.moveTo(v,0),t.lineTo(v,i),t.stroke()}for(let y=P;y<=V;y++){let v=A+y*m;t.beginPath(),t.moveTo(0,v),t.lineTo(r,v),t.stroke()}t.fillStyle=h.blackSquare;for(let y=M;y<=S;y++)for(let v=P;v<=V;v++)if(this.grid.isBlackSquare(y,v)){let w=E+y*m,I=A+v*m;t.fillRect(w+.5,I+.5,m-1,m-1)}let W=this.grid.selectedCell(),Se=Math.max(8,Math.floor(m*.55));t.font=`bold ${Se}px ${c.fontFamily}`,t.textAlign="center",t.textBaseline="middle";let Pe=(S-M)*(V-P),Ae=this.grid.cells().size;if(Pe<Ae*2)for(let y=M;y<=S;y++)for(let v=P;v<=V;v++){let w=this.grid.getCell(y,v);w&&this.drawCell(t,w,E,A,m,h,u,W)}else this.grid.cells().forEach(y=>{y.x<M||y.x>S||y.y<P||y.y>V||this.drawCell(t,y,E,A,m,h,u,W)});if(l.forEach(y=>{let v=E+y.x*m,w=A+y.y*m;if(!(v+m<0||v>r||w+m<0||w>i))if(u){let I=W&&W.x===y.x&&W.y===y.y;t.fillStyle=I?h.selectionBg:h.confirmedBg,t.fillRect(v+1,w+1,m-2,m-2),t.strokeStyle=h.pendingBorder,t.lineWidth=1,t.strokeRect(v+1,w+1,m-2,m-2),t.fillStyle=h.pendingText,t.fillText(y.char,v+m/2,w+m/2+1)}else t.fillStyle=h.pendingBg,t.fillRect(v+1,w+1,m-2,m-2)}),W&&u){let y=E+W.x*m-1,v=A+W.y*m-1;t.strokeStyle=h.selectionBorder,t.lineWidth=3,t.strokeRect(y,v,m+2,m+2),t.shadowColor=h.selectionShadow,t.shadowBlur=10,t.strokeRect(y,v,m+2,m+2),t.shadowBlur=0;let w=this.grid.inputDirection()==="across",I=Math.max(12,m*.35);if(t.fillStyle=h.selectionBorder,t.beginPath(),w){let b=y+m+8,_=v+m/2;t.moveTo(b,_-I/2),t.lineTo(b+I,_),t.lineTo(b,_+I/2)}else{let b=y+m/2,_=v+m+8;t.moveTo(b-I/2,_),t.lineTo(b,_+I),t.lineTo(b+I/2,_)}t.fill()}}drawCell(e,t,r,i,o,s,c,u){let l=r+t.x*o,h=i+t.y*o;if(c){let p=u&&u.x===t.x&&u.y===t.y,m=t.y===0&&Math.abs(t.x)<=5&&t.x!==0;p?e.fillStyle=s.selectionBg:m?e.fillStyle=s.startWordBg:e.fillStyle=s.confirmedBg,e.fillRect(l+1,h+1,o-2,o-2),m&&!p?e.strokeStyle=s.startWordBorder:e.strokeStyle=s.confirmedBorder,e.lineWidth=1,e.strokeRect(l+1,h+1,o-2,o-2),e.fillStyle=s.confirmedText,e.fillText(t.char,l+o/2,h+o/2+1)}else e.fillStyle=s.zoomedOutCell,e.fillRect(l,h,o,o)}static{this.\u0275fac=function(t){return new(t||n)(se(sn))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}};var lo=class n{constructor(e){this.grid=e;this.isPanning=!1;this.startX=0;this.startY=0;this.startOffsetX=0;this.startOffsetY=0;this.zoomLevel=de(1);this.MIN_ZOOM=.03;this.MAX_ZOOM=2;this.isPinching=!1;this.initialPinchDist=0;this.startZoom=1;this.hasInteracted=de(!1)}setZoom(e,t,r,i,o){let s=this.zoomLevel(),c=this.grid.viewportOffset(),u=Math.min(Math.max(e,this.MIN_ZOOM),this.MAX_ZOOM);if(u===s)return;let l=t-i/2,h=r-o/2,p=u/s,m=l-(l-c.x)*p,E=h-(h-c.y)*p;this.grid.viewportOffset.set({x:m,y:E}),this.zoomLevel.set(u)}zoomIn(e,t){this.setZoom(this.zoomLevel()*1.2,e/2,t/2,e,t)}zoomOut(e,t){this.setZoom(this.zoomLevel()/1.2,e/2,t/2,e,t)}handleWheel(e){e.preventDefault();let i=1+-e.deltaY*.001;i>1.15&&(i=1.15),i<.85&&(i=.85);let o=this.zoomLevel()*i;this.setZoom(o,e.clientX,e.clientY,window.innerWidth,window.innerHeight)}startPan(e){e.button===0&&(this.isPanning=!0,this.startX=e.clientX,this.startY=e.clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}startPanTouch(e){if(e.touches.length===2){this.isPinching=!0,this.isPanning=!1,this.initialPinchDist=this.getDist(e.touches),this.startZoom=this.zoomLevel();return}e.touches.length===1&&(this.isPanning=!0,this.isPinching=!1,this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}handlePan(e){if(!this.isPanning)return;this.hasInteracted.set(!0);let t=e.clientX-this.startX,r=e.clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r})}handlePanTouch(e){if(this.isPinching&&e.touches.length===2){let r=this.getDist(e.touches)/this.initialPinchDist,i=(e.touches[0].clientX+e.touches[1].clientX)/2,o=(e.touches[0].clientY+e.touches[1].clientY)/2,s=this.startZoom*r;this.setZoom(s,i,o,window.innerWidth,window.innerHeight),e.preventDefault();return}if(this.isPanning&&e.touches.length===1){this.hasInteracted.set(!0);let t=e.touches[0].clientX-this.startX,r=e.touches[0].clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r}),e.cancelable&&e.preventDefault()}}endPan(){this.isPanning=!1,this.isPinching=!1}getDist(e){let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)}screenToGrid(e,t,r){let i=this.zoomLevel(),o=this.grid.viewportOffset(),s=r*i,c=window.innerWidth/2+o.x,u=window.innerHeight/2+o.y,l=Math.floor((e-c)/s),h=Math.floor((t-u)/s);return{x:l,y:h}}static{this.\u0275fac=function(t){return new(t||n)(se(sn))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}};var ny=[{id:"classic",name:"Classic",buttonColor:"#ffffff",unlockCount:0,colors:{bg:"#ffffff",gridLines:"rgba(100, 100, 100, 0.1)",blackSquare:"#000000",text:"#000000",confirmedBg:"#ffffff",confirmedText:"#000000",confirmedBorder:"rgba(0, 0, 0, 0.1)",startWordBg:"#fef9c3",startWordBorder:"rgba(0, 0, 0, 0.1)",zoomedOutCell:"rgba(0, 0, 0, 0.1)",pendingBg:"#ffffff",pendingText:"#2563eb",pendingBorder:"rgba(13, 0, 56, 0.1)",selectionBg:"#dbeafe",selectionBorder:"#2563eb",selectionShadow:"rgba(0, 0, 255, 0.4)"}},{id:"dark",name:"Dark Mode",buttonColor:"#1f2937",unlockCount:5,colors:{bg:"#1f2937",gridLines:"rgba(100, 100, 100, 0.2)",blackSquare:"#111827",text:"#e5e7eb",confirmedBg:"#1f2937",confirmedText:"#e5e7eb",confirmedBorder:"rgba(100, 100, 100, 0.3)",startWordBg:"#374151",startWordBorder:"#4b5563",zoomedOutCell:"#374151",pendingBg:"#1f2937",pendingText:"#9ca3af",pendingBorder:"#4b5563",selectionBg:"#312e81",selectionBorder:"#6366f1",selectionShadow:"rgba(99, 102, 241, 0.4)"}},{id:"paper",name:"Old Paper",buttonColor:"#f5ebe0",unlockCount:10,colors:{bg:"#f5ebe0",gridLines:"rgba(100, 100, 100, 0.1)",blackSquare:"#4a3b32",text:"#3e2723",confirmedBg:"#f5ebe0",confirmedText:"#3e2723",confirmedBorder:"rgba(100, 100, 100, 0.1)",startWordBg:"#e6ccb2",startWordBorder:"rgba(100, 100, 100, 0.1)",zoomedOutCell:"#e6ccb2",pendingBg:"#f5ebe0",pendingText:"#92400e",pendingBorder:"rgba(100, 100, 100, 0.1)",selectionBg:"#e8d9cc",selectionBorder:"#7f5539",selectionShadow:"rgba(69, 26, 3, 0.2)"}},{id:"midnight",name:"Midnight",buttonColor:"#020617",unlockCount:15,colors:{bg:"#0f172a",gridLines:"rgba(59, 130, 246, 0.1)",blackSquare:"#020617",text:"#97a2b1ff",confirmedBg:"#0f172a",confirmedText:"#cbd5e1",confirmedBorder:"rgba(59, 130, 246, 0.2)",startWordBg:"#1e293b",startWordBorder:"#334155",zoomedOutCell:"rgba(59, 130, 246, 0.2)",pendingBg:"#0f172a",pendingText:"#64748b",pendingBorder:"#1e293b",selectionBg:"#172554",selectionBorder:"#3b82f6",selectionShadow:"rgba(59, 130, 246, 0.4)"}},{id:"matrix",name:"Matrix",buttonColor:"#00ff41",unlockCount:10,colors:{bg:"#000000",gridLines:"#003300",blackSquare:"#00ff41",text:"#00ff41",confirmedBg:"#000000",confirmedText:"#00ff41",confirmedBorder:"#003300",startWordBg:"#001a00",startWordBorder:"#003300",zoomedOutCell:"rgba(0, 255, 65, 0.3)",pendingBg:"#000000",pendingText:"#008f11",pendingBorder:"#003300",selectionBg:"#002200",selectionBorder:"#00ff41",selectionShadow:"rgba(0, 255, 65, 0.2)"}},{id:"blueprint",name:"Blueprint",buttonColor:"#3555a1",unlockCount:20,colors:{bg:"#3555a1",gridLines:"rgba(255, 255, 255, 0.1)",blackSquare:"#25397b",text:"#ffffff",confirmedBg:"#3555a1",confirmedText:"#ffffff",confirmedBorder:"rgba(255, 255, 255, 0.2)",startWordBg:"#476bb4",startWordBorder:"#476bb4",zoomedOutCell:"rgba(255, 255, 255, 0.2)",pendingBg:"#3555a1",pendingText:"#ffffff",pendingBorder:"#ffffff",selectionBg:"#506bae",selectionBorder:"#ffffff",selectionShadow:"rgba(255, 255, 255, 0.3)"}},{id:"neon",name:"Cyberpunk",buttonColor:"#e879f9",unlockCount:100,colors:{bg:"#090014",gridLines:"rgba(217, 70, 239, 0.3)",blackSquare:"#742f80ff",text:"#100f10ff",confirmedBg:"#090014",confirmedText:"#e879f9",confirmedBorder:"rgba(217, 70, 239, 0.3)",startWordBg:"#180024",startWordBorder:"#e879f9",zoomedOutCell:"#e879f9",pendingBg:"#090014",pendingText:"#86198f",pendingBorder:"#e879f9",selectionBg:"#4a044e",selectionBorder:"#f0abfc",selectionShadow:"rgba(217, 70, 239, 0.6)"}}];var ry=[{id:"classic",name:"Classic",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",unlockCount:0},{id:"hand",name:"Hand",fontFamily:'"Patrick Hand", cursive',unlockCount:5},{id:"serif",name:"Serif",fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',unlockCount:15},{id:"pixel",name:"Pixel",fontFamily:'"Pixelify Sans", monospace',unlockCount:40},{id:"newspaper",name:"Newspaper",fontFamily:'"Playfair Display", serif',unlockCount:30},{id:"marker",name:"Marker",fontFamily:'"Permanent Marker", cursive',unlockCount:75},{id:"gothic",name:"Gothic",fontFamily:'"UnifrakturMaguntia", cursive',unlockCount:100}];var iy=3e4,Uk=new Set(["penis","vagina","anus","rectum","scrotum","testicle","testicles","clitoris","labia","foreskin","genitals","genital","phallus","urethra","pubic","groin","feces","faeces","urine","semen","sperm","enema","cocaine","heroin","meth","crack","ecstasy","lsd","ketamine","opium","fentanyl","morphine","nazi","nazis","hitler","holocaust","genocide","kkk","jihad","terrorist","terrorists","murder","rape","rapist","molest","pedophile","incest","suicide","homicide","porn","porno","hentai","fetish","bondage","orgy","brothel","prostitute","escort"]),fo=class n{constructor(){this.firebaseService=z(ar);this.lastProfanityTime=0;this.profanityCooldownEnd=de(0)}isInProfanityCooldown(){return this.firebaseService.currentUser()?!1:Date.now()<this.lastProfanityTime+iy}getProfanityCooldownRemaining(){return this.isInProfanityCooldown()?this.lastProfanityTime+iy-Date.now():0}async validateWord(e){try{if(this.isInProfanityCooldown())return{valid:!1,definition:"",reason:`Please wait ${Math.ceil(this.getProfanityCooldownRemaining()/1e3)}s before trying again`};if(await this.checkProfanity(e))return this.firebaseService.currentUser()?this.firebaseService.incrementProfanityCount():(this.lastProfanityTime=Date.now(),this.profanityCooldownEnd.set(this.lastProfanityTime+iy)),{valid:!1,definition:"",reason:`"${e.toUpperCase()}" not found in dictionary`};let r=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e.toLowerCase()}`);if(r.status===404)return{valid:!1,definition:"",reason:`"${e.toUpperCase()}" not found in dictionary`};if(!r.ok)throw new Error("Dictionary API error");let i=await r.json(),o="No definition found.";if(Array.isArray(i)&&i.length>0){let s=i[0];if(s.meanings&&s.meanings.length>0){let c=s.meanings[0];c.definitions&&c.definitions.length>0&&(o=c.definitions[0].definition)}}return{valid:!0,definition:o}}catch(t){return console.error("Dictionary validation error:",t),{valid:!1,definition:"",reason:"Validation service unavailable"}}}async checkProfanity(e){let t=e.toLowerCase();if(Uk.has(t))return!0;try{let r=await fetch(`https://www.purgomalum.com/service/containsprofanity?text=${encodeURIComponent(t)}`);return r.ok?await r.text()==="true":(console.warn("Profanity check failed, allowing word through"),!1)}catch(r){return console.warn("Profanity API unavailable:",r),!1}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}};var $k=["progressPath"];function zk(n,e){n&1&&(O(0,"div",32),we(1,"div",33),F())}function qk(n,e){if(n&1&&(O(0,"div",34),we(1,"div",35),O(2,"div",36),De(3," Words placed: "),O(4,"span",37),De(5),F()()()),n&2){let t=ve();ie(5),fn(t.wordsPlacedCount)}}function Gk(n,e){if(n&1&&(O(0,"div",38)(1,"p",39),De(2," Infinite, procedural, collaborative crossword. "),we(3,"br"),De(4," Click to select. Space to rotate. Type to type. "),F(),O(5,"div",40)(6,"div",41),De(7," Words placed: "),O(8,"span",42),De(9),F()()()()),n&2){let t=ve();ie(9),fn(t.wordsPlacedCount)}}function Wk(n,e){n&1&&(O(0,"div",46),Ke(),O(1,"svg",47),we(2,"circle",48)(3,"path",49),F(),qt(),O(4,"span",50),De(5,"Validating..."),F()())}function Kk(n,e){if(n&1&&(O(0,"div",51),De(1),F()),n&2){let t=ve(2);dn("text-red-500",t.isError)("text-green-600",!t.isError),ie(),ds(" ",t.validationMessage," ")}}function Qk(n,e){if(n&1&&(O(0,"div",43),Be(1,Wk,6,0,"div",44)(2,Kk,2,5,"div",45),F()),n&2){let t=ve();dn("min-h-[24px]",!t.isCollapsed())("mt-2",!t.isCollapsed()||t.isCollapsed()&&(t.isValidating||t.validationMessage))("pt-2",t.isCollapsed()&&(t.isValidating||t.validationMessage))("border-t",t.isCollapsed()&&(t.isValidating||t.validationMessage))("border-gray-100",t.isCollapsed()),ie(),le("ngIf",t.isValidating),ie(),le("ngIf",!t.isValidating&&t.validationMessage)}}function Yk(n,e){if(n&1){let t=Et();O(0,"button",52),Ee("click",function(){J(t);let i=ve();return X(i.toggleAuthMenu())}),Ke(),O(1,"svg",21),we(2,"path",53),F()()}}function Zk(n,e){if(n&1&&(O(0,"div",70),De(1),F()),n&2){let t=ve(2);ie(),fn(t.authError)}}function Jk(n,e){if(n&1&&(O(0,"span"),De(1),F()),n&2){let t=ve(2);ie(),fn(t.isRegisterMode?"Sign Up":"Log In")}}function Xk(n,e){n&1&&(Ke(),O(0,"svg",71),we(1,"circle",48)(2,"path",49),F())}function eO(n,e){if(n&1){let t=Et();O(0,"span"),De(1,"Need an account? "),O(2,"button",72),Ee("click",function(){J(t);let i=ve(2);return i.isRegisterMode=!0,X(i.authError="")}),De(3,"Sign up"),F()()}}function tO(n,e){if(n&1){let t=Et();O(0,"span"),De(1,"Values account? "),O(2,"button",72),Ee("click",function(){J(t);let i=ve(2);return i.isRegisterMode=!1,X(i.authError="")}),De(3,"Log in"),F()()}}function nO(n,e){if(n&1){let t=Et();O(0,"div",54)(1,"h3",55),De(2),F(),O(3,"div",56)(4,"input",57,1),Ee("keydown",function(i){return J(t),X(i.stopPropagation())})("keyup.enter",function(){J(t);let i=Or(7);return X(i.focus())}),F(),O(6,"input",58,2),Ee("keydown",function(i){return J(t),X(i.stopPropagation())})("keyup.enter",function(){J(t);let i=Or(5),o=Or(7),s=ve();return X(s.handleAuth(i.value,o.value))}),F(),Be(8,Zk,2,1,"div",59),O(9,"button",60),Ee("click",function(){J(t);let i=Or(5),o=Or(7),s=ve();return X(s.handleAuth(i.value,o.value))}),Be(10,Jk,2,1,"span",61)(11,Xk,3,0,"svg",62),F()(),O(12,"div",63),we(13,"div",64),O(14,"span",65),De(15,"OR"),F(),we(16,"div",64),F(),O(17,"button",66),Ee("click",function(){J(t);let i=ve();return X(i.signInGoogle())}),Ke(),O(18,"svg",67),we(19,"path",68),F(),De(20," Google "),F(),qt(),O(21,"div",69),Be(22,eO,4,0,"span",61)(23,tO,4,0,"span",61),F()()}if(n&2){let t=ve();ie(2),fn(t.isRegisterMode?"Create Account":"Welcome Back"),ie(6),le("ngIf",t.authError),ie(2),le("ngIf",!t.isAuthLoading),ie(),le("ngIf",t.isAuthLoading),ie(11),le("ngIf",!t.isRegisterMode),ie(),le("ngIf",t.isRegisterMode)}}function rO(n,e){if(n&1&&we(0,"img",79),n&2){let t,r=ve(2);le("src",(t=r.currentUser())==null?null:t.photoURL,Wf)}}function iO(n,e){if(n&1&&(O(0,"span",80),De(1),F()),n&2){let t,r=ve(2);ie(),fn(((t=r.currentUser())==null||t.displayName==null?null:t.displayName.charAt(0))||"U")}}function oO(n,e){if(n&1){let t=Et();O(0,"button",73),Ee("click",function(){J(t);let i=ve();return X(i.signOut())}),Be(1,rO,1,1,"img",74)(2,iO,2,1,"span",75),O(3,"div",76),Ke(),O(4,"svg",77),we(5,"path",78),F()()()}if(n&2){let t,r,i,o=ve();le("title",((t=o.currentUser())==null?null:t.displayName)||"Sign Out"),ie(),le("ngIf",(r=o.currentUser())==null?null:r.photoURL),ie(),le("ngIf",!((i=o.currentUser())!=null&&i.photoURL))}}function sO(n,e){n&1&&(Ke(),O(0,"svg",88),we(1,"path",89),F())}function aO(n,e){if(n&1){let t=Et();O(0,"button",86),Ee("click",function(){let i=J(t).$implicit,o=ve(2);return X(o.selectTheme(i))}),Be(1,sO,2,0,"svg",87),F()}if(n&2){let t=e.$implicit,r=ve(2);ls("background-color",t.buttonColor)("border-color",t.colors.confirmedBorder),dn("ring-2",r.activeTheme.id===t.id)("ring-offset-1",r.activeTheme.id===t.id)("ring-blue-500",r.activeTheme.id===t.id)("opacity-50",r.wordsPlacedCount<t.unlockCount),le("title",r.wordsPlacedCount<t.unlockCount?"Unlock at "+t.unlockCount+" words":t.name),ie(),le("ngIf",r.wordsPlacedCount<t.unlockCount)}}function cO(n,e){if(n&1&&(O(0,"span",92),De(1,"Ag"),F()),n&2){let t=ve().$implicit;ls("font-family",t.fontFamily)}}function uO(n,e){n&1&&(Ke(),O(0,"svg",88),we(1,"path",89),F())}function lO(n,e){if(n&1){let t=Et();O(0,"button",90),Ee("click",function(){let i=J(t).$implicit,o=ve(2);return X(o.selectFont(i))}),Be(1,cO,2,2,"span",91)(2,uO,2,0,"svg",87),F()}if(n&2){let t=e.$implicit,r=ve(2);dn("ring-2",r.activeFont.id===t.id)("ring-offset-1",r.activeFont.id===t.id)("ring-blue-500",r.activeFont.id===t.id)("opacity-50",r.wordsPlacedCount<t.unlockCount),le("title",r.wordsPlacedCount<t.unlockCount?"Unlock at "+t.unlockCount+" words":t.name),ie(),le("ngIf",r.wordsPlacedCount>=t.unlockCount),ie(),le("ngIf",r.wordsPlacedCount<t.unlockCount)}}function dO(n,e){if(n&1&&(O(0,"div",81)(1,"div",82),Be(2,aO,2,14,"button",83),F(),we(3,"div",84),O(4,"div",82),Be(5,lO,3,11,"button",85),F()()),n&2){let t=ve();ie(2),le("ngForOf",t.themes),ie(3),le("ngForOf",t.fonts)}}var vl=class n{constructor(){this.lastPlacedTime=0;this.cooldownMs=15e3;this.wordsPlacedCount=0;this.isValidating=!1;this.validationMessage="";this.isError=!1;this.themes=[];this.fonts=[];this.themeSelected=new qe;this.fontSelected=new qe;this.zoomIn=new qe;this.zoomOut=new qe;this.resetView=new qe;this.sharePosition=new qe;this.ngZone=z(Ge);this.firebaseService=z(ar);this.gridStore=z(sn);this.dictService=z(fo);this.inputManager=z(lo);this.isHovered=de(!1);this.shouldCollapse=de(!1);this.isCollapsed=vh(()=>this.shouldCollapse()&&!this.isHovered());this.currentUser=this.firebaseService.currentUser;this.animationFrameId=null;this.cooldownProgress=1;this.isThemeMenuOpen=!1;this.isAuthMenuOpen=!1;this.isRegisterMode=!1;this.isAuthLoading=!1;this.authError="";_t(()=>{this.inputManager.hasInteracted()&&setTimeout(()=>{this.shouldCollapse.set(!0)},5e3)})}toggleAuthMenu(){this.isAuthMenuOpen=!this.isAuthMenuOpen,this.isThemeMenuOpen=!1,this.authError=""}async signInGoogle(){this.isAuthLoading=!0;try{await this.firebaseService.signInWithGoogle(),this.isAuthMenuOpen=!1}catch(e){this.authError=e.message}finally{this.isAuthLoading=!1}}async handleAuth(e,t){if(!e||!t){this.authError="Please enter email and password";return}this.isAuthLoading=!0,this.authError="";try{this.isRegisterMode?await this.firebaseService.registerEmail(e,t):await this.firebaseService.loginEmail(e,t),this.isAuthMenuOpen=!1}catch(r){console.error(r),r.code==="auth/invalid-credential"?this.authError="Invalid email or password.":r.code==="auth/email-already-in-use"?this.authError="Email already in use.":r.code==="auth/weak-password"?this.authError="Password should be at least 6 characters.":this.authError="Error: "+(r.message||"Unknown")}finally{this.isAuthLoading=!1}}async signOut(){await this.firebaseService.signOut(),this.gridStore.resetUserStats()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{let e=()=>{let t=Date.now(),r=this.lastPlacedTime+this.cooldownMs,i=this.dictService.profanityCooldownEnd(),o=Math.max(r,i),s=i>r?3e4:this.cooldownMs,c=o-s,u=t-c,l=1;if(t<o&&(l=u/s),this.progressPath?.nativeElement){let h=(l*100).toFixed(1);this.progressPath.nativeElement.setAttribute("stroke-dasharray",`${h}, 100`)}l>=1&&this.cooldownProgress<1?this.ngZone.run(()=>this.cooldownProgress=1):l<1&&this.cooldownProgress>=1&&this.ngZone.run(()=>this.cooldownProgress=l),this.animationFrameId=requestAnimationFrame(e)};e()})}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}toggleThemeMenu(){this.isThemeMenuOpen=!this.isThemeMenuOpen,this.isAuthMenuOpen=!1}selectTheme(e){this.wordsPlacedCount>=e.unlockCount&&this.themeSelected.emit(e)}selectFont(e){this.wordsPlacedCount>=e.unlockCount&&this.fontSelected.emit(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=cs({type:n,selectors:[["app-top-bar"]],viewQuery:function(t,r){if(t&1&&Ni($k,5),t&2){let i;Ri(i=Mi())&&(r.progressPath=i.first)}},inputs:{lastPlacedTime:"lastPlacedTime",cooldownMs:"cooldownMs",wordsPlacedCount:"wordsPlacedCount",isValidating:"isValidating",validationMessage:"validationMessage",isError:"isError",activeTheme:"activeTheme",themes:"themes",activeFont:"activeFont",fonts:"fonts"},outputs:{themeSelected:"themeSelected",fontSelected:"fontSelected",zoomIn:"zoomIn",zoomOut:"zoomOut",resetView:"resetView",sharePosition:"sharePosition"},decls:36,vars:12,consts:[["progressPath",""],["emailInput",""],["passwordInput",""],[1,"absolute","top-0","left-0","right-0","p-4","pointer-events-none","z-50","flex","justify-center","md:justify-start"],[1,"bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","px-4","py-3","rounded-xl","pointer-events-auto","max-w-sm","w-full","md:w-auto","text-center","md:text-left","transition-all","duration-300","ease-in-out",3,"mouseenter","mouseleave"],[1,"flex","items-center","gap-3"],[1,"relative","w-6","h-6","flex-shrink-0"],["viewBox","0 0 36 36",1,"transform","-rotate-90","w-full","h-full"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-gray-200"],["stroke-dasharray","100, 100","d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-blue-500","transition-[stroke-dasharray]","duration-100","ease-linear"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"text-xl","font-black","tracking-tighter"],["class","flex items-center gap-2 ml-2 animate-in fade-in slide-in-from-left-2",4,"ngIf"],["class","animate-in fade-in slide-in-from-top-1",4,"ngIf"],["class","flex flex-col justify-center items-center md:items-start transition-all",3,"min-h-[24px]","mt-2","pt-2","border-t","border-gray-100",4,"ngIf"],[1,"absolute","top-4","right-4","flex","flex-col","gap-2","z-50","pointer-events-auto"],[1,"relative"],["class","bg-white shadow-lg border border-gray-200 p-2 rounded-full hover:bg-gray-50 text-gray-700","title","Sign In",3,"click",4,"ngIf"],["class","absolute right-0 top-12 w-72 bg-white/95 backdrop-blur shadow-xl border border-gray-200 p-4 rounded-xl z-50 animate-in fade-in slide-in-from-top-2",4,"ngIf"],["class","bg-white shadow-lg border border-gray-200 p-1 rounded-full hover:bg-gray-50 overflow-hidden w-10 h-10 flex items-center justify-center relative group",3,"title","click",4,"ngIf"],["title","Center View",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Share Position",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"],["title","Themes",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"],["class","absolute right-full top-0 mr-2 bg-white/95 backdrop-blur shadow-lg border border-gray-200 p-3 rounded-xl flex flex-col gap-3 min-w-max animate-in fade-in slide-in-from-right-2",4,"ngIf"],["title","Zoom In",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["title","Zoom Out",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"w-2","h-2","bg-blue-500","rounded-full"],[1,"flex","items-center","gap-2","ml-2","animate-in","fade-in","slide-in-from-left-2"],[1,"h-4","w-px","bg-gray-300"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wide","whitespace-nowrap"],[1,"text-black","ml-1"],[1,"animate-in","fade-in","slide-in-from-top-1"],[1,"hidden","md:block","text-xs","text-gray-500","mb-2","leading-relaxed"],[1,"flex","items-center","justify-between","mb-3","pt-2","border-t","border-gray-100"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wide"],[1,"text-black","text-sm"],[1,"flex","flex-col","justify-center","items-center","md:items-start","transition-all"],["class","flex items-center space-x-2 text-blue-600 animate-pulse",4,"ngIf"],["class","text-sm font-medium whitespace-pre-wrap",3,"text-red-500","text-green-600",4,"ngIf"],[1,"flex","items-center","space-x-2","text-blue-600","animate-pulse"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-semibold"],[1,"text-sm","font-medium","whitespace-pre-wrap"],["title","Sign In",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"absolute","right-0","top-12","w-72","bg-white/95","backdrop-blur","shadow-xl","border","border-gray-200","p-4","rounded-xl","z-50","animate-in","fade-in","slide-in-from-top-2"],[1,"font-bold","text-lg","mb-3"],[1,"space-y-2","mb-4"],["type","email","placeholder","Email",1,"w-full","px-3","py-2","border","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white/50",3,"keydown","keyup.enter"],["type","password","placeholder","Password",1,"w-full","px-3","py-2","border","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white/50",3,"keydown","keyup.enter"],["class","text-xs text-red-500 font-medium",4,"ngIf"],[1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","rounded-lg","transition-colors","flex","justify-center","items-center",3,"click"],[4,"ngIf"],["class","animate-spin h-5 w-5 text-white","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"relative","flex","py-2","items-center"],[1,"flex-grow","border-t","border-gray-300"],[1,"flex-shrink-0","mx-2","text-gray-400","text-xs"],[1,"w-full","bg-white","border","border-gray-300","hover:bg-gray-50","text-gray-700","font-bold","py-2","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2","mb-3",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-4","h-4"],["d","M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"],[1,"text-center","text-xs","text-gray-500"],[1,"text-xs","text-red-500","font-medium"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],[1,"text-blue-600","hover:underline",3,"click"],[1,"bg-white","shadow-lg","border","border-gray-200","p-1","rounded-full","hover:bg-gray-50","overflow-hidden","w-10","h-10","flex","items-center","justify-center","relative","group",3,"click","title"],["class","w-full h-full object-cover rounded-full",3,"src",4,"ngIf"],["class","text-xs font-bold",4,"ngIf"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"w-full","h-full","object-cover","rounded-full",3,"src"],[1,"text-xs","font-bold"],[1,"absolute","right-full","top-0","mr-2","bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","p-3","rounded-xl","flex","flex-col","gap-3","min-w-max","animate-in","fade-in","slide-in-from-right-2"],[1,"flex","gap-2"],["class","w-10 h-10 rounded-full border transition-all relative flex items-center justify-center group shadow-sm",3,"ring-2","ring-offset-1","ring-blue-500","opacity-50","background-color","border-color","title","click",4,"ngFor","ngForOf"],[1,"h-px","bg-gray-200","w-full"],["class","w-10 h-10 rounded-lg border transition-all relative flex items-center justify-center group shadow-sm bg-white hover:bg-gray-50",3,"ring-2","ring-offset-1","ring-blue-500","opacity-50","title","click",4,"ngFor","ngForOf"],[1,"w-10","h-10","rounded-full","border","transition-all","relative","flex","items-center","justify-center","group","shadow-sm",3,"click","title"],["class","w-4 h-4 text-gray-400","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"w-10","h-10","rounded-lg","border","transition-all","relative","flex","items-center","justify-center","group","shadow-sm","bg-white","hover:bg-gray-50",3,"click","title"],["class","text-lg",3,"font-family",4,"ngIf"],[1,"text-lg"]],template:function(t,r){if(t&1){let i=Et();O(0,"div",3)(1,"div",4),Ee("mouseenter",function(){return J(i),X(r.isHovered.set(!0))})("mouseleave",function(){return J(i),X(r.isHovered.set(!1))}),O(2,"div",5)(3,"div",6),Ke(),O(4,"svg",7),we(5,"path",8)(6,"path",9,0),F(),Be(8,zk,2,0,"div",10),F(),qt(),O(9,"h1",11),De(10,"Cross.plane"),F(),Be(11,qk,6,1,"div",12),F(),Be(12,Gk,10,1,"div",13)(13,Qk,3,12,"div",14),F()(),O(14,"div",15)(15,"div",16),Be(16,Yk,3,0,"button",17)(17,nO,24,6,"div",18),F(),Be(18,oO,6,3,"button",19),O(19,"button",20),Ee("click",function(){return J(i),X(r.resetView.emit())}),Ke(),O(20,"svg",21),we(21,"path",22),F()(),qt(),O(22,"button",23),Ee("click",function(){return J(i),X(r.sharePosition.emit())}),Ke(),O(23,"svg",21),we(24,"path",24),F()(),qt(),O(25,"div",16)(26,"button",25),Ee("click",function(){return J(i),X(r.toggleThemeMenu())}),Ke(),O(27,"svg",21),we(28,"path",26),F()(),Be(29,dO,6,2,"div",27),F(),qt(),O(30,"button",28),Ee("click",function(){return J(i),X(r.zoomIn.emit())}),Ke(),O(31,"svg",21),we(32,"path",29),F()(),qt(),O(33,"button",30),Ee("click",function(){return J(i),X(r.zoomOut.emit())}),Ke(),O(34,"svg",21),we(35,"path",31),F()()()}t&2&&(ie(),dn("py-2",r.isCollapsed()),ie(),dn("mb-1",!r.isCollapsed()),ie(6),le("ngIf",r.cooldownProgress>=1),ie(3),le("ngIf",r.isCollapsed()),ie(),le("ngIf",!r.isCollapsed()),ie(),le("ngIf",!r.isCollapsed()||r.isValidating||r.validationMessage),ie(3),le("ngIf",!r.currentUser()),ie(),le("ngIf",r.isAuthMenuOpen&&!r.currentUser()),ie(),le("ngIf",r.currentUser()),ie(11),le("ngIf",r.isThemeMenuOpen))},dependencies:[xi,Vc,Ch],encapsulation:2})}};var fO=["hiddenInput"],hO=["gridCanvas"],_l=class n{constructor(e,t){this.grid=e;this.dictionary=t;this.renderer=z(yl);this.inputManager=z(lo);this.activeTheme=de(ny[0]);this.themes=ny;this.activeFont=de(ry[0]);this.fonts=ry;this.pendingWordCoords=de([]);this.isValidating=de(!1);this.validationMessage=de("");this.isError=de(!1);this.entryStart=de(null);this.COOLDOWN_MS=5e3;_t(()=>{this.inputManager.zoomLevel(),this.grid.viewportOffset(),this.grid.cells(),this.grid.selectedCell(),this.grid.inputDirection(),this.pendingWordCoords(),this.activeTheme(),this.activeFont(),this.renderer.requestRender()}),this.loadPreferences(),_t(()=>{let r=this.activeTheme();document.body.style.backgroundColor=r.colors.bg,this.grid.setCookie("cross_plane_theme",r.id,365)}),_t(()=>{let r=this.activeFont();this.grid.setCookie("cross_plane_font",r.id,365)})}ngOnInit(){this.handleUrlParams()}ngAfterViewInit(){this.renderer.setCanvas(this.gridCanvas.nativeElement),this.renderer.startRenderLoop(()=>({zoomLevel:this.inputManager.zoomLevel(),theme:this.activeTheme(),font:this.activeFont(),showText:this.inputManager.zoomLevel()>.35,pendingWords:this.pendingWordCoords()})),window.addEventListener("resize",()=>this.renderer.resizeCanvas())}startPan(e){this.inputManager.startPan(e)}startPanTouch(e){this.inputManager.startPanTouch(e)}pan(e){this.inputManager.handlePan(e)}panTouch(e){this.inputManager.handlePanTouch(e)}endPan(){this.inputManager.endPan()}onWheel(e){this.inputManager.handleWheel(e)}zoomIn(){this.inputManager.zoomIn(window.innerWidth,window.innerHeight)}zoomOut(){this.inputManager.zoomOut(window.innerWidth,window.innerHeight)}resetView(){this.grid.viewportOffset.set({x:0,y:0}),this.inputManager.zoomLevel.set(1)}onCanvasClick(e){if(this.inputManager.isPanning)return;let t=this.inputManager.screenToGrid(e.clientX,e.clientY,this.renderer.CELL_SIZE);this.grid.isBlackSquare(t.x,t.y)||this.selectCell(t.x,t.y)}onCanvasTouch(e){if(e.touches.length>1)return;let t=e.touches[0],r=this.inputManager.screenToGrid(t.clientX,t.clientY,this.renderer.CELL_SIZE);this.grid.isBlackSquare(r.x,r.y)||setTimeout(()=>{!this.inputManager.isPanning&&!this.inputManager.isPinching&&this.selectCell(r.x,r.y)},100)}onGlobalKeyDown(e){if(this.grid.selectedCell()){if(e.key==="ArrowLeft"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x-1,y:r.y}:null);return}if(e.key==="ArrowRight"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x+1,y:r.y}:null);return}if(e.key==="ArrowUp"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y-1}:null);return}if(e.key==="ArrowDown"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y+1}:null);return}if(e.key==="Enter"){e.preventDefault(),this.submitWord();return}if(e.key===" "){e.preventDefault(),this.grid.inputDirection.update(r=>r==="across"?"down":"across");return}if(e.key==="Backspace"){this.handleBackspace();return}if(e.key==="Escape"){this.clearPending();return}if(e.key.length===1&&e.key.match(/[a-zA-Z]/)){if(document.activeElement===this.hiddenInput?.nativeElement)return;e.preventDefault(),this.processCharInput(e.key.toUpperCase())}}}selectCell(e,t){let r=this.grid.selectedCell();if(r&&r.x===e&&r.y===t){this.grid.inputDirection.update(o=>o==="across"?"down":"across");return}this.pendingWordCoords().some(o=>o.x===e&&o.y===t)||this.clearPending(),this.grid.selectedCell.set({x:e,y:t}),this.entryStart.set({x:e,y:t}),this.validationMessage.set(""),this.focusInput()}focusInput(){this.hiddenInput?.nativeElement?.focus()}onInput(e){let t=e.target,r=t.value.slice(-1).toUpperCase();t.value="",r.match(/[A-Z]/)&&this.processCharInput(r)}processCharInput(e){this.inputManager.hasInteracted.set(!0);let t=this.grid.selectedCell();if(!t||this.grid.isBlackSquare(t.x,t.y))return;let r=this.grid.inputDirection()==="across"?1:0,i=this.grid.inputDirection()==="down"?1:0;for(;t&&!this.grid.isBlackSquare(t.x,t.y);){let o=this.grid.getCell(t.x,t.y);if(o&&o.confirmed)if(o.char===e){let s=t.x+r,c=t.y+i;this.grid.isBlackSquare(s,c)||(this.grid.selectedCell.set({x:s,y:c}),t={x:s,y:c}),this.focusInput();return}else{let s=t.x+r,c=t.y+i;if(this.grid.isBlackSquare(s,c))return;t={x:s,y:c},this.grid.selectedCell.set(t)}else break}!t||this.grid.isBlackSquare(t.x,t.y)||(this.addPendingChar(t.x,t.y,e),this.moveCursor(1),this.focusInput())}handleBackspace(){let e=this.grid.selectedCell(),t=this.entryStart();if(!e||!t)return;if(this.pendingWordCoords().some(l=>l.x===e.x&&l.y===e.y)){this.removePendingAt(e.x,e.y);return}if(e.x===t.x&&e.y===t.y)return;let i=this.grid.inputDirection()==="across",o=i?-1:0,s=i?0:-1,c=e.x+o,u=e.y+s;this.grid.isBlackSquare(c,u)||(this.grid.selectedCell.set({x:c,y:u}),this.pendingWordCoords().some(l=>l.x===c&&l.y===u)&&this.removePendingAt(c,u))}moveCursor(e){let t=this.grid.selectedCell();if(!t)return;let r=this.grid.inputDirection()==="across"?e:0,i=this.grid.inputDirection()==="down"?e:0,o=t.x+r,s=t.y+i;this.grid.isBlackSquare(o,s)||this.grid.selectedCell.set({x:o,y:s})}addPendingChar(e,t,r){this.pendingWordCoords.update(i=>[...i.filter(s=>!(s.x===e&&s.y===t)),{x:e,y:t,char:r}]),this.validationMessage.set("")}removePendingAt(e,t){this.pendingWordCoords.update(r=>r.filter(i=>!(i.x===e&&i.y===t)))}async submitWord(){if(this.pendingWordCoords().length===0)return;let t=Date.now()-this.grid.lastPlacedTime();if(t<this.COOLDOWN_MS){let S=Math.ceil((this.COOLDOWN_MS-t)/1e3);this.showError(`Wait ${S}s to place next word.`);return}this.isValidating.set(!0),this.validationMessage.set(""),this.isError.set(!1);let i=this.grid.inputDirection()==="across",o=[...this.pendingWordCoords()].sort((S,P)=>i?S.x-P.x:S.y-P.y),s=o[0],c=o[o.length-1],u=s.x,l=s.y;for(;!this.grid.isBlackSquare(i?u-1:u,i?l:l-1);){let S=i?u-1:u,P=i?l:l-1;if(this.grid.getCell(S,P)||this.pendingWordCoords().find(V=>V.x===S&&V.y===P))u=S,l=P;else break}let h=u,p=l;for(u=c.x,l=c.y;!this.grid.isBlackSquare(i?u+1:u,i?l:l+1);){let S=i?u+1:u,P=i?l:l+1;if(this.grid.getCell(S,P)||this.pendingWordCoords().find(V=>V.x===S&&V.y===P))u=S,l=P;else break}let m=i?u-h+1:l-p+1,E="",A=!1;for(let S=0;S<m;S++){let P=i?h+S:h,V=i?p:p+S,W=this.grid.getCell(P,V),Se=this.pendingWordCoords().find(Pe=>Pe.x===P&&Pe.y===V);if(W&&W.confirmed)E+=W.char,A=!0;else if(Se)E+=Se.char;else{this.showError("Word has gaps!"),this.isValidating.set(!1);return}}if(!A&&this.grid.cells().size>0){this.showError("Must connect to existing words!"),this.isValidating.set(!1);return}let M=await this.dictionary.validateWord(E);if(M.valid){for(let S=0;S<m;S++){let P=i?h+S:h,V=i?p:p+S;this.grid.getCell(P,V)||this.grid.setCell(P,V,E[S],!0)}this.grid.lastPlacedTime.set(Date.now()),this.grid.incrementWordsPlaced(),this.clearPending(),this.validationMessage.set(`Placed: "${E}"
${M.definition}`)}else this.showError(M.reason||`"${E}" not found.`);this.isValidating.set(!1)}clearPending(){this.pendingWordCoords.set([]),this.validationMessage.set(""),this.hiddenInput?.nativeElement&&(this.hiddenInput.nativeElement.value="");let e=this.grid.selectedCell();e&&this.entryStart.set(e)}showError(e){this.validationMessage.set(e),this.isError.set(!0)}sharePosition(){let e=this.inputManager.screenToGrid(window.innerWidth/2,window.innerHeight/2,this.renderer.CELL_SIZE),t=new URL(window.location.href);t.searchParams.set("x",e.x.toString()),t.searchParams.set("y",e.y.toString()),navigator.clipboard.writeText(t.toString()).then(()=>{this.validationMessage.set("Link copied to clipboard!"),this.isError.set(!1),setTimeout(()=>{this.validationMessage()==="Link copied to clipboard!"&&this.validationMessage.set("")},3e3)})}loadPreferences(){let e=this.grid.getCookie("cross_plane_theme");if(e){let r=this.themes.find(i=>i.id===e);r&&this.activeTheme.set(r)}let t=this.grid.getCookie("cross_plane_font");if(t){let r=this.fonts.find(i=>i.id===t);r&&this.activeFont.set(r)}}handleUrlParams(){let e=new URLSearchParams(window.location.search),t=e.get("x"),r=e.get("y");if(t&&r){let i=parseInt(t,10),o=parseInt(r,10);if(!isNaN(i)&&!isNaN(o)){let s=this.renderer.CELL_SIZE*this.inputManager.zoomLevel();this.grid.viewportOffset.set({x:-i*s,y:-o*s})}}}static{this.\u0275fac=function(t){return new(t||n)(Mt(sn),Mt(fo))}}static{this.\u0275cmp=cs({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Ni(fO,5)(hO,5),t&2){let i;Ri(i=Mi())&&(r.hiddenInput=i.first),Ri(i=Mi())&&(r.gridCanvas=i.first)}},decls:6,vars:10,consts:[["gridCanvas",""],["hiddenInput",""],[1,"relative","w-full","h-full","overflow-hidden","bg-white","select-none","cursor-grab","active:cursor-grabbing","font-mono",3,"mousedown","touchstart","mousemove","touchmove","mouseup","touchend","keydown","wheel"],[1,"absolute","inset-0","w-full","h-full",3,"click","touchstart"],[3,"themeSelected","fontSelected","zoomIn","zoomOut","resetView","sharePosition","lastPlacedTime","cooldownMs","wordsPlacedCount","isValidating","validationMessage","isError","activeTheme","themes","activeFont","fonts"],["type","text","inputmode","text","autocomplete","off","autocorrect","off","autocapitalize","characters",1,"absolute","opacity-0","top-0","left-0","w-px","h-px","overflow-hidden","-z-10",3,"input"]],template:function(t,r){if(t&1){let i=Et();O(0,"div",2),Ee("mousedown",function(s){return J(i),X(r.startPan(s))})("touchstart",function(s){return J(i),X(r.startPanTouch(s))})("mousemove",function(s){return J(i),X(r.pan(s))},Pr)("touchmove",function(s){return J(i),X(r.panTouch(s))},Pr)("mouseup",function(){return J(i),X(r.endPan())},Pr)("touchend",function(){return J(i),X(r.endPan())},Pr)("keydown",function(s){return J(i),X(r.onGlobalKeyDown(s))},Pr)("wheel",function(s){return J(i),X(r.onWheel(s))}),O(1,"canvas",3,0),Ee("click",function(s){return J(i),X(r.onCanvasClick(s))})("touchstart",function(s){return J(i),X(r.onCanvasTouch(s))}),F(),O(3,"app-top-bar",4),Ee("themeSelected",function(s){return J(i),X(r.activeTheme.set(s))})("fontSelected",function(s){return J(i),X(r.activeFont.set(s))})("zoomIn",function(){return J(i),X(r.zoomIn())})("zoomOut",function(){return J(i),X(r.zoomOut())})("resetView",function(){return J(i),X(r.resetView())})("sharePosition",function(){return J(i),X(r.sharePosition())}),F(),O(4,"input",5,1),Ee("input",function(s){return J(i),X(r.onInput(s))}),F()()}t&2&&(ie(3),le("lastPlacedTime",r.grid.lastPlacedTime())("cooldownMs",r.COOLDOWN_MS)("wordsPlacedCount",r.grid.wordsPlacedCount())("isValidating",r.isValidating())("validationMessage",r.validationMessage())("isError",r.isError())("activeTheme",r.activeTheme())("themes",r.themes)("activeFont",r.activeFont())("fonts",r.fonts))},dependencies:[xi,vl],encapsulation:2})}};Oh(_l,{providers:[mh()]}).catch(n=>console.error(n));
