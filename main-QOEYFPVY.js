var lD=Object.defineProperty,dD=Object.defineProperties;var fD=Object.getOwnPropertyDescriptors;var Jg=Object.getOwnPropertySymbols;var hD=Object.prototype.hasOwnProperty,pD=Object.prototype.propertyIsEnumerable;var em=(n,e,t)=>e in n?lD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X=(n,e)=>{for(var t in e||={})hD.call(e,t)&&em(n,t,e[t]);if(Jg)for(var t of Jg(e))pD.call(e,t)&&em(n,t,e[t]);return n},Ee=(n,e)=>dD(n,fD(e));var Oe=null,Ss=!1,xu=1,gD=null,nt=Symbol("SIGNAL");function z(n){let e=Oe;return Oe=n,e}function Ms(){return Oe}var Cr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Pu(n){if(Ss)throw new Error("");if(Oe===null)return;Oe.consumerOnSignalRead(n);let e=Oe.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Oe.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Oe.producers,t!==void 0&&t.producer===n)){Oe.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Oe&&(!r||yD(i,Oe)))return;let o=Sr(Oe),s={producer:n,consumer:Oe,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Oe.producersTail=s,e!==void 0?e.nextProducer=s:Oe.producers=s,o&&im(n,s)}function tm(){xu++}function ku(n){if(!(Sr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===xu)){if(!n.producerMustRecompute(n)&&!Rs(n)){Ru(n);return}n.producerRecomputeValue(n),Ru(n)}}function Ou(n){if(n.consumers===void 0)return;let e=Ss;Ss=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||mD(r)}}finally{Ss=e}}function Fu(){return Oe?.consumerAllowSignalWrites!==!1}function mD(n){n.dirty=!0,Ou(n),n.consumerMarkedDirty?.(n)}function Ru(n){n.dirty=!1,n.lastCleanEpoch=xu}function Wi(n){return n&&nm(n),z(n)}function nm(n){n.producersTail=void 0,n.recomputing=!0}function Ns(n,e){z(e),n&&rm(n)}function rm(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Sr(n))do t=Lu(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Rs(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ku(t),r!==t.version))return!0}return!1}function br(n){if(Sr(n)){let e=n.producers;for(;e!==void 0;)e=Lu(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function im(n,e){let t=n.consumersTail,r=Sr(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)im(i.producer,i)}function Lu(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Sr(e)){let o=e.producers;for(;o!==void 0;)o=Lu(o)}return t}function Sr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Vu(n){gD?.(n)}function yD(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bu(n,e){return Object.is(n,e)}function xs(n,e){let t=Object.create(vD);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(ku(t),Pu(t),t.value===As)throw t.error;return t.value};return r[nt]=t,Vu(t),r}var Mu=Symbol("UNSET"),Nu=Symbol("COMPUTING"),As=Symbol("ERRORED"),vD=Ee(X({},Cr),{value:Mu,dirty:!0,error:null,equal:Bu,kind:"computed",producerMustRecompute(n){return n.value===Mu||n.value===Nu},producerRecomputeValue(n){if(n.value===Nu)throw new Error("");let e=n.value;n.value=Nu;let t=Wi(n),r,i=!1;try{r=n.computation(),z(null),i=e!==Mu&&e!==As&&r!==As&&n.equal(e,r)}catch(o){r=As,n.error=o}finally{Ns(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function _D(){throw new Error}var om=_D;function sm(n){om(n)}function ju(n){om=n}var ED=null;function Uu(n,e){let t=Object.create(um);t.value=n,e!==void 0&&(t.equal=e);let r=()=>am(t);return r[nt]=t,Vu(t),[r,s=>Hu(t,s),s=>cm(t,s)]}function am(n){return Pu(n),n.value}function Hu(n,e){Fu()||sm(n),n.equal(n.value,e)||(n.value=e,wD(n))}function cm(n,e){Fu()||sm(n),Hu(n,e(n.value))}var um=Ee(X({},Cr),{equal:Bu,value:void 0,kind:"signal"});function wD(n){n.version++,tm(),Ou(n),ED?.(n)}var $u=Ee(X({},Cr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function zu(n){if(n.dirty=!1,n.version>0&&!Rs(n))return;n.version++;let e=Wi(n);try{n.cleanup(),n.fn()}finally{Ns(n,e)}}function We(n){return typeof n=="function"}function Ps(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ks=Ps(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ki(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(We(r))try{r()}catch(o){e=o instanceof ks?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{lm(o)}catch(s){e=e??[],s instanceof ks?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ks(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lm(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ki(t,e)}remove(e){let{_finalizers:t}=this;t&&Ki(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var qu=$e.EMPTY;function Os(n){return n instanceof $e||n&&"closed"in n&&We(n.remove)&&We(n.add)&&We(n.unsubscribe)}function lm(n){We(n)?n():n.unsubscribe()}var dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ar={setTimeout(n,e,...t){let{delegate:r}=Ar;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ar;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function dm(n){Ar.setTimeout(()=>{let{onUnhandledError:e}=dt;if(e)e(n);else throw n})}function Gu(){}var fm=Wu("C",void 0,void 0);function hm(n){return Wu("E",void 0,n)}function pm(n){return Wu("N",n,void 0)}function Wu(n,e,t){return{kind:n,value:e,error:t}}var Bn=null;function Mr(n){if(dt.useDeprecatedSynchronousErrorHandling){let e=!Bn;if(e&&(Bn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Bn;if(Bn=null,t)throw r}}else n()}function gm(n){dt.useDeprecatedSynchronousErrorHandling&&Bn&&(Bn.errorThrown=!0,Bn.error=n)}var jn=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Os(e)&&e.add(this)):this.destination=TD}static create(e,t,r){return new Nr(e,t,r)}next(e){this.isStopped?Qu(pm(e),this):this._next(e)}error(e){this.isStopped?Qu(hm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qu(fm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ID=Function.prototype.bind;function Ku(n,e){return ID.call(n,e)}var Yu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Fs(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Fs(r)}else Fs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fs(t)}}},Nr=class extends jn{constructor(e,t,r){super();let i;if(We(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ku(e.next,o),error:e.error&&Ku(e.error,o),complete:e.complete&&Ku(e.complete,o)}):i=e}this.destination=new Yu(i)}};function Fs(n){dt.useDeprecatedSynchronousErrorHandling?gm(n):dm(n)}function DD(n){throw n}function Qu(n,e){let{onStoppedNotification:t}=dt;t&&Ar.setTimeout(()=>t(n,e))}var TD={closed:!0,next:Gu,error:DD,complete:Gu};var mm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ym(n){return n}function vm(n){return n.length===0?ym:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Rr=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=bD(t)?t:new Nr(t,r,i);return Mr(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_m(r),new r((i,o)=>{let s=new Nr({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[mm](){return this}pipe(...t){return vm(t)(this)}toPromise(t){return t=_m(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _m(n){var e;return(e=n??dt.Promise)!==null&&e!==void 0?e:Promise}function CD(n){return n&&We(n.next)&&We(n.error)&&We(n.complete)}function bD(n){return n&&n instanceof jn||CD(n)&&Os(n)}function SD(n){return We(n?.lift)}function Em(n){return e=>{if(SD(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wm(n,e,t,r,i){return new Zu(n,e,t,r,i)}var Zu=class extends jn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Im=Ps(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var jt=(()=>{class n extends Rr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ls(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Im}next(t){Mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?qu:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,Ki(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Rr;return t.source=this,t}}return n.create=(e,t)=>new Ls(e,t),n})(),Ls=class extends jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:qu}};var Qi=class extends jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function Xu(n,e){return Em((t,r)=>{let i=0;t.subscribe(wm(r,o=>{r.next(n.call(e,o,i++))}))})}var Ju;function Vs(){return Ju}function Tt(n){let e=Ju;return Ju=n,e}var Dm=Symbol("NotFound");function xr(n){return n===Dm||n?.name==="\u0275NotFound"}var hl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",W=class extends Error{code;constructor(e,t){super(Gs(e,t)),this.code=e}};function MD(n){return`NG0${Math.abs(n)}`}function Gs(n,e){return`${MD(n)}${e?": "+e:""}`}function ce(n){for(let e in n)if(n[e]===ce)return e;throw Error("")}function fn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(fn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function pl(n,e){return n?e?`${n} ${e}`:n:e||""}var ND=ce({__forward_ref__:ce});function Ws(n){return n.__forward_ref__=Ws,n.toString=function(){return fn(this())},n}function Ze(n){return Am(n)?n():n}function Am(n){return typeof n=="function"&&n.hasOwnProperty(ND)&&n.__forward_ref__===Ws}function ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function to(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ks(n){return RD(n,Qs)}function RD(n,e){return n.hasOwnProperty(e)&&n[e]||null}function xD(n){let e=n?.[Qs]??null;return e||null}function tl(n){return n&&n.hasOwnProperty(js)?n[js]:null}var Qs=ce({\u0275prov:ce}),js=ce({\u0275inj:ce}),ie=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gl(n){return n&&!!n.\u0275providers}var ml=ce({\u0275cmp:ce}),yl=ce({\u0275dir:ce}),vl=ce({\u0275pipe:ce});var nl=ce({\u0275fac:ce}),qn=ce({__NG_ELEMENT_ID__:ce}),Tm=ce({__NG_ENV_ID__:ce});function Gn(n){return El(n,"@Component"),n[ml]||null}function _l(n){return El(n,"@Directive"),n[yl]||null}function Mm(n){return El(n,"@Pipe"),n[vl]||null}function El(n,e){if(n==null)throw new W(-919,!1)}function wl(n){return typeof n=="string"?n:n==null?"":String(n)}function Nm(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wl(n)}var Rm=ce({ngErrorCode:ce}),PD=ce({ngErrorMessage:ce}),kD=ce({ngTokenPath:ce});function Il(n,e){return xm("",-200,e)}function Ys(n,e){throw new W(-201,!1)}function xm(n,e,t){let r=new W(e,n);return r[Rm]=e,r[PD]=n,t&&(r[kD]=t),r}function OD(n){return n[Rm]}var rl;function Pm(){return rl}function Ye(n){let e=rl;return rl=n,e}function Dl(n,e,t){let r=Ks(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ys(n,"")}var FD={},Un=FD,LD="__NG_DI_FLAG__",il=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Hn(t)||0;try{return this.injector.get(e,r&8?null:Un,r)}catch(i){if(xr(i))return i;throw i}}};function VD(n,e=0){let t=Vs();if(t===void 0)throw new W(-203,!1);if(t===null)return Dl(n,void 0,e);{let r=BD(e),i=t.retrieve(n,r);if(xr(i)){if(r.optional)return null;throw i}return i}}function ae(n,e=0){return(Pm()||VD)(Ze(n),e)}function J(n,e){return ae(n,Hn(e))}function Hn(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function BD(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function ol(n){let e=[];for(let t=0;t<n.length;t++){let r=Ze(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=jD(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(ae(i,o))}else e.push(ae(r))}return e}function jD(n){return n[LD]}function kr(n,e){let t=n.hasOwnProperty(nl);return t?n[nl]:null}function km(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Om(n){return n.flat(Number.POSITIVE_INFINITY)}function Zs(n,e){n.forEach(t=>Array.isArray(t)?Zs(t,e):e(t))}function Tl(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function no(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Fm(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Lm(n,e,t){let r=Or(n,e);return r>=0?n[r|1]=t:(r=~r,Fm(n,r,e,t)),r}function Xs(n,e){let t=Or(n,e);if(t>=0)return n[t|1]}function Or(n,e){return UD(n,e,1)}function UD(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Wn={},rt=[],ro=new ie(""),Cl=new ie("",-1),bl=new ie(""),Zi=class{get(e,t=Un){if(t===Un){let i=xm("",-201);throw i.name="\u0275NotFound",i}return t}};function Sl(n){return{\u0275providers:n}}function Vm(...n){return{\u0275providers:Al(!0,n),\u0275fromNgModule:!0}}function Al(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Zs(e,s=>{let c=s;Us(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Bm(i,o),t}function Bm(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ml(i,o=>{e(o,r)})}}function Us(n,e,t,r){if(n=Ze(n),!n)return!1;let i=null,o=tl(n),s=!o&&Gn(n);if(!o&&!s){let u=n.ngModule;if(o=tl(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)Us(d,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{Zs(o.imports,h=>{Us(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&Bm(d,e)}if(!c){let d=kr(i)||(()=>new i);e({provide:i,useFactory:d,deps:rt},i),e({provide:bl,useValue:i,multi:!0},i),e({provide:ro,useValue:()=>ae(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let d=n;Ml(u,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Ml(n,e){for(let t of n)gl(t)&&(t=t.\u0275providers),Array.isArray(t)?Ml(t,e):e(t)}var HD=ce({provide:String,useValue:ce});function jm(n){return n!==null&&typeof n=="object"&&HD in n}function $D(n){return!!(n&&n.useExisting)}function zD(n){return!!(n&&n.useFactory)}function Hs(n){return typeof n=="function"}var io=new ie(""),Bs={},Cm={},el;function oo(){return el===void 0&&(el=new Zi),el}var it=class{},$n=class extends it{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,al(e,s=>this.processProvider(s)),this.records.set(Cl,Pr(void 0,this)),i.has("environment")&&this.records.set(it,Pr(void 0,this));let o=this.records.get(io);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bl,rt,{self:!0}))}retrieve(e,t){let r=Hn(t)||0;try{return this.get(e,Un,r)}catch(i){if(xr(i))return i;throw i}}destroy(){Yi(this),this._destroyed=!0;let e=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return Yi(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Yi(this);let t=Tt(this),r=Ye(void 0),i;try{return e()}finally{Tt(t),Ye(r)}}get(e,t=Un,r){if(Yi(this),e.hasOwnProperty(Tm))return e[Tm](this);let i=Hn(r),o,s=Tt(this),c=Ye(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=QD(e)&&Ks(e);h&&this.injectableDefInScope(h)?d=Pr(sl(e),Bs):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let u=i&2?oo():this.parent;return t=i&8&&t===Un?null:t,u.get(e,t)}catch(u){let d=OD(u);throw d===-200||d===-201?new W(d,null):u}finally{Ye(c),Tt(s)}}resolveInjectorInitializers(){let e=z(null),t=Tt(this),r=Ye(void 0),i;try{let o=this.get(ro,rt,{self:!0});for(let s of o)s()}finally{Tt(t),Ye(r),z(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(fn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ze(e);let t=Hs(e)?e:Ze(e&&e.provide),r=GD(e);if(!Hs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Pr(void 0,Bs,!0),i.factory=()=>ol(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=z(null);try{if(t.value===Cm)throw Il(fn(e));return t.value===Bs&&(t.value=Cm,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&KD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ze(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function sl(n){let e=Ks(n),t=e!==null?e.factory:kr(n);if(t!==null)return t;if(n instanceof ie)throw new W(204,!1);if(n instanceof Function)return qD(n);throw new W(204,!1)}function qD(n){if(n.length>0)throw new W(204,!1);let t=xD(n);return t!==null?()=>t.factory(n):()=>new n}function GD(n){if(jm(n))return Pr(void 0,n.useValue);{let e=Um(n);return Pr(e,Bs)}}function Um(n,e,t){let r;if(Hs(n)){let i=Ze(n);return kr(i)||sl(i)}else if(jm(n))r=()=>Ze(n.useValue);else if(zD(n))r=()=>n.useFactory(...ol(n.deps||[]));else if($D(n))r=(i,o)=>ae(Ze(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ze(n&&(n.useClass||n.provide));if(WD(n))r=()=>new i(...ol(n.deps));else return kr(i)||sl(i)}return r}function Yi(n){if(n.destroyed)throw new W(205,!1)}function Pr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function WD(n){return!!n.deps}function KD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function QD(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function al(n,e){for(let t of n)Array.isArray(t)?al(t,e):t&&gl(t)?al(t.\u0275providers,e):e(t)}function Js(n,e){let t;n instanceof $n?(Yi(n),t=n):t=new il(n);let r,i=Tt(t),o=Ye(void 0);try{return e()}finally{Tt(i),Ye(o)}}function Hm(){return Pm()!==void 0||Vs()!=null}var ft=0,j=1,B=2,Ne=3,ot=4,st=5,so=6,Fr=7,Le=8,mn=9,$t=10,Re=11,Lr=12,Nl=13,Kn=14,ht=15,yn=16,Qn=17,Ct=18,ao=19,Rl=20,Ut=21,ea=22,hn=23,Xe=24,ta=25,co=26,Je=27,$m=1;var vn=7,uo=8,Yn=9,qe=10;function zt(n){return Array.isArray(n)&&typeof n[$m]=="object"}function pt(n){return Array.isArray(n)&&n[$m]===!0}function xl(n){return(n.flags&4)!==0}function Zn(n){return n.componentOffset>-1}function lo(n){return(n.flags&1)===1}function Xn(n){return!!n.template}function Vr(n){return(n[B]&512)!==0}function Jn(n){return(n[B]&256)===256}var Pl="svg",zm="math";function at(n){for(;Array.isArray(n);)n=n[ft];return n}function kl(n,e){return at(e[n])}function bt(n,e){return at(e[n.index])}function na(n,e){return n.data[e]}function St(n,e){let t=e[n];return zt(t)?t:t[ft]}function qm(n){return(n[B]&4)===4}function ra(n){return(n[B]&128)===128}function Gm(n){return pt(n[Ne])}function fo(n,e){return e==null?null:n[e]}function Ol(n){n[Qn]=0}function Fl(n){n[B]&1024||(n[B]|=1024,ra(n)&&Br(n))}function Wm(n,e){for(;n>0;)e=e[Kn],n--;return e}function ho(n){return!!(n[B]&9216||n[Xe]?.dirty)}function ia(n){n[$t].changeDetectionScheduler?.notify(8),n[B]&64&&(n[B]|=1024),ho(n)&&Br(n)}function Br(n){n[$t].changeDetectionScheduler?.notify(0);let e=pn(n);for(;e!==null&&!(e[B]&8192||(e[B]|=8192,!ra(e)));)e=pn(e)}function Ll(n,e){if(Jn(n))throw new W(911,!1);n[Ut]===null&&(n[Ut]=[]),n[Ut].push(e)}function Km(n,e){if(n[Ut]===null)return;let t=n[Ut].indexOf(e);t!==-1&&n[Ut].splice(t,1)}function pn(n){let e=n[Ne];return pt(e)?e[Ne]:e}function Vl(n){return n[Fr]??=[]}function Bl(n){return n.cleanup??=[]}function Qm(n,e,t,r){let i=Vl(e);i.push(t),n.firstCreatePass&&Bl(n).push(r,i.length-1)}var G={lFrame:dy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cl=!1;function Ym(){return G.lFrame.elementDepthCount}function Zm(){G.lFrame.elementDepthCount++}function Xm(){G.lFrame.elementDepthCount--}function jl(){return G.bindingsEnabled}function Jm(){return G.skipHydrationRootTNode!==null}function ey(n){return G.skipHydrationRootTNode===n}function ty(){G.skipHydrationRootTNode=null}function ye(){return G.lFrame.lView}function At(){return G.lFrame.tView}function he(n){return G.lFrame.contextLView=n,n[Le]}function pe(n){return G.lFrame.contextLView=null,n}function Mt(){let n=Ul();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ul(){return G.lFrame.currentTNode}function ny(){let n=G.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function jr(n,e){let t=G.lFrame;t.currentTNode=n,t.isParent=e}function Hl(){return G.lFrame.isParent}function ry(){G.lFrame.isParent=!1}function $l(){return cl}function Xi(n){let e=cl;return cl=n,e}function iy(n){return G.lFrame.bindingIndex=n}function zl(){return G.lFrame.bindingIndex++}function oy(n){let e=G.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sy(){return G.lFrame.inI18n}function ay(n,e){let t=G.lFrame;t.bindingIndex=t.bindingRootIndex=n,oa(e)}function cy(){return G.lFrame.currentDirectiveIndex}function oa(n){G.lFrame.currentDirectiveIndex=n}function uy(n){let e=G.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ql(){return G.lFrame.currentQueryIndex}function sa(n){G.lFrame.currentQueryIndex=n}function YD(n){let e=n[j];return e.type===2?e.declTNode:e.type===1?n[st]:null}function Gl(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=YD(o),i===null||(o=o[Kn],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=G.lFrame=ly();return r.currentTNode=e,r.lView=n,!0}function aa(n){let e=ly(),t=n[j];G.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ly(){let n=G.lFrame,e=n===null?null:n.child;return e===null?dy(n):e}function dy(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function fy(){let n=G.lFrame;return G.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Wl=fy;function ca(){let n=fy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hy(n){return(G.lFrame.contextLView=Wm(n,G.lFrame.contextLView))[Le]}function er(){return G.lFrame.selectedIndex}function _n(n){G.lFrame.selectedIndex=n}function py(){let n=G.lFrame;return na(n.tView,n.selectedIndex)}function gt(){G.lFrame.currentNamespace=Pl}function qt(){ZD()}function ZD(){G.lFrame.currentNamespace=null}function gy(){return G.lFrame.currentNamespace}var my=!0;function ua(){return my}function la(n){my=n}function ul(n,e=null,t=null,r){let i=yy(n,e,t,r);return i.resolveInjectorInitializers(),i}function yy(n,e=null,t=null,r,i=new Set){let o=[t||rt,Vm(n)];return r=r||(typeof n=="object"?void 0:fn(n)),new $n(o,e||oo(),r||null,i)}var gn=class n{static THROW_IF_NOT_FOUND=Un;static NULL=new Zi;static create(e,t){if(Array.isArray(e))return ul({name:""},t,e,"");{let r=e.name??"";return ul({name:r},e.parent,e.providers,r)}}static \u0275prov=ue({token:n,providedIn:"any",factory:()=>ae(Cl)});static __NG_ELEMENT_ID__=-1},mt=new ie(""),po=(()=>{class n{static __NG_ELEMENT_ID__=XD;static __NG_ENV_ID__=t=>t}return n})(),$s=class extends po{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Jn(this._lView)}onDestroy(e){let t=this._lView;return Ll(t,e),()=>Km(t,e)}};function XD(){return new $s(ye())}var vy=!1,Ur=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Qi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Rr(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ue({token:n,providedIn:"root",factory:()=>new n})}return n})(),ll=class extends jt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Hm()&&(this.destroyRef=J(po,{optional:!0})??void 0,this.pendingTasks=J(Ur,{optional:!0})??void 0)}emit(e){let t=z(null);try{super.next(e)}finally{z(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ze=ll;function zs(...n){}function Kl(n){let e,t;function r(){n=zs;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Ql(n){return queueMicrotask(()=>n()),()=>{n=zs}}var Yl="isAngularZone",Ji=Yl+"_ID",JD=0,Fe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ze(!1);onMicrotaskEmpty=new ze(!1);onStable=new ze(!1);onError=new ze(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=vy}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,nT(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Yl)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,eT,zs,zs);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},eT={};function Zl(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tT(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Kl(()=>{n.callbackScheduled=!1,dl(n),n.isCheckStableRunning=!0,Zl(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dl(n)}function nT(n){let e=()=>{tT(n)},t=JD++;n._inner=n._inner.fork({name:"angular",properties:{[Yl]:!0,[Ji]:t,[Ji+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(rT(u))return r.invokeTask(o,s,c,u);try{return bm(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Sm(n)}},onInvoke:(r,i,o,s,c,u,d)=>{try{return bm(n),r.invoke(o,s,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!iT(u)&&e(),Sm(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,dl(n),Zl(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function dl(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bm(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Sm(n){n._nesting--,Zl(n)}var eo=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ze;onMicrotaskEmpty=new ze;onStable=new ze;onError=new ze;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function rT(n){return _y(n,"__ignore_ng_zone__")}function iT(n){return _y(n,"__scheduler_tick__")}function _y(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ht=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tr=new ie("",{factory:()=>{let n=J(Fe),e=J(it),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ht),t.handleError(r))})}}}),Ey={provide:ro,useValue:()=>{let n=J(Ht,{optional:!0})},multi:!0};function we(n,e){let[t,r,i]=Uu(n,e?.equal),o=t,s=o[nt];return o.set=r,o.update=i,o.asReadonly=wy.bind(o),o}function wy(){let n=this[nt];if(n.readonlyFn===void 0){let e=()=>this();e[nt]=n,n.readonlyFn=e}return n.readonlyFn}var da=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=oT}return n})();function oT(){return new da(ye(),Mt())}var zn=class{},go=new ie("",{factory:()=>!0});var Xl=new ie("");var fa=(()=>{class n{static \u0275prov=ue({token:n,providedIn:"root",factory:()=>new fl})}return n})(),fl=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},qs=class{[nt];constructor(e){this[nt]=e}destroy(){this[nt].destroy()}};function En(n,e){let t=e?.injector??J(gn),r=e?.manualCleanup!==!0?t.get(po):null,i,o=t.get(da,null,{optional:!0}),s=t.get(zn);return o!==null?(i=cT(o.view,s,n),r instanceof $s&&r._lView===o.view&&(r=null)):i=uT(n,t.get(fa),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new qs(i)}var Iy=Ee(X({},$u),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Xi(!1);try{zu(this)}finally{Xi(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=z(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],z(n)}}}),sT=Ee(X({},Iy),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(br(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),aT=Ee(X({},Iy),{consumerMarkedDirty(){this.view[B]|=8192,Br(this.view),this.notifier.notify(13)},destroy(){if(br(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[hn]?.delete(this)}});function cT(n,e,t){let r=Object.create(aT);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=Dy(r,t),n[hn]??=new Set,n[hn].add(r),r.consumerMarkedDirty(r),r}function uT(n,e,t){let r=Object.create(sT);return r.fn=Dy(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function Dy(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function ba(n){return{toString:n}.toString()}function _T(n){return typeof n=="function"}function Jy(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var va=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ET(n){return n.type.prototype.ngOnChanges&&(n.setInput=IT),wT}function wT(){let n=tv(this),e=n?.current;if(e){let t=n.previous;if(t===Wn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function IT(n,e,t,r,i){let o=this.declaredInputs[r],s=tv(n)||DT(n,{previous:Wn,current:null}),c=s.current||(s.current={}),u=s.previous,d=u[o];c[o]=new va(d&&d.currentValue,t,u===Wn),Jy(n,e,i,t)}var ev="__ngSimpleChanges__";function tv(n){return n[ev]||null}function DT(n,e){return n[ev]=e}var Ty=[];var le=function(n,e=null,t){for(let r=0;r<Ty.length;r++){let i=Ty[r];i(n,e,t)}},oe=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(oe||{});function TT(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ET(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function nv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function pa(n,e,t){rv(n,e,3,t)}function ga(n,e,t,r){(n[B]&3)===t&&rv(n,e,t,r)}function Jl(n,e){let t=n[B];(t&3)===e&&(t&=16383,t+=1,n[B]=t)}function rv(n,e,t,r){let i=r!==void 0?n[Qn]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Qn]+=65536),(c<o||o==-1)&&(CT(n,t,e,u),n[Qn]=(n[Qn]&4294901760)+u+2),u++}function Cy(n,e){le(oe.LifecycleHookStart,n,e);let t=z(null);try{e.call(n)}finally{z(t),le(oe.LifecycleHookEnd,n,e)}}function CT(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[B]>>14<n[Qn]>>16&&(n[B]&3)===e&&(n[B]+=16384,Cy(c,o)):Cy(c,o)}var $r=-1,vo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function bT(n){return(n.flags&8)!==0}function ST(n){return(n.flags&16)!==0}function AT(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];NT(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function MT(n){return n===3||n===4||n===6}function NT(n){return n.charCodeAt(0)===64}function bd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?by(n,t,i,null,e[++r]):by(n,t,i,null,null))}}return n}function by(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function iv(n){return n!==$r}function _a(n){return n&32767}function RT(n){return n>>16}function Ea(n,e){let t=RT(n),r=e;for(;t>0;)r=r[Kn],t--;return r}var sd=!0;function Sy(n){let e=sd;return sd=n,e}var xT=256,ov=xT-1,sv=5,PT=0,Nt={};function kT(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(qn)&&(r=t[qn]),r==null&&(r=t[qn]=PT++);let i=r&ov,o=1<<i;e.data[n+(i>>sv)]|=o}function av(n,e){let t=cv(n,e);if(t!==-1)return t;let r=e[j];r.firstCreatePass&&(n.injectorIndex=e.length,ed(r.data,n),ed(e,null),ed(r.blueprint,null));let i=Sd(n,e),o=n.injectorIndex;if(iv(i)){let s=_a(i),c=Ea(i,e),u=c[j].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|u[s+d]}return e[o+8]=i,o}function ed(n,e){n.push(0,0,0,0,0,0,0,0,e)}function cv(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sd(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=hv(i),r===null)return $r;if(t++,i=i[Kn],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return $r}function OT(n,e,t){kT(n,e,t)}function uv(n,e,t){if(t&8||n!==void 0)return n;Ys(e,"NodeInjector")}function lv(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[mn],o=Ye(void 0);try{return i?i.get(e,r,t&8):Dl(e,r,t&8)}finally{Ye(o)}}return uv(r,e,t)}function dv(n,e,t,r=0,i){if(n!==null){if(e[B]&2048&&!(r&2)){let s=BT(n,e,t,r,Nt);if(s!==Nt)return s}let o=fv(n,e,t,r,Nt);if(o!==Nt)return o}return lv(e,t,r,i)}function fv(n,e,t,r,i){let o=LT(t);if(typeof o=="function"){if(!Gl(e,n,r))return r&1?uv(i,t,r):lv(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ys(t);else return s}finally{Wl()}}else if(typeof o=="number"){let s=null,c=cv(n,e),u=$r,d=r&1?e[ht][st]:null;for((c===-1||r&4)&&(u=c===-1?Sd(n,e):e[c+8],u===$r||!My(r,!1)?c=-1:(s=e[j],c=_a(u),e=Ea(u,e)));c!==-1;){let h=e[j];if(Ay(o,c,h.data)){let g=FT(c,e,t,s,r,d);if(g!==Nt)return g}u=e[c+8],u!==$r&&My(r,e[j].data[c+8]===d)&&Ay(o,c,e)?(s=h,c=_a(u),e=Ea(u,e)):c=-1}}return i}function FT(n,e,t,r,i,o){let s=e[j],c=s.data[n+8],u=r==null?Zn(c)&&sd:r!=s&&(c.type&3)!==0,d=i&1&&o===c,h=ma(c,s,t,u,d);return h!==null?wa(e,s,h,c,i):Nt}function ma(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,d=n.directiveEnd,h=o>>20,g=r?c:c+h,m=i?c+h:d;for(let w=g;w<m;w++){let M=s[w];if(w<u&&t===M||w>=u&&M.type===t)return w}if(i){let w=s[u];if(w&&Xn(w)&&w.type===t)return u}return null}function wa(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof vo){let c=o;if(c.resolving){let w=Nm(s[t]);throw Il(w)}let u=Sy(c.canSeeViewProviders);c.resolving=!0;let d=s[t].type||s[t],h,g=c.injectImpl?Ye(c.injectImpl):null,m=Gl(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&TT(t,s[t],e)}finally{g!==null&&Ye(g),Sy(u),c.resolving=!1,Wl()}}return o}function LT(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(qn)?n[qn]:void 0;return typeof e=="number"?e>=0?e&ov:VT:e}function Ay(n,e,t){let r=1<<n;return!!(t[e+(n>>sv)]&r)}function My(n,e){return!(n&2)&&!(n&1&&e)}var nr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return dv(this._tNode,this._lView,e,Hn(r),t)}};function VT(){return new nr(Mt(),ye())}function BT(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[B]&2048&&!Vr(s);){let c=fv(o,s,t,r|2,Nt);if(c!==Nt)return c;let u=o.parent;if(!u){let d=s[Rl];if(d){let h=d.get(t,Nt,r);if(h!==Nt)return h}u=hv(s),s=s[Kn]}o=u}return i}function hv(n){let e=n[j],t=e.type;return t===2?e.declTNode:t===1?n[st]:null}function jT(){return Kr(Mt(),ye())}function Kr(n,e){return new Qr(bt(n,e))}var Qr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=jT}return n})();function UT(n){return n instanceof Qr?n.nativeElement:n}function HT(){return this._results[Symbol.iterator]()}var Ia=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new jt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Om(e);(this._changesDetected=!km(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=HT};function pv(n){return(n.flags&128)===128}var Ad=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Ad||{}),gv=new Map,$T=0;function zT(){return $T++}function qT(n){gv.set(n[ao],n)}function ad(n){gv.delete(n[ao])}var Ny="__ngContext__";function zr(n,e){zt(e)?(n[Ny]=e[ao],qT(e)):n[Ny]=e}function mv(n){return vv(n[Lr])}function yv(n){return vv(n[ot])}function vv(n){for(;n!==null&&!pt(n);)n=n[ot];return n}var GT;function Md(n){GT=n}var Sa=new ie("",{factory:()=>WT}),WT="ng";var Aa=new ie(""),To=new ie("",{providedIn:"platform",factory:()=>"unknown"});var Ma=new ie("",{factory:()=>J(mt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _v=!1,Ev=new ie("",{factory:()=>_v});var KT=(n,e,t,r)=>{};function QT(n,e,t,r){KT(n,e,t,r)}function Nd(n){return(n.flags&32)===32}var YT=()=>null;function wv(n,e,t=!1){return YT(n,e,t)}function Iv(n,e){let t=n.contentQueries;if(t!==null){let r=z(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];sa(o),c.contentQueries(2,e[s],s)}}}finally{z(r)}}}function cd(n,e,t){sa(0);let r=z(null);try{e(n,t)}finally{z(r)}}function Dv(n,e,t){if(xl(e)){let r=z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{z(r)}}}var vt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(vt||{});var ud=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hl})`}};function Tv(n){return n instanceof ud?n.changingThisBreaksApplicationSecurity:n}function ZT(n,e){return n.createText(e)}function XT(n,e,t){n.setValue(e,t)}function Cv(n,e,t){return n.createElement(e,t)}function Da(n,e,t,r,i){n.insertBefore(e,t,r,i)}function bv(n,e,t){n.appendChild(e,t)}function Ry(n,e,t,r,i){r!==null?Da(n,e,t,r,i):bv(n,e,t)}function JT(n,e,t,r){n.removeChild(null,e,t,r)}function eC(n,e,t){n.setAttribute(e,"style",t)}function tC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Sv(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&AT(n,e,r),i!==null&&tC(n,e,i),o!==null&&eC(n,e,o)}function or(n){return n.ownerDocument.defaultView}function nC(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Av="ng-template";function rC(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&nC(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Rd(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Rd(n){return n.type===4&&n.value!==Av}function iC(n,e,t){let r=n.type===4&&!t?Av:n.value;return e===r}function oC(n,e,t){let r=4,i=n.attrs,o=i!==null?cC(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!yt(r)&&!yt(u))return!1;if(s&&yt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!iC(n,u,t)||u===""&&e.length===1){if(yt(r))return!1;s=!0}}else if(r&8){if(i===null||!rC(n,i,u,t)){if(yt(r))return!1;s=!0}}else{let d=e[++c],h=sC(u,i,Rd(n),t);if(h===-1){if(yt(r))return!1;s=!0;continue}if(d!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(yt(r))return!1;s=!0}}}}return yt(r)||s}function yt(n){return(n&1)===0}function sC(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uC(e,n)}function aC(n,e,t=!1){for(let r=0;r<e.length;r++)if(oC(n,e[r],t))return!0;return!1}function cC(n){for(let e=0;e<n.length;e++){let t=n[e];if(MT(t))return e}return n.length}function uC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function xy(n,e){return n?":not("+e.trim()+")":e}function lC(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yt(s)&&(e+=xy(o,i),i=""),r=s,o=o||!yt(r);t++}return i!==""&&(e+=xy(o,i)),e}function dC(n){return n.map(lC).join(",")}function fC(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!yt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var In={};function xd(n,e,t,r,i,o,s,c,u,d,h){let g=Je+r,m=g+i,w=hC(g,m),M=typeof d=="function"?d():d;return w[j]={type:n,blueprint:w,template:t,queries:null,viewQuery:c,declTNode:e,data:w.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:h}}function hC(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:In);return t}function pC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=xd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pd(n,e,t,r,i,o,s,c,u,d,h){let g=e.blueprint.slice();return g[ft]=i,g[B]=r|4|128|8|64|1024,(d!==null||n&&n[B]&2048)&&(g[B]|=2048),Ol(g),g[Ne]=g[Kn]=n,g[Le]=t,g[$t]=s||n&&n[$t],g[Re]=c||n&&n[Re],g[mn]=u||n&&n[mn]||null,g[st]=o,g[ao]=zT(),g[so]=h,g[Rl]=d,g[ht]=e.type==2?n[ht]:g,g}function gC(n,e,t){let r=bt(e,n),i=pC(t),o=n[$t].rendererFactory,s=kd(n,Pd(n,i,null,Mv(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Mv(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Nv(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function kd(n,e){return n[Lr]?n[Nl][ot]=e:n[Lr]=e,n[Nl]=e,e}function ct(n=1){Rv(At(),ye(),er()+n,!1)}function Rv(n,e,t,r){if(!r)if((e[B]&3)===3){let o=n.preOrderCheckHooks;o!==null&&pa(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ga(e,o,0,t)}_n(t)}var Na=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Na||{});function ld(n,e,t,r){let i=z(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Na.SignalBased)!==0&&(u=e[o][nt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Jy(e,u,o,r)}finally{z(i)}}var Rt=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Rt||{}),mC;function Od(n,e){return mC(n,e)}var qr=new Set,Fd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Fd||{}),Co=new ie(""),Py=new Set;function Ld(n){Py.has(n)||(Py.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var xv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ue({token:n,providedIn:"root",factory:()=>new n})}return n})();var yC=new ie("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:J(it)})});function Pv(n,e,t){let r=n.get(yC);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function vC(n,e){for(let[t,r]of e)Pv(n,r.animateFns)}function ky(n,e,t,r){let i=n?.[co]?.enter;e!==null&&i&&i.has(t.index)&&vC(r,i)}function Hr(n,e,t,r,i,o,s,c){if(i!=null){let u,d=!1;pt(i)?u=i:zt(i)&&(d=!0,i=i[ft]);let h=at(i);n===0&&r!==null?(ky(c,r,o,t),s==null?bv(e,r,h):Da(e,r,h,s||null,!0)):n===1&&r!==null?(ky(c,r,o,t),Da(e,r,h,s||null,!0)):n===2?Oy(c,o,t,g=>{JT(e,h,d,g)}):n===3&&Oy(c,o,t,()=>{e.destroyNode(h)}),u!=null&&RC(e,n,t,u,o,r,s)}}function _C(n,e){kv(n,e),e[ft]=null,e[st]=null}function EC(n,e,t,r,i,o){r[ft]=i,r[st]=e,Ra(n,r,t,1,i,o)}function kv(n,e){e[$t].changeDetectionScheduler?.notify(9),Ra(n,e,e[Re],2,null,null)}function wC(n){let e=n[Lr];if(!e)return td(n[j],n);for(;e;){let t=null;if(zt(e))t=e[Lr];else{let r=e[qe];r&&(t=r)}if(!t){for(;e&&!e[ot]&&e!==n;)zt(e)&&td(e[j],e),e=e[Ne];e===null&&(e=n),zt(e)&&td(e[j],e),t=e&&e[ot]}e=t}}function Vd(n,e){let t=n[Yn],r=t.indexOf(e);t.splice(r,1)}function Ov(n,e){if(Jn(e))return;let t=e[Re];t.destroyNode&&Ra(n,e,t,3,null,null),wC(e)}function td(n,e){if(Jn(e))return;let t=z(null);try{e[B]&=-129,e[B]|=256,e[Xe]&&br(e[Xe]),TC(n,e),DC(n,e),e[j].type===1&&e[Re].destroy();let r=e[yn];if(r!==null&&pt(e[Ne])){r!==e[Ne]&&Vd(r,e);let i=e[Ct];i!==null&&i.detachView(n)}ad(e)}finally{z(t)}}function Oy(n,e,t,r){let i=n?.[co];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&qr.add(n),Pv(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let d=s.animateFns[u],{promise:h}=d();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),IC(n,r)}else n&&qr.delete(n),r(!1)},i)}function IC(n,e){let t=n[co]?.running;if(t){t.then(()=>{n[co].running=void 0,qr.delete(n),e(!0)});return}e(!1)}function DC(n,e){let t=n.cleanup,r=e[Fr];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Fr]=null);let i=e[Ut];if(i!==null){e[Ut]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[hn];if(o!==null){e[hn]=null;for(let s of o)s.destroy()}}function TC(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof vo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];le(oe.LifecycleHookStart,c,u);try{u.call(c)}finally{le(oe.LifecycleHookEnd,c,u)}}else{le(oe.LifecycleHookStart,i,o);try{o.call(i)}finally{le(oe.LifecycleHookEnd,i,o)}}}}}function CC(n,e,t){return bC(n,e.parent,t)}function bC(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ft];if(Zn(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===vt.None||i===vt.Emulated)return null}return bt(r,t)}function SC(n,e,t){return MC(n,e,t)}function AC(n,e,t){return n.type&40?bt(n,t):null}var MC=AC,Fy;function Bd(n,e,t,r){let i=CC(n,r,e),o=e[Re],s=r.parent||e[st],c=SC(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Ry(o,i,t[u],c,!1);else Ry(o,i,t,c,!1);Fy!==void 0&&Fy(o,r,e,t,i)}function mo(n,e){if(e!==null){let t=e.type;if(t&3)return bt(e,n);if(t&4)return dd(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mo(n,r);{let i=n[e.index];return pt(i)?dd(-1,i):at(i)}}else{if(t&128)return mo(n,e.next);if(t&32)return Od(e,n)()||at(n[e.index]);{let r=Fv(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=pn(n[ht]);return mo(i,r)}else return mo(n,e.next)}}}return null}function Fv(n,e){if(e!==null){let r=n[ht][st],i=e.projection;return r.projection[i]}return null}function dd(n,e){let t=qe+n+1;if(t<e.length){let r=e[t],i=r[j].firstChild;if(i!==null)return mo(r,i)}return e[vn]}function jd(n,e,t,r,i,o,s){for(;t!=null;){let c=r[mn];if(t.type===128){t=t.next;continue}let u=r[t.index],d=t.type;if(s&&e===0&&(u&&zr(at(u),r),t.flags|=2),!Nd(t))if(d&8)jd(n,e,t.child,r,i,o,!1),Hr(e,n,c,i,u,t,o,r);else if(d&32){let h=Od(t,r),g;for(;g=h();)Hr(e,n,c,i,g,t,o,r);Hr(e,n,c,i,u,t,o,r)}else d&16?NC(n,e,r,t,i,o):Hr(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Ra(n,e,t,r,i,o){jd(t,r,n.firstChild,e,i,o,!1)}function NC(n,e,t,r,i,o){let s=t[ht],u=s[st].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let h=u[d];Hr(e,n,t[mn],i,h,r,o,t)}else{let d=u,h=s[Ne];pv(r)&&(d.flags|=128),jd(n,e,d,h,i,o,!0)}}function RC(n,e,t,r,i,o,s){let c=r[vn],u=at(r);c!==u&&Hr(e,n,t,o,c,i,s);for(let d=qe;d<r.length;d++){let h=r[d];Ra(h[j],h,n,e,o,c)}}function xC(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Rt.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Rt.Important),n.setStyle(t,r,i,o))}}function Lv(n,e,t,r,i){let o=er(),s=r&2;try{_n(-1),s&&e.length>Je&&Rv(n,e,Je,!1);let c=s?oe.TemplateUpdateStart:oe.TemplateCreateStart;le(c,i,t),t(r,i)}finally{_n(o);let c=s?oe.TemplateUpdateEnd:oe.TemplateCreateEnd;le(c,i,t)}}function Ud(n,e,t){jC(n,e,t),(t.flags&64)===64&&UC(n,e,t)}function Vv(n,e,t=bt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function PC(n,e,t,r){let o=r.get(Ev,_v)||t===vt.ShadowDom||t===vt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return kC(s),s}function kC(n){OC(n)}var OC=()=>null;function FC(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function LC(n,e,t,r,i,o){let s=e[j];if(Hd(n,s,e,t,r)){Zn(n)&&BC(e,n.index);return}n.type&3&&(t=FC(t)),VC(n,e,t,r,i,o)}function VC(n,e,t,r,i,o){if(n.type&3){let s=bt(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function BC(n,e){let t=St(e,n);t[B]&16||(t[B]|=64)}function jC(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Zn(t)&&gC(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||av(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=wa(e,n,s,t);if(zr(u,e),o!==null&&$C(e,s-r,u,c,t,o),Xn(c)){let d=St(t.index,e);d[Le]=wa(e,n,s,t)}}}function UC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=cy();try{_n(o);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];oa(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&HC(u,d)}}finally{_n(-1),oa(s)}}function HC(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Bv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];aC(e,o.selectors,!1)&&(r??=[],Xn(o)?r.unshift(o):r.push(o))}return r}function $C(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1];ld(r,t,u,d)}}function zC(n,e,t,r,i){let o=Je+t,s=e[j],c=i(s,e,n,r,t);e[o]=c,jr(n,!0);let u=n.type===2;return u?(Sv(e[Re],c,n),(Ym()===0||lo(n))&&zr(c,e),Zm()):zr(c,e),ua()&&(!u||!Nd(n))&&Bd(s,e,c,n),n}function qC(n){let e=n;return Hl()?ry():(e=e.parent,jr(e,!1)),e}function GC(n,e){let t=n[mn];if(!t)return;let r;try{r=t.get(tr,null)}catch{r=null}r?.(e)}function Hd(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],h=s[u+1],g=e.data[d];ld(g,t[d],h,i),c=!0}if(o)for(let u of o){let d=t[u],h=e.data[u];ld(h,d,r,i),c=!0}return c}function WC(n,e){let t=St(e,n),r=t[j];KC(r,t);let i=t[ft];i!==null&&t[so]===null&&(t[so]=wv(i,t[mn])),le(oe.ComponentStart);try{$d(r,t,t[Le])}finally{le(oe.ComponentEnd,t[Le])}}function KC(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $d(n,e,t){aa(e);try{let r=n.viewQuery;r!==null&&cd(1,r,t);let i=n.template;i!==null&&Lv(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ct]?.finishViewCreation(n),n.staticContentQueries&&Iv(n,e),n.staticViewQueries&&cd(2,n.viewQuery,t);let o=n.components;o!==null&&QC(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[B]&=-5,ca()}}function QC(n,e){for(let t=0;t<e.length;t++)WC(n,e[t])}function YC(n,e,t,r){let i=z(null);try{let o=e.tView,c=n[B]&4096?4096:16,u=Pd(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[yn]=d;let h=n[Ct];return h!==null&&(u[Ct]=h.createEmbeddedView(o)),$d(o,u,t),u}finally{z(i)}}function Ly(n,e){return!e||e.firstChild===null||pv(n)}function _o(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(at(o)),pt(o)&&jv(o,r);let s=t.type;if(s&8)_o(n,e,t.child,r);else if(s&32){let c=Od(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=Fv(e,t);if(Array.isArray(c))r.push(...c);else{let u=pn(e[ht]);_o(u[j],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function jv(n,e){for(let t=qe;t<n.length;t++){let r=n[t],i=r[j].firstChild;i!==null&&_o(r[j],r,i,e)}n[vn]!==n[ft]&&e.push(n[vn])}function Uv(n){if(n[ta]!==null){for(let e of n[ta])e.impl.addSequence(e);n[ta].length=0}}var Hv=[];function ZC(n){return n[Xe]??XC(n)}function XC(n){let e=Hv.pop()??Object.create(eb);return e.lView=n,e}function JC(n){n.lView[Xe]!==n&&(n.lView=null,Hv.push(n))}var eb=Ee(X({},Cr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Br(n.lView)},consumerOnSignalRead(){this.lView[Xe]=this}});function tb(n){let e=n[Xe]??Object.create(nb);return e.lView=n,e}var nb=Ee(X({},Cr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=pn(n.lView);for(;e&&!$v(e[j]);)e=pn(e);e&&Fl(e)},consumerOnSignalRead(){this.lView[Xe]=this}});function $v(n){return n.type!==2}function zv(n){if(n[hn]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[hn])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[B]&8192)}}var rb=100;function qv(n,e=0){let r=n[$t].rendererFactory,i=!1;i||r.begin?.();try{ib(n,e)}finally{i||r.end?.()}}function ib(n,e){let t=$l();try{Xi(!0),fd(n,e);let r=0;for(;ho(n);){if(r===rb)throw new W(103,!1);r++,fd(n,1)}}finally{Xi(t)}}function ob(n,e,t,r){if(Jn(e))return;let i=e[B],o=!1,s=!1;aa(e);let c=!0,u=null,d=null;o||($v(n)?(d=ZC(e),u=Wi(d)):Ms()===null?(c=!1,d=tb(e),u=Wi(d)):e[Xe]&&(br(e[Xe]),e[Xe]=null));try{Ol(e),iy(n.bindingStartIndex),t!==null&&Lv(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let w=n.preOrderCheckHooks;w!==null&&pa(e,w,null)}else{let w=n.preOrderHooks;w!==null&&ga(e,w,0,null),Jl(e,0)}if(s||sb(e),zv(e),Gv(e,0),n.contentQueries!==null&&Iv(n,e),!o)if(h){let w=n.contentCheckHooks;w!==null&&pa(e,w)}else{let w=n.contentHooks;w!==null&&ga(e,w,1),Jl(e,1)}cb(n,e);let g=n.components;g!==null&&Kv(e,g,0);let m=n.viewQuery;if(m!==null&&cd(2,m,r),!o)if(h){let w=n.viewCheckHooks;w!==null&&pa(e,w)}else{let w=n.viewHooks;w!==null&&ga(e,w,2),Jl(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ea]){for(let w of e[ea])w();e[ea]=null}o||(Uv(e),e[B]&=-73)}catch(h){throw o||Br(e),h}finally{d!==null&&(Ns(d,u),c&&JC(d)),ca()}}function Gv(n,e){for(let t=mv(n);t!==null;t=yv(t))for(let r=qe;r<t.length;r++){let i=t[r];Wv(i,e)}}function sb(n){for(let e=mv(n);e!==null;e=yv(e)){if(!(e[B]&2))continue;let t=e[Yn];for(let r=0;r<t.length;r++){let i=t[r];Fl(i)}}}function ab(n,e,t){le(oe.ComponentStart);let r=St(e,n);try{Wv(r,t)}finally{le(oe.ComponentEnd,r[Le])}}function Wv(n,e){ra(n)&&fd(n,e)}function fd(n,e){let r=n[j],i=n[B],o=n[Xe],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Rs(o)),s||=!1,o&&(o.dirty=!1),n[B]&=-9217,s)ob(r,n,r.template,n[Le]);else if(i&8192){let c=z(null);try{zv(n),Gv(n,1);let u=r.components;u!==null&&Kv(n,u,1),Uv(n)}finally{z(c)}}}function Kv(n,e,t){for(let r=0;r<e.length;r++)ab(n,e[r],t)}function cb(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_n(~i);else{let o=i,s=t[++r],c=t[++r];ay(s,o);let u=e[o];le(oe.HostBindingsUpdateStart,u);try{c(2,u)}finally{le(oe.HostBindingsUpdateEnd,u)}}}}finally{_n(-1)}}function zd(n,e){let t=$l()?64:1088;for(n[$t].changeDetectionScheduler?.notify(e);n;){n[B]|=t;let r=pn(n);if(Vr(n)&&!r)return n;n=r}return null}function Qv(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ub(n,e,t,r=!0){let i=e[j];if(lb(i,e,n,t),r){let s=dd(t,n),c=e[Re],u=c.parentNode(n[vn]);u!==null&&EC(i,n[st],c,e,u,s)}let o=e[so];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function hd(n,e){if(n.length<=qe)return;let t=qe+e,r=n[t];if(r){let i=r[yn];i!==null&&i!==n&&Vd(i,r),e>0&&(n[t-1][ot]=r[ot]);let o=no(n,qe+e);_C(r[j],r);let s=o[Ct];s!==null&&s.detachView(o[j]),r[Ne]=null,r[ot]=null,r[B]&=-129}return r}function lb(n,e,t,r){let i=qe+r,o=t.length;r>0&&(t[i-1][ot]=e),r<o-qe?(e[ot]=t[i],Tl(t,qe+r,e)):(t.push(e),e[ot]=null),e[Ne]=t;let s=e[yn];s!==null&&t!==s&&Yv(s,e);let c=e[Ct];c!==null&&c.insertView(n),ia(e),e[B]|=128}function Yv(n,e){let t=n[Yn],r=e[Ne];if(zt(r))n[B]|=2;else{let i=r[Ne][ht];e[ht]!==i&&(n[B]|=2)}t===null?n[Yn]=[e]:t.push(e)}var Gr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[j];return _o(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Le]}set context(e){this._lView[Le]=e}get destroyed(){return Jn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ne];if(pt(e)){let t=e[uo],r=t?t.indexOf(this):-1;r>-1&&(hd(e,r),no(t,r))}this._attachedToViewContainer=!1}Ov(this._lView[j],this._lView)}onDestroy(e){Ll(this._lView,e)}markForCheck(){zd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[B]&=-129}reattach(){ia(this._lView),this._lView[B]|=128}detectChanges(){this._lView[B]|=1024,qv(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vr(this._lView),t=this._lView[yn];t!==null&&!e&&Vd(t,this._lView),kv(this._lView[j],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=Vr(this._lView),r=this._lView[yn];r!==null&&!t&&Yv(r,this._lView),ia(this._lView)}};var wn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=db;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=YC(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Gr(o)}}return n})();function db(){return qd(Mt(),ye())}function qd(n,e){return n.type&4?new wn(e,n,Kr(n,e)):null}function Gd(n,e,t,r,i){let o=n.data[e];if(o===null)o=fb(n,e,t,r,i),sy()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=ny();o.injectorIndex=s===null?-1:s.injectorIndex}return jr(o,!0),o}function fb(n,e,t,r,i){let o=Ul(),s=Hl(),c=s?o:o&&o.parent,u=n.data[e]=pb(n,c,t,e,r,i);return hb(n,u,o,s),u}function hb(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function pb(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Jm()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var gb=()=>null;function Vy(n,e){return gb(n,e)}var Zv=class{},xa=class{},pd=class{resolveComponentFactory(e){throw new W(917,!1)}},Pa=class{static NULL=new pd},rr=class{};var Xv=(()=>{class n{static \u0275prov=ue({token:n,providedIn:"root",factory:()=>null})}return n})();var ya={},gd=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ya,r);return i!==ya||t===ya?i:this.parentInjector.get(e,t,r)}};function By(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=pl(i,c);else if(o==2){let u=c,d=e[++s];r=pl(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function _t(n,e=0){let t=ye();if(t===null)return ae(n,e);let r=Mt();return dv(r,t,Ze(n),e)}function Jv(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,d=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,d]=h.resolveHostDirectives(s);break}vb(n,e,t,c,o,u,d)}o!==null&&r!==null&&mb(t,r,o)}function mb(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new W(-301,!1);r.push(e[i],o)}}function yb(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function vb(n,e,t,r,i,o,s){let c=r.length,u=null;for(let m=0;m<c;m++){let w=r[m];u===null&&Xn(w)&&(u=w,yb(n,t,m)),OT(av(t,e),n,w.type)}Tb(t,n.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let w=r[m];w.providersResolver&&w.providersResolver(w)}let d=!1,h=!1,g=Nv(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let w=r[m];if(t.mergedAttrs=bd(t.mergedAttrs,w.hostAttrs),Eb(n,t,e,g,w),Db(g,w,i),s!==null&&s.has(w)){let[R,N]=s.get(w);t.directiveToIndex.set(w.type,[g,R+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(w))&&t.directiveToIndex.set(w.type,g);w.contentQueries!==null&&(t.flags|=4),(w.hostBindings!==null||w.hostAttrs!==null||w.hostVars!==0)&&(t.flags|=64);let M=w.type.prototype;!d&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}_b(n,t,o)}function _b(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))jy(0,e,i,r),jy(1,e,i,r),Hy(e,r,!1);else{let o=t.get(i);Uy(0,e,o,r),Uy(1,e,o,r),Hy(e,r,!0)}}}function jy(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),e_(e,o)}}function Uy(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),e_(e,s)}}function e_(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Hy(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Rd(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let d=i[u];for(let h of d)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let d=o[u];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Eb(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=kr(i.type,!0)),s=new vo(o,Xn(i),_t,null);n.blueprint[r]=s,t[r]=s,wb(n,e,r,Nv(n,t,i.hostVars,In),i)}function wb(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;Ib(s)!=c&&s.push(c),s.push(t,r,o)}}function Ib(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Db(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Xn(e)&&(t[""]=n)}}function Tb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function t_(n,e,t,r,i,o,s,c){let u=e[j],d=u.consts,h=fo(d,s),g=Gd(u,n,t,r,h);return o&&Jv(u,e,g,fo(d,c),i),g.mergedAttrs=bd(g.mergedAttrs,g.attrs),g.attrs!==null&&By(g,g.attrs,!1),g.mergedAttrs!==null&&By(g,g.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,g),g}function n_(n,e){nv(n,e),xl(e)&&n.queries.elementEnd(e)}function Wd(n){return i_(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function r_(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function i_(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Kd(n,e,t){if(t===In)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function nd(n,e,t){return function r(i){let o=Zn(n)?St(n.index,e):e;zd(o,5);let s=e[Le],c=$y(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=$y(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function $y(n,e,t,r){let i=z(null);try{return le(oe.OutputStart,e,t),t(r)!==!1}catch(o){return GC(n,o),!1}finally{le(oe.OutputEnd,e,t),z(i)}}function Cb(n,e,t,r,i,o,s,c){let u=lo(n),d=!1,h=null;if(!r&&u&&(h=Sb(e,t,o,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,d=!0}else{let g=bt(n,t),m=r?r(g):g;QT(t,m,o,c);let w=i.listen(m,o,c);if(!bb(o)){let M=r?R=>r(at(R[n.index])):n.index;o_(M,e,t,o,c,w,!1)}}return d}function bb(n){return n.startsWith("animation")||n.startsWith("transition")}function Sb(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Fr],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function o_(n,e,t,r,i,o,s){let c=e.firstCreatePass?Bl(e):null,u=Vl(t),d=u.length;u.push(i,o),c&&c.push(r,n,d,(d+1)*(s?-1:1))}function zy(n,e,t,r,i,o){let s=e[t],c=e[j],d=c.data[t].outputs[r],g=s[d].subscribe(o);o_(n.index,c,e,i,o,g,!0)}var md=Symbol("BINDING");var yd=class extends Pa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Gn(e);return new Eo(t,this.ngModule)}};function Ab(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Na.SignalBased)!==0};return i&&(o.transform=i),o})}function Mb(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Nb(n,e,t){let r=e instanceof it?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new gd(t,r):t}function Rb(n){let e=n.get(rr,null);if(e===null)throw new W(407,!1);let t=n.get(Xv,null),r=n.get(zn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function xb(n,e){let t=s_(n);return Cv(e,t,t==="svg"?Pl:t==="math"?zm:null)}function s_(n){return(n.selectors[0][0]||"div").toLowerCase()}var Eo=class extends xa{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ab(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Mb(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=dC(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){le(oe.DynamicComponentStart);let c=z(null);try{let u=this.componentDef,d=Pb(r,u,s,o),h=Nb(u,i||this.ngModule,e),g=Rb(h),m=g.rendererFactory.createRenderer(null,u),w=r?PC(m,r,u.encapsulation,h):xb(u,m),M=s?.some(qy)||o?.some(F=>typeof F!="function"&&F.bindings.some(qy)),R=Pd(null,d,null,512|Mv(u),null,null,g,m,h,null,wv(w,h,!0));R[Je]=w,aa(R);let N=null;try{let F=t_(Je,R,2,"#host",()=>d.directiveRegistry,!0,0);Sv(m,w,F),zr(w,R),Ud(d,R,F),Dv(d,F,R),n_(d,F),t!==void 0&&Ob(F,this.ngContentSelectors,t),N=St(F.index,R),R[Le]=N[Le],$d(d,R,null)}catch(F){throw N!==null&&ad(N),ad(R),F}finally{le(oe.DynamicComponentEnd),ca()}return new Ta(this.componentType,R,!!M)}finally{z(c)}}};function Pb(n,e,t,r){let i=n?["ng-version","21.0.6"]:fC(e.selectors[0]),o=null,s=null,c=0;if(t)for(let h of t)c+=h[md].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let m of g.bindings){c+=m[md].requiredVars;let w=h+1;m.create&&(m.targetIdx=w,(o??=[]).push(m)),m.update&&(m.targetIdx=w,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,m=_l(g);u.push(m)}return xd(0,null,kb(o,s),1,c,u,null,null,null,[i],null)}function kb(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function qy(n){let e=n[md].kind;return e==="input"||e==="twoWay"}var Ta=class extends Zv{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=na(t[j],Je),this.location=Kr(this._tNode,t),this.instance=St(this._tNode.index,t)[Le],this.hostView=this.changeDetectorRef=new Gr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Hd(r,i[j],i,e,t);this.previousInputValues.set(e,t);let s=St(r.index,i);zd(s,1)}get injector(){return new nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ob(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var sr=(()=>{class n{static __NG_ELEMENT_ID__=Fb}return n})();function Fb(){let n=Mt();return c_(n,ye())}var Lb=sr,a_=class extends Lb{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Kr(this._hostTNode,this._hostLView)}get injector(){return new nr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sd(this._hostTNode,this._hostLView);if(iv(e)){let t=Ea(e,this._hostLView),r=_a(e),i=t[j].data[r+8];return new nr(i,t)}else return new nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Gy(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qe}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Vy(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,Ly(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!_T(e),d;if(u)d=t;else{let N=t||{};d=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,c=N.bindings}let h=u?e:new Eo(Gn(e)),g=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(u?g:this.parentInjector).get(it,null);F&&(o=F)}let m=Gn(h.componentType??{}),w=Vy(this._lContainer,m?.id??null),M=w?.firstChild??null,R=h.create(g,i,M,o,s,c);return this.insertImpl(R.hostView,d,Ly(this._hostTNode,w)),R}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Gm(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Ne],d=new a_(u,u[st],u[Ne]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ub(s,i,o,r),e.attachToViewContainerRef(),Tl(rd(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Gy(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=hd(this._lContainer,t);r&&(no(rd(this._lContainer),t),Ov(r[j],r))}detach(e){let t=this._adjustIndex(e,-1),r=hd(this._lContainer,t);return r&&no(rd(this._lContainer),t)!=null?new Gr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Gy(n){return n[uo]}function rd(n){return n[uo]||(n[uo]=[])}function c_(n,e){let t,r=e[n.index];return pt(r)?t=r:(t=Qv(r,e,null,n),e[n.index]=t,kd(e,t)),Bb(t,e,n,r),new a_(t,n,e)}function Vb(n,e){let t=n[Re],r=t.createComment(""),i=bt(e,n),o=t.parentNode(i);return Da(t,o,r,t.nextSibling(i),!1),r}var Bb=Hb,jb=()=>!1;function Ub(n,e,t){return jb(n,e,t)}function Hb(n,e,t,r){if(n[vn])return;let i;t.type&8?i=at(r):i=Vb(e,t),n[vn]=i}var vd=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},_d=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Qd(e,t).matches!==null&&this.queries[t].setDirty()}},Ed=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=Yb(e):this.predicate=e}},wd=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Id=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,$b(t,o)),this.matchTNodeWithReadOption(e,t,ma(t,e,o,!1,!1))}else r===wn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ma(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Qr||i===sr||i===wn&&t.type&4)this.addMatch(t.index,-2);else{let o=ma(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function $b(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function zb(n,e){return n.type&11?Kr(n,e):n.type&4?qd(n,e):null}function qb(n,e,t,r){return t===-1?zb(e,n):t===-2?Gb(n,e,r):wa(n,n[j],t,e)}function Gb(n,e,t){if(t===Qr)return Kr(e,n);if(t===wn)return qd(e,n);if(t===sr)return c_(e,n)}function u_(n,e,t,r){let i=e[Ct].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let d=s[u];if(d<0)c.push(null);else{let h=o[d];c.push(qb(e,h,s[u+1],t.metadata.read))}}i.matches=c}return i.matches}function Dd(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=u_(n,e,i,t);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let d=o[c+1],h=e[-u];for(let g=qe;g<h.length;g++){let m=h[g];m[yn]===m[Ne]&&Dd(m[j],m,d,r)}if(h[Yn]!==null){let g=h[Yn];for(let m=0;m<g.length;m++){let w=g[m];Dd(w[j],w,d,r)}}}}}return r}function Wb(n,e){return n[Ct].queries[e].queryList}function Kb(n,e,t){let r=new Ia((t&4)===4);return Qm(n,e,r,r.destroy),(e[Ct]??=new _d).queries.push(new vd(r))-1}function Qb(n,e,t){let r=At();return r.firstCreatePass&&(Zb(r,new Ed(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),Kb(r,ye(),e)}function Yb(n){return n.split(",").map(e=>e.trim())}function Zb(n,e,t){n.queries===null&&(n.queries=new wd),n.queries.track(new Id(e,t))}function Qd(n,e){return n.queries.getByIndex(e)}function Xb(n,e){let t=n[j],r=Qd(t,e);return r.crossesNgTemplate?Dd(t,n,e,[]):u_(t,n,r,e)}var wo=class{};var Io=class extends wo{injector;componentFactoryResolver=new yd(this);instance=null;constructor(e){super();let t=new $n([...e.providers,{provide:wo,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver}],e.parent||oo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function l_(n,e,t=null){return new Io({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Jb=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Al(!1,t.type),i=r.length>0?l_([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ue({token:n,providedIn:"environment",factory:()=>new n(ae(it))})}return n})();function bo(n){return ba(()=>{let e=d_(n),t=Ee(X({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ad.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Jb).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vt.Emulated,styles:n.styles||rt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ld("NgStandalone"),f_(t);let r=n.dependencies;return t.directiveDefs=Wy(r,e0),t.pipeDefs=Wy(r,Mm),t.id=r0(t),t})}function e0(n){return Gn(n)||_l(n)}function ka(n){return ba(()=>({type:n.type,bootstrap:n.bootstrap||rt,declarations:n.declarations||rt,imports:n.imports||rt,exports:n.exports||rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function t0(n,e){if(n==null)return Wn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Na.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function n0(n){if(n==null)return Wn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Oa(n){return ba(()=>{let e=d_(n);return f_(e),e})}function d_(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Wn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||rt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:t0(n.inputs,e),outputs:n0(n.outputs),debugInfo:null}}function f_(n){n.features?.forEach(e=>e(n))}function Wy(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function r0(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function i0(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=bd(n.mergedAttrs,n.attrs);let h=n.tView=xd(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),jr(n,!1);let u=s0(t,e,n,r);ua()&&Bd(t,e,u,n),zr(u,e);let d=Qv(u,e,u,n);e[r+Je]=d,kd(e,d),Ub(d,n,e)}function o0(n,e,t,r,i,o,s,c,u,d,h){let g=t+Je,m;return e.firstCreatePass?(m=Gd(e,g,4,s||null,c||null),jl()&&Jv(e,n,m,fo(e.consts,d),Bv),nv(e,m)):m=e.data[g],i0(m,n,e,t,r,i,o,u),lo(m)&&Ud(e,n,m),d!=null&&Vv(n,m,h),m}function Dn(n,e,t,r,i,o,s,c){let u=ye(),d=At(),h=fo(d.consts,o);return o0(u,d,n,e,t,r,i,h,void 0,s,c),Dn}var s0=a0;function a0(n,e,t,r){return la(!0),e[Re].createComment("")}var Yd=new ie("");function Fa(n){return!!n&&typeof n.then=="function"}function Zd(n){return!!n&&typeof n.subscribe=="function"}var h_=new ie("");var Xd=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=J(h_,{optional:!0})??[];injector=J(gn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Js(this.injector,i);if(Fa(o))t.push(o);else if(Zd(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p_=new ie("");function g_(){ju(()=>{let n="";throw new W(600,n)})}function m_(n){return n.isBoundToModule}var c0=10;var La=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=J(tr);afterRenderManager=J(xv);zonelessEnabled=J(go);rootEffectScheduler=J(fa);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new jt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=J(Ur);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Xu(t=>!t))}constructor(){J(Co,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=J(it);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=gn.NULL){return this._injector.get(Fe).run(()=>{le(oe.BootstrapComponentStart);let s=t instanceof xa;if(!this._injector.get(Xd).done){let M="";throw new W(405,M)}let u;s?u=t:u=this._injector.get(Pa).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let d=m_(u)?void 0:this._injector.get(wo),h=r||u.selector,g=u.create(i,[],h,d),m=g.location.nativeElement,w=g.injector.get(Yd,null);return w?.registerApplication(m),g.onDestroy(()=>{this.detachView(g.hostView),yo(this.components,g),w?.unregisterApplication(m)}),this._loadComponent(g),le(oe.BootstrapComponentEnd,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){le(oe.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw le(oe.ChangeDetectionEnd),new W(101,!1);let t=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(t),this.afterTick.next(),le(oe.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(rr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<c0;){le(oe.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{le(oe.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ho(i))continue;let o=r&&!this.zonelessEnabled?0:1;qv(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ho(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yo(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(p_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var sP=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ut(n,e,t){let r=ye(),i=zl();if(Kd(r,i,e)){let o=At(),s=py();LC(s,r,n,e,r[Re],t)}return ut}function Ky(n,e,t,r,i){Hd(e,n,t,i?"class":"style",r)}function ee(n,e,t,r){let i=ye(),o=i[j],s=n+Je,c=o.firstCreatePass?t_(s,i,2,e,Bv,jl(),t,r):o.data[s];if(zC(c,i,n,e,u0),lo(c)){let u=i[j];Ud(u,i,c),Dv(u,c,i)}return r!=null&&Vv(i,c),ee}function fe(){let n=At(),e=Mt(),t=qC(e);return n.firstCreatePass&&n_(n,t),ey(t)&&ty(),Xm(),t.classesWithoutHost!=null&&bT(t)&&Ky(n,t,ye(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ST(t)&&Ky(n,t,ye(),t.stylesWithoutHost,!1),fe}function et(n,e,t,r){return ee(n,e,t,r),fe(),et}var u0=(n,e,t,r,i)=>(la(!0),Cv(e[Re],r,gy()));function Yr(){return ye()}var So="en-US";var l0=So;function y_(n){typeof n=="string"&&(l0=n.toLowerCase().replace(/_/g,"-"))}function Ke(n,e,t){let r=ye(),i=At(),o=Mt();return d0(i,r,r[Re],o,n,e,t),Ke}function d0(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=nd(r,e,o),Cb(r,n,e,s,t,i,o,u)&&(c=!1)),c){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let m=h[g],w=h[g+1];u??=nd(r,e,o),zy(r,e,m,w,i,u)}if(d&&d.length)for(let g of d)u??=nd(r,e,o),zy(r,e,g,i,i,u)}}function Zr(n=1){return hy(n)}function Xr(n,e,t){return Qb(n,e,t),Xr}function Jr(n){let e=ye(),t=At(),r=ql();sa(r+1);let i=Qd(t,r);if(n.dirty&&qm(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=Xb(e,r);n.reset(o,UT),n.notifyOnChanges()}return!0}return!1}function ei(){return Wb(ye(),ql())}function ha(n,e){return n<<17|e<<2}function ir(n){return n>>17&32767}function f0(n){return(n&2)==2}function h0(n,e){return n&131071|e<<17}function Td(n){return n|2}function Wr(n){return(n&131068)>>2}function id(n,e){return n&-131069|e<<2}function p0(n){return(n&1)===1}function Cd(n){return n|1}function g0(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=ir(s),u=Wr(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Or(g,h)>0)&&(d=!0)}else h=t;if(i)if(u!==0){let m=ir(n[c+1]);n[r+1]=ha(m,c),m!==0&&(n[m+1]=id(n[m+1],r)),n[c+1]=h0(n[c+1],r)}else n[r+1]=ha(c,0),c!==0&&(n[c+1]=id(n[c+1],r)),c=r;else n[r+1]=ha(u,0),c===0?c=r:n[u+1]=id(n[u+1],r),u=r;d&&(n[r+1]=Td(n[r+1])),Qy(n,h,r,!0),Qy(n,h,r,!1),m0(e,h,n,r,o),s=ha(c,u),o?e.classBindings=s:e.styleBindings=s}function m0(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Or(o,e)>=0&&(t[r+1]=Cd(t[r+1]))}function Qy(n,e,t,r){let i=n[t+1],o=e===null,s=r?ir(i):Wr(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],d=n[s+1];y0(u,e)&&(c=!0,n[s+1]=r?Cd(d):Td(d)),s=r?ir(d):Wr(d)}c&&(n[t+1]=r?Td(i):Cd(i))}function y0(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Or(n,e)>=0:!1}function Va(n,e,t){return v_(n,e,t,!1),Va}function Ao(n,e){return v_(n,e,null,!0),Ao}function v_(n,e,t,r){let i=ye(),o=At(),s=oy(2);if(o.firstUpdatePass&&_0(o,n,s,r),e!==In&&Kd(i,s,e)){let c=o.data[er()];T0(o,c,i,i[Re],n,i[s+1]=C0(e,t),r,s)}}function v0(n,e){return e>=n.expandoStartIndex}function _0(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[er()],s=v0(n,t);b0(o,r)&&e===null&&!s&&(e=!1),e=E0(i,o,e,r),g0(i,o,e,t,s,r)}}function E0(n,e,t,r){let i=uy(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=od(null,n,e,t,r),t=Do(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=od(i,n,e,t,r),o===null){let u=w0(n,e,r);u!==void 0&&Array.isArray(u)&&(u=od(null,n,e,u[1],r),u=Do(u,e.attrs,r),I0(n,e,r,u))}else o=D0(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function w0(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Wr(r)!==0)return n[ir(r)]}function I0(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ir(i)]=r}function D0(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Do(r,s,t)}return Do(r,e.attrs,t)}function od(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=Do(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Do(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Lm(n,s,t?!0:e[++o]))}return n===void 0?null:n}function T0(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,d=u[c+1],h=p0(d)?Yy(u,e,t,i,Wr(d),s):void 0;if(!Ca(h)){Ca(o)||f0(d)&&(o=Yy(u,null,t,i,c,s));let g=kl(er(),t);xC(r,s,g,i,o)}}function Yy(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],d=Array.isArray(u),h=d?u[1]:u,g=h===null,m=t[i+1];m===In&&(m=g?rt:void 0);let w=g?Xs(m,r):h===r?m:void 0;if(d&&!Ca(w)&&(w=Xs(u,r)),Ca(w)&&(c=w,s))return c;let M=n[i+1];i=s?ir(M):Wr(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Xs(u,r))}return c}function Ca(n){return n!==void 0}function C0(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=fn(Tv(n)))),n}function b0(n,e){return(n.flags&(e?8:16))!==0}function Gt(n,e=""){let t=ye(),r=At(),i=n+Je,o=r.firstCreatePass?Gd(r,i,1,e,null):r.data[i],s=S0(r,t,o,e,n);t[i]=s,ua()&&Bd(r,t,s,o),jr(o,!1)}var S0=(n,e,t,r,i)=>(la(!0),ZT(e[Re],r));function A0(n,e,t,r=""){return Kd(n,zl(),t)?e+wl(t)+r:In}function Ba(n){return Mo("",n),Ba}function Mo(n,e,t){let r=ye(),i=A0(r,n,e,t);return i!==In&&M0(r,er(),i),Mo}function M0(n,e,t){let r=kl(e,n);XT(n[Re],r,t)}var __=(()=>{class n{applicationErrorHandler=J(tr);appRef=J(La);taskService=J(Ur);ngZone=J(Fe);zonelessEnabled=J(go);tracing=J(Co,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ji):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(J(Xl,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ql:Kl;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ji+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ql(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jd(){return Ld("NgZoneless"),Sl([...ef(),[]])}function ef(){return[{provide:zn,useExisting:__},{provide:Fe,useClass:eo},{provide:go,useValue:!0}]}function N0(){return typeof $localize<"u"&&$localize.locale||So}var ja=new ie("",{factory:()=>J(ja,{optional:!0,skipSelf:!0})||N0()});function No(n,e){return xs(n,e?.equal)}var tf=new ie(""),q0=new ie("");function Ro(n){return!n.moduleRef}function G0(n){let e=Ro(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Fe);return t.run(()=>{Ro(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ro(n)){let o=()=>e.destroy(),s=n.platformInjector.get(tf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(tf);s.add(o),n.moduleRef.onDestroy(()=>{yo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return K0(r,t,()=>{let o=e.get(Ur),s=o.add(),c=e.get(Xd);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(ja,So);if(y_(u||So),!e.get(q0,!0))return Ro(n)?e.get(La):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ro(n)){let h=e.get(La);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return W0?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var W0;function K0(n,e,t){try{let r=t();return Fa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ua=null;function Q0(n=[],e){return gn.create({name:e,providers:[{provide:io,useValue:"platform"},{provide:tf,useValue:new Set([()=>Ua=null])},...n]})}function Y0(n=[]){if(Ua)return Ua;let e=Q0(n);return Ua=e,g_(),Z0(e),e}function Z0(n){let e=n.get(Aa,null);Js(n,()=>{e?.forEach(t=>t())})}var nf=class{constructor(){}supports(e){return Wd(e)}create(e){return new rf(e)}},X0=(n,e)=>e,rf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||X0}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<E_(r,i,o)?t:r,c=E_(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=c-i,h=u-i;if(d!=h){for(let m=0;m<d;m++){let w=m<o.length?o[m]:o[m]=0,M=w+m;h<=M&&M<d&&(o[m]=w+1)}let g=s.previousIndex;o[g]=h-d}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Wd(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,r_(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new of(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ha),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ha),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},of=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},sf=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ha=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new sf,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function E_(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function w_(){return new af([new nf])}var af=(()=>{class n{factories;static \u0275prov=ue({token:n,providedIn:"root",factory:w_});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=J(n,{optional:!0,skipSelf:!0});return n.create(t,r||w_())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new W(901,!1)}}return n})();function D_(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;le(oe.BootstrapApplicationStart);try{let o=i?.injector??Y0(r),s=[ef(),Ey,...t||[]],c=new Io({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return G0({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{le(oe.BootstrapApplicationEnd)}}var T_=null;function Po(){return T_}function cf(n){T_??=n}var xo=class{};var $a=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qa=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new $a(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),C_(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);C_(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(_t(sr),_t(wn),_t(af))};static \u0275dir=Oa({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function C_(n,e){n.context.$implicit=e.item}var uf=(()=>{class n{_viewContainer;_context=new za;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){b_(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){b_(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(_t(sr),_t(wn))};static \u0275dir=Oa({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),za=class{$implicit=null;ngIf=null};function b_(n,e){if(n&&!n.createEmbeddedView)throw new W(2020,!1)}var ti=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ka({type:n});static \u0275inj=to({})}return n})();function lf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ko=class{};var S_="browser";var Oo=class{_doc;constructor(e){this._doc=e}manager},Ga=(()=>{class n extends Oo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ae(mt))};static \u0275prov=ue({token:n,factory:n.\u0275fac})}return n})(),Qa=new ie(""),pf=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Ga));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Ga);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ae(Qa),ae(Fe))};static \u0275prov=ue({token:n,factory:n.\u0275fac})}return n})(),df="ng-app-id";function A_(n){for(let e of n)e.remove()}function M_(n,e){let t=e.createElement("style");return t.textContent=n,t}function eS(n,e,t,r){let i=n.head?.querySelectorAll(`style[${df}="${e}"],link[${df}="${e}"]`);if(i)for(let o of i)o.removeAttribute(df),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function hf(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var gf=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,eS(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,M_);r?.forEach(i=>this.addUsage(i,this.external,hf))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(A_(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])A_(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,M_(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,hf(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ae(mt),ae(Sa),ae(Ma,8),ae(To))};static \u0275prov=ue({token:n,factory:n.\u0275fac})}return n})(),ff={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mf=/%COMP%/g;var R_="%COMP%",tS=`_nghost-${R_}`,nS=`_ngcontent-${R_}`,rS=!0,iS=new ie("",{factory:()=>rS});function oS(n){return nS.replace(mf,n)}function sS(n){return tS.replace(mf,n)}function x_(n,e){return e.map(t=>t.replace(mf,n))}var yf=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=d,this.defaultRenderer=new Fo(t,s,c,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ka?i.applyToHost(t):i instanceof Lo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.tracingService;switch(r.encapsulation){case vt.Emulated:o=new Ka(u,d,r,this.appId,h,s,c,g);break;case vt.ShadowDom:return new Wa(u,t,r,s,c,this.nonce,g,d);case vt.ExperimentalIsolatedShadowDom:return new Wa(u,t,r,s,c,this.nonce,g);default:o=new Lo(u,d,r,h,s,c,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ae(pf),ae(gf),ae(Sa),ae(iS),ae(mt),ae(Fe),ae(Ma),ae(Co,8))};static \u0275prov=ue({token:n,factory:n.\u0275fac})}return n})(),Fo=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ff[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(N_(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(N_(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ff[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ff[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Rt.DashCase|Rt.Important)?e.style.setProperty(t,r,i&Rt.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Rt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Po().getGlobalEventTarget(this.doc,e),!e))throw new W(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function N_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Wa=class extends Fo{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=x_(r.id,d);for(let g of d){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=g,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let g of h){let m=hf(g,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Lo=class extends Fo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?x_(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&qr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ka=class extends Lo{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,c,u,d),this.contentAttr=oS(d),this.hostAttr=sS(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ya=class n extends xo{supportsDOMEvents=!0;static makeCurrent(){cf(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aS();return t==null?null:cS(t)}resetBaseElement(){Vo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return lf(document.cookie,e)}},Vo=null;function aS(){return Vo=Vo||document.head.querySelector("base"),Vo?Vo.getAttribute("href"):null}function cS(n){return new URL(n,document.baseURI).pathname}var uS=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ue({token:n,factory:n.\u0275fac})}return n})(),P_=["alt","control","meta","shift"],lS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dS={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},k_=(()=>{class n extends Oo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Po().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),P_.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=lS[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),P_.forEach(s=>{if(s!==i){let c=dS[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ae(mt))};static \u0275prov=ue({token:n,factory:n.\u0275fac})}return n})();function vf(n,e,t){let r=X({rootComponent:n,platformRef:t?.platformRef},fS(e));return D_(r)}function fS(n){return{appProviders:[...yS,...n?.providers??[]],platformProviders:mS}}function hS(){Ya.makeCurrent()}function pS(){return new Ht}function gS(){return Md(document),document}var mS=[{provide:To,useValue:S_},{provide:Aa,useValue:hS,multi:!0},{provide:mt,useFactory:gS}];var yS=[{provide:io,useValue:"root"},{provide:Ht,useFactory:pS},{provide:Qa,useClass:Ga,multi:!0},{provide:Qa,useClass:k_,multi:!0},yf,gf,pf,{provide:rr,useExisting:yf},{provide:ko,useClass:uS},[]];var vS=["progressPath"];function _S(n,e){n&1&&(ee(0,"div",31),et(1,"div",32),fe())}function ES(n,e){n&1&&(ee(0,"div",33),gt(),ee(1,"svg",34),et(2,"circle",35)(3,"path",36),fe(),qt(),ee(4,"span",37),Gt(5,"Validating..."),fe()())}function wS(n,e){if(n&1&&(ee(0,"div",38),Gt(1),fe()),n&2){let t=Zr();Ao("text-red-500",t.isError)("text-green-600",!t.isError),ct(),Mo(" ",t.validationMessage," ")}}function IS(n,e){n&1&&(gt(),ee(0,"svg",43),et(1,"path",44),fe())}function DS(n,e){if(n&1){let t=Yr();ee(0,"button",41),Ke("click",function(){let i=he(t).$implicit,o=Zr(2);return pe(o.selectTheme(i))}),Dn(1,IS,2,0,"svg",42),fe()}if(n&2){let t=e.$implicit,r=Zr(2);Va("background-color",t.colors.bg)("border-color",t.colors.confirmedBorder),Ao("ring-2",r.activeTheme.id===t.id)("ring-offset-1",r.activeTheme.id===t.id)("ring-blue-500",r.activeTheme.id===t.id)("opacity-50",r.wordsPlacedCount<t.unlockCount),ut("title",r.wordsPlacedCount<t.unlockCount?"Unlock at "+t.unlockCount+" words":t.name),ct(),ut("ngIf",r.wordsPlacedCount<t.unlockCount)}}function TS(n,e){if(n&1&&(ee(0,"div",39),Dn(1,DS,2,14,"button",40),fe()),n&2){let t=Zr();ct(),ut("ngForOf",t.themes)}}var Za=class n{constructor(){this.lastPlacedTime=0;this.cooldownMs=15e3;this.wordsPlacedCount=0;this.isValidating=!1;this.validationMessage="";this.isError=!1;this.themes=[];this.themeSelected=new ze;this.zoomIn=new ze;this.zoomOut=new ze;this.resetView=new ze;this.sharePosition=new ze;this.ngZone=J(Fe);this.animationFrameId=null;this.cooldownProgress=1;this.isThemeMenuOpen=!1}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{let e=()=>{let r=Date.now()-this.lastPlacedTime,i=1;if(r<this.cooldownMs&&(i=r/this.cooldownMs),this.progressPath?.nativeElement){let o=(i*100).toFixed(1);this.progressPath.nativeElement.setAttribute("stroke-dasharray",`${o}, 100`)}i>=1&&this.cooldownProgress<1?this.ngZone.run(()=>this.cooldownProgress=1):i<1&&this.cooldownProgress>=1&&this.ngZone.run(()=>this.cooldownProgress=i),this.animationFrameId=requestAnimationFrame(e)};e()})}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}toggleThemeMenu(){this.isThemeMenuOpen=!this.isThemeMenuOpen}selectTheme(e){this.wordsPlacedCount>=e.unlockCount&&(this.themeSelected.emit(e),this.isThemeMenuOpen=!1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=bo({type:n,selectors:[["app-top-bar"]],viewQuery:function(t,r){if(t&1&&Xr(vS,5),t&2){let i;Jr(i=ei())&&(r.progressPath=i.first)}},inputs:{lastPlacedTime:"lastPlacedTime",cooldownMs:"cooldownMs",wordsPlacedCount:"wordsPlacedCount",isValidating:"isValidating",validationMessage:"validationMessage",isError:"isError",activeTheme:"activeTheme",themes:"themes"},outputs:{themeSelected:"themeSelected",zoomIn:"zoomIn",zoomOut:"zoomOut",resetView:"resetView",sharePosition:"sharePosition"},decls:41,vars:5,consts:[["progressPath",""],[1,"absolute","top-0","left-0","right-0","p-4","pointer-events-none","z-50","flex","justify-center","md:justify-start"],[1,"bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","px-4","py-3","rounded-xl","pointer-events-auto","max-w-sm","w-full","md:w-auto","text-center","md:text-left"],[1,"flex","items-center","gap-3","mb-1"],[1,"relative","w-6","h-6","flex-shrink-0"],["viewBox","0 0 36 36",1,"transform","-rotate-90","w-full","h-full"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-gray-200"],["stroke-dasharray","100, 100","d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-blue-500","transition-[stroke-dasharray]","duration-100","ease-linear"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"text-xl","font-black","tracking-tighter"],[1,"hidden","md:block","text-xs","text-gray-500","mb-2","leading-relaxed"],[1,"flex","items-center","justify-between","mb-3","pt-2","border-t","border-gray-100"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wide"],[1,"text-black","text-sm"],[1,"min-h-[24px]","flex","flex-col","justify-center","items-center","md:items-start"],["class","flex items-center space-x-2 text-blue-600 animate-pulse",4,"ngIf"],["class","text-sm font-medium whitespace-pre-wrap",3,"text-red-500","text-green-600",4,"ngIf"],[1,"absolute","top-4","right-4","flex","flex-col","gap-2","z-50","pointer-events-auto"],["title","Center View",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Share Position",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"],[1,"relative"],["title","Themes",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"],["class","absolute right-full top-0 mr-2 bg-white/95 backdrop-blur shadow-lg border border-gray-200 p-2 rounded-xl flex gap-2 animate-in fade-in slide-in-from-right-2",4,"ngIf"],["title","Zoom In",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["title","Zoom Out",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"w-2","h-2","bg-blue-500","rounded-full"],[1,"flex","items-center","space-x-2","text-blue-600","animate-pulse"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-semibold"],[1,"text-sm","font-medium","whitespace-pre-wrap"],[1,"absolute","right-full","top-0","mr-2","bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","p-2","rounded-xl","flex","gap-2","animate-in","fade-in","slide-in-from-right-2"],["class","w-8 h-8 rounded-full border transition-all relative flex items-center justify-center group",3,"ring-2","ring-offset-1","ring-blue-500","opacity-50","background-color","border-color","title","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-full","border","transition-all","relative","flex","items-center","justify-center","group",3,"click","title"],["class","w-4 h-4 text-gray-400","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"]],template:function(t,r){if(t&1){let i=Yr();ee(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),gt(),ee(4,"svg",5),et(5,"path",6)(6,"path",7,0),fe(),Dn(8,_S,2,0,"div",8),fe(),qt(),ee(9,"h1",9),Gt(10,"Cross.plane"),fe()(),ee(11,"p",10),Gt(12," Infinite, procedural, collaborative crossword. "),et(13,"br"),Gt(14," Click to select. Space to rotate. Type to type. "),fe(),ee(15,"div",11)(16,"div",12),Gt(17," Words this session: "),ee(18,"span",13),Gt(19),fe()()(),ee(20,"div",14),Dn(21,ES,6,0,"div",15)(22,wS,2,5,"div",16),fe()()(),ee(23,"div",17)(24,"button",18),Ke("click",function(){return he(i),pe(r.resetView.emit())}),gt(),ee(25,"svg",19),et(26,"path",20),fe()(),qt(),ee(27,"button",21),Ke("click",function(){return he(i),pe(r.sharePosition.emit())}),gt(),ee(28,"svg",19),et(29,"path",22),fe()(),qt(),ee(30,"div",23)(31,"button",24),Ke("click",function(){return he(i),pe(r.toggleThemeMenu())}),gt(),ee(32,"svg",19),et(33,"path",25),fe()(),Dn(34,TS,2,1,"div",26),fe(),qt(),ee(35,"button",27),Ke("click",function(){return he(i),pe(r.zoomIn.emit())}),gt(),ee(36,"svg",19),et(37,"path",28),fe()(),qt(),ee(38,"button",29),Ke("click",function(){return he(i),pe(r.zoomOut.emit())}),gt(),ee(39,"svg",19),et(40,"path",30),fe()()()}t&2&&(ct(8),ut("ngIf",r.cooldownProgress>=1),ct(11),Ba(r.wordsPlacedCount),ct(2),ut("ngIf",r.isValidating),ct(),ut("ngIf",!r.isValidating&&r.validationMessage),ct(12),ut("ngIf",r.isThemeMenuOpen))},dependencies:[ti,qa,uf],encapsulation:2})}};var O_=()=>{};var V_=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},CS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},B_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,h=o>>2,g=(o&3)<<4|c>>4,m=(c&15)<<2|d>>6,w=d&63;u||(w=64,s||(m=64)),r.push(t[h],t[g],t[m],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new _f;let m=o<<2|c>>4;if(r.push(m),d!==64){let w=c<<4&240|d>>2;if(r.push(w),g!==64){let M=d<<6&192|g;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_f=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},bS=function(n){let e=V_(n);return B_.encodeByteArray(e,!0)},jo=function(n){return bS(n).replace(/\./g,"")},j_=function(n){try{return B_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function U_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var SS=()=>U_().__FIREBASE_DEFAULTS__,AS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&j_(n[1]);return e&&JSON.parse(e)},Ef=()=>{try{return O_()||SS()||AS()||MS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},NS=n=>Ef()?.emulatorHosts?.[n],H_=n=>{let e=NS(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wf=()=>Ef()?.config;var Xa=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ja(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $_(n){return(await fetch(n,{credentials:"include"})).ok}function z_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=X({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jo(JSON.stringify(t)),jo(JSON.stringify(s)),""].join(".")}var Bo={};function RS(){let n={prod:[],emulator:[]};for(let e of Object.keys(Bo))Bo[e]?n.emulator.push(e):n.prod.push(e);return n}function xS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var F_=!1;function q_(n,e){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||Bo[n]===e||Bo[n]||F_)return;Bo[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=RS().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{F_=!0,s()},m}function h(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){let m=xS(r),w=t("text"),M=document.getElementById(w)||document.createElement("span"),R=t("learnmore"),N=document.getElementById(R)||document.createElement("a"),F=t("preprendIcon"),K=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Q=m.element;c(Q),h(N,R);let $=d();u(K,F),Q.append(K,M,N,$),document.body.appendChild(Q)}o?(M.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function G_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PS(){let n=Ef()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W_(){return!PS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function If(){try{return typeof indexedDB=="object"}catch{return!1}}function K_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var kS="FirebaseError",Wt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kS,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uo.prototype.create)}},Uo=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?OS(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Wt(i,c,r)}};function OS(n,e){return n.replace(FS,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var FS=/\{\$([^}]+)}/g;function ni(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(L_(o)&&L_(s)){if(!ni(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function L_(n){return n!==null&&typeof n=="object"}var T4=14400*1e3;function ri(n){return n&&n._delegate?n._delegate:n}var Kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ar="[DEFAULT]";var Df=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Xa;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VS(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LS(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LS(n){return n===ar?void 0:n}function VS(n){return n.instantiationMode==="EAGER"}var ec=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Df(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var BS=[],te=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(te||{}),jS={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},US=te.INFO,HS={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},$S=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=HS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ii=class{constructor(e){this.name=e,this._logLevel=US,this._logHandler=$S,this._userLogHandler=null,BS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var zS=(n,e)=>e.some(t=>n instanceof t),Q_,Y_;function qS(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GS(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Z_=new WeakMap,Cf=new WeakMap,X_=new WeakMap,Tf=new WeakMap,Sf=new WeakMap;function WS(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(xt(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Z_.set(t,n)}).catch(()=>{}),Sf.set(e,n),e}function KS(n){if(Cf.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Cf.set(n,e)}var bf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||X_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function J_(n){bf=n(bf)}function QS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(tc(this),e,...t);return X_.set(r,e.sort?e.sort():[e]),xt(r)}:GS().includes(n)?function(...e){return n.apply(tc(this),e),xt(Z_.get(this))}:function(...e){return xt(n.apply(tc(this),e))}}function YS(n){return typeof n=="function"?QS(n):(n instanceof IDBTransaction&&KS(n),zS(n,qS())?new Proxy(n,bf):n)}function xt(n){if(n instanceof IDBRequest)return WS(n);if(Tf.has(n))return Tf.get(n);let e=YS(n);return e!==n&&(Tf.set(n,e),Sf.set(e,n)),e}var tc=n=>Sf.get(n);function tE(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=xt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(xt(s.result),u.oldVersion,u.newVersion,xt(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var ZS=["get","getKey","getAll","getAllKeys","count"],XS=["put","add","delete","clear"],Af=new Map;function eE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=XS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZS.includes(t)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return Af.set(e,o),o}J_(n=>Ee(X({},n),{get:(e,t,r)=>eE(e,t)||n.get(e,t,r),has:(e,t)=>!!eE(e,t)||n.has(e,t)}));var Nf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JS(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function JS(n){return n.getComponent()?.type==="VERSION"}var Rf="@firebase/app",nE="0.14.6";var Qt=new ii("@firebase/app"),eA="@firebase/app-compat",tA="@firebase/analytics-compat",nA="@firebase/analytics",rA="@firebase/app-check-compat",iA="@firebase/app-check",oA="@firebase/auth",sA="@firebase/auth-compat",aA="@firebase/database",cA="@firebase/data-connect",uA="@firebase/database-compat",lA="@firebase/functions",dA="@firebase/functions-compat",fA="@firebase/installations",hA="@firebase/installations-compat",pA="@firebase/messaging",gA="@firebase/messaging-compat",mA="@firebase/performance",yA="@firebase/performance-compat",vA="@firebase/remote-config",_A="@firebase/remote-config-compat",EA="@firebase/storage",wA="@firebase/storage-compat",IA="@firebase/firestore",DA="@firebase/ai",TA="@firebase/firestore-compat",CA="firebase",bA="12.6.0";var xf="[DEFAULT]",SA={[Rf]:"fire-core",[eA]:"fire-core-compat",[nA]:"fire-analytics",[tA]:"fire-analytics-compat",[iA]:"fire-app-check",[rA]:"fire-app-check-compat",[oA]:"fire-auth",[sA]:"fire-auth-compat",[aA]:"fire-rtdb",[cA]:"fire-data-connect",[uA]:"fire-rtdb-compat",[lA]:"fire-fn",[dA]:"fire-fn-compat",[fA]:"fire-iid",[hA]:"fire-iid-compat",[pA]:"fire-fcm",[gA]:"fire-fcm-compat",[mA]:"fire-perf",[yA]:"fire-perf-compat",[vA]:"fire-rc",[_A]:"fire-rc-compat",[EA]:"fire-gcs",[wA]:"fire-gcs-compat",[IA]:"fire-fst",[TA]:"fire-fst-compat",[DA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};var nc=new Map,AA=new Map,Pf=new Map;function rE(n,e){try{n.container.addComponent(e)}catch(t){Qt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ho(n){let e=n.name;if(Pf.has(e))return Qt.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,n);for(let t of nc.values())rE(t,n);for(let t of AA.values())rE(t,n);return!0}function aE(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cE(n){return n==null?!1:n.settings!==void 0}var MA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new Uo("app","Firebase",MA);var kf=class{constructor(e,t,r){this._isDeleted=!1,this._options=X({},e),this._config=X({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}};var uE=bA;function Lf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=X({name:xf,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(t||(t=wf()),!t)throw Cn.create("no-options");let o=nc.get(i);if(o){if(ni(t,o.options)&&ni(r,o.config))return o;throw Cn.create("duplicate-app",{appName:i})}let s=new ec(i);for(let u of Pf.values())s.addComponent(u);let c=new kf(t,r,s);return nc.set(i,c),c}function lE(n=xf){let e=nc.get(n);if(!e&&n===xf&&wf())return Lf();if(!e)throw Cn.create("no-app",{appName:n});return e}function bn(n,e,t){let r=SA[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qt.warn(s.join(" "));return}Ho(new Kt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var NA="firebase-heartbeat-database",RA=1,$o="firebase-heartbeat-store",Mf=null;function dE(){return Mf||(Mf=tE(NA,RA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($o)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cn.create("idb-open",{originalErrorMessage:n.message})})),Mf}async function xA(n){try{let t=(await dE()).transaction($o),r=await t.objectStore($o).get(fE(n));return await t.done,r}catch(e){if(e instanceof Wt)Qt.warn(e.message);else{let t=Cn.create("idb-get",{originalErrorMessage:e?.message});Qt.warn(t.message)}}}async function iE(n,e){try{let r=(await dE()).transaction($o,"readwrite");await r.objectStore($o).put(e,fE(n)),await r.done}catch(t){if(t instanceof Wt)Qt.warn(t.message);else{let r=Cn.create("idb-set",{originalErrorMessage:t?.message});Qt.warn(r.message)}}}function fE(n){return`${n.name}!${n.options.appId}`}var PA=1024,kA=30,Of=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ff(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>kA){let i=FA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=oE(),{heartbeatsToSend:t,unsentEntries:r}=OA(this._heartbeatsCache.heartbeats),i=jo(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Qt.warn(e),""}}};function oE(){return new Date().toISOString().substring(0,10)}function OA(n,e=PA){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sE(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),sE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ff=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return If()?K_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await xA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function sE(n){return jo(JSON.stringify({version:2,heartbeats:n})).length}function FA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function LA(n){Ho(new Kt("platform-logger",e=>new Nf(e),"PRIVATE")),Ho(new Kt("heartbeat",e=>new Of(e),"PRIVATE")),bn(Rf,nE,n),bn(Rf,nE,"esm2020"),bn("fire-js","")}LA("");var VA="firebase",BA="12.7.0";bn(VA,BA,"app");var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pE={};var Yt,Vf;(function(){var n;function e(E,y){function v(){}v.prototype=y.prototype,E.F=y.prototype,E.prototype=new v,E.prototype.constructor=E,E.D=function(D,I,C){for(var _=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)_[Ge-2]=arguments[Ge];return y.prototype[I].apply(D,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,v){v||(v=0);let D=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)D[I]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(I=0;I<16;++I)D[I]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=E.g[0],v=E.g[1],I=E.g[2];let C=E.g[3],_;_=y+(C^v&(I^C))+D[0]+3614090360&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(I^y&(v^I))+D[1]+3905402710&4294967295,C=y+(_<<12&4294967295|_>>>20),_=I+(v^C&(y^v))+D[2]+606105819&4294967295,I=C+(_<<17&4294967295|_>>>15),_=v+(y^I&(C^y))+D[3]+3250441966&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(C^v&(I^C))+D[4]+4118548399&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(I^y&(v^I))+D[5]+1200080426&4294967295,C=y+(_<<12&4294967295|_>>>20),_=I+(v^C&(y^v))+D[6]+2821735955&4294967295,I=C+(_<<17&4294967295|_>>>15),_=v+(y^I&(C^y))+D[7]+4249261313&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(C^v&(I^C))+D[8]+1770035416&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(I^y&(v^I))+D[9]+2336552879&4294967295,C=y+(_<<12&4294967295|_>>>20),_=I+(v^C&(y^v))+D[10]+4294925233&4294967295,I=C+(_<<17&4294967295|_>>>15),_=v+(y^I&(C^y))+D[11]+2304563134&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(C^v&(I^C))+D[12]+1804603682&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(I^y&(v^I))+D[13]+4254626195&4294967295,C=y+(_<<12&4294967295|_>>>20),_=I+(v^C&(y^v))+D[14]+2792965006&4294967295,I=C+(_<<17&4294967295|_>>>15),_=v+(y^I&(C^y))+D[15]+1236535329&4294967295,v=I+(_<<22&4294967295|_>>>10),_=y+(I^C&(v^I))+D[1]+4129170786&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^I&(y^v))+D[6]+3225465664&4294967295,C=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(C^y))+D[11]+643717713&4294967295,I=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(I^C))+D[0]+3921069994&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(I^C&(v^I))+D[5]+3593408605&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^I&(y^v))+D[10]+38016083&4294967295,C=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(C^y))+D[15]+3634488961&4294967295,I=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(I^C))+D[4]+3889429448&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(I^C&(v^I))+D[9]+568446438&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^I&(y^v))+D[14]+3275163606&4294967295,C=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(C^y))+D[3]+4107603335&4294967295,I=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(I^C))+D[8]+1163531501&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(I^C&(v^I))+D[13]+2850285829&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^I&(y^v))+D[2]+4243563512&4294967295,C=y+(_<<9&4294967295|_>>>23),_=I+(y^v&(C^y))+D[7]+1735328473&4294967295,I=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(I^C))+D[12]+2368359562&4294967295,v=I+(_<<20&4294967295|_>>>12),_=y+(v^I^C)+D[5]+4294588738&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^I)+D[8]+2272392833&4294967295,C=y+(_<<11&4294967295|_>>>21),_=I+(C^y^v)+D[11]+1839030562&4294967295,I=C+(_<<16&4294967295|_>>>16),_=v+(I^C^y)+D[14]+4259657740&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(v^I^C)+D[1]+2763975236&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^I)+D[4]+1272893353&4294967295,C=y+(_<<11&4294967295|_>>>21),_=I+(C^y^v)+D[7]+4139469664&4294967295,I=C+(_<<16&4294967295|_>>>16),_=v+(I^C^y)+D[10]+3200236656&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(v^I^C)+D[13]+681279174&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^I)+D[0]+3936430074&4294967295,C=y+(_<<11&4294967295|_>>>21),_=I+(C^y^v)+D[3]+3572445317&4294967295,I=C+(_<<16&4294967295|_>>>16),_=v+(I^C^y)+D[6]+76029189&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(v^I^C)+D[9]+3654602809&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^I)+D[12]+3873151461&4294967295,C=y+(_<<11&4294967295|_>>>21),_=I+(C^y^v)+D[15]+530742520&4294967295,I=C+(_<<16&4294967295|_>>>16),_=v+(I^C^y)+D[2]+3299628645&4294967295,v=I+(_<<23&4294967295|_>>>9),_=y+(I^(v|~C))+D[0]+4096336452&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~I))+D[7]+1126891415&4294967295,C=y+(_<<10&4294967295|_>>>22),_=I+(y^(C|~v))+D[14]+2878612391&4294967295,I=C+(_<<15&4294967295|_>>>17),_=v+(C^(I|~y))+D[5]+4237533241&4294967295,v=I+(_<<21&4294967295|_>>>11),_=y+(I^(v|~C))+D[12]+1700485571&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~I))+D[3]+2399980690&4294967295,C=y+(_<<10&4294967295|_>>>22),_=I+(y^(C|~v))+D[10]+4293915773&4294967295,I=C+(_<<15&4294967295|_>>>17),_=v+(C^(I|~y))+D[1]+2240044497&4294967295,v=I+(_<<21&4294967295|_>>>11),_=y+(I^(v|~C))+D[8]+1873313359&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~I))+D[15]+4264355552&4294967295,C=y+(_<<10&4294967295|_>>>22),_=I+(y^(C|~v))+D[6]+2734768916&4294967295,I=C+(_<<15&4294967295|_>>>17),_=v+(C^(I|~y))+D[13]+1309151649&4294967295,v=I+(_<<21&4294967295|_>>>11),_=y+(I^(v|~C))+D[4]+4149444226&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~I))+D[11]+3174756917&4294967295,C=y+(_<<10&4294967295|_>>>22),_=I+(y^(C|~v))+D[2]+718787259&4294967295,I=C+(_<<15&4294967295|_>>>17),_=v+(C^(I|~y))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+C&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);let v=y-this.blockSize,D=this.C,I=this.h,C=0;for(;C<y;){if(I==0)for(;C<=v;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<y;)if(D[I++]=E.charCodeAt(C++),I==this.blockSize){i(this,D),I=0;break}}else for(;C<y;)if(D[I++]=E[C++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var v=E.length-8;v<E.length;++v)E[v]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,v=0;v<4;++v)for(let D=0;D<32;D+=8)E[y++]=this.g[v]>>>D&255;return E};function o(E,y){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=y(E)}function s(E,y){this.h=y;let v=[],D=!0;for(let I=E.length-1;I>=0;I--){let C=E[I]|0;D&&C==y||(v[I]=C,D=!1)}this.g=v}var c={};function u(E){return-128<=E&&E<128?o(E,function(y){return new s([y|0],y<0?-1:0)}):new s([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(E<0)return N(d(-E));let y=[],v=1;for(let D=0;E>=v;D++)y[D]=E/v|0,v*=4294967296;return new s(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(h(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');let v=d(Math.pow(y,8)),D=g;for(let C=0;C<E.length;C+=8){var I=Math.min(8,E.length-C);let _=parseInt(E.substring(C,C+I),y);I<8?(I=d(Math.pow(y,I)),D=D.j(I).add(d(_))):(D=D.j(v),D=D.add(d(_)))}return D}var g=u(0),m=u(1),w=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();let E=0,y=1;for(let v=0;v<this.g.length;v++){let D=this.i(v);E+=(D>=0?D:4294967296+D)*y,y*=4294967296}return E},n.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(M(this))return"0";if(R(this))return"-"+N(this).toString(E);let y=d(Math.pow(E,6));var v=this;let D="";for(;;){let I=$(v,y).g;v=F(v,I.j(y));let C=((v.g.length>0?v.g[0]:v.h)>>>0).toString(E);if(v=I,M(v))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},n.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function M(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function R(E){return E.h==-1}n.l=function(E){return E=F(this,E),R(E)?-1:M(E)?0:1};function N(E){let y=E.g.length,v=[];for(let D=0;D<y;D++)v[D]=~E.g[D];return new s(v,~E.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(E){let y=Math.max(this.g.length,E.g.length),v=[],D=0;for(let I=0;I<=y;I++){let C=D+(this.i(I)&65535)+(E.i(I)&65535),_=(C>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);D=_>>>16,C&=65535,_&=65535,v[I]=_<<16|C}return new s(v,v[v.length-1]&-2147483648?-1:0)};function F(E,y){return E.add(N(y))}n.j=function(E){if(M(this)||M(E))return g;if(R(this))return R(E)?N(this).j(N(E)):N(N(this).j(E));if(R(E))return N(this.j(N(E)));if(this.l(w)<0&&E.l(w)<0)return d(this.m()*E.m());let y=this.g.length+E.g.length,v=[];for(var D=0;D<2*y;D++)v[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<E.g.length;I++){let C=this.i(D)>>>16,_=this.i(D)&65535,Ge=E.i(I)>>>16,on=E.i(I)&65535;v[2*D+2*I]+=_*on,K(v,2*D+2*I),v[2*D+2*I+1]+=C*on,K(v,2*D+2*I+1),v[2*D+2*I+1]+=_*Ge,K(v,2*D+2*I+1),v[2*D+2*I+2]+=C*Ge,K(v,2*D+2*I+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new s(v,0)};function K(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function Q(E,y){this.g=E,this.h=y}function $(E,y){if(M(y))throw Error("division by zero");if(M(E))return new Q(g,g);if(R(E))return y=$(N(E),y),new Q(N(y.g),N(y.h));if(R(y))return y=$(E,N(y)),new Q(N(y.g),y.h);if(E.g.length>30){if(R(E)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,D=y;D.l(E)<=0;)v=re(v),D=re(D);var I=k(v,1),C=k(D,1);for(D=k(D,2),v=k(v,2);!M(D);){var _=C.add(D);_.l(E)<=0&&(I=I.add(v),C=_),D=k(D,1),v=k(v,1)}return y=F(E,I.j(y)),new Q(I,y)}for(I=g;E.l(y)>=0;){for(v=Math.max(1,Math.floor(E.m()/y.m())),D=Math.ceil(Math.log(v)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=d(v),_=C.j(y);R(_)||_.l(E)>0;)v-=D,C=d(v),_=C.j(y);M(C)&&(C=m),I=I.add(C),E=F(E,_)}return new Q(I,E)}n.B=function(E){return $(this,E).h},n.and=function(E){let y=Math.max(this.g.length,E.g.length),v=[];for(let D=0;D<y;D++)v[D]=this.i(D)&E.i(D);return new s(v,this.h&E.h)},n.or=function(E){let y=Math.max(this.g.length,E.g.length),v=[];for(let D=0;D<y;D++)v[D]=this.i(D)|E.i(D);return new s(v,this.h|E.h)},n.xor=function(E){let y=Math.max(this.g.length,E.g.length),v=[];for(let D=0;D<y;D++)v[D]=this.i(D)^E.i(D);return new s(v,this.h^E.h)};function re(E){let y=E.g.length+1,v=[];for(let D=0;D<y;D++)v[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(v,E.h)}function k(E,y){let v=y>>5;y%=32;let D=E.g.length-v,I=[];for(let C=0;C<D;C++)I[C]=y>0?E.i(C+v)>>>y|E.i(C+v+1)<<32-y:E.i(C+v);return new s(I,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Vf=pE.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Yt=pE.Integer=s}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zt={};var Bf,jA,oi,jf,zo,ic,Uf,Hf,$f;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var l=0;l<a.length;++l){var f=a[l];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var f=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in f))break e;f=f[T]}a=a[a.length-1],p=f[a],l=l(p),l!=p&&l!=null&&e(f,a,{configurable:!0,writable:!0,value:l})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(l){var f=[],p;for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&f.push([p,l[p]]);return f}});var o=o||{},s=this||self;function c(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function u(a,l,f){return a.call.apply(a.bind,arguments)}function d(a,l,f){return d=u,d.apply(null,arguments)}function h(a,l){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function g(a,l){function f(){}f.prototype=l.prototype,a.Z=l.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(p,T,b){for(var x=Array(arguments.length-2),q=2;q<arguments.length;q++)x[q-2]=arguments[q];return l.prototype[T].apply(p,x)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){let l=a.length;if(l>0){let f=Array(l);for(let p=0;p<l;p++)f[p]=a[p];return f}return[]}function M(a,l){for(let p=1;p<arguments.length;p++){let T=arguments[p];var f=typeof T;if(f=f!="object"?f:T?Array.isArray(T)?"array":f:"null",f=="array"||f=="object"&&typeof T.length=="number"){f=a.length||0;let b=T.length||0;a.length=f+b;for(let x=0;x<b;x++)a[f+x]=T[x]}else a.push(T)}}class R{constructor(l,f){this.i=l,this.j=f,this.h=0,this.g=null}get(){let l;return this.h>0?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function N(a){s.setTimeout(()=>{throw a},0)}function F(){var a=E;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class K{constructor(){this.h=this.g=null}add(l,f){let p=Q.get();p.set(l,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Q=new R(()=>new $,a=>a.reset());class ${constructor(){this.next=this.g=this.h=null}set(l,f){this.h=l,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let re,k=!1,E=new K,y=()=>{let a=Promise.resolve(void 0);re=()=>{a.then(v)}};function v(){for(var a;a=F();){try{a.h.call(a.g)}catch(f){N(f)}var l=Q;l.j(a),l.h<100&&(l.h++,a.next=l.g,l.g=a)}k=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,l),s.removeEventListener("test",f,l)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function Ge(a,l){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,l)}g(Ge,I),Ge.prototype.init=function(a,l){let f=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget,l||(f=="mouseover"?l=a.fromElement:f=="mouseout"&&(l=a.toElement)),this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var on="closure_listenable_"+(Math.random()*1e6|0),PI=0;function kI(a,l,f,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=f,this.capture=!!p,this.ha=T,this.key=++PI,this.da=this.fa=!1}function ds(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function fs(a,l,f){for(let p in a)l.call(f,a[p],p,a)}function OI(a,l){for(let f in a)l.call(void 0,a[f],f,a)}function Zp(a){let l={};for(let f in a)l[f]=a[f];return l}let Xp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jp(a,l){let f,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(f in p)a[f]=p[f];for(let b=0;b<Xp.length;b++)f=Xp[b],Object.prototype.hasOwnProperty.call(p,f)&&(a[f]=p[f])}}function hs(a){this.src=a,this.g={},this.h=0}hs.prototype.add=function(a,l,f,p,T){let b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);let x=su(a,l,p,T);return x>-1?(l=a[x],f||(l.fa=!1)):(l=new kI(l,this.src,b,!!p,T),l.fa=f,a.push(l)),l};function ou(a,l){let f=l.type;if(f in a.g){var p=a.g[f],T=Array.prototype.indexOf.call(p,l,void 0),b;(b=T>=0)&&Array.prototype.splice.call(p,T,1),b&&(ds(l),a.g[f].length==0&&(delete a.g[f],a.h--))}}function su(a,l,f,p){for(let T=0;T<a.length;++T){let b=a[T];if(!b.da&&b.listener==l&&b.capture==!!f&&b.ha==p)return T}return-1}var au="closure_lm_"+(Math.random()*1e6|0),cu={};function eg(a,l,f,p,T){if(p&&p.once)return ng(a,l,f,p,T);if(Array.isArray(l)){for(let b=0;b<l.length;b++)eg(a,l[b],f,p,T);return null}return f=fu(f),a&&a[on]?a.J(l,f,c(p)?!!p.capture:!!p,T):tg(a,l,f,!1,p,T)}function tg(a,l,f,p,T,b){if(!l)throw Error("Invalid event type");let x=c(T)?!!T.capture:!!T,q=lu(a);if(q||(a[au]=q=new hs(a)),f=q.add(l,f,p,x,b),f.proxy)return f;if(p=FI(),f.proxy=p,p.src=a,p.listener=f,a.addEventListener)C||(T=x),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(ig(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function FI(){function a(f){return l.call(a.src,a.listener,f)}let l=LI;return a}function ng(a,l,f,p,T){if(Array.isArray(l)){for(let b=0;b<l.length;b++)ng(a,l[b],f,p,T);return null}return f=fu(f),a&&a[on]?a.K(l,f,c(p)?!!p.capture:!!p,T):tg(a,l,f,!0,p,T)}function rg(a,l,f,p,T){if(Array.isArray(l))for(var b=0;b<l.length;b++)rg(a,l[b],f,p,T);else p=c(p)?!!p.capture:!!p,f=fu(f),a&&a[on]?(a=a.i,b=String(l).toString(),b in a.g&&(l=a.g[b],f=su(l,f,p,T),f>-1&&(ds(l[f]),Array.prototype.splice.call(l,f,1),l.length==0&&(delete a.g[b],a.h--)))):a&&(a=lu(a))&&(l=a.g[l.toString()],a=-1,l&&(a=su(l,f,p,T)),(f=a>-1?l[a]:null)&&uu(f))}function uu(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[on])ou(l.i,a);else{var f=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(f,p,a.capture):l.detachEvent?l.detachEvent(ig(f),p):l.addListener&&l.removeListener&&l.removeListener(p),(f=lu(l))?(ou(f,a),f.h==0&&(f.src=null,l[au]=null)):ds(a)}}}function ig(a){return a in cu?cu[a]:cu[a]="on"+a}function LI(a,l){if(a.da)a=!0;else{l=new Ge(l,this);let f=a.listener,p=a.ha||a.src;a.fa&&uu(a),a=f.call(p,l)}return a}function lu(a){return a=a[au],a instanceof hs?a:null}var du="__closure_events_fn_"+(Math.random()*1e9>>>0);function fu(a){return typeof a=="function"?a:(a[du]||(a[du]=function(l){return a.handleEvent(l)}),a[du])}function ke(){D.call(this),this.i=new hs(this),this.M=this,this.G=null}g(ke,D),ke.prototype[on]=!0,ke.prototype.removeEventListener=function(a,l,f,p){rg(this,a,l,f,p)};function Ue(a,l){var f,p=a.G;if(p)for(f=[];p;p=p.G)f.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new I(l,a);else if(l instanceof I)l.target=l.target||a;else{var T=l;l=new I(p,a),Jp(l,T)}T=!0;let b,x;if(f)for(x=f.length-1;x>=0;x--)b=l.g=f[x],T=ps(b,p,!0,l)&&T;if(b=l.g=a,T=ps(b,p,!0,l)&&T,T=ps(b,p,!1,l)&&T,f)for(x=0;x<f.length;x++)b=l.g=f[x],T=ps(b,p,!1,l)&&T}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var a=this.i;for(let l in a.g){let f=a.g[l];for(let p=0;p<f.length;p++)ds(f[p]);delete a.g[l],a.h--}}this.G=null},ke.prototype.J=function(a,l,f,p){return this.i.add(String(a),l,!1,f,p)},ke.prototype.K=function(a,l,f,p){return this.i.add(String(a),l,!0,f,p)};function ps(a,l,f,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();let T=!0;for(let b=0;b<l.length;++b){let x=l[b];if(x&&!x.da&&x.capture==f){let q=x.listener,Se=x.ha||x.src;x.fa&&ou(a.i,x),T=q.call(Se,p)!==!1&&T}}return T&&!p.defaultPrevented}function VI(a,l){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(l)>2147483647?-1:s.setTimeout(a,l||0)}function og(a){a.g=VI(()=>{a.g=null,a.i&&(a.i=!1,og(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class BI extends D{constructor(l,f){super(),this.m=l,this.l=f,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:og(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(a){D.call(this),this.h=a,this.g={}}g(Ri,D);var sg=[];function ag(a){fs(a.g,function(l,f){this.g.hasOwnProperty(f)&&uu(l)},a),a.g={}}Ri.prototype.N=function(){Ri.Z.N.call(this),ag(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hu=s.JSON.stringify,jI=s.JSON.parse,UI=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function cg(){}function ug(){}var xi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pu(){I.call(this,"d")}g(pu,I);function gu(){I.call(this,"c")}g(gu,I);var kn={},lg=null;function gs(){return lg=lg||new ke}kn.Ia="serverreachability";function dg(a){I.call(this,kn.Ia,a)}g(dg,I);function Pi(a){let l=gs();Ue(l,new dg(l))}kn.STAT_EVENT="statevent";function fg(a,l){I.call(this,kn.STAT_EVENT,a),this.stat=l}g(fg,I);function He(a){let l=gs();Ue(l,new fg(l,a))}kn.Ja="timingevent";function hg(a,l){I.call(this,kn.Ja,a),this.size=l}g(hg,I);function ki(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},l)}function Oi(){this.g=!0}Oi.prototype.ua=function(){this.g=!1};function HI(a,l,f,p,T,b){a.info(function(){if(a.g)if(b){var x="",q=b.split("&");for(let de=0;de<q.length;de++){var Se=q[de].split("=");if(Se.length>1){let Me=Se[0];Se=Se[1];let Dt=Me.split("_");x=Dt.length>=2&&Dt[1]=="type"?x+(Me+"="+Se+"&"):x+(Me+"=redacted&")}}}else x=null;else x=b;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+f+`
`+x})}function $I(a,l,f,p,T,b,x){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+f+`
`+b+" "+x})}function Ir(a,l,f,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+qI(a,f)+(p?" "+p:"")})}function zI(a,l){a.info(function(){return"TIMEOUT: "+l})}Oi.prototype.info=function(){};function qI(a,l){if(!a.g)return l;if(!l)return null;try{let b=JSON.parse(l);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var p=f[1];if(Array.isArray(p)&&!(p.length<1)){var T=p[0];if(T!="noop"&&T!="stop"&&T!="close")for(let x=1;x<p.length;x++)p[x]=""}}}}return hu(b)}catch{return l}}var ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gg;function mu(){}g(mu,cg),mu.prototype.g=function(){return new XMLHttpRequest},gg=new mu;function Fi(a){return encodeURIComponent(String(a))}function GI(a){var l=1;a=a.split(":");let f=[];for(;l>0&&a.length;)f.push(a.shift()),l--;return a.length&&f.push(a.join(":")),f}function sn(a,l,f,p){this.j=a,this.i=l,this.l=f,this.S=p||1,this.V=new Ri(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mg}function mg(){this.i=null,this.g="",this.h=!1}var yg={},yu={};function vu(a,l,f){a.M=1,a.A=vs(It(l)),a.u=f,a.R=!0,vg(a,null)}function vg(a,l){a.F=Date.now(),ys(a),a.B=It(a.A);var f=a.B,p=a.S;Array.isArray(p)||(p=[String(p)]),Rg(f.i,"t",p),a.C=0,f=a.j.L,a.h=new mg,a.g=Qg(a.j,f?l:null,!a.u),a.P>0&&(a.O=new BI(d(a.Y,a,a.g),a.P)),l=a.V,f=a.g,p=a.ba;var T="readystatechange";Array.isArray(T)||(T&&(sg[0]=T.toString()),T=sg);for(let b=0;b<T.length;b++){let x=eg(f,T[b],p||l.handleEvent,!1,l.h||l);if(!x)break;l.g[x.key]=x}l=a.J?Zp(a.J):{},a.u?(a.v||(a.v="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,l)):(a.v="GET",a.g.ea(a.B,a.v,null,l)),Pi(),HI(a.i,a.v,a.B,a.l,a.S,a.u)}sn.prototype.ba=function(a){a=a.target;let l=this.O;l&&un(a)==3?l.j():this.Y(a)},sn.prototype.Y=function(a){try{if(a==this.g)e:{let q=un(this.g),Se=this.g.ya(),de=this.g.ca();if(!(q<3)&&(q!=3||this.g&&(this.h.h||this.g.la()||Vg(this.g)))){this.K||q!=4||Se==7||(Se==8||de<=0?Pi(3):Pi(2)),_u(this);var l=this.g.ca();this.X=l;var f=WI(this);if(this.o=l==200,$I(this.i,this.v,this.B,this.l,this.S,q,l),this.o){if(this.U&&!this.L){t:{if(this.g){var p,T=this.g;if((p=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(p)){var b=p;break t}}b=null}if(a=b)Ir(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Eu(this,a);else{this.o=!1,this.m=3,He(12),On(this),Li(this);break e}}if(this.R){a=!0;let Me;for(;!this.K&&this.C<f.length;)if(Me=KI(this,f),Me==yu){q==4&&(this.m=4,He(14),a=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==yg){this.m=4,He(15),Ir(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Ir(this.i,this.l,Me,null),Eu(this,Me);if(_g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),q!=4||f.length!=0||this.h.h||(this.m=1,He(16),a=!1),this.o=this.o&&a,!a)Ir(this.i,this.l,f,"[Invalid Chunked Response]"),On(this),Li(this);else if(f.length>0&&!this.W){this.W=!0;var x=this.j;x.g==this&&x.aa&&!x.P&&(x.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Su(x),x.P=!0,He(11))}}else Ir(this.i,this.l,f,null),Eu(this,f);q==4&&On(this),this.o&&!this.K&&(q==4?qg(this.j,this):(this.o=!1,ys(this)))}else cD(this.g),l==400&&f.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),On(this),Li(this)}}}catch{}finally{}};function WI(a){if(!_g(a))return a.g.la();let l=Vg(a.g);if(l==="")return"";let f="",p=l.length,T=un(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return On(a),Li(a),"";a.h.i=new s.TextDecoder}for(let b=0;b<p;b++)a.h.h=!0,f+=a.h.i.decode(l[b],{stream:!(T&&b==p-1)});return l.length=0,a.h.g+=f,a.C=0,a.h.g}function _g(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function KI(a,l){var f=a.C,p=l.indexOf(`
`,f);return p==-1?yu:(f=Number(l.substring(f,p)),isNaN(f)?yg:(p+=1,p+f>l.length?yu:(l=l.slice(p,p+f),a.C=p+f,l)))}sn.prototype.cancel=function(){this.K=!0,On(this)};function ys(a){a.T=Date.now()+a.H,Eg(a,a.H)}function Eg(a,l){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ki(d(a.aa,a),l)}function _u(a){a.D&&(s.clearTimeout(a.D),a.D=null)}sn.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(zI(this.i,this.B),this.M!=2&&(Pi(),He(17)),On(this),this.m=2,Li(this)):Eg(this,this.T-a)};function Li(a){a.j.I==0||a.K||qg(a.j,a)}function On(a){_u(a);var l=a.O;l&&typeof l.dispose=="function"&&l.dispose(),a.O=null,ag(a.V),a.g&&(l=a.g,a.g=null,l.abort(),l.dispose())}function Eu(a,l){try{var f=a.j;if(f.I!=0&&(f.g==a||wu(f.h,a))){if(!a.L&&wu(f.h,a)&&f.I==3){try{var p=f.Ba.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Ts(f),Is(f);else break e;bu(f),He(18)}}else f.xa=T[1],0<f.xa-f.K&&T[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ki(d(f.Va,f),6e3));Dg(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ln(f,11)}else if((a.L||f.g==a)&&Ts(f),!_(l))for(T=f.Ba.g.parse(l),l=0;l<T.length;l++){let de=T[l],Me=de[0];if(!(Me<=f.K))if(f.K=Me,de=de[1],f.I==2)if(de[0]=="c"){f.M=de[1],f.ba=de[2];let Dt=de[3];Dt!=null&&(f.ka=Dt,f.j.info("VER="+f.ka));let Vn=de[4];Vn!=null&&(f.za=Vn,f.j.info("SVER="+f.za));let ln=de[5];ln!=null&&typeof ln=="number"&&ln>0&&(p=1.5*ln,f.O=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;let dn=a.g;if(dn){let bs=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var b=p.h;b.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Iu(b,b.h),b.h=null))}if(p.G){let Au=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(p.wa=Au,ge(p.J,p.G,Au))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),p=f;var x=a;if(p.na=Kg(p,p.L?p.ba:null,p.W),x.L){Tg(p.h,x);var q=x,Se=p.O;Se&&(q.H=Se),q.D&&(_u(q),ys(q)),p.g=x}else $g(p);f.i.length>0&&Ds(f)}else de[0]!="stop"&&de[0]!="close"||Ln(f,7);else f.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Ln(f,7):Cu(f):de[0]!="noop"&&f.l&&f.l.qa(de),f.A=0)}}Pi(4)}catch{}}var QI=class{constructor(a,l){this.g=a,this.map=l}};function wg(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ig(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Dg(a){return a.h?1:a.g?a.g.size:0}function wu(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Iu(a,l){a.g?a.g.add(l):a.h=l}function Tg(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}wg.prototype.cancel=function(){if(this.i=Cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Cg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let f of a.g.values())l=l.concat(f.G);return l}return w(a.i)}var bg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YI(a,l){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let p=a[f].indexOf("="),T,b=null;p>=0?(T=a[f].substring(0,p),b=a[f].substring(p+1)):T=a[f],l(T,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function an(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let l;a instanceof an?(this.l=a.l,Vi(this,a.j),this.o=a.o,this.g=a.g,Bi(this,a.u),this.h=a.h,Du(this,xg(a.i)),this.m=a.m):a&&(l=String(a).match(bg))?(this.l=!1,Vi(this,l[1]||"",!0),this.o=ji(l[2]||""),this.g=ji(l[3]||"",!0),Bi(this,l[4]),this.h=ji(l[5]||"",!0),Du(this,l[6]||"",!0),this.m=ji(l[7]||"")):(this.l=!1,this.i=new Hi(null,this.l))}an.prototype.toString=function(){let a=[];var l=this.j;l&&a.push(Ui(l,Sg,!0),":");var f=this.g;return(f||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ui(l,Sg,!0),"@"),a.push(Fi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ui(f,f.charAt(0)=="/"?JI:XI,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ui(f,tD)),a.join("")},an.prototype.resolve=function(a){let l=It(this),f=!!a.j;f?Vi(l,a.j):f=!!a.o,f?l.o=a.o:f=!!a.g,f?l.g=a.g:f=a.u!=null;var p=a.h;if(f)Bi(l,a.u);else if(f=!!a.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var T=l.h.lastIndexOf("/");T!=-1&&(p=l.h.slice(0,T+1)+p)}if(T=p,T==".."||T==".")p="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){p=T.lastIndexOf("/",0)==0,T=T.split("/");let b=[];for(let x=0;x<T.length;){let q=T[x++];q=="."?p&&x==T.length&&b.push(""):q==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),p&&x==T.length&&b.push("")):(b.push(q),p=!0)}p=b.join("/")}else p=T}return f?l.h=p:f=a.i.toString()!=="",f?Du(l,xg(a.i)):f=!!a.m,f&&(l.m=a.m),l};function It(a){return new an(a)}function Vi(a,l,f){a.j=f?ji(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Bi(a,l){if(l){if(l=Number(l),isNaN(l)||l<0)throw Error("Bad port number "+l);a.u=l}else a.u=null}function Du(a,l,f){l instanceof Hi?(a.i=l,nD(a.i,a.l)):(f||(l=Ui(l,eD)),a.i=new Hi(l,a.l))}function ge(a,l,f){a.i.set(l,f)}function vs(a){return ge(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ji(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ui(a,l,f){return typeof a=="string"?(a=encodeURI(a).replace(l,ZI),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sg=/[#\/\?@]/g,XI=/[#\?:]/g,JI=/[#\?]/g,eD=/[#\?@]/g,tD=/#/g;function Hi(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Fn(a){a.g||(a.g=new Map,a.h=0,a.i&&YI(a.i,function(l,f){a.add(decodeURIComponent(l.replace(/\+/g," ")),f)}))}n=Hi.prototype,n.add=function(a,l){Fn(this),this.i=null,a=Dr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(l),this.h+=1,this};function Ag(a,l){Fn(a),l=Dr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Mg(a,l){return Fn(a),l=Dr(a,l),a.g.has(l)}n.forEach=function(a,l){Fn(this),this.g.forEach(function(f,p){f.forEach(function(T){a.call(l,T,p,this)},this)},this)};function Ng(a,l){Fn(a);let f=[];if(typeof l=="string")Mg(a,l)&&(f=f.concat(a.g.get(Dr(a,l))));else for(a=Array.from(a.g.values()),l=0;l<a.length;l++)f=f.concat(a[l]);return f}n.set=function(a,l){return Fn(this),this.i=null,a=Dr(this,a),Mg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=Ng(this,a),a.length>0?String(a[0]):l):l};function Rg(a,l,f){Ag(a,l),f.length>0&&(a.i=null,a.g.set(Dr(a,l),w(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(let p=0;p<l.length;p++){var f=l[p];let T=Fi(f);f=Ng(this,f);for(let b=0;b<f.length;b++){let x=T;f[b]!==""&&(x+="="+Fi(f[b])),a.push(x)}}return this.i=a.join("&")};function xg(a){let l=new Hi;return l.i=a.i,a.g&&(l.g=new Map(a.g),l.h=a.h),l}function Dr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function nD(a,l){l&&!a.j&&(Fn(a),a.i=null,a.g.forEach(function(f,p){let T=p.toLowerCase();p!=T&&(Ag(this,p),Rg(this,T,f))},a)),a.j=l}function rD(a,l){let f=new Oi;if(s.Image){let p=new Image;p.onload=h(cn,f,"TestLoadImage: loaded",!0,l,p),p.onerror=h(cn,f,"TestLoadImage: error",!1,l,p),p.onabort=h(cn,f,"TestLoadImage: abort",!1,l,p),p.ontimeout=h(cn,f,"TestLoadImage: timeout",!1,l,p),s.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function iD(a,l){let f=new Oi,p=new AbortController,T=setTimeout(()=>{p.abort(),cn(f,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(b=>{clearTimeout(T),b.ok?cn(f,"TestPingServer: ok",!0,l):cn(f,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),cn(f,"TestPingServer: error",!1,l)})}function cn(a,l,f,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(f)}catch{}}function oD(){this.g=new UI}function _s(a){this.i=a.Sb||null,this.h=a.ab||!1}g(_s,cg),_s.prototype.g=function(){return new Es(this.i,this.h)};function Es(a,l){ke.call(this),this.H=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Es,ke),n=Es.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=l,this.readyState=1,zi(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let l={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(l.body=a),(this.H||s).fetch(new Request(this.D,l)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.B.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?$i(this):zi(this),this.readyState==3&&Pg(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,$i(this))},n.Na=function(a){this.g&&(this.response=a,$i(this))},n.ga=function(){this.g&&$i(this)};function $i(a){a.readyState=4,a.l=null,a.j=null,a.B=null,zi(a)}n.setRequestHeader=function(a,l){this.A.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var f=l.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=l.next();return a.join(`\r
`)};function zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kg(a){let l="";return fs(a,function(f,p){l+=p,l+=":",l+=f,l+=`\r
`}),l}function Tu(a,l,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=kg(f),typeof a=="string"?f!=null&&Fi(f):ge(a,l,f))}function ve(a){ke.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ve,ke);var sD=/^https?$/i,aD=["POST","PUT"];n=ve.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,l,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gg.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(b){Og(this,b);return}if(a=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)f.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let b of p.keys())f.set(b,p.get(b));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(aD,l,void 0)>=0)||p||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,x]of f)this.g.setRequestHeader(b,x);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){Og(this,b)}};function Og(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.o=5,Fg(a),ws(a)}function Fg(a){a.A||(a.A=!0,Ue(a,"complete"),Ue(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Ue(this,"complete"),Ue(this,"abort"),ws(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ws(this,!0)),ve.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lg(this):this.Xa())},n.Xa=function(){Lg(this)};function Lg(a){if(a.h&&typeof o<"u"){if(a.v&&un(a)==4)setTimeout(a.Ca.bind(a),0);else if(Ue(a,"readystatechange"),un(a)==4){a.h=!1;try{let b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var f;if(!(f=l)){var p;if(p=b===0){let x=String(a.D).match(bg)[1]||null;!x&&s.self&&s.self.location&&(x=s.self.location.protocol.slice(0,-1)),p=!sD.test(x?x.toLowerCase():"")}f=p}if(f)Ue(a,"complete"),Ue(a,"success");else{a.o=6;try{var T=un(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",Fg(a)}}finally{ws(a)}}}}function ws(a,l){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,l||Ue(a,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function un(a){return a.g?a.g.readyState:0}n.ca=function(){try{return un(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),jI(l)}};function Vg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cD(a){let l={};a=(a.g&&un(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(_(a[p]))continue;var f=GI(a[p]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let b=l[T]||[];l[T]=b,b.push(f)}OI(l,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(a,l,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||l}function Bg(a){this.za=0,this.i=[],this.j=new Oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qi("baseRetryDelayMs",5e3,a),this.Za=qi("retryDelaySeedMs",1e4,a),this.Ta=qi("forwardChannelMaxRetries",2,a),this.va=qi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new wg(a&&a.concurrentRequestLimit),this.Ba=new oD,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Bg.prototype,n.ka=8,n.I=1,n.connect=function(a,l,f,p){He(0),this.W=a,this.H=l||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.J=Kg(this,null,this.W),Ds(this)};function Cu(a){if(jg(a),a.I==3){var l=a.V++,f=It(a.J);if(ge(f,"SID",a.M),ge(f,"RID",l),ge(f,"TYPE","terminate"),Gi(a,f),l=new sn(a,a.j,l),l.M=2,l.A=vs(It(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(l.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=l.A,f=!0),f||(l.g=Qg(l.j,null),l.g.ea(l.A)),l.F=Date.now(),ys(l)}Wg(a)}function Is(a){a.g&&(Su(a),a.g.cancel(),a.g=null)}function jg(a){Is(a),a.v&&(s.clearTimeout(a.v),a.v=null),Ts(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Ds(a){if(!Ig(a.h)&&!a.m){a.m=!0;var l=a.Ea;re||y(),k||(re(),k=!0),E.add(l,a),a.D=0}}function uD(a,l){return Dg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=l.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ki(d(a.Ea,a,l),Gg(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new sn(this,this.j,a),b=this.o;if(this.U&&(b?(b=Zp(b),Jp(b,this.U)):b=this.U),this.u!==null||this.R||(T.J=b,b=null),this.S)e:{for(var l=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,l>4096){l=f;break e}if(l===4096||f===this.i.length-1){l=f+1;break e}}l=1e3}else l=1e3;l=Hg(this,T,l),f=It(this.J),ge(f,"RID",a),ge(f,"CVER",22),this.G&&ge(f,"X-HTTP-Session-Id",this.G),Gi(this,f),b&&(this.R?l="headers="+Fi(kg(b))+"&"+l:this.u&&Tu(f,this.u,b)),Iu(this.h,T),this.Ra&&ge(f,"TYPE","init"),this.S?(ge(f,"$req",l),ge(f,"SID","null"),T.U=!0,vu(T,f,null)):vu(T,f,l),this.I=2}}else this.I==3&&(a?Ug(this,a):this.i.length==0||Ig(this.h)||Ug(this))};function Ug(a,l){var f;l?f=l.l:f=a.V++;let p=It(a.J);ge(p,"SID",a.M),ge(p,"RID",f),ge(p,"AID",a.K),Gi(a,p),a.u&&a.o&&Tu(p,a.u,a.o),f=new sn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),l&&(a.i=l.G.concat(a.i)),l=Hg(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Iu(a.h,f),vu(f,p,l)}function Gi(a,l){a.H&&fs(a.H,function(f,p){ge(l,p,f)}),a.l&&fs({},function(f,p){ge(l,p,f)})}function Hg(a,l,f){f=Math.min(a.i.length,f);let p=a.l?d(a.l.Ka,a.l,a):null;e:{var T=a.i;let q=-1;for(;;){let Se=["count="+f];q==-1?f>0?(q=T[0].g,Se.push("ofs="+q)):q=0:Se.push("ofs="+q);let de=!0;for(let Me=0;Me<f;Me++){var b=T[Me].g;let Dt=T[Me].map;if(b-=q,b<0)q=Math.max(0,T[Me].g-100),de=!1;else try{b="req"+b+"_"||"";try{var x=Dt instanceof Map?Dt:Object.entries(Dt);for(let[Vn,ln]of x){let dn=ln;c(ln)&&(dn=hu(ln)),Se.push(b+Vn+"="+encodeURIComponent(dn))}}catch(Vn){throw Se.push(b+"type="+encodeURIComponent("_badmap")),Vn}}catch{p&&p(Dt)}}if(de){x=Se.join("&");break e}}x=void 0}return a=a.i.splice(0,f),l.G=a,x}function $g(a){if(!a.g&&!a.v){a.Y=1;var l=a.Da;re||y(),k||(re(),k=!0),E.add(l,a),a.A=0}}function bu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ki(d(a.Da,a),Gg(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,zg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ki(d(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),Is(this),zg(this))};function Su(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function zg(a){a.g=new sn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var l=It(a.na);ge(l,"RID","rpc"),ge(l,"SID",a.M),ge(l,"AID",a.K),ge(l,"CI",a.F?"0":"1"),!a.F&&a.ia&&ge(l,"TO",a.ia),ge(l,"TYPE","xmlhttp"),Gi(a,l),a.u&&a.o&&Tu(l,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=vs(It(l)),f.u=null,f.R=!0,vg(f,a)}n.Va=function(){this.C!=null&&(this.C=null,Is(this),bu(this),He(19))};function Ts(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function qg(a,l){var f=null;if(a.g==l){Ts(a),Su(a),a.g=null;var p=2}else if(wu(a.h,l))f=l.G,Tg(a.h,l),p=1;else return;if(a.I!=0){if(l.o)if(p==1){f=l.u?l.u.length:0,l=Date.now()-l.F;var T=a.D;p=gs(),Ue(p,new hg(p,f)),Ds(a)}else $g(a);else if(T=l.m,T==3||T==0&&l.X>0||!(p==1&&uD(a,l)||p==2&&bu(a)))switch(f&&f.length>0&&(l=a.h,l.i=l.i.concat(f)),T){case 1:Ln(a,5);break;case 4:Ln(a,10);break;case 3:Ln(a,6);break;default:Ln(a,2)}}}function Gg(a,l){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*l}function Ln(a,l){if(a.j.info("Error code "+l),l==2){var f=d(a.bb,a),p=a.Ua;let T=!p;p=new an(p||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Vi(p,"https"),vs(p),T?rD(p.toString(),f):iD(p.toString(),f)}else He(2);a.I=0,a.l&&a.l.pa(l),Wg(a),jg(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Wg(a){if(a.I=0,a.ja=[],a.l){let l=Cg(a.h);(l.length!=0||a.i.length!=0)&&(M(a.ja,l),M(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function Kg(a,l,f){var p=f instanceof an?It(f):new an(f);if(p.g!="")l&&(p.g=l+"."+p.g),Bi(p,p.u);else{var T=s.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;let b=new an(null);p&&Vi(b,p),l&&(b.g=l),T&&Bi(b,T),f&&(b.h=f),p=b}return f=a.G,l=a.wa,f&&l&&ge(p,f,l),ge(p,"VER",a.ka),Gi(a,p),p}function Qg(a,l,f){if(l&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Aa&&!a.ma?new ve(new _s({ab:f})):new ve(a.ma),l.Fa(a.L),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yg(){}n=Yg.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Cs(){}Cs.prototype.g=function(a,l){return new Qe(a,l)};function Qe(a,l){ke.call(this),this.g=new Bg(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.sa&&(a?a["X-WebChannel-Client-Profile"]=l.sa:a={"X-WebChannel-Client-Profile":l.sa}),this.g.U=a,(a=l&&l.Qb)&&!_(a)&&(this.g.u=a),this.A=l&&l.supportsCrossDomainXhr||!1,this.v=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!_(l)&&(this.g.G=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Tr(this)}g(Qe,ke),Qe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){Cu(this.g)},Qe.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=hu(a),a=f);l.i.push(new QI(l.Ya++,a)),l.I==3&&Ds(l)},Qe.prototype.N=function(){this.g.l=null,delete this.j,Cu(this.g),delete this.g,Qe.Z.N.call(this)};function Zg(a){pu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let f in l){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}g(Zg,pu);function Xg(){gu.call(this),this.status=1}g(Xg,gu);function Tr(a){this.g=a}g(Tr,Yg),Tr.prototype.ra=function(){Ue(this.g,"a")},Tr.prototype.qa=function(a){Ue(this.g,new Zg(a))},Tr.prototype.pa=function(a){Ue(this.g,new Xg)},Tr.prototype.oa=function(){Ue(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,$f=Zt.createWebChannelTransport=function(){return new Cs},Hf=Zt.getStatEventTarget=function(){return gs()},Uf=Zt.Event=kn,ic=Zt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,zo=Zt.ErrorCode=ms,pg.COMPLETE="complete",jf=Zt.EventType=pg,ug.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",ke.prototype.listen=ke.prototype.J,oi=Zt.WebChannel=ug,jA=Zt.FetchXmlHttpFactory=_s,ve.prototype.listenOnce=ve.prototype.K,ve.prototype.getLastError=ve.prototype.Ha,ve.prototype.getLastErrorCode=ve.prototype.ya,ve.prototype.getStatus=ve.prototype.ca,ve.prototype.getResponseJson=ve.prototype.La,ve.prototype.getResponseText=ve.prototype.la,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Fa,Bf=Zt.XhrIo=ve}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});var gE="@firebase/firestore",mE="4.9.3";var xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xe.UNAUTHENTICATED=new xe(null),xe.GOOGLE_CREDENTIALS=new xe("google-credentials-uid"),xe.FIRST_PARTY=new xe("first-party-uid"),xe.MOCK_USER=new xe("mock-user");var Si="12.7.0";var hr=new ii("@firebase/firestore");function si(){return hr.logLevel}function P(n,...e){if(hr.logLevel<=te.DEBUG){let t=e.map(Mp);hr.debug(`Firestore (${Si}): ${n}`,...t)}}function Xt(n,...e){if(hr.logLevel<=te.ERROR){let t=e.map(Mp);hr.error(`Firestore (${Si}): ${n}`,...t)}}function pi(n,...e){if(hr.logLevel<=te.WARN){let t=e.map(Mp);hr.warn(`Firestore (${Si}): ${n}`,...t)}}function Mp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function L(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nw(n,r,t)}function nw(n,e,t){let r=`FIRESTORE (${Si}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xt(r),new Error(r)}function se(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||nw(e,i,r)}function U(n,e){return n}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var dc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Qf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xe.UNAUTHENTICATED))}shutdown(){}},Yf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Zf=class{constructor(e){this.t=e,this.currentUser=xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){se(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string",31837,{l:r}),new dc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string",2055,{h:e}),new xe(e)}},Xf=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Jf=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Xf(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eh=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){se(this.o===void 0,3512);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(se(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function UA(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Yo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=UA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Y(n,e){return n<e?-1:n>e?1:0}function th(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return zf(i)===zf(o)?Y(i,o):zf(i)?1:-1}return Y(n.length,e.length)}var HA=55296,$A=57343;function zf(n){let e=n.charCodeAt(0);return e>=HA&&e<=$A}function gi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var yE="__name__",hc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&L(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&L(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Y(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):th(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yt.fromString(e.substring(4,e.length-2))}},Ie=class n extends hc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},zA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class n extends hc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return zA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yE}static keyField(){return new n([yE])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new O(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new O(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};function qA(n,e,t){if(!t)throw new O(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GA(n,e,t,r){if(e===!0&&r===!0)throw new O(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vE(n){if(!V.isDocumentKey(n))throw new O(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Np(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":L(12329,{type:typeof n})}function Sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Np(n);throw new O(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ce(n,e){let t={typeString:n};return e&&(t.value=e),t}function cs(n,e){if(!rw(n))throw new O(S.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(S.INVALID_ARGUMENT,t);return!0}var _E=-62135596800,EE=1e6,be=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*EE);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_E)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/EE}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cs(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-_E;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:Ce("string",be._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};var H=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new be(0,0))}static max(){return new n(new be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zo=-1,nh=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};nh.UNKNOWN_ID=-1;function WA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new be(t+1,0):new be(t,r));return new pr(i,V.empty(),e)}function KA(n){return new pr(n.readTime,n.key,Zo)}var pr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(H.min(),V.empty(),Zo)}static max(){return new n(H.max(),V.empty(),Zo)}};function QA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:Y(n.largestBatchId,e.largestBatchId))}var YA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Ai(n){if(n.code!==S.FAILED_PRECONDITION||n.message!==YA)throw n;P("LocalStore","Unexpectedly lost primary lease")}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&L(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let d=u;t(e[d]).next(h=>{s[d]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function ZA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mi(n){return n.name==="IndexedDbTransactionError"}var Rp=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),xp=-1;function Gc(n){return n==null}function Xo(n){return n===0&&1/n==-1/0}function XA(n){return typeof n=="number"&&Number.isInteger(n)&&!Xo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var iw="";function JA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wE(e)),e=eM(n.get(t),e);return wE(e)}function eM(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case iw:t+="";break;default:t+=o}}return t}function wE(n){return n+iw+""}var tM="remoteDocuments",ow="owner";var sw="mutationQueues";var aw="mutations";var cw="documentMutations",nM="remoteDocumentsV14";var uw="remoteDocumentGlobal";var lw="targets";var dw="targetDocuments";var fw="targetGlobal",hw="collectionParents";var pw="clientMetadata";var gw="bundles";var mw="namedQueries";var rM="indexConfiguration";var iM="indexState";var oM="indexEntries";var yw="documentOverlays";var sM="globals";var aM=[sw,aw,cw,tM,lw,ow,fw,dw,pw,uw,hw,gw,mw],aU=[...aM,yw],cM=[sw,aw,cw,nM,lw,ow,fw,dw,pw,uw,hw,gw,mw,yw],uM=cM,lM=[...uM,rM,iM,oM];var cU=[...lM,sM];function IE(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Er(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _e=class n{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new li(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new li(this.root,e,this.comparator,!1)}getReverseIterator(){return new li(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new li(this.root,e,this.comparator,!0)}},li=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ot=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw L(43730,{key:this.key,value:this.value});if(this.right.isRed())throw L(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw L(27949);return e+(this.isRed()?0:1)}};Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw L(57766)}get value(){throw L(16141)}get color(){throw L(16727)}get left(){throw L(29726)}get right(){throw L(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class n{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pc(this.data.getIterator())}getIteratorFrom(e){return new pc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},pc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pt=class n{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Pe(tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var gc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gc("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};je.EMPTY_BYTE_STRING=new je("");var dM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jt(n){if(se(!!n,39018),typeof n=="string"){let e=0,t=dM.exec(n);if(se(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:me(n.seconds),nanos:me(n.nanos)}}function me(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function en(n){return typeof n=="string"?je.fromBase64String(n):je.fromUint8Array(n)}var _w="server_timestamp",Ew="__type__",ww="__previous_value__",Iw="__local_write_time__";function Pp(n){return(n?.mapValue?.fields||{})[Ew]?.stringValue===_w}function Wc(n){let e=n.mapValue.fields[ww];return Pp(e)?Wc(e):e}function Jo(n){let e=Jt(n.mapValue.fields[Iw].timestampValue);return new be(e.seconds,e.nanos)}var ih=class{constructor(e,t,r,i,o,s,c,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}},mc="(default)",yc=class n{constructor(e,t){this.projectId=e,this.database=t||mc}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===mc}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var kp="__type__",Dw="__max__",oc={mapValue:{fields:{__type__:{stringValue:Dw}}}},Op="__vector__",mi="value";function Rn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pp(n)?4:Cw(n)?9007199254740991:Tw(n)?10:11:L(28295,{value:n})}function Vt(n,e){if(n===e)return!0;let t=Rn(n);if(t!==Rn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jo(n).isEqual(Jo(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Jt(i.timestampValue),c=Jt(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return en(i.bytesValue).isEqual(en(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return me(i.geoPointValue.latitude)===me(o.geoPointValue.latitude)&&me(i.geoPointValue.longitude)===me(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return me(i.integerValue)===me(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=me(i.doubleValue),c=me(o.doubleValue);return s===c?Xo(s)===Xo(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return gi(n.arrayValue.values||[],e.arrayValue.values||[],Vt);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(IE(s)!==IE(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Vt(s[u],c[u])))return!1;return!0})(n,e);default:return L(52216,{left:n})}}function es(n,e){return(n.values||[]).find(t=>Vt(t,e))!==void 0}function yi(n,e){if(n===e)return 0;let t=Rn(n),r=Rn(e);if(t!==r)return Y(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Y(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=me(o.integerValue||o.doubleValue),u=me(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return DE(n.timestampValue,e.timestampValue);case 4:return DE(Jo(n),Jo(e));case 5:return th(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=en(o),u=en(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let d=0;d<c.length&&d<u.length;d++){let h=Y(c[d],u[d]);if(h!==0)return h}return Y(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=Y(me(o.latitude),me(s.latitude));return c!==0?c:Y(me(o.longitude),me(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return TE(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},d=c[mi]?.arrayValue,h=u[mi]?.arrayValue,g=Y(d?.values?.length||0,h?.values?.length||0);return g!==0?g:TE(d,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===oc.mapValue&&s===oc.mapValue)return 0;if(o===oc.mapValue)return 1;if(s===oc.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),d=s.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){let m=th(u[g],h[g]);if(m!==0)return m;let w=yi(c[u[g]],d[h[g]]);if(w!==0)return w}return Y(u.length,h.length)})(n.mapValue,e.mapValue);default:throw L(23264,{he:t})}}function DE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Y(n,e);let t=Jt(n),r=Jt(e),i=Y(t.seconds,r.seconds);return i!==0?i:Y(t.nanos,r.nanos)}function TE(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=yi(t[i],r[i]);if(o)return o}return Y(t.length,r.length)}function vi(n){return oh(n)}function oh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Jt(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return en(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return V.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=oh(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${oh(t.fields[s])}`;return i+"}"})(n.mapValue):L(61005,{value:n})}function cc(n){switch(Rn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Wc(n);return e?16+cc(e):16;case 5:return 2*n.stringValue.length;case 6:return en(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+cc(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Er(r.fields,(o,s)=>{i+=o.length+cc(s)}),i})(n.mapValue);default:throw L(13486,{value:n})}}function sh(n){return!!n&&"integerValue"in n}function Fp(n){return!!n&&"arrayValue"in n}function CE(n){return!!n&&"nullValue"in n}function bE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uc(n){return!!n&&"mapValue"in n}function Tw(n){return(n?.mapValue?.fields||{})[kp]?.stringValue===Op}function Go(n){if(n.geoPointValue)return{geoPointValue:X({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:X({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Er(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Go(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Go(n.arrayValue.values[t]);return e}return X({},n)}function Cw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Dw}var lU={mapValue:{fields:{[kp]:{stringValue:Op},[mi]:{arrayValue:{}}}}};var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(t)}setAll(e){let t=tt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Go(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];uc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Er(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Go(this.value))}};function bw(n){let e=[];return Er(n.fields,(t,r)=>{let i=new tt([t]);if(uc(r)){let o=bw(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pt(e)}var wt=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,H.min(),H.min(),H.min(),Et.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,H.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,H.min(),H.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,H.min(),H.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _i=class{constructor(e,t){this.position=e,this.inclusive=t}};function SE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),t.key):r=yi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vt(n.position[t],e.position[t]))return!1;return!0}var Ei=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function fM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vc=class{},Ae=class n extends vc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ch(e,t,r):t==="array-contains"?new dh(e,r):t==="in"?new fh(e,r):t==="not-in"?new hh(e,r):t==="array-contains-any"?new ph(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uh(e,r):new lh(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yi(t,this.value)):t!==null&&Rn(this.value)===Rn(t)&&this.matchesComparison(yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Bt=class n extends vc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Sw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Sw(n){return n.op==="and"}function Aw(n){return hM(n)&&Sw(n)}function hM(n){for(let e of n.filters)if(e instanceof Bt)return!1;return!0}function ah(n){if(n instanceof Ae)return n.field.canonicalString()+n.op.toString()+vi(n.value);if(Aw(n))return n.filters.map(e=>ah(e)).join(",");{let e=n.filters.map(t=>ah(t)).join(",");return`${n.op}(${e})`}}function Mw(n,e){return n instanceof Ae?(function(r,i){return i instanceof Ae&&r.op===i.op&&r.field.isEqual(i.field)&&Vt(r.value,i.value)})(n,e):n instanceof Bt?(function(r,i){return i instanceof Bt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&Mw(s,i.filters[c]),!0):!1})(n,e):void L(19439)}function Nw(n){return n instanceof Ae?(function(t){return`${t.field.canonicalString()} ${t.op} ${vi(t.value)}`})(n):n instanceof Bt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Nw).join(" ,")+"}"})(n):"Filter"}var ch=class extends Ae{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},uh=class extends Ae{constructor(e,t){super(e,"in",t),this.keys=Rw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},lh=class extends Ae{constructor(e,t){super(e,"not-in",t),this.keys=Rw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Rw(n,e){return(e.arrayValue?.values||[]).map(t=>V.fromName(t.referenceValue))}var dh=class extends Ae{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Fp(t)&&es(t.arrayValue,this.value)}},fh=class extends Ae{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&es(this.value.arrayValue,t)}},hh=class extends Ae{constructor(e,t){super(e,"not-in",t)}matches(e){if(es(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!es(this.value.arrayValue,t)}},ph=class extends Ae{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>es(this.value.arrayValue,r))}};var gh=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function ME(n,e=null,t=[],r=[],i=null,o=null,s=null){return new gh(n,e,t,r,i,o,s)}function Lp(n){let e=U(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ah(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Gc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vi(r)).join(",")),e.Te=t}return e.Te}function Vp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AE(n.startAt,e.startAt)&&AE(n.endAt,e.endAt)}function mh(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var wi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function pM(n,e,t,r,i,o,s,c){return new wi(n,e,t,r,i,o,s,c)}function Kc(n){return new wi(n)}function NE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gM(n){return n.collectionGroup!==null}function Wo(n){let e=U(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Pe(tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ei(o,r))}),t.has(tt.keyField().canonicalString())||e.Ie.push(new Ei(tt.keyField(),r))}return e.Ie}function Ft(n){let e=U(n);return e.Ee||(e.Ee=mM(e,Wo(n))),e.Ee}function mM(n,e){if(n.limitType==="F")return ME(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ei(i.field,o)});let t=n.endAt?new _i(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _i(n.startAt.position,n.startAt.inclusive):null;return ME(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yh(n,e,t){return new wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qc(n,e){return Vp(Ft(n),Ft(e))&&n.limitType===e.limitType}function xw(n){return`${Lp(Ft(n))}|lt:${n.limitType}`}function ai(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Nw(i)).join(", ")}]`),Gc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vi(i)).join(",")),`Target(${r})`})(Ft(n))}; limitType=${n.limitType})`}function Yc(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Wo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let d=SE(s,c,u);return s.inclusive?d<=0:d<0})(r.startAt,Wo(r),i)||r.endAt&&!(function(s,c,u){let d=SE(s,c,u);return s.inclusive?d>=0:d>0})(r.endAt,Wo(r),i))})(n,e)}function yM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pw(n){return(e,t)=>{let r=!1;for(let i of Wo(n)){let o=vM(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function vM(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),d=c.data.field(o);return u!==null&&d!==null?yi(u,d):L(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return L(19790,{direction:n.dir})}}var tn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return vw(this.inner)}size(){return this.innerSize}};var _M=new _e(V.comparator);function nn(){return _M}var kw=new _e(V.comparator);function qo(...n){let e=kw;for(let t of n)e=e.insert(t.key,t);return e}function Ow(n){let e=kw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cr(){return Ko()}function Fw(){return Ko()}function Ko(){return new tn(n=>n.toString(),(n,e)=>n.isEqual(e))}var EM=new _e(V.comparator),wM=new Pe(V.comparator);function Z(...n){let e=wM;for(let t of n)e=e.add(t);return e}var IM=new Pe(Y);function DM(){return IM}function Bp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xo(e)?"-0":e}}function Lw(n){return{integerValue:""+n}}function TM(n,e){return XA(e)?Lw(e):Bp(n,e)}var Ii=class{constructor(){this._=void 0}};function CM(n,e,t){return n instanceof Di?(function(i,o){let s={fields:{[Ew]:{stringValue:_w},[Iw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Pp(o)&&(o=Wc(o)),o&&(s.fields[ww]=o),{mapValue:s}})(t,e):n instanceof gr?Bw(n,e):n instanceof mr?jw(n,e):(function(i,o){let s=Vw(i,o),c=RE(s)+RE(i.Ae);return sh(s)&&sh(i.Ae)?Lw(c):Bp(i.serializer,c)})(n,e)}function bM(n,e,t){return n instanceof gr?Bw(n,e):n instanceof mr?jw(n,e):t}function Vw(n,e){return n instanceof Ti?(function(r){return sh(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Di=class extends Ii{},gr=class extends Ii{constructor(e){super(),this.elements=e}};function Bw(n,e){let t=Uw(e);for(let r of n.elements)t.some(i=>Vt(i,r))||t.push(r);return{arrayValue:{values:t}}}var mr=class extends Ii{constructor(e){super(),this.elements=e}};function jw(n,e){let t=Uw(e);for(let r of n.elements)t=t.filter(i=>!Vt(i,r));return{arrayValue:{values:t}}}var Ti=class extends Ii{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function RE(n){return me(n.integerValue||n.doubleValue)}function Uw(n){return Fp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function SM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof gr&&i instanceof gr||r instanceof mr&&i instanceof mr?gi(r.elements,i.elements,Vt):r instanceof Ti&&i instanceof Ti?Vt(r.Ae,i.Ae):r instanceof Di&&i instanceof Di})(n.transform,e.transform)}var vh=class{constructor(e,t){this.version=e,this.transformResults=t}},dr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function lc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ci=class{};function Hw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _c(n.key,dr.none()):new yr(n.key,n.data,dr.none());{let t=n.data,r=Et.empty(),i=new Pe(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rn(n.key,r,new Pt(i.toArray()),dr.none())}}function AM(n,e,t){n instanceof yr?(function(i,o,s){let c=i.value.clone(),u=PE(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof rn?(function(i,o,s){if(!lc(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=PE(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll($w(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Qo(n,e,t,r){return n instanceof yr?(function(o,s,c,u){if(!lc(o.precondition,s))return c;let d=o.value.clone(),h=kE(o.fieldTransforms,u,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof rn?(function(o,s,c,u){if(!lc(o.precondition,s))return c;let d=kE(o.fieldTransforms,u,s),h=s.data;return h.setAll($w(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(o,s,c){return lc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function MM(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Vw(r.transform,i||null);o!=null&&(t===null&&(t=Et.empty()),t.set(r.field,o))}return t||null}function xE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gi(r,i,(o,s)=>SM(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yr=class extends Ci{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rn=class extends Ci{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function $w(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function PE(n,e,t){let r=new Map;se(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,bM(s,c,t[i]))}return r}function kE(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,CM(o,s,e))}return r}var _c=class extends Ci{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_h=class extends Ci{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Eh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&AM(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Qo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Fw();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=Hw(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&gi(this.mutations,e.mutations,(t,r)=>xE(t,r))&&gi(this.baseMutations,e.baseMutations,(t,r)=>xE(t,r))}},wh=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return EM})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ih=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dh=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var De,ne;function NM(n){switch(n){case S.OK:return L(64938);case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return L(15467,{code:n})}}function zw(n){if(n===void 0)return Xt("GRPC error has no .code"),S.UNKNOWN;switch(n){case De.OK:return S.OK;case De.CANCELLED:return S.CANCELLED;case De.UNKNOWN:return S.UNKNOWN;case De.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case De.INTERNAL:return S.INTERNAL;case De.UNAVAILABLE:return S.UNAVAILABLE;case De.UNAUTHENTICATED:return S.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case De.NOT_FOUND:return S.NOT_FOUND;case De.ALREADY_EXISTS:return S.ALREADY_EXISTS;case De.PERMISSION_DENIED:return S.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case De.ABORTED:return S.ABORTED;case De.OUT_OF_RANGE:return S.OUT_OF_RANGE;case De.UNIMPLEMENTED:return S.UNIMPLEMENTED;case De.DATA_LOSS:return S.DATA_LOSS;default:return L(39323,{code:n})}}(ne=De||(De={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";var RM=null;function xM(){return new TextEncoder}var PM=new Yt([4294967295,4294967295],0);function OE(n){let e=xM().encode(n),t=new Vf;return t.update(e),new Uint8Array(t.digest())}function FE(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yt([t,r],0),new Yt([i,o],0)]}var Th=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ur(`Invalid padding: ${t}`);if(r<0)throw new ur(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ur(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ur(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yt.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Yt.fromNumber(r)));return i.compare(PM)===1&&(i=new Yt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=OE(e),[r,i]=FE(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=OE(e),[r,i]=FE(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ur=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ec=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ts.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(H.min(),i,new _e(Y),nn(),Z())}},ts=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Z(),Z(),Z())}};var di=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},wc=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ic=class{constructor(e,t,r=je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Dc=class{constructor(){this.ve=0,this.Fe=LE(),this.Me=je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Z(),t=Z(),r=Z();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:L(38017,{changeType:o})}}),new ts(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=LE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Ch=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=nn(),this.Je=sc(),this.He=sc(),this.Ye=new _e(Y)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:L(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(mh(o))if(r===0){let s=new V(o.path);this.et(t,s,wt.newNoDocument(s,H.min()))}else se(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}RM?.lt((function(h,g,m,w,M){let R={localCacheCount:h,existenceFilterCount:g.count,databaseId:m.database,projectId:m.projectId},N=g.unchangedNames;return N&&(R.bloomFilter={applied:M===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:F=>w?.mightContain(F)??!1}),R})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=en(r).toUint8Array()}catch(u){if(u instanceof gc)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Th(s,i,o)}catch(u){return pi(u instanceof ur?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&mh(c.target)){let u=new V(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,wt.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=Z();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Ec(e,t,this.Ye,this.je,r);return this.je=nn(),this.Je=sc(),this.He=sc(),this.Ye=new _e(Y),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Dc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pe(Y),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pe(Y),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function sc(){return new _e(V.comparator)}function LE(){return new _e(V.comparator)}var kM={asc:"ASCENDING",desc:"DESCENDING"},OM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FM={and:"AND",or:"OR"},bh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Sh(n,e){return n.useProto3Json||Gc(e)?e:{value:e}}function Tc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LM(n,e){return Tc(n,e.toTimestamp())}function Lt(n){return se(!!n,49232),H.fromTimestamp((function(t){let r=Jt(t);return new be(r.seconds,r.nanos)})(n))}function jp(n,e){return Ah(n,e).canonicalString()}function Ah(n,e){let t=(function(i){return new Ie(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Gw(n){let e=Ie.fromString(n);return se(Zw(e),10190,{key:e.toString()}),e}function Mh(n,e){return jp(n.databaseId,e.path)}function qf(n,e){let t=Gw(e);if(t.get(1)!==n.databaseId.projectId)throw new O(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(Kw(t))}function Ww(n,e){return jp(n.databaseId,e)}function VM(n){let e=Gw(n);return e.length===4?Ie.emptyPath():Kw(e)}function Nh(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kw(n){return se(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function VE(n,e,t){return{name:Mh(n,e),fields:t.value.mapValue.fields}}function BM(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:L(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,h){return d.useProto3Json?(se(h===void 0||typeof h=="string",58123),je.fromBase64String(h||"")):(se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),je.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(d){let h=d.code===void 0?S.UNKNOWN:zw(d.code);return new O(h,d.message||"")})(s);t=new Ic(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qf(n,r.document.name),o=Lt(r.document.updateTime),s=r.document.createTime?Lt(r.document.createTime):H.min(),c=new Et({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(i,o,s,c),d=r.targetIds||[],h=r.removedTargetIds||[];t=new di(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qf(n,r.document),o=r.readTime?Lt(r.readTime):H.min(),s=wt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new di([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qf(n,r.document),o=r.removedTargetIds||[];t=new di([],o,i,null)}else{if(!("filter"in e))return L(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Dh(i,o),c=r.targetId;t=new wc(c,s)}}return t}function jM(n,e){let t;if(e instanceof yr)t={update:VE(n,e.key,e.value)};else if(e instanceof _c)t={delete:Mh(n,e.key)};else if(e instanceof rn)t={update:VE(n,e.key,e.data),updateMask:QM(e.fieldMask)};else{if(!(e instanceof _h))return L(16599,{Vt:e.type});t={verify:Mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof Di)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof gr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof mr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ti)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw L(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:LM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:L(27497)})(n,e.precondition)),t}function UM(n,e){return n&&n.length>0?(se(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Lt(i.updateTime):Lt(o);return s.isEqual(H.min())&&(s=Lt(o)),new vh(s,i.transformResults||[])})(t,e))):[]}function HM(n,e){return{documents:[Ww(n,e.path)]}}function $M(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ww(n,i);let o=(function(d){if(d.length!==0)return Yw(Bt.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(d){if(d.length!==0)return d.map(h=>(function(m){return{field:ci(m.field),direction:GM(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Sh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function zM(n){let e=VM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){se(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(g){let m=Qw(g);return m instanceof Bt&&Aw(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map(m=>(function(M){return new Ei(ui(M.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,Gc(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(g){let m=!!g.before,w=g.values||[];return new _i(w,m)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let m=!g.before,w=g.values||[];return new _i(w,m)})(t.endAt)),pM(e,i,s,o,c,"F",u,d)}function qM(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return L(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Qw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ui(t.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ui(t.unaryFilter.field);return Ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ui(t.unaryFilter.field);return Ae.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ui(t.unaryFilter.field);return Ae.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return L(61313);default:return L(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ae.create(ui(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return L(58110);default:return L(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Bt.create(t.compositeFilter.filters.map(r=>Qw(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return L(1026)}})(t.compositeFilter.op))})(n):L(30097,{filter:n})}function GM(n){return kM[n]}function WM(n){return OM[n]}function KM(n){return FM[n]}function ci(n){return{fieldPath:n.canonicalString()}}function ui(n){return tt.fromServerFormat(n.fieldPath)}function Yw(n){return n instanceof Ae?(function(t){if(t.op==="=="){if(bE(t.value))return{unaryFilter:{field:ci(t.field),op:"IS_NAN"}};if(CE(t.value))return{unaryFilter:{field:ci(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bE(t.value))return{unaryFilter:{field:ci(t.field),op:"IS_NOT_NAN"}};if(CE(t.value))return{unaryFilter:{field:ci(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ci(t.field),op:WM(t.op),value:t.value}}})(n):n instanceof Bt?(function(t){let r=t.getFilters().map(i=>Yw(i));return r.length===1?r[0]:{compositeFilter:{op:KM(t.op),filters:r}}})(n):L(54877,{filter:n})}function QM(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ns=class n{constructor(e,t,r,i,o=H.min(),s=H.min(),c=je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Rh=class{constructor(e){this.yt=e}};function YM(n){let e=zM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yh(e,e.limit,"L"):e}var Cc=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(me(e.integerValue));else if("doubleValue"in e){let r=me(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Xo(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Jt(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(en(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Cw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Tw(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):L(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=mi,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(me(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),V.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Cc.Kt=new Cc;var xh=class{constructor(){this.Cn=new Ph}addToCollectionParentIndex(e,t){return this.Cn.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(pr.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},Ph=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pe(Ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(Ie.comparator)).toArray()}};var dU=new Uint8Array(0);var BE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xw=41943040,lt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};lt.DEFAULT_COLLECTION_PERCENTILE=10,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lt.DEFAULT=new lt(Xw,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lt.DISABLED=new lt(-1,0,0);var rs=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var jE="LruGarbageCollector",ZM=1048576;function UE([n,e],[t,r]){let i=Y(n,t);return i===0?Y(e,r):i}var kh=class{constructor(e){this.Ir=e,this.buffer=new Pe(UE),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();UE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Oh=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){P(jE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mi(t)?P(jE,"Ignoring IndexedDB error during garbage collection: ",t):await Ai(t)}await this.Vr(3e5)})}},Fh=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(Rp.ce);let r=new kh(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(BE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BE):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,u,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),si()<=te.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function XM(n,e){return new Fh(n,e)}var Lh=class{constructor(){this.changes=new tn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Vh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Bh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Qo(r.mutation,i,Pt.empty(),be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Z()){let i=cr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=qo();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Z()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=nn(),s=Ko(),c=(function(){return Ko()})();return t.forEach((u,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof rn)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Qo(h.mutation,d,h.mutation.getFieldMask(),be.now())):s.set(d.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,h)=>s.set(d,h)),t.forEach((d,h)=>c.set(d,new Vh(h,s.get(d)??null))),c))}recalculateAndSaveOverlays(e,t){let r=Ko(),i=new _e((s,c)=>s-c),o=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let h=r.get(u)||Pt.empty();h=c.applyToLocalView(d,h),r.set(u,h);let g=(i.get(c.batchId)||Z()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,h=u.value,g=Fw();h.forEach(m=>{if(!o.has(m)){let w=Hw(t.get(m),r.get(m));w!==null&&g.set(m,w),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(cr()),c=Zo,u=o;return s.next(d=>A.forEach(d,(h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Z())).next(h=>({batchId:c,changes:Ow(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=qo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=qo();return this.indexManager.getCollectionParents(e,o).next(c=>A.forEach(c,u=>{let d=(function(g,m){return new wi(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,wt.newInvalidDocument(h)))});let c=qo();return s.forEach((u,d)=>{let h=o.get(u);h!==void 0&&Qo(h.mutation,d,Pt.empty(),be.now()),Yc(t,d)&&(c=c.insert(u,d))}),c})}};var jh=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return A.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Lt(i.createTime)}})(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:YM(i.bundledQuery),readTime:Lt(i.readTime)}})(t)),A.resolve()}};var Uh=class{constructor(){this.overlays=new _e(V.comparator),this.qr=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=cr();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=cr(),o=t.length+1,s=new V(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new _e((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=cr(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=cr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return A.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ih(t,r));let o=this.qr.get(t);o===void 0&&(o=Z(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Hh=class{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var is=class{constructor(){this.Qr=new Pe(Te.$r),this.Ur=new Pe(Te.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Te(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Te(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new V(new Ie([])),r=new Te(t,e),i=new Te(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new V(new Ie([])),r=new Te(t,e),i=new Te(t,e+1),o=Z();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Te(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Te=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return V.comparator(e.key,t.key)||Y(e.Yr,t.Yr)}static Kr(e,t){return Y(e.Yr,t.Yr)||V.comparator(e.key,t.key)}};var $h=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(Te.$r)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Eh(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new Te(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?xp:this.tr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Te(t,0),i=new Te(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(Y);return t.forEach(i=>{let o=new Te(i,0),s=new Te(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),A.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new Te(new V(o),0),c=new Pe(Y);return this.Zr.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},s),A.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){se(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return A.forEach(t.mutations,i=>{let o=new Te(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Te(t,0),i=this.Zr.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var zh=class{constructor(e){this.ri=e,this.docs=(function(){return new _e(V.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let r=nn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wt.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=nn(),s=t.path,c=new V(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:h}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||QA(KA(h),r)<=0||(i.has(h.key)||Yc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){L(9500)}ii(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qh(this)}getSize(e){return A.resolve(this.size)}},qh=class extends Lh{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Gh=class{constructor(e){this.persistence=e,this.si=new tn(t=>Lp(t),Vp),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.oi=0,this._i=new is,this.targetCount=0,this.ai=rs.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),A.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new rs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Pr(t),A.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this._i.containsKey(t))}};var bc=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rp(0),this.li=!1,this.li=!0,this.hi=new Hh,this.referenceDelegate=e(this),this.Pi=new Gh(this),this.indexManager=new xh,this.remoteDocumentCache=(function(i){return new zh(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Rh(t),this.Ii=new jh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new $h(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new Wh(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return A.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Wh=class extends rh{constructor(e){super(),this.currentSequenceNumber=e}},Kh=class n{constructor(e){this.persistence=e,this.Ri=new is,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw L(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),A.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.fi,r=>{let i=V.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,H.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return A.or([()=>A.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Sc=class n{constructor(e,t){this.persistence=e,this.pi=new tn(r=>JA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=XM(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return A.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return A.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?A.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,H.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),A.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),A.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),A.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),A.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cc(e.data.value)),t}br(e,t,r){return A.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return A.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Qh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Z(),i=Z();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Yh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zh=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return W_()?8:ZA(G_())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Yh;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(si()<=te.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",ai(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),A.resolve()):(si()<=te.DEBUG&&P("QueryEngine","Query:",ai(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(si()<=te.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",ai(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ft(t))):A.resolve())}ys(e,t){if(NE(t))return A.resolve(null);let r=Ft(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yh(t,null,"F"),r=Ft(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Z(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.Ds(t,c);return this.Cs(t,d,s,u.readTime)?this.ys(e,yh(t,null,"F")):this.vs(e,d,t,u)}))})))}ws(e,t,r,i){return NE(t)||i.isEqual(H.min())?A.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?A.resolve(null):(si()<=te.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ai(t)),this.vs(e,s,t,WA(i,Zo)).next(c=>c))})}Ds(e,t){let r=new Pe(Pw(e));return t.forEach((i,o)=>{Yc(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return si()<=te.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",ai(t)),this.ps.getDocumentsMatchingQuery(e,t,pr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Up="LocalStore",JM=3e8,Xh=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new _e(Y),this.xs=new tn(o=>Lp(o),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bh(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function eN(n,e,t,r){return new Xh(n,e,t,r)}async function Jw(n,e){let t=U(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=Z();for(let d of i){s.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}for(let d of o){c.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:c}))})})}function tN(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){let g=d.batch,m=g.keys(),w=A.resolve();return m.forEach(M=>{w=w.next(()=>h.getEntry(u,M)).next(R=>{let N=d.docVersions.get(M);se(N!==null,48541),R.version.compareTo(N)<0&&(g.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),h.addEntry(R)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,g))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=Z();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eI(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function nN(n,e){let t=U(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((h,g)=>{let m=i.get(g);if(!m)return;c.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,g)));let w=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(je.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(g,w),(function(R,N,F){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=JM?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(m,w,h)&&c.push(t.Pi.updateTargetData(o,w))});let u=nn(),d=Z();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(rN(o,s,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(H.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return A.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.Ms=i,o))}function rN(n,e,t){let r=Z(),i=Z();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=nn();return t.forEach((c,u)=>{let d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(H.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):P(Up,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:s,qs:i}})}function iN(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oN(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new ns(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Jh(n,e,t){let r=U(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Mi(s))throw s;P(Up,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function HE(n,e,t){let r=U(n),i=H.min(),o=Z();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,d,h){let g=U(u),m=g.xs.get(h);return m!==void 0?A.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,s,Ft(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:H.min(),t?o:Z())).next(c=>(sN(r,yM(e),c),{documents:c,Qs:o})))}function sN(n,e,t){let r=n.Os.get(e)||H.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Ac=class{constructor(){this.activeTargetIds=DM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ep=class{constructor(){this.Mo=new Ac,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ac,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tp=class{Oo(e){}shutdown(){}};var $E="ConnectivityMonitor",Mc=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){P($E,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){P($E,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ac=null;function np(){return ac===null?ac=(function(){return 268435456+Math.round(2147483648*Math.random())})():ac++,"0x"+ac.toString(16)}var Gf="RestConnection",aN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},rp=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===mc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=np(),c=this.zo(e,t.toUriEncodedString());P(Gf,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:d}=new URL(c),h=Ja(d);return this.Jo(e,c,u,r,h).then(g=>(P(Gf,`Received RPC '${e}' ${s}: `,g),g),g=>{throw pi(Gf,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Si})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=aN[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var ip=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ve="WebChannelConnection",op=class extends rp{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=np();return new Promise((c,u)=>{let d=new Bf;d.setWithCredentials(!0),d.listenOnce(jf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case zo.NO_ERROR:let g=d.getResponseJson();P(Ve,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case zo.TIMEOUT:P(Ve,`RPC '${e}' ${s} timed out`),u(new O(S.DEADLINE_EXCEEDED,"Request time out"));break;case zo.HTTP_ERROR:let m=d.getStatus();if(P(Ve,`RPC '${e}' ${s} failed with status:`,m,"response text:",d.getResponseText()),m>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);let M=w?.error;if(M&&M.status&&M.message){let R=(function(F){let K=F.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(K)>=0?K:S.UNKNOWN})(M.status);u(new O(R,M.message))}else u(new O(S.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new O(S.UNAVAILABLE,"Connection failed."));break;default:L(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{P(Ve,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);P(Ve,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=np(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$f(),c=Hf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");P(Ve,`Creating RPC '${e}' stream ${i}: ${h}`,u);let g=s.createWebChannel(h,u);this.I_(g);let m=!1,w=!1,M=new ip({Yo:N=>{w?P(Ve,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(P(Ve,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),P(Ve,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},Zo:()=>g.close()}),R=(N,F,K)=>{N.listen(F,Q=>{try{K(Q)}catch($){setTimeout(()=>{throw $},0)}})};return R(g,oi.EventType.OPEN,()=>{w||(P(Ve,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),R(g,oi.EventType.CLOSE,()=>{w||(w=!0,P(Ve,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(g))}),R(g,oi.EventType.ERROR,N=>{w||(w=!0,pi(Ve,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),M.a_(new O(S.UNAVAILABLE,"The operation could not be completed")))}),R(g,oi.EventType.MESSAGE,N=>{if(!w){let F=N.data[0];se(!!F,16349);let K=F,Q=K?.error||K[0]?.error;if(Q){P(Ve,`RPC '${e}' stream ${i} received error:`,Q);let $=Q.status,re=(function(y){let v=De[y];if(v!==void 0)return zw(v)})($),k=Q.message;re===void 0&&(re=S.INTERNAL,k="Unknown error status: "+$+" with message "+Q.message),w=!0,M.a_(new O(re,k)),g.close()}else P(Ve,`RPC '${e}' stream ${i} received:`,F),M.u_(F)}}),R(c,Uf.STAT_EVENT,N=>{N.stat===ic.PROXY?P(Ve,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ic.NOPROXY&&P(Ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function Wf(){return typeof document<"u"?document:null}function Zc(n){return new bh(n,!0)}var Nc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var zE="PersistentStream",Rc=class{constructor(e,t,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nc(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(Xt(t.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return P(zE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(P(zE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sp=class extends Rc{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=BM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return H.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?Lt(s.readTime):H.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=Nh(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=mh(u)?{documents:HM(o,u)}:{query:$M(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=qw(o,s.resumeToken);let d=Sh(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(H.min())>0){c.readTime=Tc(o,s.snapshotVersion.toTimestamp());let d=Sh(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);let r=qM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=Nh(this.serializer),t.removeTarget=e,this.q_(t)}},ap=class extends Rc{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=UM(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=Nh(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>jM(this.serializer,r))};this.q_(t)}};var cp=class{},up=class extends cp{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Ah(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(S.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Ah(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(S.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},lp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xt(t),this.aa=!1):P("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var vr="RemoteStore",dp=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{wr(this)&&(P(vr,"Restarting streams for network reachability change."),await(async function(u){let d=U(u);d.Ea.add(4),await us(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Xc(d)})(this))})}),this.Ra=new lp(r,i)}};async function Xc(n){if(wr(n))for(let e of n.da)await e(!0)}async function us(n){for(let e of n.da)await e(!1)}function tI(n,e){let t=U(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qp(t)?zp(t):Ni(t).O_()&&$p(t,e))}function Hp(n,e){let t=U(n),r=Ni(t);t.Ia.delete(e),r.O_()&&nI(t,e),t.Ia.size===0&&(r.O_()?r.L_():wr(t)&&t.Ra.set("Unknown"))}function $p(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ni(n).Y_(e)}function nI(n,e){n.Va.Ue(e),Ni(n).Z_(e)}function zp(n){n.Va=new Ch({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ni(n).start(),n.Ra.ua()}function qp(n){return wr(n)&&!Ni(n).x_()&&n.Ia.size>0}function wr(n){return U(n).Ea.size===0}function rI(n){n.Va=void 0}async function cN(n){n.Ra.set("Online")}async function uN(n){n.Ia.forEach((e,t)=>{$p(n,e)})}async function lN(n,e){rI(n),qp(n)?(n.Ra.ha(e),zp(n)):n.Ra.set("Unknown")}async function dN(n,e,t){if(n.Ra.set("Online"),e instanceof Ic&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){P(vr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xc(n,r)}else if(e instanceof di?n.Va.Ze(e):e instanceof wc?n.Va.st(e):n.Va.tt(e),!t.isEqual(H.min()))try{let r=await eI(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,d)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(je.EMPTY_BYTE_STRING,h.snapshotVersion)),nI(o,u);let g=new ns(h.target,u,d,h.sequenceNumber);$p(o,g)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){P(vr,"Failed to raise snapshot:",r),await xc(n,r)}}async function xc(n,e,t){if(!Mi(e))throw e;n.Ea.add(1),await us(n),n.Ra.set("Offline"),t||(t=()=>eI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{P(vr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xc(n)})}function iI(n,e){return e().catch(t=>xc(n,t,e))}async function Jc(n){let e=U(n),t=xn(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;fN(e);)try{let i=await iN(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,hN(e,i)}catch(i){await xc(e,i)}oI(e)&&sI(e)}function fN(n){return wr(n)&&n.Ta.length<10}function hN(n,e){n.Ta.push(e);let t=xn(n);t.O_()&&t.X_&&t.ea(e.mutations)}function oI(n){return wr(n)&&!xn(n).x_()&&n.Ta.length>0}function sI(n){xn(n).start()}async function pN(n){xn(n).ra()}async function gN(n){let e=xn(n);for(let t of n.Ta)e.ea(t.mutations)}async function mN(n,e,t){let r=n.Ta.shift(),i=wh.from(r,e,t);await iI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Jc(n)}async function yN(n,e){e&&xn(n).X_&&await(async function(r,i){if((function(s){return NM(s)&&s!==S.ABORTED})(i.code)){let o=r.Ta.shift();xn(r).B_(),await iI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Jc(r)}})(n,e),oI(n)&&sI(n)}async function qE(n,e){let t=U(n);t.asyncQueue.verifyOperationInProgress(),P(vr,"RemoteStore received new credentials");let r=wr(t);t.Ea.add(3),await us(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xc(t)}async function vN(n,e){let t=U(n);e?(t.Ea.delete(2),await Xc(t)):e||(t.Ea.add(2),await us(t),t.Ra.set("Unknown"))}function Ni(n){return n.ma||(n.ma=(function(t,r,i){let o=U(t);return o.sa(),new sp(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:cN.bind(null,n),t_:uN.bind(null,n),r_:lN.bind(null,n),H_:dN.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),qp(n)?zp(n):n.Ra.set("Unknown")):(await n.ma.stop(),rI(n))})),n.ma}function xn(n){return n.fa||(n.fa=(function(t,r,i){let o=U(t);return o.sa(),new ap(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pN.bind(null,n),r_:yN.bind(null,n),ta:gN.bind(null,n),na:mN.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Jc(n)):(await n.fa.stop(),n.Ta.length>0&&(P(vr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var fp=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gp(n,e){if(Xt("AsyncQueue",`${e}: ${n}`),Mi(n))return new O(S.UNAVAILABLE,`${e}: ${n}`);throw n}var Pc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=qo(),this.sortedSet=new _e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var kc=class{constructor(){this.ga=new _e(V.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):L(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},bi=class n{constructor(e,t,r,i,o,s,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Pc.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var hp=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},pp=class{constructor(){this.queries=GE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=GE(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new O(S.ABORTED,"Firestore shutting down"))}};function GE(){return new tn(n=>xw(n),Qc)}async function aI(n,e){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new hp,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let c=Gp(s,`Initialization of query '${ai(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Wp(t)}async function cI(n,e){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _N(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Wp(t)}function EN(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function Wp(n){n.Ca.forEach(e=>{e.next()})}var gp,WE;(WE=gp||(gp={})).Ma="default",WE.Cache="cache";var Oc=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gp.Cache}};var Fc=class{constructor(e){this.key=e}},Lc=class{constructor(e){this.key=e}},mp=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Z(),this.mutatedKeys=Z(),this.eu=Pw(e),this.tu=new Pc(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new kc,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let m=i.get(h),w=Yc(this.query,g)?g:null,M=!!m&&this.mutatedKeys.has(m.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),N=!1;m&&w?m.data.isEqual(w.data)?M!==R&&(r.track({type:3,doc:w}),N=!0):this.su(m,w)||(r.track({type:2,doc:w}),N=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!m&&w?(r.track({type:0,doc:w}),N=!0):m&&!w&&(r.track({type:1,doc:m}),N=!0,(u||d)&&(c=!0)),N&&(w?(s=s.add(w),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,g)=>(function(w,M){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return L(20277,{Rt:N})}};return R(w)-R(M)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,s.length!==0||d?{snapshot:new bi(this.query,e.tu,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Z(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Lc(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Fc(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Z();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Kp="SyncEngine",yp=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},vp=class{constructor(e){this.key=e,this.hu=!1}},_p=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new tn(c=>xw(c),Qc),this.Iu=new Map,this.Eu=new Set,this.du=new _e(V.comparator),this.Au=new Map,this.Ru=new is,this.Vu={},this.mu=new Map,this.fu=rs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function wN(n,e,t=!0){let r=pI(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await uI(r,e,t,!0),i}async function IN(n,e){let t=pI(n);await uI(t,e,!0,!1)}async function uI(n,e,t,r){let i=await oN(n.localStore,Ft(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=await DN(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&tI(n.remoteStore,i),c}async function DN(n,e,t,r,i){n.pu=(g,m,w)=>(async function(R,N,F,K){let Q=N.view.ru(F);Q.Cs&&(Q=await HE(R.localStore,N.query,!1).then(({documents:E})=>N.view.ru(E,Q)));let $=K&&K.targetChanges.get(N.targetId),re=K&&K.targetMismatches.get(N.targetId)!=null,k=N.view.applyChanges(Q,R.isPrimaryClient,$,re);return QE(R,N.targetId,k.au),k.snapshot})(n,g,m,w);let o=await HE(n.localStore,e,!0),s=new mp(e,o.Qs),c=s.ru(o.documents),u=ts.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,u);QE(n,t,d.au);let h=new yp(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function TN(n,e,t){let r=U(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Qc(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Hp(r.remoteStore,i.targetId),Ep(r,i.targetId)}).catch(Ai)):(Ep(r,i.targetId),await Jh(r.localStore,i.targetId,!0))}async function CN(n,e){let t=U(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hp(t.remoteStore,r.targetId))}async function bN(n,e,t){let r=PN(n);try{let i=await(function(s,c){let u=U(s),d=be.now(),h=c.reduce((w,M)=>w.add(M.key),Z()),g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let M=nn(),R=Z();return u.Ns.getEntries(w,h).next(N=>{M=N,M.forEach((F,K)=>{K.isValidDocument()||(R=R.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,M)).next(N=>{g=N;let F=[];for(let K of c){let Q=MM(K,g.get(K.key).overlayedDocument);Q!=null&&F.push(new rn(K.key,Q,bw(Q.value.mapValue),dr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,F,c)}).next(N=>{m=N;let F=N.applyToLocalDocumentSet(g,R);return u.documentOverlayCache.saveOverlays(w,N.batchId,F)})}).then(()=>({batchId:m.batchId,changes:Ow(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let d=s.Vu[s.currentUser.toKey()];d||(d=new _e(Y)),d=d.insert(c,u),s.Vu[s.currentUser.toKey()]=d})(r,i.batchId,t),await ls(r,i.changes),await Jc(r.remoteStore)}catch(i){let o=Gp(i,"Failed to persist write");t.reject(o)}}async function lI(n,e){let t=U(n);try{let r=await nN(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?se(s.hu,14607):i.removedDocuments.size>0&&(se(s.hu,42227),s.hu=!1))}),await ls(t,r,e)}catch(r){await Ai(r)}}function KE(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=U(s);u.onlineState=c;let d=!1;u.queries.forEach((h,g)=>{for(let m of g.Sa)m.va(c)&&(d=!0)}),d&&Wp(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SN(n,e,t){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new _e(V.comparator);s=s.insert(o,wt.newNoDocument(o,H.min()));let c=Z().add(o),u=new Ec(H.min(),new Map,new _e(Y),s,c);await lI(r,u),r.du=r.du.remove(o),r.Au.delete(e),Qp(r)}else await Jh(r.localStore,e,!1).then(()=>Ep(r,e,t)).catch(Ai)}async function AN(n,e){let t=U(n),r=e.batch.batchId;try{let i=await tN(t.localStore,e);fI(t,r,null),dI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ls(t,i)}catch(i){await Ai(i)}}async function MN(n,e,t){let r=U(n);try{let i=await(function(s,c){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(se(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})})(r.localStore,e);fI(r,e,t),dI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ls(r,i)}catch(i){await Ai(i)}}function dI(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function fI(n,e,t){let r=U(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ep(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||hI(n,r)})}function hI(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Hp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Qp(n))}function QE(n,e,t){for(let r of t)r instanceof Fc?(n.Ru.addReference(r.key,e),NN(n,r)):r instanceof Lc?(P(Kp,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||hI(n,r.key)):L(19791,{wu:r})}function NN(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(P(Kp,"New document in limbo: "+t),n.Eu.add(r),Qp(n))}function Qp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new V(Ie.fromString(e)),r=n.fu.next();n.Au.set(r,new vp(t)),n.du=n.du.insert(t,r),tI(n.remoteStore,new ns(Ft(Kc(t.path)),r,"TargetPurposeLimboResolution",Rp.ce))}}async function ls(n,e,t){let r=U(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);let h=Qh.As(u.targetId,d);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,d){let h=U(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>A.forEach(d,m=>A.forEach(m.Es,w=>h.persistence.referenceDelegate.addReference(g,m.targetId,w)).next(()=>A.forEach(m.ds,w=>h.persistence.referenceDelegate.removeReference(g,m.targetId,w)))))}catch(g){if(!Mi(g))throw g;P(Up,"Failed to update sequence numbers: "+g)}for(let g of d){let m=g.targetId;if(!g.fromCache){let w=h.Ms.get(m),M=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(M);h.Ms=h.Ms.insert(m,R)}}})(r.localStore,o))}async function RN(n,e){let t=U(n);if(!t.currentUser.isEqual(e)){P(Kp,"User change. New user:",e.toKey());let r=await Jw(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new O(S.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ls(t,r.Ls)}}function xN(n,e){let t=U(n),r=t.Au.get(e);if(r&&r.hu)return Z().add(r.key);{let i=Z(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function pI(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SN.bind(null,e),e.Pu.H_=_N.bind(null,e.eventManager),e.Pu.yu=EN.bind(null,e.eventManager),e}function PN(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MN.bind(null,e),e}var gI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return eN(this.persistence,new Zh,t.initialUser,this.serializer)}Cu(t){return new bc(Kh.mi,this.serializer)}Du(t){return new ep}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),wp=class extends gI{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){se(this.persistence.referenceDelegate instanceof Sc,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Oh(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?lt.withCacheSize(this.cacheSizeBytes):lt.DEFAULT;return new bc(r=>Sc.mi(r,t),this.serializer)}};var kN=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RN.bind(null,this.syncEngine),await vN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new pp})()}createDatastore(t){let r=Zc(t.databaseInfo.databaseId),i=(function(s){return new op(s)})(t.databaseInfo);return(function(s,c,u,d){return new up(s,c,u,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new dp(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>KE(this.syncEngine,r,0),(function(){return Mc.v()?new Mc:new tp})())}createSyncEngine(t,r){return(function(o,s,c,u,d,h,g){let m=new _p(o,s,c,u,d,h);return g&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=U(r);P(vr,"RemoteStore shutting down."),i.Ea.add(5),await us(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var Vc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Pn="FirestoreClient",Ip=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xe.UNAUTHENTICATED,this.clientId=Yo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{P(Pn,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(P(Pn,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Gp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Kf(n,e){n.asyncQueue.verifyOperationInProgress(),P(Pn,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Jw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function YE(n,e){n.asyncQueue.verifyOperationInProgress();let t=await ON(n);P(Pn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>qE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>qE(e.remoteStore,i)),n._onlineComponents=e}async function ON(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P(Pn,"Using user provided OfflineComponentProvider");try{await Kf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===S.FAILED_PRECONDITION||i.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;pi("Error using user provided cache. Falling back to memory cache: "+t),await Kf(n,new gI)}}else P(Pn,"Using default OfflineComponentProvider"),await Kf(n,new wp(void 0));return n._offlineComponents}async function mI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(P(Pn,"Using user provided OnlineComponentProvider"),await YE(n,n._uninitializedComponentsProvider._online)):(P(Pn,"Using default OnlineComponentProvider"),await YE(n,new kN))),n._onlineComponents}function FN(n){return mI(n).then(e=>e.syncEngine)}async function Dp(n){let e=await mI(n),t=e.eventManager;return t.onListen=wN.bind(null,e.syncEngine),t.onUnlisten=TN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CN.bind(null,e.syncEngine),t}function LN(n,e,t={}){let r=new kt;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,d){let h=new Vc({next:m=>{h.Nu(),s.enqueueAndForget(()=>cI(o,g));let w=m.docs.has(c);!w&&m.fromCache?d.reject(new O(S.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?d.reject(new O(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new Oc(Kc(c.path),h,{includeMetadataChanges:!0,qa:!0});return aI(o,g)})(await Dp(n),n.asyncQueue,e,t,r)),r.promise}function yI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ZE=new Map;var vI="firestore.googleapis.com",XE=!0,Bc=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vI,this.ssl=XE}else this.host=e.host,this.ssl=e.ssl??XE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZM)throw new O(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},os=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Qf;switch(r.type){case"firstParty":return new Jf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=ZE.get(t);r&&(P("ComponentProvider","Removing Datastore"),ZE.delete(t),r.terminate())})(this),Promise.resolve()}};function VN(n,e,t,r={}){n=Sn(n,os);let i=Ja(e),o=n._getSettings(),s=Ee(X({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&($_(`https://${c}`),q_("Firestore",!0)),o.host!==vI&&o.host!==c&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Ee(X({},o),{host:c,ssl:i,emulatorOptions:r});if(!ni(u,s)&&(n._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=xe.MOCK_USER;else{d=z_(r.mockUserToken,n._app?.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new O(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xe(g)}n._authCredentials=new Yf(new dc(d,h))}}var jc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Be=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(cs(t,n._jsonSchema))return new n(e,r||null,new V(Ie.fromString(t.referencePath)))}};Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ce("string",Be._jsonSchemaVersion),referencePath:Ce("string")};var ss=class n extends jc{constructor(e,t,r){super(e,t,Kc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function eu(n,e,...t){if(n=ri(n),arguments.length===1&&(e=Yo.newId()),qA("doc","path",e),n instanceof os){let r=Ie.fromString(e,...t);return vE(r),new Be(n,null,new V(r))}{if(!(n instanceof Be||n instanceof ss))throw new O(S.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return vE(r),new Be(n.firestore,n instanceof ss?n.converter:null,new V(r))}}var JE="AsyncQueue",Uc=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nc(this,"async_queue_retry"),this._c=()=>{let r=Wf();r&&P(JE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Wf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Wf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new kt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mi(e))throw e;P(JE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xt("INTERNAL UNHANDLED ERROR: ",ew(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=fp.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&L(47125,{Pc:ew(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function ew(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function tw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var _r=class extends os{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Uc,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Uc(e),this._firestoreClient=void 0,await e}}};function _I(n,e){let t=typeof n=="object"?n:lE(),r=typeof n=="string"?n:e||mc,i=aE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=H_("firestore");o&&VN(i,...o)}return i}function Yp(n){if(n._terminated)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BN(n),n._firestoreClient}function BN(n){let e=n._freezeSettings(),t=(function(i,o,s,c){return new ih(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,yI(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ip(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var An=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(je.fromBase64String(e))}catch(t){throw new O(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cs(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};An._jsonSchemaVersion="firestore/bytes/1.0",An._jsonSchema={type:Ce("string",An._jsonSchemaVersion),bytes:Ce("string")};var as=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hc=class{constructor(e){this._methodName=e}};var Mn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(cs(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:Ce("string",Mn._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};var Nn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cs(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(S.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:Ce("string",Nn._jsonSchemaVersion),vectorValues:Ce("object")};var jN=/^__.*__$/,Tp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new rn(e,this.data,this.fieldMask,t,this.fieldTransforms):new yr(e,this.data,t,this.fieldTransforms)}};function EI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L(40011,{Ac:n})}}var Cp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(X(X({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $c(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(EI(this.Ac)&&jN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},bp=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zc(e)}Cc(e,t,r,i=!1){return new Cp({Ac:e,methodName:t,Dc:r,path:tt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function UN(n){let e=n._freezeSettings(),t=Zc(n._databaseId);return new bp(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HN(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);TI("Data must be an object, but it was:",s,r);let c=II(r,s),u,d;if(o.merge)u=new Pt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let m=$N(e,g,t);if(!s.contains(m))throw new O(S.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qN(h,m)||h.push(m)}u=new Pt(h),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new Tp(new Et(c),u,d)}function wI(n,e){if(DI(n=ri(n)))return TI("Unsupported field value:",e,n),II(n,e);if(n instanceof Hc)return(function(r,i){if(!EI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=wI(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=ri(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=be.fromDate(r);return{timestampValue:Tc(i.serializer,o)}}if(r instanceof be){let o=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tc(i.serializer,o)}}if(r instanceof Mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof An)return{bytesValue:qw(i.serializer,r._byteString)};if(r instanceof Be){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nn)return(function(s,c){return{mapValue:{fields:{[kp]:{stringValue:Op},[mi]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Bp(c.serializer,d)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Np(r)}`)})(n,e)}function II(n,e){let t={};return vw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(n,(r,i)=>{let o=wI(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function DI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof be||n instanceof Mn||n instanceof An||n instanceof Be||n instanceof Hc||n instanceof Nn)}function TI(n,e,t){if(!DI(t)||!rw(t)){let r=Np(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function $N(n,e,t){if((e=ri(e))instanceof as)return e._internalPath;if(typeof e=="string")return CI(n,e);throw $c("Field path arguments must be of type string or ",n,!1,void 0,t)}var zN=new RegExp("[~\\*/\\[\\]]");function CI(n,e,t){if(e.search(zN)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new as(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $c(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(S.INVALID_ARGUMENT,c+n+u)}function qN(n,e){return n.some(t=>t.isEqual(e))}var zc=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Sp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Sp=class extends zc{data(){return super.data()}};function bI(n,e){return typeof e=="string"?CI(n,e):e instanceof as?e._internalPath:e._delegate._internalPath}function GN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ap=class{convertValue(e,t="none"){switch(Rn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(en(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw L(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Er(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[mi].arrayValue?.values?.map(r=>me(r.doubleValue));return new Nn(t)}convertGeoPoint(e){return new Mn(me(e.latitude),me(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Wc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){let t=Jt(e);return new be(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);se(Zw(r),9688,{name:e});let i=new yc(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(t)||Xt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function WN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var lr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fr=class n extends zc{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new fi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(S.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};fr._jsonSchemaVersion="firestore/documentSnapshot/1.0",fr._jsonSchema={type:Ce("string",fr._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};var fi=class extends fr{data(e={}){return super.data(e)}},hi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fi(this._firestore,this._userDataWriter,r.key,r,new lr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new fi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new fi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:KN(c.type),doc:u,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(S.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function KN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L(61501,{type:n})}}function SI(n){n=Sn(n,Be);let e=Sn(n.firestore,_r);return LN(Yp(e),n._key).then(t=>NI(e,n,t))}hi._jsonSchemaVersion="firestore/querySnapshot/1.0",hi._jsonSchema={type:Ce("string",hi._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};var qc=class extends Ap{constructor(e){super(),this.firestore=e}convertBytes(e){return new An(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,t)}};function AI(n,e,t){n=Sn(n,Be);let r=Sn(n.firestore,_r),i=WN(n.converter,e,t);return QN(r,[HN(UN(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,dr.none())])}function MI(n,...e){n=ri(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tw(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(tw(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof Be)s=Sn(n.firestore,_r),c=Kc(n._key.path),o={next:u=>{e[r]&&e[r](NI(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=Sn(n,jc);s=Sn(u.firestore,_r),c=u._query;let d=new qc(s);o={next:h=>{e[r]&&e[r](new hi(s,d,u,h))},error:e[r+1],complete:e[r+2]},GN(n._query)}return(function(d,h,g,m){let w=new Vc(m),M=new Oc(h,w,g);return d.asyncQueue.enqueueAndForget(async()=>aI(await Dp(d),M)),()=>{w.Nu(),d.asyncQueue.enqueueAndForget(async()=>cI(await Dp(d),M))}})(Yp(s),c,i,o)}function QN(n,e){return(function(r,i){let o=new kt;return r.asyncQueue.enqueueAndForget(async()=>bN(await FN(r),i,o)),o.promise})(Yp(n),e)}function NI(n,e,t){let r=t.docs.get(e._key),i=new qc(n);return new fr(n,i,e._key,r,new lr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Si=i})(uE),Ho(new Kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new _r(new Zf(r.getProvider("auth-internal")),new eh(s,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new O(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(d.options.projectId,h)})(s,i),s);return o=X({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),bn(gE,mE,e),bn(gE,mE,"esm2020")})();var RI={production:!0,firebaseConfig:{apiKey:"AIzaSyB_WSNJbHhEGi6EPYbBKJvlP-MH1nQ846Y",authDomain:"cross-plane-2f5de.firebaseapp.com",projectId:"cross-plane-2f5de",storageBucket:"cross-plane-2f5de.firebasestorage.app",messagingSenderId:"183248187868",appId:"1:183248187868:web:348f43d2a2c5e3e6f0df19"}};var YN=RI.firebaseConfig,tu=class n{constructor(){this.unsubscribe=null;this.sessionId="shared-grid";this.isSynced=we(!1);this.isLoading=we(!0);this.app=Lf(YN),this.db=_I(this.app)}async saveCells(e){let t=Array.from(e.values()).filter(i=>i.confirmed),r=eu(this.db,"grids",this.sessionId);await AI(r,{cells:t,updatedAt:new Date().toISOString()}),this.isSynced.set(!0)}async loadCells(){let e=eu(this.db,"grids",this.sessionId),t=await SI(e);return t.exists()?t.data().cells||[]:[]}subscribeToChanges(e){let t=eu(this.db,"grids",this.sessionId);this.unsubscribe=MI(t,r=>{if(r.exists()){let i=r.data();e(i?.cells||[])}})}destroy(){this.unsubscribe&&this.unsubscribe()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}};var nu=class n{constructor(){this.cellsMap=new Map;this.firebase=J(tu);this.saveTimeout=null;this.isInitialized=!1;this.skipNextSync=!1;this.cells=we(new Map);this.viewportOffset=we({x:0,y:0});this.selectedCell=we(null);this.inputDirection=we("across");this.isLoading=we(!0);this.lastPlacedTime=we(0);this.wordsPlacedCount=we(0);let e=this.getCookie("cross_plane_last_placed");e&&this.lastPlacedTime.set(parseInt(e,10));let t=this.getCookie("cross_plane_words_placed");t&&this.wordsPlacedCount.set(parseInt(t,10)),this.loadFromFirebase(),this.firebase.subscribeToChanges(r=>{this.handleRemoteUpdate(r)}),En(()=>{let r=this.cells();if(this.isInitialized){if(this.skipNextSync){this.skipNextSync=!1;return}this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveToFirebase()},1e3)}}),En(()=>{let r=this.lastPlacedTime();r>0&&this.setCookie("cross_plane_last_placed",r.toString(),365)}),En(()=>{let r=this.wordsPlacedCount();this.setCookie("cross_plane_words_placed",r.toString(),365)})}setCookie(e,t,r){let i="";if(r){let o=new Date;o.setTime(o.getTime()+r*24*60*60*1e3),i="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}getCookie(e){let t=e+"=",r=document.cookie.split(";");for(let i=0;i<r.length;i++){let o=r[i];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null}handleRemoteUpdate(e){let t=new Map;e.forEach(r=>{let i=`${r.x},${r.y}`;t.set(i,r)}),(this.cellsMap.size!==t.size||!this.mapsEqual(this.cellsMap,t))&&(this.skipNextSync=!0,this.cellsMap=t,this.cells.set(new Map(this.cellsMap)),console.log("Grid updated from Firebase (real-time sync)"))}mapsEqual(e,t){if(e.size!==t.size)return!1;for(let[r,i]of e){let o=t.get(r);if(!o||i.char!==o.char||i.confirmed!==o.confirmed)return!1}return!0}async loadFromFirebase(){try{let e=await this.firebase.loadCells();e.length>0?(e.forEach(t=>{let r=`${t.x},${t.y}`;this.cellsMap.set(r,t)}),this.cells.set(new Map(this.cellsMap))):this.initializeDefault()}catch(e){console.error("Failed to load from Firebase:",e),this.initializeDefault()}finally{this.isLoading.set(!1),this.isInitialized=!0}}initializeDefault(){this.setCell(-5,0,"C",!0),this.setCell(-4,0,"R",!0),this.setCell(-3,0,"O",!0),this.setCell(-2,0,"S",!0),this.setCell(-1,0,"S",!0),this.setCell(0,0,".",!0),this.setCell(1,0,"P",!0),this.setCell(2,0,"L",!0),this.setCell(3,0,"A",!0),this.setCell(4,0,"N",!0),this.setCell(5,0,"E",!0)}async saveToFirebase(){try{await this.firebase.saveCells(this.cellsMap),console.log("Grid saved to Firebase")}catch(e){console.error("Failed to save to Firebase:",e)}}getCell(e,t){return this.cellsMap.get(`${e},${t}`)}setCell(e,t,r,i){let o=`${e},${t}`;this.cellsMap.set(o,{x:e,y:t,char:r.toUpperCase(),confirmed:i}),this.cells.set(new Map(this.cellsMap))}removeCell(e,t){let r=`${e},${t}`;this.cellsMap.has(r)&&(this.cellsMap.delete(r),this.cells.set(new Map(this.cellsMap)))}isBlackSquare(e,t){if(Math.abs(e)<6&&Math.abs(t)<6)return!1;let r=Math.sin(e*12.9898+t*78.233)*43758.5453123%1;return Math.abs(r)>.88}isValidSlot(e,t){return!this.isBlackSquare(e,t)}incrementWordsPlaced(){this.wordsPlacedCount.update(e=>e+1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}};var ru=class n{constructor(){}async validateWord(e){try{let t=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e.toLowerCase()}`);if(t.status===404)return{valid:!1,definition:"",reason:`"${e.toUpperCase()}" not found in dictionary`};if(!t.ok)throw new Error("Dictionary API error");let r=await t.json(),i="No definition found.";if(Array.isArray(r)&&r.length>0){let o=r[0];if(o.meanings&&o.meanings.length>0){let s=o.meanings[0];s.definitions&&s.definitions.length>0&&(i=s.definitions[0].definition)}}return{valid:!0,definition:i}}catch(t){return console.error("Dictionary validation error:",t),{valid:!1,definition:"",reason:"Validation service unavailable"}}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}};var JN=["hiddenInput"],eR=["gridCanvas"],xI=[{id:"default",name:"Classic",unlockCount:0,colors:{bg:"#ffffff",gridLines:"rgba(0,0,0,0.05)",blackSquare:"#000000",text:"#000000",confirmedBg:"#ffffff",confirmedText:"#000000",confirmedBorder:"#d1d5db",startWordBg:"#fef9c3",startWordBorder:"#fde047",pendingBg:"#93c5fd",pendingText:"#2563eb",pendingBorder:"#d1d5db",selectionBg:"#dbeafe",selectionBorder:"#3b82f6",selectionShadow:"rgba(59, 130, 246, 0.5)"}},{id:"dark",name:"Midnight",unlockCount:10,colors:{bg:"#1f2937",gridLines:"rgba(255,255,255,0.1)",blackSquare:"#111827",text:"#f3f4f6",confirmedBg:"#1f2937",confirmedText:"#f3f4f6",confirmedBorder:"#374151",startWordBg:"#3f2c06",startWordBorder:"#ca8a04",pendingBg:"#1e3a8a",pendingText:"#60a5fa",pendingBorder:"#374151",selectionBg:"#1e40af",selectionBorder:"#3b82f6",selectionShadow:"rgba(59, 130, 246, 0.5)"}},{id:"blueprint",name:"Blueprint",unlockCount:20,colors:{bg:"#3555a1",gridLines:"rgba(255,255,255,0.2)",blackSquare:"#25397bff",text:"#ffffff",confirmedBg:"#3555a1",confirmedText:"#ffffff",confirmedBorder:"#93c5fd",startWordBg:"rgba(147, 197, 253,0.2)",startWordBorder:"rgba(147, 197, 253,0.2)",pendingBg:"#2563eb",pendingText:"#ffffff",pendingBorder:"#ffffff",selectionBg:"rgba(255,255,255,0.1)",selectionBorder:"#ffffff",selectionShadow:"rgba(255, 255, 255, 0.5)"}}],iu=class n{constructor(e,t){this.grid=e;this.dictionary=t;this.ngZone=J(Fe);this.animationFrameId=null;this.needsRender=!0;this.isPanning=!1;this.startX=0;this.startY=0;this.startOffsetX=0;this.startOffsetY=0;this.zoomLevel=we(1);this.MIN_ZOOM=.03;this.MAX_ZOOM=2;this.isPinching=!1;this.initialPinchDist=0;this.startZoom=1;this.CELL_SIZE=40;this.COOLDOWN_MS=15e3;this.pendingWordCoords=we([]);this.isValidating=we(!1);this.validationMessage=we("");this.isError=we(!1);this.activeTheme=we(xI[0]);this.themes=xI;this.entryStart=we(null);this.offsetX=No(()=>this.grid.viewportOffset().x);this.offsetY=No(()=>this.grid.viewportOffset().y);this.showText=No(()=>this.zoomLevel()>.35);En(()=>{this.zoomLevel(),this.grid.viewportOffset(),this.grid.cells(),this.grid.selectedCell(),this.grid.inputDirection(),this.pendingWordCoords(),this.activeTheme(),this.requestRender()});let r=this.grid.getCookie("cross_plane_theme");if(r){let i=this.themes.find(o=>o.id===r);i&&this.activeTheme.set(i)}En(()=>{let i=this.activeTheme();document.body.style.backgroundColor=i.colors.bg,this.grid.setCookie("cross_plane_theme",i.id,365)})}ngOnInit(){let e=new URLSearchParams(window.location.search),t=e.get("x"),r=e.get("y");if(t&&r){let i=parseInt(t,10),o=parseInt(r,10);if(!isNaN(i)&&!isNaN(o)){let s=this.CELL_SIZE*this.zoomLevel();this.grid.viewportOffset.set({x:-i*s,y:-o*s})}}}ngAfterViewInit(){this.setupCanvas(),this.startRenderLoop(),window.addEventListener("resize",()=>this.resizeCanvas())}setupCanvas(){let e=this.gridCanvas.nativeElement;this.ctx=e.getContext("2d"),this.resizeCanvas()}resizeCanvas(){let e=this.gridCanvas.nativeElement,t=window.devicePixelRatio||1;e.width=window.innerWidth*t,e.height=window.innerHeight*t,e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",this.ctx.scale(t,t),this.requestRender()}requestRender(){this.needsRender=!0}startRenderLoop(){this.ngZone.runOutsideAngular(()=>{let e=()=>{this.needsRender&&(this.renderCanvas(),this.needsRender=!1),this.animationFrameId=requestAnimationFrame(e)};e()})}renderCanvas(){let e=this.ctx,t=window.innerWidth,r=window.innerHeight,i=this.activeTheme().colors;e.clearRect(0,0,t,r),e.fillStyle=i.bg,e.fillRect(0,0,t,r);let o=this.zoomLevel(),s=this.grid.viewportOffset(),c=this.CELL_SIZE*o,u=t/2+s.x,d=r/2+s.y,h=Math.floor(-u/c)-1,g=Math.ceil((t-u)/c)+1,m=Math.floor(-d/c)-1,w=Math.ceil((r-d)/c)+1;e.strokeStyle=i.gridLines,e.lineWidth=1;for(let k=h;k<=g;k++){let E=u+k*c;e.beginPath(),e.moveTo(E,0),e.lineTo(E,r),e.stroke()}for(let k=m;k<=w;k++){let E=d+k*c;e.beginPath(),e.moveTo(0,E),e.lineTo(t,E),e.stroke()}e.fillStyle=i.blackSquare;for(let k=h;k<=g;k++)for(let E=m;E<=w;E++)if(this.grid.isBlackSquare(k,E)){let y=u+k*c,v=d+E*c;e.fillRect(y+.5,v+.5,c-1,c-1)}let M=this.showText(),R=this.grid.selectedCell(),N=Math.max(8,Math.floor(c*.55));e.font=`bold ${N}px ui-monospace, monospace`,e.textAlign="center",e.textBaseline="middle";let F=g-h,K=w-m,Q=F*K,$=this.grid.cells().size;if(Q<$*2)for(let k=h;k<=g;k++)for(let E=m;E<=w;E++){let y=this.grid.getCell(k,E);y&&this.drawCell(e,y,u,d,c,i,M,R)}else this.grid.cells().forEach(k=>{k.x<h||k.x>g||k.y<m||k.y>w||this.drawCell(e,k,u,d,c,i,M,R)});if(this.pendingWordCoords().forEach(k=>{let E=u+k.x*c,y=d+k.y*c;if(!(E+c<0||E>t||y+c<0||y>r))if(M){let v=R&&R.x===k.x&&R.y===k.y;e.fillStyle=v?i.selectionBg:i.confirmedBg,e.fillRect(E+1,y+1,c-2,c-2),e.strokeStyle=i.pendingBorder,e.lineWidth=1,e.strokeRect(E+1,y+1,c-2,c-2),e.fillStyle=i.pendingText,e.fillText(k.char,E+c/2,y+c/2+1)}else e.fillStyle=i.pendingBg,e.fillRect(E+1,y+1,c-2,c-2)}),R&&M){let k=u+R.x*c-1,E=d+R.y*c-1;e.strokeStyle=i.selectionBorder,e.lineWidth=3,e.strokeRect(k,E,c+2,c+2),e.shadowColor=i.selectionShadow,e.shadowBlur=10,e.strokeRect(k,E,c+2,c+2),e.shadowBlur=0;let y=this.grid.inputDirection()==="across",v=Math.max(12,c*.35);if(e.fillStyle=i.selectionBorder,e.beginPath(),y){let D=k+c+8,I=E+c/2;e.moveTo(D,I-v/2),e.lineTo(D+v,I),e.lineTo(D,I+v/2)}else{let D=k+c/2,I=E+c+8;e.moveTo(D-v/2,I),e.lineTo(D,I+v),e.lineTo(D+v/2,I)}e.fill()}}onCanvasClick(e){if(this.isPanning)return;let t=this.screenToGrid(e.clientX,e.clientY);this.grid.isBlackSquare(t.x,t.y)||this.selectCell(t.x,t.y)}onCanvasTouch(e){if(e.touches.length>1)return;let t=e.touches[0],r=this.screenToGrid(t.clientX,t.clientY);this.grid.isBlackSquare(r.x,r.y)||setTimeout(()=>{!this.isPanning&&!this.isPinching&&this.selectCell(r.x,r.y)},100)}screenToGrid(e,t){let r=this.zoomLevel(),i=this.grid.viewportOffset(),o=this.CELL_SIZE*r,s=window.innerWidth/2+i.x,c=window.innerHeight/2+i.y,u=Math.floor((e-s)/o),d=Math.floor((t-c)/o);return{x:u,y:d}}setZoom(e,t,r){let i=this.zoomLevel(),o=this.grid.viewportOffset(),s=Math.min(Math.max(e,this.MIN_ZOOM),this.MAX_ZOOM);if(s===i)return;let c=window.innerWidth,u=window.innerHeight,d=t-c/2,h=r-u/2,g=s/i,m=d-(d-o.x)*g,w=h-(h-o.y)*g;this.grid.viewportOffset.set({x:m,y:w}),this.zoomLevel.set(s)}zoomIn(){this.setZoom(this.zoomLevel()*1.2,window.innerWidth/2,window.innerHeight/2)}zoomOut(){this.setZoom(this.zoomLevel()/1.2,window.innerWidth/2,window.innerHeight/2)}onWheel(e){e.preventDefault();let i=1+-e.deltaY*.001;i>1.15&&(i=1.15),i<.85&&(i=.85);let o=this.zoomLevel()*i;this.setZoom(o,e.clientX,e.clientY)}selectCell(e,t){let r=this.grid.selectedCell();if(r&&r.x===e&&r.y===t){this.grid.inputDirection.update(o=>o==="across"?"down":"across");return}this.pendingWordCoords().some(o=>o.x===e&&o.y===t)||this.clearPending(),this.grid.selectedCell.set({x:e,y:t}),this.entryStart.set({x:e,y:t}),this.validationMessage.set(""),this.focusInput()}focusInput(){this.hiddenInput?.nativeElement?.focus()}onInput(e){let t=e.target,i=t.value.slice(-1).toUpperCase();t.value="",i.match(/[A-Z]/)&&this.processCharInput(i)}onGlobalKeyDown(e){if(this.grid.selectedCell()){if(e.key==="ArrowLeft"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x-1,y:r.y}:null);return}if(e.key==="ArrowRight"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x+1,y:r.y}:null);return}if(e.key==="ArrowUp"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y-1}:null);return}if(e.key==="ArrowDown"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y+1}:null);return}if(e.key==="Enter"){e.preventDefault(),this.submitWord();return}if(e.key===" "){e.preventDefault(),this.grid.inputDirection.update(r=>r==="across"?"down":"across");return}if(e.key==="Backspace"){this.handleBackspace();return}if(e.key==="Escape"){this.clearPending();return}if(e.key.length===1&&e.key.match(/[a-zA-Z]/)){if(document.activeElement===this.hiddenInput?.nativeElement)return;e.preventDefault(),this.processCharInput(e.key.toUpperCase())}}}processCharInput(e){let t=this.grid.selectedCell();if(!t||this.grid.isBlackSquare(t.x,t.y))return;let r=this.grid.getCell(t.x,t.y);if(r&&r.confirmed){if(r.char===e)this.moveCursor(1);else{let i=t.x,o=t.y;this.moveCursor(1);let s=this.grid.selectedCell();if(s&&s.x===i&&s.y===o){this.showError("Cannot change existing letters!");return}this.processCharInput(e)}return}this.addPendingChar(t.x,t.y,e),this.moveCursor(1),this.focusInput()}handleBackspace(){let e=this.grid.selectedCell(),t=this.entryStart();if(!e||!t)return;if(this.pendingWordCoords().some(h=>h.x===e.x&&h.y===e.y)){this.removePendingAt(e.x,e.y);return}let i=this.grid.inputDirection()==="across",o=i?-1:0,s=i?0:-1,c=e.x+o,u=e.y+s;if(e.x===t.x&&e.y===t.y||this.grid.isBlackSquare(c,u))return;this.grid.selectedCell.set({x:c,y:u}),this.pendingWordCoords().some(h=>h.x===c&&h.y===u)&&this.removePendingAt(c,u)}moveCursor(e){let t=this.grid.selectedCell();if(!t)return;let r=this.grid.inputDirection()==="across"?e:0,i=this.grid.inputDirection()==="down"?e:0,o=t.x+r,s=t.y+i;this.grid.isBlackSquare(o,s)||this.grid.selectedCell.set({x:o,y:s})}addPendingChar(e,t,r){this.pendingWordCoords.update(i=>[...i.filter(s=>!(s.x===e&&s.y===t)),{x:e,y:t,char:r}]),this.validationMessage.set("")}removePendingAt(e,t){this.pendingWordCoords.update(r=>r.filter(i=>!(i.x===e&&i.y===t)))}async submitWord(){if(this.pendingWordCoords().length===0)return;this.isValidating.set(!0),this.validationMessage.set(""),this.isError.set(!1);let t=this.grid.inputDirection()==="across",r=[...this.pendingWordCoords()].sort(($,re)=>t?$.x-re.x:$.y-re.y),i=r[0],o=r[r.length-1],s=i.x,c=i.y;for(;!this.grid.isBlackSquare(t?s-1:s,t?c:c-1);){let $=t?s-1:s,re=t?c:c-1,k=this.grid.getCell($,re),E=this.pendingWordCoords().find(y=>y.x===$&&y.y===re);if(k||E)s=$,c=re;else break}let u=s,d=c;for(s=o.x,c=o.y;!this.grid.isBlackSquare(t?s+1:s,t?c:c+1);){let $=t?s+1:s,re=t?c:c+1,k=this.grid.getCell($,re),E=this.pendingWordCoords().find(y=>y.x===$&&y.y===re);if(k||E)s=$,c=re;else break}let h=s,g=c,m="",w=!1,M=!1,R=t?h-u+1:g-d+1;for(let $=0;$<R;$++){let re=t?u+$:u,k=t?d:d+$,E=this.grid.getCell(re,k),y=this.pendingWordCoords().find(v=>v.x===re&&v.y===k);if(E&&E.confirmed)m+=E.char,w=!0;else if(y)m+=y.char,M=!0;else{this.showError("Word has gaps!"),this.isValidating.set(!1);return}}if(!M){this.showError("No new letters added."),this.isValidating.set(!1);return}if(!w&&this.grid.cells().size>0){this.showError("Must connect to existing words!"),this.isValidating.set(!1);return}if(m.length<2){this.showError("Word too short."),this.isValidating.set(!1);return}let N=Date.now(),F=this.grid.lastPlacedTime(),K=N-F;if(K<this.COOLDOWN_MS){let $=Math.ceil((this.COOLDOWN_MS-K)/1e3);this.showError(`Wait ${$}s to place next word.`),this.isValidating.set(!1);return}let Q=await this.dictionary.validateWord(m);if(Q.valid){for(let $=0;$<R;$++){let re=t?u+$:u,k=t?d:d+$,E=m[$];this.grid.getCell(re,k)||this.grid.setCell(re,k,E,!0)}this.grid.lastPlacedTime.set(Date.now()),this.grid.incrementWordsPlaced(),this.pendingWordCoords.set([]),this.validationMessage.set(`Placed: "${m}"
${Q.definition}`),this.isError.set(!1)}else this.showError(Q.reason||`"${m}" not found.`);this.isValidating.set(!1)}clearPending(){this.pendingWordCoords.set([]),this.validationMessage.set(""),this.hiddenInput?.nativeElement&&(this.hiddenInput.nativeElement.value="");let e=this.grid.selectedCell();e&&this.entryStart.set(e)}showError(e){this.validationMessage.set(e),this.isError.set(!0)}startPan(e){e.button===0&&(this.isPanning=!0,this.startX=e.clientX,this.startY=e.clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}startPanTouch(e){if(e.touches.length===2){this.isPinching=!0,this.isPanning=!1,this.initialPinchDist=this.getDist(e.touches),this.startZoom=this.zoomLevel();return}e.touches.length===1&&(this.isPanning=!0,this.isPinching=!1,this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}pan(e){if(!this.isPanning)return;let t=e.clientX-this.startX,r=e.clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r})}panTouch(e){if(this.isPinching&&e.touches.length===2){let r=this.getDist(e.touches)/this.initialPinchDist,i=(e.touches[0].clientX+e.touches[1].clientX)/2,o=(e.touches[0].clientY+e.touches[1].clientY)/2,s=this.startZoom*r;this.setZoom(s,i,o),e.preventDefault();return}if(this.isPanning&&e.touches.length===1){let t=e.touches[0].clientX-this.startX,r=e.touches[0].clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r}),e.cancelable&&e.preventDefault()}}endPan(){this.isPanning=!1,this.isPinching=!1}getDist(e){let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)}resetView(){this.grid.viewportOffset.set({x:0,y:0}),this.zoomLevel.set(1)}sharePosition(){let e=this.screenToGrid(window.innerWidth/2,window.innerHeight/2),t=new URL(window.location.href);t.searchParams.set("x",e.x.toString()),t.searchParams.set("y",e.y.toString()),navigator.clipboard.writeText(t.toString()).then(()=>{this.validationMessage.set("Link copied to clipboard!"),this.isError.set(!1),setTimeout(()=>{this.validationMessage()==="Link copied to clipboard!"&&this.validationMessage.set("")},3e3)})}isCellSelected(e,t){let r=this.grid.selectedCell();return!!r&&r.x===e&&r.y===t}drawCell(e,t,r,i,o,s,c,u){let d=r+t.x*o,h=i+t.y*o,g=e.canvas.width/window.devicePixelRatio,m=e.canvas.height/window.devicePixelRatio;if(!(d+o<0||d>g||h+o<0||h>m))if(c){let w=u&&u.x===t.x&&u.y===t.y,M=t.y===0&&Math.abs(t.x)<=5&&t.x!==0;w?e.fillStyle=s.selectionBg:M?e.fillStyle=s.startWordBg:e.fillStyle=s.confirmedBg,e.fillRect(d+1,h+1,o-2,o-2),M&&!w?e.strokeStyle=s.startWordBorder:e.strokeStyle=s.confirmedBorder,e.lineWidth=1,e.strokeRect(d+1,h+1,o-2,o-2),e.fillStyle=s.confirmedText,e.fillText(t.char,d+o/2,h+o/2+1)}else e.fillStyle=s.confirmedBorder,e.fillRect(d+1,h+1,o-2,o-2)}static{this.\u0275fac=function(t){return new(t||n)(_t(nu),_t(ru))}}static{this.\u0275cmp=bo({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Xr(JN,5)(eR,5),t&2){let i;Jr(i=ei())&&(r.hiddenInput=i.first),Jr(i=ei())&&(r.gridCanvas=i.first)}},decls:6,vars:8,consts:[["gridCanvas",""],["hiddenInput",""],[1,"relative","w-full","h-full","overflow-hidden","bg-white","select-none","cursor-grab","active:cursor-grabbing","font-mono",3,"mousedown","touchstart","mousemove","touchmove","mouseup","touchend","keydown","wheel"],[1,"absolute","inset-0","w-full","h-full",3,"click","touchstart"],[3,"themeSelected","zoomIn","zoomOut","resetView","sharePosition","lastPlacedTime","cooldownMs","wordsPlacedCount","isValidating","validationMessage","isError","activeTheme","themes"],["type","text","inputmode","text","autocomplete","off","autocorrect","off","autocapitalize","characters",1,"absolute","opacity-0","top-0","left-0","w-px","h-px","overflow-hidden","-z-10",3,"input"]],template:function(t,r){if(t&1){let i=Yr();ee(0,"div",2),Ke("mousedown",function(s){return he(i),pe(r.startPan(s))})("touchstart",function(s){return he(i),pe(r.startPanTouch(s))})("mousemove",function(s){return he(i),pe(r.pan(s))},or)("touchmove",function(s){return he(i),pe(r.panTouch(s))},or)("mouseup",function(){return he(i),pe(r.endPan())},or)("touchend",function(){return he(i),pe(r.endPan())},or)("keydown",function(s){return he(i),pe(r.onGlobalKeyDown(s))},or)("wheel",function(s){return he(i),pe(r.onWheel(s))}),ee(1,"canvas",3,0),Ke("click",function(s){return he(i),pe(r.onCanvasClick(s))})("touchstart",function(s){return he(i),pe(r.onCanvasTouch(s))}),fe(),ee(3,"app-top-bar",4),Ke("themeSelected",function(s){return he(i),pe(r.activeTheme.set(s))})("zoomIn",function(){return he(i),pe(r.zoomIn())})("zoomOut",function(){return he(i),pe(r.zoomOut())})("resetView",function(){return he(i),pe(r.resetView())})("sharePosition",function(){return he(i),pe(r.sharePosition())}),fe(),ee(4,"input",5,1),Ke("input",function(s){return he(i),pe(r.onInput(s))}),fe()()}t&2&&(ct(3),ut("lastPlacedTime",r.grid.lastPlacedTime())("cooldownMs",r.COOLDOWN_MS)("wordsPlacedCount",r.grid.wordsPlacedCount())("isValidating",r.isValidating())("validationMessage",r.validationMessage())("isError",r.isError())("activeTheme",r.activeTheme())("themes",r.themes))},dependencies:[ti,Za],encapsulation:2})}};vf(iu,{providers:[Jd()]}).catch(n=>console.error(n));
