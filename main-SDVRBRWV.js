var lb=Object.defineProperty,db=Object.defineProperties;var fb=Object.getOwnPropertyDescriptors;var pa=Object.getOwnPropertySymbols;var ev=Object.prototype.hasOwnProperty,tv=Object.prototype.propertyIsEnumerable;var Xy=(n,e,t)=>e in n?lb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})ev.call(e,t)&&Xy(n,t,e[t]);if(pa)for(var t of pa(e))tv.call(e,t)&&Xy(n,t,e[t]);return n},me=(n,e)=>db(n,fb(e));var ga=(n,e)=>{var t={};for(var r in n)ev.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&pa)for(var r of pa(n))e.indexOf(r)<0&&tv.call(n,r)&&(t[r]=n[r]);return t};var $e=null,ma=!1,zl=1,hb=null,ht=Symbol("SIGNAL");function G(n){let e=$e;return $e=n,e}function va(){return $e}var Xr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gl(n){if(ma)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(n);let e=$e.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=$e.recomputing;if(r&&(t=e!==void 0?e.nextProducer:$e.producers,t!==void 0&&t.producer===n)){$e.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===$e&&(!r||gb(i,$e)))return;let s=ti($e),o={producer:n,consumer:$e,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};$e.producersTail=o,e!==void 0?e.nextProducer=o:$e.producers=o,s&&sv(n,o)}function nv(){zl++}function Wl(n){if(!(ti(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zl)){if(!n.producerMustRecompute(n)&&!Ea(n)){ql(n);return}n.producerRecomputeValue(n),ql(n)}}function Kl(n){if(n.consumers===void 0)return;let e=ma;ma=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||pb(r)}}finally{ma=e}}function Ql(){return $e?.consumerAllowSignalWrites!==!1}function pb(n){n.dirty=!0,Kl(n),n.consumerMarkedDirty?.(n)}function ql(n){n.dirty=!1,n.lastCleanEpoch=zl}function Cs(n){return n&&rv(n),G(n)}function rv(n){n.producersTail=void 0,n.recomputing=!0}function _a(n,e){G(e),n&&iv(n)}function iv(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(ti(n))do t=Yl(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ea(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Wl(t),r!==t.version))return!0}return!1}function ei(n){if(ti(n)){let e=n.producers;for(;e!==void 0;)e=Yl(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function sv(n,e){let t=n.consumersTail,r=ti(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)sv(i.producer,i)}function Yl(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ti(e)){let s=e.producers;for(;s!==void 0;)s=Yl(s)}return t}function ti(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Zl(n){hb?.(n)}function gb(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Jl(n,e){return Object.is(n,e)}function Ia(n,e){let t=Object.create(mb);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Wl(t),Gl(t),t.value===ya)throw t.error;return t.value};return r[ht]=t,Zl(t),r}var Hl=Symbol("UNSET"),$l=Symbol("COMPUTING"),ya=Symbol("ERRORED"),mb=me(j({},Xr),{value:Hl,dirty:!0,error:null,equal:Jl,kind:"computed",producerMustRecompute(n){return n.value===Hl||n.value===$l},producerRecomputeValue(n){if(n.value===$l)throw new Error("");let e=n.value;n.value=$l;let t=Cs(n),r,i=!1;try{r=n.computation(),G(null),i=e!==Hl&&e!==ya&&r!==ya&&n.equal(e,r)}catch(s){r=ya,n.error=s}finally{_a(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function yb(){throw new Error}var ov=yb;function av(n){ov(n)}function Xl(n){ov=n}var vb=null;function ed(n,e){let t=Object.create(lv);t.value=n,e!==void 0&&(t.equal=e);let r=()=>cv(t);return r[ht]=t,Zl(t),[r,o=>td(t,o),o=>uv(t,o)]}function cv(n){return Gl(n),n.value}function td(n,e){Ql()||av(n),n.equal(n.value,e)||(n.value=e,_b(n))}function uv(n,e){Ql()||av(n),td(n,e(n.value))}var lv=me(j({},Xr),{equal:Jl,value:void 0,kind:"signal"});function _b(n){n.version++,nv(),Kl(n),vb?.(n)}function nd(n){let e=G(null);try{return n()}finally{G(e)}}var rd=me(j({},Xr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function id(n){if(n.dirty=!1,n.version>0&&!Ea(n))return;n.version++;let e=Cs(n);try{n.cleanup(),n.fn()}finally{_a(n,e)}}function it(n){return typeof n=="function"}function wa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ta=wa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function bs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(it(r))try{r()}catch(s){e=s instanceof Ta?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{dv(s)}catch(o){e=e??[],o instanceof Ta?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ta(e)}}add(e){var t;if(e&&e!==this)if(this.closed)dv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&bs(t,e)}remove(e){let{_finalizers:t}=this;t&&bs(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var sd=Je.EMPTY;function Da(n){return n instanceof Je||n&&"closed"in n&&it(n.remove)&&it(n.add)&&it(n.unsubscribe)}function dv(n){it(n)?n():n.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ni={setTimeout(n,e,...t){let{delegate:r}=ni;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ni;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fv(n){ni.setTimeout(()=>{let{onUnhandledError:e}=wt;if(e)e(n);else throw n})}function od(){}var hv=ad("C",void 0,void 0);function pv(n){return ad("E",void 0,n)}function gv(n){return ad("N",n,void 0)}function ad(n,e,t){return{kind:n,value:e,error:t}}var lr=null;function ri(n){if(wt.useDeprecatedSynchronousErrorHandling){let e=!lr;if(e&&(lr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=lr;if(lr=null,t)throw r}}else n()}function mv(n){wt.useDeprecatedSynchronousErrorHandling&&lr&&(lr.errorThrown=!0,lr.error=n)}var dr=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Da(e)&&e.add(this)):this.destination=wb}static create(e,t,r){return new ii(e,t,r)}next(e){this.isStopped?ud(gv(e),this):this._next(e)}error(e){this.isStopped?ud(pv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ud(hv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Eb=Function.prototype.bind;function cd(n,e){return Eb.call(n,e)}var ld=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ca(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ca(r)}else Ca(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ca(t)}}},ii=class extends dr{constructor(e,t,r){super();let i;if(it(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cd(e.next,s),error:e.error&&cd(e.error,s),complete:e.complete&&cd(e.complete,s)}):i=e}this.destination=new ld(i)}};function Ca(n){wt.useDeprecatedSynchronousErrorHandling?mv(n):fv(n)}function Ib(n){throw n}function ud(n,e){let{onStoppedNotification:t}=wt;t&&ni.setTimeout(()=>t(n,e))}var wb={closed:!0,next:od,error:Ib,complete:od};var yv=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vv(n){return n}function _v(n){return n.length===0?vv:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var si=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Db(t)?t:new ii(t,r,i);return ri(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ev(r),new r((i,s)=>{let o=new ii({next:c=>{try{t(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[yv](){return this}pipe(...t){return _v(t)(this)}toPromise(t){return t=Ev(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Ev(n){var e;return(e=n??wt.Promise)!==null&&e!==void 0?e:Promise}function Tb(n){return n&&it(n.next)&&it(n.error)&&it(n.complete)}function Db(n){return n&&n instanceof dr||Tb(n)&&Da(n)}function Cb(n){return it(n?.lift)}function Iv(n){return e=>{if(Cb(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wv(n,e,t,r,i){return new dd(n,e,t,r,i)}var dd=class extends dr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Tv=wa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rn=(()=>{class n extends si{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ba(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Tv}next(t){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?sd:(this.currentObservers=null,s.push(t),new Je(()=>{this.currentObservers=null,bs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new si;return t.source=this,t}}return n.create=(e,t)=>new ba(e,t),n})(),ba=class extends rn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:sd}};var Ss=class extends rn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function fd(n,e){return Iv((t,r)=>{let i=0;t.subscribe(wv(r,s=>{r.next(n.call(e,s,i++))}))})}var hd;function Sa(){return hd}function Ft(n){let e=hd;return hd=n,e}var Dv=Symbol("NotFound");function oi(n){return n===Dv||n?.name==="\u0275NotFound"}var Oa="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",J=class extends Error{code;constructor(e,t){super(La(e,t)),this.code=e}};function bb(n){return`NG0${Math.abs(n)}`}function La(n,e){return`${bb(n)}${e?": "+e:""}`}function fe(n){for(let e in n)if(n[e]===fe)return e;throw Error("")}function Rn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Rn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Sd(n,e){return n?e?`${n} ${e}`:n:e||""}var Sb=fe({__forward_ref__:fe});function Fa(n){return n.__forward_ref__=Fa,n.toString=function(){return Rn(this())},n}function ut(n){return Nv(n)?n():n}function Nv(n){return typeof n=="function"&&n.hasOwnProperty(Sb)&&n.__forward_ref__===Fa}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xs(n){return{providers:n.providers||[],imports:n.imports||[]}}function Va(n){return Ab(n,Ba)}function Ab(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Nb(n){let e=n?.[Ba]??null;return e||null}function gd(n){return n&&n.hasOwnProperty(Na)?n[Na]:null}var Ba=fe({\u0275prov:fe}),Na=fe({\u0275inj:fe}),ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ad(n){return n&&!!n.\u0275providers}var Nd=fe({\u0275cmp:fe}),Rd=fe({\u0275dir:fe}),Md=fe({\u0275pipe:fe});var md=fe({\u0275fac:fe}),mr=fe({__NG_ELEMENT_ID__:fe}),Cv=fe({__NG_ENV_ID__:fe});function yr(n){return xd(n,"@Component"),n[Nd]||null}function Pd(n){return xd(n,"@Directive"),n[Rd]||null}function Rv(n){return xd(n,"@Pipe"),n[Md]||null}function xd(n,e){if(n==null)throw new J(-919,!1)}function ja(n){return typeof n=="string"?n:n==null?"":String(n)}function Mv(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ja(n)}var Pv=fe({ngErrorCode:fe}),Rb=fe({ngErrorMessage:fe}),Mb=fe({ngTokenPath:fe});function kd(n,e){return xv("",-200,e)}function Ua(n,e){throw new J(-201,!1)}function xv(n,e,t){let r=new J(e,n);return r[Pv]=e,r[Rb]=n,t&&(r[Mb]=t),r}function Pb(n){return n[Pv]}var yd;function kv(){return yd}function ct(n){let e=yd;return yd=n,e}function Od(n,e,t){let r=Va(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ua(n,"")}var xb={},fr=xb,kb="__NG_DI_FLAG__",vd=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=hr(t)||0;try{return this.injector.get(e,r&8?null:fr,r)}catch(i){if(oi(i))return i;throw i}}};function Ob(n,e=0){let t=Sa();if(t===void 0)throw new J(-203,!1);if(t===null)return Od(n,void 0,e);{let r=Lb(e),i=t.retrieve(n,r);if(oi(i)){if(r.optional)return null;throw i}return i}}function de(n,e=0){return(kv()||Ob)(ut(n),e)}function X(n,e){return de(n,hr(e))}function hr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Lb(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function _d(n){let e=[];for(let t=0;t<n.length;t++){let r=ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let c=r[o],u=Fb(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(de(i,s))}else e.push(de(r))}return e}function Fb(n){return n[kb]}function ci(n,e){let t=n.hasOwnProperty(md);return t?n[md]:null}function Ov(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function Lv(n){return n.flat(Number.POSITIVE_INFINITY)}function Ha(n,e){n.forEach(t=>Array.isArray(t)?Ha(t,e):e(t))}function Ld(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ks(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Fv(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Vv(n,e,t){let r=ui(n,e);return r>=0?n[r|1]=t:(r=~r,Fv(n,r,e,t)),r}function $a(n,e){let t=ui(n,e);if(t>=0)return n[t|1]}function ui(n,e){return Vb(n,e,1)}function Vb(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var vr={},pt=[],Os=new ce(""),Fd=new ce("",-1),Vd=new ce(""),Ns=class{get(e,t=fr){if(t===fr){let i=xv("",-201);throw i.name="\u0275NotFound",i}return t}};function Bd(n){return{\u0275providers:n}}function Bv(...n){return{\u0275providers:jd(!0,n),\u0275fromNgModule:!0}}function jd(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Ha(e,o=>{let c=o;Ra(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&jv(i,s),t}function jv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ud(i,s=>{e(s,r)})}}function Ra(n,e,t,r){if(n=ut(n),!n)return!1;let i=null,s=gd(n),o=!s&&yr(n);if(!s&&!o){let u=n.ngModule;if(s=gd(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Ra(l,e,t,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{Ha(s.imports,h=>{Ra(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&jv(l,e)}if(!c){let l=ci(i)||(()=>new i);e({provide:i,useFactory:l,deps:pt},i),e({provide:Vd,useValue:i,multi:!0},i),e({provide:Os,useValue:()=>de(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=n;Ud(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ud(n,e){for(let t of n)Ad(t)&&(t=t.\u0275providers),Array.isArray(t)?Ud(t,e):e(t)}var Bb=fe({provide:String,useValue:fe});function Uv(n){return n!==null&&typeof n=="object"&&Bb in n}function jb(n){return!!(n&&n.useExisting)}function Ub(n){return!!(n&&n.useFactory)}function Ma(n){return typeof n=="function"}var Ls=new ce(""),Aa={},bv={},pd;function Fs(){return pd===void 0&&(pd=new Ns),pd}var gt=class{},pr=class extends gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Id(e,o=>this.processProvider(o)),this.records.set(Fd,ai(void 0,this)),i.has("environment")&&this.records.set(gt,ai(void 0,this));let s=this.records.get(Ls);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Vd,pt,{self:!0}))}retrieve(e,t){let r=hr(t)||0;try{return this.get(e,fr,r)}catch(i){if(oi(i))return i;throw i}}destroy(){As(this),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return As(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){As(this);let t=Ft(this),r=ct(void 0),i;try{return e()}finally{Ft(t),ct(r)}}get(e,t=fr,r){if(As(this),e.hasOwnProperty(Cv))return e[Cv](this);let i=hr(r),s,o=Ft(this),c=ct(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Gb(e)&&Va(e);h&&this.injectableDefInScope(h)?l=ai(Ed(e),Aa):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Fs():this.parent;return t=i&8&&t===fr?null:t,u.get(e,t)}catch(u){let l=Pb(u);throw l===-200||l===-201?new J(l,null):u}finally{ct(c),Ft(o)}}resolveInjectorInitializers(){let e=G(null),t=Ft(this),r=ct(void 0),i;try{let s=this.get(Os,pt,{self:!0});for(let o of s)o()}finally{Ft(t),ct(r),G(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ut(e);let t=Ma(e)?e:ut(e&&e.provide),r=$b(e);if(!Ma(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ai(void 0,Aa,!0),i.factory=()=>_d(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=G(null);try{if(t.value===bv)throw kd(Rn(e));return t.value===Aa&&(t.value=bv,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&zb(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ed(n){let e=Va(n),t=e!==null?e.factory:ci(n);if(t!==null)return t;if(n instanceof ce)throw new J(204,!1);if(n instanceof Function)return Hb(n);throw new J(204,!1)}function Hb(n){if(n.length>0)throw new J(204,!1);let t=Nb(n);return t!==null?()=>t.factory(n):()=>new n}function $b(n){if(Uv(n))return ai(void 0,n.useValue);{let e=Hv(n);return ai(e,Aa)}}function Hv(n,e,t){let r;if(Ma(n)){let i=ut(n);return ci(i)||Ed(i)}else if(Uv(n))r=()=>ut(n.useValue);else if(Ub(n))r=()=>n.useFactory(..._d(n.deps||[]));else if(jb(n))r=(i,s)=>de(ut(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=ut(n&&(n.useClass||n.provide));if(qb(n))r=()=>new i(..._d(n.deps));else return ci(i)||Ed(i)}return r}function As(n){if(n.destroyed)throw new J(205,!1)}function ai(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function qb(n){return!!n.deps}function zb(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Gb(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Id(n,e){for(let t of n)Array.isArray(t)?Id(t,e):t&&Ad(t)?Id(t.\u0275providers,e):e(t)}function qa(n,e){let t;n instanceof pr?(As(n),t=n):t=new vd(n);let r,i=Ft(t),s=ct(void 0);try{return e()}finally{Ft(i),ct(s)}}function $v(){return kv()!==void 0||Sa()!=null}var Tt=0,q=1,H=2,Fe=3,mt=4,yt=5,Vs=6,li=7,ze=8,kn=9,Vt=10,Ve=11,di=12,Hd=13,_r=14,Dt=15,On=16,Er=17,Bt=18,Bs=19,$d=20,sn=21,za=22,Mn=23,lt=24,Ga=25,js=26,st=27,qv=1;var Ln=7,Us=8,Ir=9,et=10;function an(n){return Array.isArray(n)&&typeof n[qv]=="object"}function Ct(n){return Array.isArray(n)&&n[qv]===!0}function qd(n){return(n.flags&4)!==0}function wr(n){return n.componentOffset>-1}function Hs(n){return(n.flags&1)===1}function Tr(n){return!!n.template}function fi(n){return(n[H]&512)!==0}function Dr(n){return(n[H]&256)===256}var zd="svg",zv="math";function vt(n){for(;Array.isArray(n);)n=n[Tt];return n}function Gd(n,e){return vt(e[n])}function jt(n,e){return vt(e[n.index])}function Wa(n,e){return n.data[e]}function Gv(n,e){return n[e]}function Ut(n,e){let t=e[n];return an(t)?t:t[Tt]}function Wv(n){return(n[H]&4)===4}function Ka(n){return(n[H]&128)===128}function Kv(n){return Ct(n[Fe])}function $s(n,e){return e==null?null:n[e]}function Wd(n){n[Er]=0}function Kd(n){n[H]&1024||(n[H]|=1024,Ka(n)&&hi(n))}function Qv(n,e){for(;n>0;)e=e[_r],n--;return e}function qs(n){return!!(n[H]&9216||n[lt]?.dirty)}function Qa(n){n[Vt].changeDetectionScheduler?.notify(8),n[H]&64&&(n[H]|=1024),qs(n)&&hi(n)}function hi(n){n[Vt].changeDetectionScheduler?.notify(0);let e=Pn(n);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!Ka(e)));)e=Pn(e)}function Qd(n,e){if(Dr(n))throw new J(911,!1);n[sn]===null&&(n[sn]=[]),n[sn].push(e)}function Yv(n,e){if(n[sn]===null)return;let t=n[sn].indexOf(e);t!==-1&&n[sn].splice(t,1)}function Pn(n){let e=n[Fe];return Ct(e)?e[Fe]:e}function Yd(n){return n[li]??=[]}function Zd(n){return n.cleanup??=[]}function Zv(n,e,t,r){let i=Yd(e);i.push(t),n.firstCreatePass&&Zd(n).push(r,i.length-1)}var Y={lFrame:p_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wd=!1;function Jv(){return Y.lFrame.elementDepthCount}function Xv(){Y.lFrame.elementDepthCount++}function e_(){Y.lFrame.elementDepthCount--}function Jd(){return Y.bindingsEnabled}function t_(){return Y.skipHydrationRootTNode!==null}function n_(n){return Y.skipHydrationRootTNode===n}function r_(){Y.skipHydrationRootTNode=null}function _e(){return Y.lFrame.lView}function Ht(){return Y.lFrame.tView}function ne(n){return Y.lFrame.contextLView=n,n[ze]}function re(n){return Y.lFrame.contextLView=null,n}function $t(){let n=Xd();for(;n!==null&&n.type===64;)n=n.parent;return n}function Xd(){return Y.lFrame.currentTNode}function i_(){let n=Y.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function pi(n,e){let t=Y.lFrame;t.currentTNode=n,t.isParent=e}function ef(){return Y.lFrame.isParent}function s_(){Y.lFrame.isParent=!1}function o_(){return Y.lFrame.contextLView}function tf(){return wd}function Rs(n){let e=wd;return wd=n,e}function a_(n){return Y.lFrame.bindingIndex=n}function nf(){return Y.lFrame.bindingIndex++}function c_(n){let e=Y.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function u_(){return Y.lFrame.inI18n}function l_(n,e){let t=Y.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ya(e)}function d_(){return Y.lFrame.currentDirectiveIndex}function Ya(n){Y.lFrame.currentDirectiveIndex=n}function f_(n){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function rf(){return Y.lFrame.currentQueryIndex}function Za(n){Y.lFrame.currentQueryIndex=n}function Wb(n){let e=n[q];return e.type===2?e.declTNode:e.type===1?n[yt]:null}function sf(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Wb(s),i===null||(s=s[_r],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Y.lFrame=h_();return r.currentTNode=e,r.lView=n,!0}function Ja(n){let e=h_(),t=n[q];Y.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function h_(){let n=Y.lFrame,e=n===null?null:n.child;return e===null?p_(n):e}function p_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function g_(){let n=Y.lFrame;return Y.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var of=g_;function Xa(){let n=g_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function m_(n){return(Y.lFrame.contextLView=Qv(n,Y.lFrame.contextLView))[ze]}function Cr(){return Y.lFrame.selectedIndex}function Fn(n){Y.lFrame.selectedIndex=n}function y_(){let n=Y.lFrame;return Wa(n.tView,n.selectedIndex)}function tt(){Y.lFrame.currentNamespace=zd}function qt(){Kb()}function Kb(){Y.lFrame.currentNamespace=null}function v_(){return Y.lFrame.currentNamespace}var __=!0;function ec(){return __}function tc(n){__=n}function Td(n,e=null,t=null,r){let i=E_(n,e,t,r);return i.resolveInjectorInitializers(),i}function E_(n,e=null,t=null,r,i=new Set){let s=[t||pt,Bv(n)];return r=r||(typeof n=="object"?void 0:Rn(n)),new pr(s,e||Fs(),r||null,i)}var xn=class n{static THROW_IF_NOT_FOUND=fr;static NULL=new Ns;static create(e,t){if(Array.isArray(e))return Td({name:""},t,e,"");{let r=e.name??"";return Td({name:r},e.parent,e.providers,r)}}static \u0275prov=he({token:n,providedIn:"any",factory:()=>de(Fd)});static __NG_ELEMENT_ID__=-1},bt=new ce(""),zs=(()=>{class n{static __NG_ELEMENT_ID__=Qb;static __NG_ENV_ID__=t=>t}return n})(),Pa=class extends zs{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Dr(this._lView)}onDestroy(e){let t=this._lView;return Qd(t,e),()=>Yv(t,e)}};function Qb(){return new Pa(_e())}var I_=!1,gi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ss(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new si(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),Dd=class extends rn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,$v()&&(this.destroyRef=X(zs,{optional:!0})??void 0,this.pendingTasks=X(gi,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Je&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Xe=Dd;function xa(...n){}function af(n){let e,t;function r(){n=xa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function cf(n){return queueMicrotask(()=>n()),()=>{n=xa}}var uf="isAngularZone",Ms=uf+"_ID",Yb=0,qe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xe(!1);onMicrotaskEmpty=new Xe(!1);onStable=new Xe(!1);onError=new Xe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=I_}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Xb(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Zb,xa,xa);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Zb={};function lf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Jb(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){af(()=>{n.callbackScheduled=!1,Cd(n),n.isCheckStableRunning=!0,lf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Cd(n)}function Xb(n){let e=()=>{Jb(n)},t=Yb++;n._inner=n._inner.fork({name:"angular",properties:{[uf]:!0,[Ms]:t,[Ms+t]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(eS(u))return r.invokeTask(s,o,c,u);try{return Sv(n),r.invokeTask(s,o,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Av(n)}},onInvoke:(r,i,s,o,c,u,l)=>{try{return Sv(n),r.invoke(s,o,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!tS(u)&&e(),Av(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Cd(n),lf(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Cd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Sv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Av(n){n._nesting--,lf(n)}var Ps=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xe;onMicrotaskEmpty=new Xe;onStable=new Xe;onError=new Xe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function eS(n){return w_(n,"__ignore_ng_zone__")}function tS(n){return w_(n,"__scheduler_tick__")}function w_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var on=class{_console=console;handleError(e){this._console.error("ERROR",e)}},br=new ce("",{factory:()=>{let n=X(qe),e=X(gt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(on),t.handleError(r))})}}}),T_={provide:Os,useValue:()=>{let n=X(on,{optional:!0})},multi:!0};function Te(n,e){let[t,r,i]=ed(n,e?.equal),s=t,o=s[ht];return s.set=r,s.update=i,s.asReadonly=D_.bind(s),s}function D_(){let n=this[ht];if(n.readonlyFn===void 0){let e=()=>this();e[ht]=n,n.readonlyFn=e}return n.readonlyFn}var nc=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=nS}return n})();function nS(){return new nc(_e(),$t())}var gr=class{},Gs=new ce("",{factory:()=>!0});var df=new ce("");var rc=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new bd})}return n})(),bd=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},ka=class{[ht];constructor(e){this[ht]=e}destroy(){this[ht].destroy()}};function cn(n,e){let t=e?.injector??X(xn),r=e?.manualCleanup!==!0?t.get(zs):null,i,s=t.get(nc,null,{optional:!0}),o=t.get(gr);return s!==null?(i=sS(s.view,o,n),r instanceof Pa&&r._lView===s.view&&(r=null)):i=oS(n,t.get(rc),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new ka(i)}var C_=me(j({},rd),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Rs(!1);try{id(this)}finally{Rs(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=G(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],G(n)}}}),rS=me(j({},C_),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(ei(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),iS=me(j({},C_),{consumerMarkedDirty(){this.view[H]|=8192,hi(this.view),this.notifier.notify(13)},destroy(){if(ei(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Mn]?.delete(this)}});function sS(n,e,t){let r=Object.create(iS);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=b_(r,t),n[Mn]??=new Set,n[Mn].add(r),r.consumerMarkedDirty(r),r}function oS(n,e,t){let r=Object.create(rS);return r.fn=b_(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function b_(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Ws(n){return nd(n)}function vc(n){return{toString:n}.toString()}function mS(n){return typeof n=="function"}function tE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var uc=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function yS(n){return n.type.prototype.ngOnChanges&&(n.setInput=_S),vS}function vS(){let n=rE(this),e=n?.current;if(e){let t=n.previous;if(t===vr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _S(n,e,t,r,i){let s=this.declaredInputs[r],o=rE(n)||ES(n,{previous:vr,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new uc(l&&l.currentValue,t,u===vr),tE(n,e,i,t)}var nE="__ngSimpleChanges__";function rE(n){return n[nE]||null}function ES(n,e){return n[nE]=e}var S_=[];var pe=function(n,e=null,t){for(let r=0;r<S_.length;r++){let i=S_[r];i(n,e,t)}},ue=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ue||{});function IS(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=yS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function iE(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function sc(n,e,t){sE(n,e,3,t)}function oc(n,e,t,r){(n[H]&3)===t&&sE(n,e,t,r)}function ff(n,e){let t=n[H];(t&3)===e&&(t&=16383,t+=1,n[H]=t)}function sE(n,e,t,r){let i=r!==void 0?n[Er]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Er]+=65536),(c<s||s==-1)&&(wS(n,t,e,u),n[Er]=(n[Er]&4294901760)+u+2),u++}function A_(n,e){pe(ue.LifecycleHookStart,n,e);let t=G(null);try{e.call(n)}finally{G(t),pe(ue.LifecycleHookEnd,n,e)}}function wS(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],c=n[o];i?n[H]>>14<n[Er]>>16&&(n[H]&3)===e&&(n[H]+=16384,A_(c,s)):A_(c,s)}var yi=-1,Ys=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function TS(n){return(n.flags&8)!==0}function DS(n){return(n.flags&16)!==0}function CS(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],c=t[r++];n.setAttribute(e,o,c,s)}else{let s=i,o=t[++r];SS(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function bS(n){return n===3||n===4||n===6}function SS(n){return n.charCodeAt(0)===64}function Vf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?N_(n,t,i,null,e[++r]):N_(n,t,i,null,null))}}return n}function N_(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let c=n[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<n.length;){let c=n[s];if(typeof c=="number")break;if(c===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function oE(n){return n!==yi}function lc(n){return n&32767}function AS(n){return n>>16}function dc(n,e){let t=AS(n),r=e;for(;t>0;)r=r[_r],t--;return r}var _f=!0;function R_(n){let e=_f;return _f=n,e}var NS=256,aE=NS-1,cE=5,RS=0,zt={};function MS(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(mr)&&(r=t[mr]),r==null&&(r=t[mr]=RS++);let i=r&aE,s=1<<i;e.data[n+(i>>cE)]|=s}function uE(n,e){let t=lE(n,e);if(t!==-1)return t;let r=e[q];r.firstCreatePass&&(n.injectorIndex=e.length,hf(r.data,n),hf(e,null),hf(r.blueprint,null));let i=Bf(n,e),s=n.injectorIndex;if(oE(i)){let o=lc(i),c=dc(i,e),u=c[q].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function hf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function lE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Bf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=gE(i),r===null)return yi;if(t++,i=i[_r],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return yi}function PS(n,e,t){MS(n,e,t)}function dE(n,e,t){if(t&8||n!==void 0)return n;Ua(e,"NodeInjector")}function fE(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[kn],s=ct(void 0);try{return i?i.get(e,r,t&8):Od(e,r,t&8)}finally{ct(s)}}return dE(r,e,t)}function hE(n,e,t,r=0,i){if(n!==null){if(e[H]&2048&&!(r&2)){let o=LS(n,e,t,r,zt);if(o!==zt)return o}let s=pE(n,e,t,r,zt);if(s!==zt)return s}return fE(e,t,r,i)}function pE(n,e,t,r,i){let s=kS(t);if(typeof s=="function"){if(!sf(e,n,r))return r&1?dE(i,t,r):fE(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Ua(t);else return o}finally{of()}}else if(typeof s=="number"){let o=null,c=lE(n,e),u=yi,l=r&1?e[Dt][yt]:null;for((c===-1||r&4)&&(u=c===-1?Bf(n,e):e[c+8],u===yi||!P_(r,!1)?c=-1:(o=e[q],c=lc(u),e=dc(u,e)));c!==-1;){let h=e[q];if(M_(s,c,h.data)){let p=xS(c,e,t,o,r,l);if(p!==zt)return p}u=e[c+8],u!==yi&&P_(r,e[q].data[c+8]===l)&&M_(s,c,e)?(o=h,c=lc(u),e=dc(u,e)):c=-1}}return i}function xS(n,e,t,r,i,s){let o=e[q],c=o.data[n+8],u=r==null?wr(c)&&_f:r!=o&&(c.type&3)!==0,l=i&1&&s===c,h=ac(c,o,t,u,l);return h!==null?fc(e,o,h,c,i):zt}function ac(n,e,t,r,i){let s=n.providerIndexes,o=e.data,c=s&1048575,u=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?c:c+h,m=i?c+h:l;for(let I=p;I<m;I++){let S=o[I];if(I<u&&t===S||I>=u&&S.type===t)return I}if(i){let I=o[u];if(I&&Tr(I)&&I.type===t)return u}return null}function fc(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ys){let c=s;if(c.resolving){let I=Mv(o[t]);throw kd(I)}let u=R_(c.canSeeViewProviders);c.resolving=!0;let l=o[t].type||o[t],h,p=c.injectImpl?ct(c.injectImpl):null,m=sf(n,r,0);try{s=n[t]=c.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&IS(t,o[t],e)}finally{p!==null&&ct(p),R_(u),c.resolving=!1,of()}}return s}function kS(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(mr)?n[mr]:void 0;return typeof e=="number"?e>=0?e&aE:OS:e}function M_(n,e,t){let r=1<<n;return!!(t[e+(n>>cE)]&r)}function P_(n,e){return!(n&2)&&!(n&1&&e)}var Sr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hE(this._tNode,this._lView,e,hr(r),t)}};function OS(){return new Sr($t(),_e())}function LS(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[H]&2048&&!fi(o);){let c=pE(s,o,t,r|2,zt);if(c!==zt)return c;let u=s.parent;if(!u){let l=o[$d];if(l){let h=l.get(t,zt,r);if(h!==zt)return h}u=gE(o),o=o[_r]}s=u}return i}function gE(n){let e=n[q],t=e.type;return t===2?e.declTNode:t===1?n[yt]:null}function FS(){return wi($t(),_e())}function wi(n,e){return new Ti(jt(n,e))}var Ti=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=FS}return n})();function VS(n){return n instanceof Ti?n.nativeElement:n}function BS(){return this._results[Symbol.iterator]()}var hc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new rn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Lv(e);(this._changesDetected=!Ov(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=BS};function mE(n){return(n.flags&128)===128}var jf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(jf||{}),yE=new Map,jS=0;function US(){return jS++}function HS(n){yE.set(n[Bs],n)}function Ef(n){yE.delete(n[Bs])}var x_="__ngContext__";function vi(n,e){an(e)?(n[x_]=e[Bs],HS(e)):n[x_]=e}function vE(n){return EE(n[di])}function _E(n){return EE(n[mt])}function EE(n){for(;n!==null&&!Ct(n);)n=n[mt];return n}var $S;function Uf(n){$S=n}var _c=new ce("",{factory:()=>qS}),qS="ng";var Ec=new ce(""),no=new ce("",{providedIn:"platform",factory:()=>"unknown"});var Ic=new ce("",{factory:()=>X(bt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IE=!1,wE=new ce("",{factory:()=>IE});var zS=(n,e,t,r)=>{};function GS(n,e,t,r){zS(n,e,t,r)}function Hf(n){return(n.flags&32)===32}var WS=()=>null;function TE(n,e,t=!1){return WS(n,e,t)}function DE(n,e){let t=n.contentQueries;if(t!==null){let r=G(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let c=n.data[o];Za(s),c.contentQueries(2,e[o],o)}}}finally{G(r)}}}function If(n,e,t){Za(0);let r=G(null);try{e(n,t)}finally{G(r)}}function CE(n,e,t){if(qd(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=n.data[o];if(c.contentQueries){let u=t[o];c.contentQueries(1,u,o)}}}finally{G(r)}}}var At=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(At||{});var pc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Oa})`}};function $f(n){return n instanceof pc?n.changingThisBreaksApplicationSecurity:n}function bE(n,e){let t=SE(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Oa})`)}return t===e}function SE(n){return n instanceof pc&&n.getTypeName()||null}var KS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function AE(n){return n=String(n),n.match(KS)?n:"unsafe:"+n}function QS(n,e){return n.createText(e)}function YS(n,e,t){n.setValue(e,t)}function NE(n,e,t){return n.createElement(e,t)}function gc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function RE(n,e,t){n.appendChild(e,t)}function k_(n,e,t,r,i){r!==null?gc(n,e,t,r,i):RE(n,e,t)}function ZS(n,e,t,r){n.removeChild(null,e,t,r)}function JS(n,e,t){n.setAttribute(e,"style",t)}function XS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ME(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&CS(n,e,r),i!==null&&XS(n,e,i),s!==null&&JS(n,e,s)}var qf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(qf||{});function zf(n){let e=e0();return e?e.sanitize(qf.URL,n)||"":bE(n,"URL")?$f(n):AE(ja(n))}function e0(){let n=_e();return n&&n[Vt].sanitizer}function Rr(n){return n.ownerDocument.defaultView}function t0(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var PE="ng-template";function n0(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&t0(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Gf(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Gf(n){return n.type===4&&n.value!==PE}function r0(n,e,t){let r=n.type===4&&!t?PE:n.value;return e===r}function i0(n,e,t){let r=4,i=n.attrs,s=i!==null?a0(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!St(r)&&!St(u))return!1;if(o&&St(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!r0(n,u,t)||u===""&&e.length===1){if(St(r))return!1;o=!0}}else if(r&8){if(i===null||!n0(n,i,u,t)){if(St(r))return!1;o=!0}}else{let l=e[++c],h=s0(u,i,Gf(n),t);if(h===-1){if(St(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(St(r))return!1;o=!0}}}}return St(r)||o}function St(n){return(n&1)===0}function s0(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return c0(e,n)}function o0(n,e,t=!1){for(let r=0;r<e.length;r++)if(i0(n,e[r],t))return!0;return!1}function a0(n){for(let e=0;e<n.length;e++){let t=n[e];if(bS(t))return e}return n.length}function c0(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function O_(n,e){return n?":not("+e.trim()+")":e}function u0(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let c=n[++t];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!St(o)&&(e+=O_(s,i),i=""),r=o,s=s||!St(r);t++}return i!==""&&(e+=O_(s,i)),e}function l0(n){return n.map(u0).join(",")}function d0(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!St(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Bn={};function Wf(n,e,t,r,i,s,o,c,u,l,h){let p=st+r,m=p+i,I=f0(p,m),S=typeof l=="function"?l():l;return I[q]={type:n,blueprint:I,template:t,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function f0(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Bn);return t}function h0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Wf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Kf(n,e,t,r,i,s,o,c,u,l,h){let p=e.blueprint.slice();return p[Tt]=i,p[H]=r|4|128|8|64|1024,(l!==null||n&&n[H]&2048)&&(p[H]|=2048),Wd(p),p[Fe]=p[_r]=n,p[ze]=t,p[Vt]=o||n&&n[Vt],p[Ve]=c||n&&n[Ve],p[kn]=u||n&&n[kn]||null,p[yt]=s,p[Bs]=US(),p[Vs]=h,p[$d]=l,p[Dt]=e.type==2?n[Dt]:p,p}function p0(n,e,t){let r=jt(e,n),i=h0(t),s=n[Vt].rendererFactory,o=Qf(n,Kf(n,i,null,xE(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function xE(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function kE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Qf(n,e){return n[di]?n[Hd][mt]=e:n[di]=e,n[Hd]=e,e}function ye(n=1){OE(Ht(),_e(),Cr()+n,!1)}function OE(n,e,t,r){if(!r)if((e[H]&3)===3){let s=n.preOrderCheckHooks;s!==null&&sc(e,s,t)}else{let s=n.preOrderHooks;s!==null&&oc(e,s,0,t)}Fn(t)}var wc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(wc||{});function wf(n,e,t,r){let i=G(null);try{let[s,o,c]=n.inputs[t],u=null;(o&wc.SignalBased)!==0&&(u=e[s][ht]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,s):tE(e,u,s,r)}finally{G(i)}}var Gt=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Gt||{}),g0;function Yf(n,e){return g0(n,e)}var _i=new Set,Zf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Zf||{}),ro=new ce(""),L_=new Set;function Jf(n){L_.has(n)||(L_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var LE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();var m0=new ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:X(gt)})});function FE(n,e,t){let r=n.get(m0);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function y0(n,e){for(let[t,r]of e)FE(n,r.animateFns)}function F_(n,e,t,r){let i=n?.[js]?.enter;e!==null&&i&&i.has(t.index)&&y0(r,i)}function mi(n,e,t,r,i,s,o,c){if(i!=null){let u,l=!1;Ct(i)?u=i:an(i)&&(l=!0,i=i[Tt]);let h=vt(i);n===0&&r!==null?(F_(c,r,s,t),o==null?RE(e,r,h):gc(e,r,h,o||null,!0)):n===1&&r!==null?(F_(c,r,s,t),gc(e,r,h,o||null,!0)):n===2?V_(c,s,t,p=>{ZS(e,h,l,p)}):n===3&&V_(c,s,t,()=>{e.destroyNode(h)}),u!=null&&R0(e,n,t,u,s,r,o)}}function v0(n,e){VE(n,e),e[Tt]=null,e[yt]=null}function _0(n,e,t,r,i,s){r[Tt]=i,r[yt]=e,Tc(n,r,t,1,i,s)}function VE(n,e){e[Vt].changeDetectionScheduler?.notify(9),Tc(n,e,e[Ve],2,null,null)}function E0(n){let e=n[di];if(!e)return pf(n[q],n);for(;e;){let t=null;if(an(e))t=e[di];else{let r=e[et];r&&(t=r)}if(!t){for(;e&&!e[mt]&&e!==n;)an(e)&&pf(e[q],e),e=e[Fe];e===null&&(e=n),an(e)&&pf(e[q],e),t=e&&e[mt]}e=t}}function Xf(n,e){let t=n[Ir],r=t.indexOf(e);t.splice(r,1)}function BE(n,e){if(Dr(e))return;let t=e[Ve];t.destroyNode&&Tc(n,e,t,3,null,null),E0(e)}function pf(n,e){if(Dr(e))return;let t=G(null);try{e[H]&=-129,e[H]|=256,e[lt]&&ei(e[lt]),T0(n,e),w0(n,e),e[q].type===1&&e[Ve].destroy();let r=e[On];if(r!==null&&Ct(e[Fe])){r!==e[Fe]&&Xf(r,e);let i=e[Bt];i!==null&&i.detachView(n)}Ef(e)}finally{G(t)}}function V_(n,e,t,r){let i=n?.[js];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&_i.add(n),FE(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),c=[];if(o){for(let u=0;u<o.animateFns.length;u++){let l=o.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),I0(n,r)}else n&&_i.delete(n),r(!1)},i)}function I0(n,e){let t=n[js]?.running;if(t){t.then(()=>{n[js].running=void 0,_i.delete(n),e(!0)});return}e(!1)}function w0(n,e){let t=n.cleanup,r=e[li];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let c=t[o+3];c>=0?r[c]():r[-c].unsubscribe(),o+=2}else{let c=r[t[o+1]];t[o].call(c)}r!==null&&(e[li]=null);let i=e[sn];if(i!==null){e[sn]=null;for(let o=0;o<i.length;o++){let c=i[o];c()}}let s=e[Mn];if(s!==null){e[Mn]=null;for(let o of s)o.destroy()}}function T0(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ys)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];pe(ue.LifecycleHookStart,c,u);try{u.call(c)}finally{pe(ue.LifecycleHookEnd,c,u)}}else{pe(ue.LifecycleHookStart,i,s);try{s.call(i)}finally{pe(ue.LifecycleHookEnd,i,s)}}}}}function D0(n,e,t){return C0(n,e.parent,t)}function C0(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Tt];if(wr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===At.None||i===At.Emulated)return null}return jt(r,t)}function b0(n,e,t){return A0(n,e,t)}function S0(n,e,t){return n.type&40?jt(n,t):null}var A0=S0,B_;function eh(n,e,t,r){let i=D0(n,r,e),s=e[Ve],o=r.parent||e[yt],c=b0(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)k_(s,i,t[u],c,!1);else k_(s,i,t,c,!1);B_!==void 0&&B_(s,r,e,t,i)}function Ks(n,e){if(e!==null){let t=e.type;if(t&3)return jt(e,n);if(t&4)return Tf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ks(n,r);{let i=n[e.index];return Ct(i)?Tf(-1,i):vt(i)}}else{if(t&128)return Ks(n,e.next);if(t&32)return Yf(e,n)()||vt(n[e.index]);{let r=jE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Pn(n[Dt]);return Ks(i,r)}else return Ks(n,e.next)}}}return null}function jE(n,e){if(e!==null){let r=n[Dt][yt],i=e.projection;return r.projection[i]}return null}function Tf(n,e){let t=et+n+1;if(t<e.length){let r=e[t],i=r[q].firstChild;if(i!==null)return Ks(r,i)}return e[Ln]}function th(n,e,t,r,i,s,o){for(;t!=null;){let c=r[kn];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(o&&e===0&&(u&&vi(vt(u),r),t.flags|=2),!Hf(t))if(l&8)th(n,e,t.child,r,i,s,!1),mi(e,n,c,i,u,t,s,r);else if(l&32){let h=Yf(t,r),p;for(;p=h();)mi(e,n,c,i,p,t,s,r);mi(e,n,c,i,u,t,s,r)}else l&16?N0(n,e,r,t,i,s):mi(e,n,c,i,u,t,s,r);t=o?t.projectionNext:t.next}}function Tc(n,e,t,r,i,s){th(t,r,n.firstChild,e,i,s,!1)}function N0(n,e,t,r,i,s){let o=t[Dt],u=o[yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];mi(e,n,t[kn],i,h,r,s,t)}else{let l=u,h=o[Fe];mE(r)&&(l.flags|=128),th(n,e,l,h,i,s,!0)}}function R0(n,e,t,r,i,s,o){let c=r[Ln],u=vt(r);c!==u&&mi(e,n,t,s,c,i,o);for(let l=et;l<r.length;l++){let h=r[l];Tc(h[q],h,n,e,s,c)}}function M0(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Gt.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Gt.Important),n.setStyle(t,r,i,s))}}function UE(n,e,t,r,i){let s=Cr(),o=r&2;try{Fn(-1),o&&e.length>st&&OE(n,e,st,!1);let c=o?ue.TemplateUpdateStart:ue.TemplateCreateStart;pe(c,i,t),t(r,i)}finally{Fn(s);let c=o?ue.TemplateUpdateEnd:ue.TemplateCreateEnd;pe(c,i,t)}}function nh(n,e,t){B0(n,e,t),(t.flags&64)===64&&j0(n,e,t)}function HE(n,e,t=jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?t(e,n):n[o];n[i++]=c}}}function P0(n,e,t,r){let s=r.get(wE,IE)||t===At.ShadowDom||t===At.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return x0(o),o}function x0(n){k0(n)}var k0=()=>null;function O0(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function L0(n,e,t,r,i,s){let o=e[q];if(rh(n,o,e,t,r)){wr(n)&&V0(e,n.index);return}n.type&3&&(t=O0(t)),F0(n,e,t,r,i,s)}function F0(n,e,t,r,i,s){if(n.type&3){let o=jt(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function V0(n,e){let t=Ut(e,n);t[H]&16||(t[H]|=64)}function B0(n,e,t){let r=t.directiveStart,i=t.directiveEnd;wr(t)&&p0(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||uE(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let c=n.data[o],u=fc(e,n,o,t);if(vi(u,e),s!==null&&H0(e,o-r,u,c,t,s),Tr(c)){let l=Ut(t.index,e);l[ze]=fc(e,n,o,t)}}}function j0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=d_();try{Fn(s);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];Ya(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&U0(u,l)}}finally{Fn(-1),Ya(o)}}function U0(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $E(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];o0(e,s.selectors,!1)&&(r??=[],Tr(s)?r.unshift(s):r.push(s))}return r}function H0(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;c+=2){let u=o[c],l=o[c+1];wf(r,t,u,l)}}function $0(n,e,t,r,i){let s=st+t,o=e[q],c=i(o,e,n,r,t);e[s]=c,pi(n,!0);let u=n.type===2;return u?(ME(e[Ve],c,n),(Jv()===0||Hs(n))&&vi(c,e),Xv()):vi(c,e),ec()&&(!u||!Hf(n))&&eh(o,e,c,n),n}function q0(n){let e=n;return ef()?s_():(e=e.parent,pi(e,!1)),e}function z0(n,e){let t=n[kn];if(!t)return;let r;try{r=t.get(br,null)}catch{r=null}r?.(e)}function rh(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],c=!1;if(o)for(let u=0;u<o.length;u+=2){let l=o[u],h=o[u+1],p=e.data[l];wf(p,t[l],h,i),c=!0}if(s)for(let u of s){let l=t[u],h=e.data[u];wf(h,l,r,i),c=!0}return c}function G0(n,e){let t=Ut(e,n),r=t[q];W0(r,t);let i=t[Tt];i!==null&&t[Vs]===null&&(t[Vs]=TE(i,t[kn])),pe(ue.ComponentStart);try{ih(r,t,t[ze])}finally{pe(ue.ComponentEnd,t[ze])}}function W0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ih(n,e,t){Ja(e);try{let r=n.viewQuery;r!==null&&If(1,r,t);let i=n.template;i!==null&&UE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bt]?.finishViewCreation(n),n.staticContentQueries&&DE(n,e),n.staticViewQueries&&If(2,n.viewQuery,t);let s=n.components;s!==null&&K0(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[H]&=-5,Xa()}}function K0(n,e){for(let t=0;t<e.length;t++)G0(n,e[t])}function Q0(n,e,t,r){let i=G(null);try{let s=e.tView,c=n[H]&4096?4096:16,u=Kf(n,s,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[On]=l;let h=n[Bt];return h!==null&&(u[Bt]=h.createEmbeddedView(s)),ih(s,u,t),u}finally{G(i)}}function j_(n,e){return!e||e.firstChild===null||mE(n)}function Zs(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(vt(s)),Ct(s)&&qE(s,r);let o=t.type;if(o&8)Zs(n,e,t.child,r);else if(o&32){let c=Yf(t,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=jE(e,t);if(Array.isArray(c))r.push(...c);else{let u=Pn(e[Dt]);Zs(u[q],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function qE(n,e){for(let t=et;t<n.length;t++){let r=n[t],i=r[q].firstChild;i!==null&&Zs(r[q],r,i,e)}n[Ln]!==n[Tt]&&e.push(n[Ln])}function zE(n){if(n[Ga]!==null){for(let e of n[Ga])e.impl.addSequence(e);n[Ga].length=0}}var GE=[];function Y0(n){return n[lt]??Z0(n)}function Z0(n){let e=GE.pop()??Object.create(X0);return e.lView=n,e}function J0(n){n.lView[lt]!==n&&(n.lView=null,GE.push(n))}var X0=me(j({},Xr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hi(n.lView)},consumerOnSignalRead(){this.lView[lt]=this}});function eA(n){let e=n[lt]??Object.create(tA);return e.lView=n,e}var tA=me(j({},Xr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Pn(n.lView);for(;e&&!WE(e[q]);)e=Pn(e);e&&Kd(e)},consumerOnSignalRead(){this.lView[lt]=this}});function WE(n){return n.type!==2}function KE(n){if(n[Mn]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Mn])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[H]&8192)}}var nA=100;function QE(n,e=0){let r=n[Vt].rendererFactory,i=!1;i||r.begin?.();try{rA(n,e)}finally{i||r.end?.()}}function rA(n,e){let t=tf();try{Rs(!0),Df(n,e);let r=0;for(;qs(n);){if(r===nA)throw new J(103,!1);r++,Df(n,1)}}finally{Rs(t)}}function iA(n,e,t,r){if(Dr(e))return;let i=e[H],s=!1,o=!1;Ja(e);let c=!0,u=null,l=null;s||(WE(n)?(l=Y0(e),u=Cs(l)):va()===null?(c=!1,l=eA(e),u=Cs(l)):e[lt]&&(ei(e[lt]),e[lt]=null));try{Wd(e),a_(n.bindingStartIndex),t!==null&&UE(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let I=n.preOrderCheckHooks;I!==null&&sc(e,I,null)}else{let I=n.preOrderHooks;I!==null&&oc(e,I,0,null),ff(e,0)}if(o||sA(e),KE(e),YE(e,0),n.contentQueries!==null&&DE(n,e),!s)if(h){let I=n.contentCheckHooks;I!==null&&sc(e,I)}else{let I=n.contentHooks;I!==null&&oc(e,I,1),ff(e,1)}aA(n,e);let p=n.components;p!==null&&JE(e,p,0);let m=n.viewQuery;if(m!==null&&If(2,m,r),!s)if(h){let I=n.viewCheckHooks;I!==null&&sc(e,I)}else{let I=n.viewHooks;I!==null&&oc(e,I,2),ff(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[za]){for(let I of e[za])I();e[za]=null}s||(zE(e),e[H]&=-73)}catch(h){throw s||hi(e),h}finally{l!==null&&(_a(l,u),c&&J0(l)),Xa()}}function YE(n,e){for(let t=vE(n);t!==null;t=_E(t))for(let r=et;r<t.length;r++){let i=t[r];ZE(i,e)}}function sA(n){for(let e=vE(n);e!==null;e=_E(e)){if(!(e[H]&2))continue;let t=e[Ir];for(let r=0;r<t.length;r++){let i=t[r];Kd(i)}}}function oA(n,e,t){pe(ue.ComponentStart);let r=Ut(e,n);try{ZE(r,t)}finally{pe(ue.ComponentEnd,r[ze])}}function ZE(n,e){Ka(n)&&Df(n,e)}function Df(n,e){let r=n[q],i=n[H],s=n[lt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ea(s)),o||=!1,s&&(s.dirty=!1),n[H]&=-9217,o)iA(r,n,r.template,n[ze]);else if(i&8192){let c=G(null);try{KE(n),YE(n,1);let u=r.components;u!==null&&JE(n,u,1),zE(n)}finally{G(c)}}}function JE(n,e,t){for(let r=0;r<e.length;r++)oA(n,e[r],t)}function aA(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Fn(~i);else{let s=i,o=t[++r],c=t[++r];l_(o,s);let u=e[s];pe(ue.HostBindingsUpdateStart,u);try{c(2,u)}finally{pe(ue.HostBindingsUpdateEnd,u)}}}}finally{Fn(-1)}}function sh(n,e){let t=tf()?64:1088;for(n[Vt].changeDetectionScheduler?.notify(e);n;){n[H]|=t;let r=Pn(n);if(fi(n)&&!r)return n;n=r}return null}function XE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function cA(n,e,t,r=!0){let i=e[q];if(uA(i,e,n,t),r){let o=Tf(t,n),c=e[Ve],u=c.parentNode(n[Ln]);u!==null&&_0(i,n[yt],c,e,u,o)}let s=e[Vs];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Cf(n,e){if(n.length<=et)return;let t=et+e,r=n[t];if(r){let i=r[On];i!==null&&i!==n&&Xf(i,r),e>0&&(n[t-1][mt]=r[mt]);let s=ks(n,et+e);v0(r[q],r);let o=s[Bt];o!==null&&o.detachView(s[q]),r[Fe]=null,r[mt]=null,r[H]&=-129}return r}function uA(n,e,t,r){let i=et+r,s=t.length;r>0&&(t[i-1][mt]=e),r<s-et?(e[mt]=t[i],Ld(t,et+r,e)):(t.push(e),e[mt]=null),e[Fe]=t;let o=e[On];o!==null&&t!==o&&eI(o,e);let c=e[Bt];c!==null&&c.insertView(n),Qa(e),e[H]|=128}function eI(n,e){let t=n[Ir],r=e[Fe];if(an(r))n[H]|=2;else{let i=r[Fe][Dt];e[Dt]!==i&&(n[H]|=2)}t===null?n[Ir]=[e]:t.push(e)}var Ei=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[q];return Zs(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[ze]}set context(e){this._lView[ze]=e}get destroyed(){return Dr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(Ct(e)){let t=e[Us],r=t?t.indexOf(this):-1;r>-1&&(Cf(e,r),ks(t,r))}this._attachedToViewContainer=!1}BE(this._lView[q],this._lView)}onDestroy(e){Qd(this._lView,e)}markForCheck(){sh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[H]&=-129}reattach(){Qa(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,QE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=fi(this._lView),t=this._lView[On];t!==null&&!e&&Xf(t,this._lView),VE(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=fi(this._lView),r=this._lView[On];r!==null&&!t&&eI(r,this._lView),Qa(this._lView)}};var Vn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=lA;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=Q0(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ei(s)}}return n})();function lA(){return oh($t(),_e())}function oh(n,e){return n.type&4?new Vn(e,n,wi(n,e)):null}function ah(n,e,t,r,i){let s=n.data[e];if(s===null)s=dA(n,e,t,r,i),u_()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=i_();s.injectorIndex=o===null?-1:o.injectorIndex}return pi(s,!0),s}function dA(n,e,t,r,i){let s=Xd(),o=ef(),c=o?s:s&&s.parent,u=n.data[e]=hA(n,c,t,e,r,i);return fA(n,u,s,o),u}function fA(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function hA(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,c=0;return t_()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var pA=()=>null;function U_(n,e){return pA(n,e)}var tI=class{},Dc=class{},bf=class{resolveComponentFactory(e){throw new J(917,!1)}},Cc=class{static NULL=new bf},Ar=class{};var nI=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>null})}return n})();var cc={},Sf=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,cc,r);return i!==cc||t===cc?i:this.parentInjector.get(e,t,r)}};function H_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=Sd(i,c);else if(s==2){let u=c,l=e[++o];r=Sd(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Nt(n,e=0){let t=_e();if(t===null)return de(n,e);let r=$t();return hE(r,t,ut(n),e)}function rI(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let c=o,u=null,l=null;for(let h of o)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(o);break}yA(n,e,t,c,s,u,l)}s!==null&&r!==null&&gA(t,r,s)}function gA(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new J(-301,!1);r.push(e[i],s)}}function mA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function yA(n,e,t,r,i,s,o){let c=r.length,u=null;for(let m=0;m<c;m++){let I=r[m];u===null&&Tr(I)&&(u=I,mA(n,t,m)),PS(uE(t,e),n,I.type)}TA(t,n.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let I=r[m];I.providersResolver&&I.providersResolver(I)}let l=!1,h=!1,p=kE(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let I=r[m];if(t.mergedAttrs=Vf(t.mergedAttrs,I.hostAttrs),_A(n,t,e,p,I),wA(p,I,i),o!==null&&o.has(I)){let[M,R]=o.get(I);t.directiveToIndex.set(I.type,[p,M+t.directiveStart,R+t.directiveStart])}else(s===null||!s.has(I))&&t.directiveToIndex.set(I.type,p);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let S=I.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}vA(n,t,s)}function vA(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))$_(0,e,i,r),$_(1,e,i,r),z_(e,r,!1);else{let s=t.get(i);q_(0,e,s,r),q_(1,e,s,r),z_(e,r,!0)}}}function $_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),iI(e,s)}}function q_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[o]??=[],c[o].push(r,s),iI(e,o)}}function iI(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function z_(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Gf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){o??=[],o.push(u,r[c+1]);break}}else if(t&&s.hasOwnProperty(u)){let l=s[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){o??=[],o.push(l[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(o)}function _A(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ci(i.type,!0)),o=new Ys(s,Tr(i),Nt,null);n.blueprint[r]=o,t[r]=o,EA(n,e,r,kE(n,t,i.hostVars,Bn),i)}function EA(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let c=~e.index;IA(o)!=c&&o.push(c),o.push(t,r,s)}}function IA(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function wA(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Tr(e)&&(t[""]=n)}}function TA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sI(n,e,t,r,i,s,o,c){let u=e[q],l=u.consts,h=$s(l,o),p=ah(u,n,t,r,h);return s&&rI(u,e,p,$s(l,c),i),p.mergedAttrs=Vf(p.mergedAttrs,p.attrs),p.attrs!==null&&H_(p,p.attrs,!1),p.mergedAttrs!==null&&H_(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function oI(n,e){iE(n,e),qd(e)&&n.queries.elementEnd(e)}function ch(n){return cI(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function aI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function cI(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function uh(n,e,t){if(t===Bn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function gf(n,e,t){return function r(i){let s=wr(n)?Ut(n.index,e):e;sh(s,5);let o=e[ze],c=G_(e,o,t,i),u=r.__ngNextListenerFn__;for(;u;)c=G_(e,o,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function G_(n,e,t,r){let i=G(null);try{return pe(ue.OutputStart,e,t),t(r)!==!1}catch(s){return z0(n,s),!1}finally{pe(ue.OutputEnd,e,t),G(i)}}function DA(n,e,t,r,i,s,o,c){let u=Hs(n),l=!1,h=null;if(!r&&u&&(h=bA(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,l=!0}else{let p=jt(n,t),m=r?r(p):p;GS(t,m,s,c);let I=i.listen(m,s,c);if(!CA(s)){let S=r?M=>r(vt(M[n.index])):n.index;uI(S,e,t,s,c,I,!1)}}return l}function CA(n){return n.startsWith("animation")||n.startsWith("transition")}function bA(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let c=e[li],u=i[s+2];return c&&c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function uI(n,e,t,r,i,s,o){let c=e.firstCreatePass?Zd(e):null,u=Yd(t),l=u.length;u.push(i,s),c&&c.push(r,n,l,(l+1)*(o?-1:1))}function W_(n,e,t,r,i,s){let o=e[t],c=e[q],l=c.data[t].outputs[r],p=o[l].subscribe(s);uI(n.index,c,e,i,s,p,!0)}var Af=Symbol("BINDING");var Nf=class extends Cc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=yr(e);return new Js(t,this.ngModule)}};function SA(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&wc.SignalBased)!==0};return i&&(s.transform=i),s})}function AA(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function NA(n,e,t){let r=e instanceof gt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Sf(t,r):t}function RA(n){let e=n.get(Ar,null);if(e===null)throw new J(407,!1);let t=n.get(nI,null),r=n.get(gr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function MA(n,e){let t=lI(n);return NE(e,t,t==="svg"?zd:t==="math"?zv:null)}function lI(n){return(n.selectors[0][0]||"div").toLowerCase()}var Js=class extends Dc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=SA(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=AA(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=l0(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){pe(ue.DynamicComponentStart);let c=G(null);try{let u=this.componentDef,l=PA(r,u,o,s),h=NA(u,i||this.ngModule,e),p=RA(h),m=p.rendererFactory.createRenderer(null,u),I=r?P0(m,r,u.encapsulation,h):MA(u,m),S=o?.some(K_)||s?.some(F=>typeof F!="function"&&F.bindings.some(K_)),M=Kf(null,l,null,512|xE(u),null,null,p,m,h,null,TE(I,h,!0));M[st]=I,Ja(M);let R=null;try{let F=sI(st,M,2,"#host",()=>l.directiveRegistry,!0,0);ME(m,I,F),vi(I,M),nh(l,M,F),CE(l,F,M),oI(l,F),t!==void 0&&kA(F,this.ngContentSelectors,t),R=Ut(F.index,M),M[ze]=R[ze],ih(l,M,null)}catch(F){throw R!==null&&Ef(R),Ef(M),F}finally{pe(ue.DynamicComponentEnd),Xa()}return new mc(this.componentType,M,!!S)}finally{G(c)}}};function PA(n,e,t,r){let i=n?["ng-version","21.0.6"]:d0(e.selectors[0]),s=null,o=null,c=0;if(t)for(let h of t)c+=h[Af].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[Af].requiredVars;let I=h+1;m.create&&(m.targetIdx=I,(s??=[]).push(m)),m.update&&(m.targetIdx=I,(o??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Pd(p);u.push(m)}return Wf(0,null,xA(s,o),1,c,u,null,null,null,[i],null)}function xA(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function K_(n){let e=n[Af].kind;return e==="input"||e==="twoWay"}var mc=class extends tI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Wa(t[q],st),this.location=wi(this._tNode,t),this.instance=Ut(this._tNode.index,t)[ze],this.hostView=this.changeDetectorRef=new Ei(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=rh(r,i[q],i,e,t);this.previousInputValues.set(e,t);let o=Ut(r.index,i);sh(o,1)}get injector(){return new Sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kA(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Mr=(()=>{class n{static __NG_ELEMENT_ID__=OA}return n})();function OA(){let n=$t();return fI(n,_e())}var LA=Mr,dI=class extends LA{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return wi(this._hostTNode,this._hostLView)}get injector(){return new Sr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Bf(this._hostTNode,this._hostLView);if(oE(e)){let t=dc(e,this._hostLView),r=lc(e),i=t[q].data[r+8];return new Sr(i,t)}else return new Sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Q_(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-et}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=U_(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(c,i,j_(this._hostTNode,o)),c}createComponent(e,t,r,i,s,o,c){let u=e&&!mS(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef,o=R.directives,c=R.bindings}let h=u?e:new Js(yr(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let F=(u?p:this.parentInjector).get(gt,null);F&&(s=F)}let m=yr(h.componentType??{}),I=U_(this._lContainer,m?.id??null),S=I?.firstChild??null,M=h.create(p,i,S,s,o,c);return this.insertImpl(M.hostView,l,j_(this._hostTNode,I)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Kv(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Fe],l=new dI(u,u[yt],u[Fe]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return cA(o,i,s,r),e.attachToViewContainerRef(),Ld(mf(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Q_(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Cf(this._lContainer,t);r&&(ks(mf(this._lContainer),t),BE(r[q],r))}detach(e){let t=this._adjustIndex(e,-1),r=Cf(this._lContainer,t);return r&&ks(mf(this._lContainer),t)!=null?new Ei(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Q_(n){return n[Us]}function mf(n){return n[Us]||(n[Us]=[])}function fI(n,e){let t,r=e[n.index];return Ct(r)?t=r:(t=XE(r,e,null,n),e[n.index]=t,Qf(e,t)),VA(t,e,n,r),new dI(t,n,e)}function FA(n,e){let t=n[Ve],r=t.createComment(""),i=jt(e,n),s=t.parentNode(i);return gc(t,s,r,t.nextSibling(i),!1),r}var VA=UA,BA=()=>!1;function jA(n,e,t){return BA(n,e,t)}function UA(n,e,t,r){if(n[Ln])return;let i;t.type&8?i=vt(r):i=FA(e,t),n[Ln]=i}var Rf=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Mf=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),c=this.queries[o.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)lh(e,t).matches!==null&&this.queries[t].setDirty()}},Pf=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=QA(e):this.predicate=e}},xf=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},kf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,HA(t,s)),this.matchTNodeWithReadOption(e,t,ac(t,e,s,!1,!1))}else r===Vn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ac(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ti||i===Mr||i===Vn&&t.type&4)this.addMatch(t.index,-2);else{let s=ac(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function HA(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $A(n,e){return n.type&11?wi(n,e):n.type&4?oh(n,e):null}function qA(n,e,t,r){return t===-1?$A(e,n):t===-2?zA(n,e,r):fc(n,n[q],t,e)}function zA(n,e,t){if(t===Ti)return wi(e,n);if(t===Vn)return oh(e,n);if(t===Mr)return fI(e,n)}function hI(n,e,t,r){let i=e[Bt].queries[r];if(i.matches===null){let s=n.data,o=t.matches,c=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)c.push(null);else{let h=s[l];c.push(qA(e,h,o[u+1],t.metadata.read))}}i.matches=c}return i.matches}function Of(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=hI(n,e,i,t);for(let c=0;c<s.length;c+=2){let u=s[c];if(u>0)r.push(o[c/2]);else{let l=s[c+1],h=e[-u];for(let p=et;p<h.length;p++){let m=h[p];m[On]===m[Fe]&&Of(m[q],m,l,r)}if(h[Ir]!==null){let p=h[Ir];for(let m=0;m<p.length;m++){let I=p[m];Of(I[q],I,l,r)}}}}}return r}function GA(n,e){return n[Bt].queries[e].queryList}function WA(n,e,t){let r=new hc((t&4)===4);return Zv(n,e,r,r.destroy),(e[Bt]??=new Mf).queries.push(new Rf(r))-1}function KA(n,e,t){let r=Ht();return r.firstCreatePass&&(YA(r,new Pf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),WA(r,_e(),e)}function QA(n){return n.split(",").map(e=>e.trim())}function YA(n,e,t){n.queries===null&&(n.queries=new xf),n.queries.track(new kf(e,t))}function lh(n,e){return n.queries.getByIndex(e)}function ZA(n,e){let t=n[q],r=lh(t,e);return r.crossesNgTemplate?Of(t,n,e,[]):hI(t,n,r,e)}var Xs=class{};var eo=class extends Xs{injector;componentFactoryResolver=new Nf(this);instance=null;constructor(e){super();let t=new pr([...e.providers,{provide:Xs,useValue:this},{provide:Cc,useValue:this.componentFactoryResolver}],e.parent||Fs(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pI(n,e,t=null){return new eo({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var JA=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=jd(!1,t.type),i=r.length>0?pI([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=he({token:n,providedIn:"environment",factory:()=>new n(de(gt))})}return n})();function io(n){return vc(()=>{let e=gI(n),t=me(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===jf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JA).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||At.Emulated,styles:n.styles||pt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Jf("NgStandalone"),mI(t);let r=n.dependencies;return t.directiveDefs=Y_(r,XA),t.pipeDefs=Y_(r,Rv),t.id=nN(t),t})}function XA(n){return yr(n)||Pd(n)}function bc(n){return vc(()=>({type:n.type,bootstrap:n.bootstrap||pt,declarations:n.declarations||pt,imports:n.imports||pt,exports:n.exports||pt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function eN(n,e){if(n==null)return vr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,c,u;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s,u=i[3]||null):(s=i,o=i,c=wc.None,u=null),t[s]=[r,c,u],e[s]=o}return t}function tN(n){if(n==null)return vr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Sc(n){return vc(()=>{let e=gI(n);return mI(e),e})}function gI(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||vr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||pt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eN(n.inputs,e),outputs:tN(n.outputs),debugInfo:null}}function mI(n){n.features?.forEach(e=>e(n))}function Y_(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function nN(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rN(n,e,t,r,i,s,o,c){if(t.firstCreatePass){n.mergedAttrs=Vf(n.mergedAttrs,n.attrs);let h=n.tView=Wf(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),pi(n,!1);let u=sN(t,e,n,r);ec()&&eh(t,e,u,n),vi(u,e);let l=XE(u,e,u,n);e[r+st]=l,Qf(e,l),jA(l,n,e)}function iN(n,e,t,r,i,s,o,c,u,l,h){let p=t+st,m;return e.firstCreatePass?(m=ah(e,p,4,o||null,c||null),Jd()&&rI(e,n,m,$s(e.consts,l),$E),iE(e,m)):m=e.data[p],rN(m,n,e,t,r,i,s,u),Hs(m)&&nh(e,n,m),l!=null&&HE(n,m,h),m}function ot(n,e,t,r,i,s,o,c){let u=_e(),l=Ht(),h=$s(l.consts,s);return iN(u,l,n,e,t,r,i,h,void 0,o,c),ot}var sN=oN;function oN(n,e,t,r){return tc(!0),e[Ve].createComment("")}var dh=new ce("");function Ac(n){return!!n&&typeof n.then=="function"}function fh(n){return!!n&&typeof n.subscribe=="function"}var yI=new ce("");var hh=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=X(yI,{optional:!0})??[];injector=X(xn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=qa(this.injector,i);if(Ac(s))t.push(s);else if(fh(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vI=new ce("");function _I(){Xl(()=>{let n="";throw new J(600,n)})}function EI(n){return n.isBoundToModule}var aN=10;var Nc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=X(br);afterRenderManager=X(LE);zonelessEnabled=X(Gs);rootEffectScheduler=X(rc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new rn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=X(gi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fd(t=>!t))}constructor(){X(ro,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=X(gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xn.NULL){return this._injector.get(qe).run(()=>{pe(ue.BootstrapComponentStart);let o=t instanceof Dc;if(!this._injector.get(hh).done){let S="";throw new J(405,S)}let u;o?u=t:u=this._injector.get(Cc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=EI(u)?void 0:this._injector.get(Xs),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,I=p.injector.get(dh,null);return I?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Qs(this.components,p),I?.unregisterApplication(m)}),this._loadComponent(p),pe(ue.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(ue.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Zf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pe(ue.ChangeDetectionEnd),new J(101,!1);let t=G(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,G(t),this.afterTick.next(),pe(ue.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ar,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<aN;){pe(ue.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pe(ue.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!qs(i))continue;let s=r&&!this.zonelessEnabled?0:1;QE(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>qs(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Qs(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(vI,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Qs(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qs(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var rV=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ee(n,e,t){let r=_e(),i=nf();if(uh(r,i,e)){let s=Ht(),o=y_();L0(o,r,n,e,r[Ve],t)}return Ee}function Z_(n,e,t,r,i){rh(e,n,t,i?"class":"style",r)}function L(n,e,t,r){let i=_e(),s=i[q],o=n+st,c=s.firstCreatePass?sI(o,i,2,e,$E,Jd(),t,r):s.data[o];if($0(c,i,n,e,cN),Hs(c)){let u=i[q];nh(u,i,c),CE(u,c,i)}return r!=null&&HE(i,c),L}function $(){let n=Ht(),e=$t(),t=q0(e);return n.firstCreatePass&&oI(n,t),n_(t)&&r_(),e_(),t.classesWithoutHost!=null&&TS(t)&&Z_(n,t,_e(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&DS(t)&&Z_(n,t,_e(),t.stylesWithoutHost,!1),$}function Se(n,e,t,r){return L(n,e,t,r),$(),Se}var cN=(n,e,t,r,i)=>(tc(!0),NE(e[Ve],r,v_()));function Rt(){return _e()}var so="en-US";var uN=so;function II(n){typeof n=="string"&&(uN=n.toLowerCase().replace(/_/g,"-"))}function De(n,e,t){let r=_e(),i=Ht(),s=$t();return lN(i,r,r[Ve],s,n,e,t),De}function lN(n,e,t,r,i,s,o){let c=!0,u=null;if((r.type&3||o)&&(u??=gf(r,e,s),DA(r,n,e,o,t,i,s,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],I=h[p+1];u??=gf(r,e,s),W_(r,e,m,I,i,u)}if(l&&l.length)for(let p of l)u??=gf(r,e,s),W_(r,e,p,i,i,u)}}function xe(n=1){return m_(n)}function Di(n,e,t){return KA(n,e,t),Di}function Ci(n){let e=_e(),t=Ht(),r=rf();Za(r+1);let i=lh(t,r);if(n.dirty&&Wv(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=ZA(e,r);n.reset(s,VS),n.notifyOnChanges()}return!0}return!1}function bi(){return GA(_e(),rf())}function Pr(n){let e=o_();return Gv(e,st+n)}function ic(n,e){return n<<17|e<<2}function Nr(n){return n>>17&32767}function dN(n){return(n&2)==2}function fN(n,e){return n&131071|e<<17}function Lf(n){return n|2}function Ii(n){return(n&131068)>>2}function yf(n,e){return n&-131069|e<<2}function hN(n){return(n&1)===1}function Ff(n){return n|1}function pN(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Nr(o),u=Ii(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ui(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Nr(n[c+1]);n[r+1]=ic(m,c),m!==0&&(n[m+1]=yf(n[m+1],r)),n[c+1]=fN(n[c+1],r)}else n[r+1]=ic(c,0),c!==0&&(n[c+1]=yf(n[c+1],r)),c=r;else n[r+1]=ic(u,0),c===0?c=r:n[u+1]=yf(n[u+1],r),u=r;l&&(n[r+1]=Lf(n[r+1])),J_(n,h,r,!0),J_(n,h,r,!1),gN(e,h,n,r,s),o=ic(c,u),s?e.classBindings=o:e.styleBindings=o}function gN(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ui(s,e)>=0&&(t[r+1]=Ff(t[r+1]))}function J_(n,e,t,r){let i=n[t+1],s=e===null,o=r?Nr(i):Ii(i),c=!1;for(;o!==0&&(c===!1||s);){let u=n[o],l=n[o+1];mN(u,e)&&(c=!0,n[o+1]=r?Ff(l):Lf(l)),o=r?Nr(l):Ii(l)}c&&(n[t+1]=r?Lf(i):Ff(i))}function mN(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ui(n,e)>=0:!1}function Rc(n,e,t){return wI(n,e,t,!1),Rc}function oo(n,e){return wI(n,e,null,!0),oo}function wI(n,e,t,r){let i=_e(),s=Ht(),o=c_(2);if(s.firstUpdatePass&&vN(s,n,o,r),e!==Bn&&uh(i,o,e)){let c=s.data[Cr()];TN(s,c,i,i[Ve],n,i[o+1]=DN(e,t),r,o)}}function yN(n,e){return e>=n.expandoStartIndex}function vN(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Cr()],o=yN(n,t);CN(s,r)&&e===null&&!o&&(e=!1),e=_N(i,s,e,r),pN(i,s,e,t,o,r)}}function _N(n,e,t,r){let i=f_(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vf(null,n,e,t,r),t=to(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=vf(i,n,e,t,r),s===null){let u=EN(n,e,r);u!==void 0&&Array.isArray(u)&&(u=vf(null,n,e,u[1],r),u=to(u,e.attrs,r),IN(n,e,r,u))}else s=wN(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function EN(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ii(r)!==0)return n[Nr(r)]}function IN(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Nr(i)]=r}function wN(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=to(r,o,t)}return to(r,e.attrs,t)}function vf(n,e,t,r,i){let s=null,o=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<o&&(s=e[c],r=to(r,s.hostAttrs,i),s!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function to(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Vv(n,o,t?!0:e[++s]))}return n===void 0?null:n}function TN(n,e,t,r,i,s,o,c){if(!(e.type&3))return;let u=n.data,l=u[c+1],h=hN(l)?X_(u,e,t,i,Ii(l),o):void 0;if(!yc(h)){yc(s)||dN(l)&&(s=X_(u,null,t,i,c,o));let p=Gd(Cr(),t);M0(r,o,p,i,s)}}function X_(n,e,t,r,i,s){let o=e===null,c;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Bn&&(m=p?pt:void 0);let I=p?$a(m,r):h===r?m:void 0;if(l&&!yc(I)&&(I=$a(u,r)),yc(I)&&(c=I,o))return c;let S=n[i+1];i=o?Nr(S):Ii(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=$a(u,r))}return c}function yc(n){return n!==void 0}function DN(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rn($f(n)))),n}function CN(n,e){return(n.flags&(e?8:16))!==0}function ke(n,e=""){let t=_e(),r=Ht(),i=n+st,s=r.firstCreatePass?ah(r,i,1,e,null):r.data[i],o=bN(r,t,s,e,n);t[i]=o,ec()&&eh(r,t,o,s),pi(s,!1)}var bN=(n,e,t,r,i)=>(tc(!0),QS(e[Ve],r));function SN(n,e,t,r=""){return uh(n,nf(),t)?e+ja(t)+r:Bn}function jn(n){return ao("",n),jn}function ao(n,e,t){let r=_e(),i=SN(r,n,e,t);return i!==Bn&&AN(r,Cr(),i),ao}function AN(n,e,t){let r=Gd(e,n);YS(n[Ve],r,t)}var TI=(()=>{class n{applicationErrorHandler=X(br);appRef=X(Nc);taskService=X(gi);ngZone=X(qe);zonelessEnabled=X(Gs);tracing=X(ro,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ms):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(X(df,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?cf:af;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ms+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ph(){return Jf("NgZoneless"),Bd([...gh(),[]])}function gh(){return[{provide:gr,useExisting:TI},{provide:qe,useClass:Ps},{provide:Gs,useValue:!0}]}function NN(){return typeof $localize<"u"&&$localize.locale||so}var Mc=new ce("",{factory:()=>X(Mc,{optional:!0,skipSelf:!0})||NN()});function co(n,e){return Ia(n,e?.equal)}var mh=new ce(""),qN=new ce("");function uo(n){return!n.moduleRef}function zN(n){let e=uo(n)?n.r3Injector:n.moduleRef.injector,t=e.get(qe);return t.run(()=>{uo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(br),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),uo(n)){let s=()=>e.destroy(),o=n.platformInjector.get(mh);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(mh);o.add(s),n.moduleRef.onDestroy(()=>{Qs(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return WN(r,t,()=>{let s=e.get(gi),o=s.add(),c=e.get(hh);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Mc,so);if(II(u||so),!e.get(qN,!0))return uo(n)?e.get(Nc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(uo(n)){let h=e.get(Nc);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return GN?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var GN;function WN(n,e,t){try{let r=t();return Ac(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Pc=null;function KN(n=[],e){return xn.create({name:e,providers:[{provide:Ls,useValue:"platform"},{provide:mh,useValue:new Set([()=>Pc=null])},...n]})}function QN(n=[]){if(Pc)return Pc;let e=KN(n);return Pc=e,_I(),YN(e),e}function YN(n){let e=n.get(Ec,null);qa(n,()=>{e?.forEach(t=>t())})}var yh=class{constructor(){}supports(e){return ch(e)}create(e){return new vh(e)}},ZN=(n,e)=>e,vh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||ZN}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<DI(r,i,s)?t:r,c=DI(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=c-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let I=m<s.length?s[m]:s[m]=0,S=I+m;h<=S&&S<l&&(s[m]=I+1)}let p=o.previousIndex;s[p]=h-l}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ch(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,c),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,c)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,aI(e,c=>{o=this._trackByFn(i,c),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,c,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,o,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new _h(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new xc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new xc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},_h=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Eh=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},xc=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Eh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function DI(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function CI(){return new Ih([new yh])}var Ih=(()=>{class n{factories;static \u0275prov=he({token:n,providedIn:"root",factory:CI});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=X(n,{optional:!0,skipSelf:!0});return n.create(t,r||CI())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();function SI(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;pe(ue.BootstrapApplicationStart);try{let s=i?.injector??QN(r),o=[gh(),T_,...t||[]],c=new eo({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return zN({r3Injector:c.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{pe(ue.BootstrapApplicationEnd)}}var AI=null;function fo(){return AI}function wh(n){AI??=n}var lo=class{};var kc=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Lc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new kc(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),NI(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);NI(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Nt(Mr),Nt(Vn),Nt(Ih))};static \u0275dir=Sc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function NI(n,e){n.context.$implicit=e.item}var Th=(()=>{class n{_viewContainer;_context=new Oc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){RI(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){RI(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Nt(Mr),Nt(Vn))};static \u0275dir=Sc({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Oc=class{$implicit=null;ngIf=null};function RI(n,e){if(n&&!n.createEmbeddedView)throw new J(2020,!1)}var Si=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=bc({type:n});static \u0275inj=xs({})}return n})();function Dh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ho=class{};var MI="browser";var po=class{_doc;constructor(e){this._doc=e}manager},Fc=(()=>{class n extends po{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(de(bt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),jc=new ce(""),Ah=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Fc));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Fc);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(jc),de(qe))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Ch="ng-app-id";function PI(n){for(let e of n)e.remove()}function xI(n,e){let t=e.createElement("style");return t.textContent=n,t}function XN(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ch}="${e}"],link[${Ch}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Ch),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Sh(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Nh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,XN(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,xI);r?.forEach(i=>this.addUsage(i,this.external,Sh))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(PI(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])PI(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,xI(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Sh(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(bt),de(_c),de(Ic,8),de(no))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),bh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rh=/%COMP%/g;var OI="%COMP%",eR=`_nghost-${OI}`,tR=`_ngcontent-${OI}`,nR=!0,rR=new ce("",{factory:()=>nR});function iR(n){return tR.replace(Rh,n)}function sR(n){return eR.replace(Rh,n)}function LI(n,e){return e.map(t=>t.replace(Rh,n))}var Mh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new go(t,o,c,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Bc?i.applyToHost(t):i instanceof mo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case At.Emulated:s=new Bc(u,l,r,this.appId,h,o,c,p);break;case At.ShadowDom:return new Vc(u,t,r,o,c,this.nonce,p,l);case At.ExperimentalIsolatedShadowDom:return new Vc(u,t,r,o,c,this.nonce,p);default:s=new mo(u,l,r,h,o,c,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(Ah),de(Nh),de(_c),de(rR),de(bt),de(qe),de(Ic),de(ro,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),go=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(bh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(kI(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(kI(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=bh[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=bh[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gt.DashCase|Gt.Important)?e.style.setProperty(t,r,i&Gt.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=fo().getGlobalEventTarget(this.doc,e),!e))throw new J(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function kI(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vc=class extends go{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,c,u){super(e,i,s,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=LI(r.id,l);for(let p of l){let m=document.createElement("style");o&&m.setAttribute("nonce",o),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=Sh(p,i);o&&m.setAttribute("nonce",o),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},mo=class extends go{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?LI(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&_i.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bc=class extends mo{contentAttr;hostAttr;constructor(e,t,r,i,s,o,c,u){let l=i+"-"+r.id;super(e,t,r,s,o,c,u,l),this.contentAttr=iR(l),this.hostAttr=sR(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Uc=class n extends lo{supportsDOMEvents=!0;static makeCurrent(){wh(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=oR();return t==null?null:aR(t)}resetBaseElement(){yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Dh(document.cookie,e)}},yo=null;function oR(){return yo=yo||document.head.querySelector("base"),yo?yo.getAttribute("href"):null}function aR(n){return new URL(n,document.baseURI).pathname}var cR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),FI=["alt","control","meta","shift"],uR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},VI=(()=>{class n extends po{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fo().onAndCancel(t,o.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),FI.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=uR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),FI.forEach(o=>{if(o!==i){let c=lR[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(bt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function Ph(n,e,t){let r=j({rootComponent:n,platformRef:t?.platformRef},dR(e));return SI(r)}function dR(n){return{appProviders:[...mR,...n?.providers??[]],platformProviders:gR}}function fR(){Uc.makeCurrent()}function hR(){return new on}function pR(){return Uf(document),document}var gR=[{provide:no,useValue:MI},{provide:Ec,useValue:fR,multi:!0},{provide:bt,useFactory:pR}];var mR=[{provide:Ls,useValue:"root"},{provide:on,useFactory:hR},{provide:jc,useClass:Fc,multi:!0},{provide:jc,useClass:VI,multi:!0},Mh,Nh,Ah,{provide:Ar,useExisting:Mh},{provide:ho,useClass:cR},[]];var BI=()=>{};var HI=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yR=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4,m=(c&15)<<2|l>>6,I=l&63;u||(I=64,o||(m=64)),r.push(t[h],t[p],t[m],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new kh;let m=s<<2|c>>4;if(r.push(m),l!==64){let I=c<<4&240|l>>2;if(r.push(I),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},kh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vR=function(n){let e=HI(n);return $I.encodeByteArray(e,!0)},_o=function(n){return vR(n).replace(/\./g,"")},$c=function(n){try{return $I.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _R=()=>qI().__FIREBASE_DEFAULTS__,ER=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&$c(n[1]);return e&&JSON.parse(e)},qc=()=>{try{return BI()||_R()||ER()||IR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Lh=n=>qc()?.emulatorHosts?.[n],zI=n=>{let e=Lh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Fh=()=>qc()?.config,Vh=n=>qc()?.[`_${n}`];var Hc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Hn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zc(n){return(await fetch(n,{credentials:"include"})).ok}function GI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=j({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_o(JSON.stringify(t)),_o(JSON.stringify(o)),""].join(".")}var vo={};function wR(){let n={prod:[],emulator:[]};for(let e of Object.keys(vo))vo[e]?n.emulator.push(e):n.prod.push(e);return n}function TR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var jI=!1;function Gc(n,e){if(typeof window>"u"||typeof document>"u"||!Hn(window.location.host)||vo[n]===e||vo[n]||jI)return;vo[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=wR().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,I){m.setAttribute("width","24"),m.setAttribute("id",I),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{jI=!0,o()},m}function h(m,I){m.setAttribute("id",I),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=TR(r),I=t("text"),S=document.getElementById(I)||document.createElement("span"),M=t("learnmore"),R=document.getElementById(M)||document.createElement("a"),F=t("preprendIcon"),Z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let te=m.element;c(te),h(R,M);let K=l();u(Z,F),te.append(Z,S,R,K),document.body.appendChild(te)}s?(S.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function DR(){let n=qc()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QI(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZI(){let n=Be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function JI(){return!DR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bh(){try{return typeof indexedDB=="object"}catch{return!1}}function XI(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var CR="FirebaseError",dt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=CR,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}},un=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bR(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new dt(i,c,r)}};function bR(n,e){return n.replace(SR,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var SR=/\{\$([^}]+)}/g;function ew(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(UI(s)&&UI(o)){if(!Wt(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function UI(n){return n!==null&&typeof n=="object"}function Ai(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ni(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ri(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function tw(n,e){let t=new Oh(n,e);return t.subscribe.bind(t)}var Oh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");AR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xh),i.error===void 0&&(i.error=xh),i.complete===void 0&&(i.complete=xh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function AR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xh(){}var i6=14400*1e3;function Ge(n){return n&&n._delegate?n._delegate:n}var _t=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xr="[DEFAULT]";var jh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Hc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RR(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NR(n){return n===xr?void 0:n}function RR(n){return n.instantiationMode==="EAGER"}var Wc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new jh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var MR=[],ee=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ee||{}),PR={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},xR=ee.INFO,kR={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},OR=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=kR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$n=class{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=OR,this._userLogHandler=null,MR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var LR=(n,e)=>e.some(t=>n instanceof t),nw,rw;function FR(){return nw||(nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VR(){return rw||(rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var iw=new WeakMap,Hh=new WeakMap,sw=new WeakMap,Uh=new WeakMap,qh=new WeakMap;function BR(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Kt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&iw.set(t,n)}).catch(()=>{}),qh.set(e,n),e}function jR(n){if(Hh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Hh.set(n,e)}var $h={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Kt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ow(n){$h=n($h)}function UR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Kc(this),e,...t);return sw.set(r,e.sort?e.sort():[e]),Kt(r)}:VR().includes(n)?function(...e){return n.apply(Kc(this),e),Kt(iw.get(this))}:function(...e){return Kt(n.apply(Kc(this),e))}}function HR(n){return typeof n=="function"?UR(n):(n instanceof IDBTransaction&&jR(n),LR(n,FR())?new Proxy(n,$h):n)}function Kt(n){if(n instanceof IDBRequest)return BR(n);if(Uh.has(n))return Uh.get(n);let e=HR(n);return e!==n&&(Uh.set(n,e),qh.set(e,n)),e}var Kc=n=>qh.get(n);function cw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Kt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kt(o.result),u.oldVersion,u.newVersion,Kt(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var $R=["get","getKey","getAll","getAllKeys","count"],qR=["put","add","delete","clear"],zh=new Map;function aw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$R.includes(t)))return;let s=async function(o,...c){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[t](...c),i&&u.done]))[0]};return zh.set(e,s),s}ow(n=>me(j({},n),{get:(e,t,r)=>aw(e,t)||n.get(e,t,r),has:(e,t)=>!!aw(e,t)||n.has(e,t)}));var Wh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zR(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function zR(n){return n.getComponent()?.type==="VERSION"}var Kh="@firebase/app",uw="0.14.6";var ln=new $n("@firebase/app"),GR="@firebase/app-compat",WR="@firebase/analytics-compat",KR="@firebase/analytics",QR="@firebase/app-check-compat",YR="@firebase/app-check",ZR="@firebase/auth",JR="@firebase/auth-compat",XR="@firebase/database",eM="@firebase/data-connect",tM="@firebase/database-compat",nM="@firebase/functions",rM="@firebase/functions-compat",iM="@firebase/installations",sM="@firebase/installations-compat",oM="@firebase/messaging",aM="@firebase/messaging-compat",cM="@firebase/performance",uM="@firebase/performance-compat",lM="@firebase/remote-config",dM="@firebase/remote-config-compat",fM="@firebase/storage",hM="@firebase/storage-compat",pM="@firebase/firestore",gM="@firebase/ai",mM="@firebase/firestore-compat",yM="firebase",vM="12.6.0";var Qh="[DEFAULT]",_M={[Kh]:"fire-core",[GR]:"fire-core-compat",[KR]:"fire-analytics",[WR]:"fire-analytics-compat",[YR]:"fire-app-check",[QR]:"fire-app-check-compat",[ZR]:"fire-auth",[JR]:"fire-auth-compat",[XR]:"fire-rtdb",[eM]:"fire-data-connect",[tM]:"fire-rtdb-compat",[nM]:"fire-fn",[rM]:"fire-fn-compat",[iM]:"fire-iid",[sM]:"fire-iid-compat",[oM]:"fire-fcm",[aM]:"fire-fcm-compat",[cM]:"fire-perf",[uM]:"fire-perf-compat",[lM]:"fire-rc",[dM]:"fire-rc-compat",[fM]:"fire-gcs",[hM]:"fire-gcs-compat",[pM]:"fire-fst",[mM]:"fire-fst-compat",[gM]:"fire-vertex","fire-js":"fire-js",[yM]:"fire-js-all"};var Qc=new Map,EM=new Map,Yh=new Map;function lw(n,e){try{n.container.addComponent(e)}catch(t){ln.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zn(n){let e=n.name;if(Yh.has(e))return ln.debug(`There were multiple attempts to register component ${e}.`),!1;Yh.set(e,n);for(let t of Qc.values())lw(t,n);for(let t of EM.values())lw(t,n);return!0}function Io(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nt(n){return n==null?!1:n.settings!==void 0}var IM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qn=new un("app","Firebase",IM);var Zh=class{constructor(e,t,r){this._isDeleted=!1,this._options=j({},e),this._config=j({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}};var Gn=vM;function ep(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=j({name:Qh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw qn.create("bad-app-name",{appName:String(i)});if(t||(t=Fh()),!t)throw qn.create("no-options");let s=Qc.get(i);if(s){if(Wt(t,s.options)&&Wt(r,s.config))return s;throw qn.create("duplicate-app",{appName:i})}let o=new Wc(i);for(let u of Yh.values())o.addComponent(u);let c=new Zh(t,r,o);return Qc.set(i,c),c}function Yc(n=Qh){let e=Qc.get(n);if(!e&&n===Qh&&Fh())return ep();if(!e)throw qn.create("no-app",{appName:n});return e}function Mt(n,e,t){let r=_M[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ln.warn(o.join(" "));return}zn(new _t(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var wM="firebase-heartbeat-database",TM=1,Eo="firebase-heartbeat-store",Gh=null;function pw(){return Gh||(Gh=cw(wM,TM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eo)}catch(t){console.warn(t)}}}}).catch(n=>{throw qn.create("idb-open",{originalErrorMessage:n.message})})),Gh}async function DM(n){try{let t=(await pw()).transaction(Eo),r=await t.objectStore(Eo).get(gw(n));return await t.done,r}catch(e){if(e instanceof dt)ln.warn(e.message);else{let t=qn.create("idb-get",{originalErrorMessage:e?.message});ln.warn(t.message)}}}async function dw(n,e){try{let r=(await pw()).transaction(Eo,"readwrite");await r.objectStore(Eo).put(e,gw(n)),await r.done}catch(t){if(t instanceof dt)ln.warn(t.message);else{let r=qn.create("idb-set",{originalErrorMessage:t?.message});ln.warn(r.message)}}}function gw(n){return`${n.name}!${n.options.appId}`}var CM=1024,bM=30,Jh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Xh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>bM){let i=AM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ln.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=fw(),{heartbeatsToSend:t,unsentEntries:r}=SM(this._heartbeatsCache.heartbeats),i=_o(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ln.warn(e),""}}};function fw(){return new Date().toISOString().substring(0,10)}function SM(n,e=CM){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),hw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Xh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bh()?XI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await DM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return dw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return dw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function hw(n){return _o(JSON.stringify({version:2,heartbeats:n})).length}function AM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function NM(n){zn(new _t("platform-logger",e=>new Wh(e),"PRIVATE")),zn(new _t("heartbeat",e=>new Jh(e),"PRIVATE")),Mt(Kh,uw,n),Mt(Kh,uw,"esm2020"),Mt("fire-js","")}NM("");var RM="firebase",MM="12.7.0";Mt(RM,MM,"app");var mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yw={};var dn,tp;(function(){var n;function e(E,y){function v(){}v.prototype=y.prototype,E.F=y.prototype,E.prototype=new v,E.prototype.constructor=E,E.D=function(T,w,C){for(var _=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)_[rt-2]=arguments[rt];return y.prototype[w].apply(T,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,v){v||(v=0);let T=Array(16);if(typeof y=="string")for(var w=0;w<16;++w)T[w]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(w=0;w<16;++w)T[w]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=E.g[0],v=E.g[1],w=E.g[2];let C=E.g[3],_;_=y+(C^v&(w^C))+T[0]+3614090360&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(w^y&(v^w))+T[1]+3905402710&4294967295,C=y+(_<<12&4294967295|_>>>20),_=w+(v^C&(y^v))+T[2]+606105819&4294967295,w=C+(_<<17&4294967295|_>>>15),_=v+(y^w&(C^y))+T[3]+3250441966&4294967295,v=w+(_<<22&4294967295|_>>>10),_=y+(C^v&(w^C))+T[4]+4118548399&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(w^y&(v^w))+T[5]+1200080426&4294967295,C=y+(_<<12&4294967295|_>>>20),_=w+(v^C&(y^v))+T[6]+2821735955&4294967295,w=C+(_<<17&4294967295|_>>>15),_=v+(y^w&(C^y))+T[7]+4249261313&4294967295,v=w+(_<<22&4294967295|_>>>10),_=y+(C^v&(w^C))+T[8]+1770035416&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(w^y&(v^w))+T[9]+2336552879&4294967295,C=y+(_<<12&4294967295|_>>>20),_=w+(v^C&(y^v))+T[10]+4294925233&4294967295,w=C+(_<<17&4294967295|_>>>15),_=v+(y^w&(C^y))+T[11]+2304563134&4294967295,v=w+(_<<22&4294967295|_>>>10),_=y+(C^v&(w^C))+T[12]+1804603682&4294967295,y=v+(_<<7&4294967295|_>>>25),_=C+(w^y&(v^w))+T[13]+4254626195&4294967295,C=y+(_<<12&4294967295|_>>>20),_=w+(v^C&(y^v))+T[14]+2792965006&4294967295,w=C+(_<<17&4294967295|_>>>15),_=v+(y^w&(C^y))+T[15]+1236535329&4294967295,v=w+(_<<22&4294967295|_>>>10),_=y+(w^C&(v^w))+T[1]+4129170786&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^w&(y^v))+T[6]+3225465664&4294967295,C=y+(_<<9&4294967295|_>>>23),_=w+(y^v&(C^y))+T[11]+643717713&4294967295,w=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(w^C))+T[0]+3921069994&4294967295,v=w+(_<<20&4294967295|_>>>12),_=y+(w^C&(v^w))+T[5]+3593408605&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^w&(y^v))+T[10]+38016083&4294967295,C=y+(_<<9&4294967295|_>>>23),_=w+(y^v&(C^y))+T[15]+3634488961&4294967295,w=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(w^C))+T[4]+3889429448&4294967295,v=w+(_<<20&4294967295|_>>>12),_=y+(w^C&(v^w))+T[9]+568446438&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^w&(y^v))+T[14]+3275163606&4294967295,C=y+(_<<9&4294967295|_>>>23),_=w+(y^v&(C^y))+T[3]+4107603335&4294967295,w=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(w^C))+T[8]+1163531501&4294967295,v=w+(_<<20&4294967295|_>>>12),_=y+(w^C&(v^w))+T[13]+2850285829&4294967295,y=v+(_<<5&4294967295|_>>>27),_=C+(v^w&(y^v))+T[2]+4243563512&4294967295,C=y+(_<<9&4294967295|_>>>23),_=w+(y^v&(C^y))+T[7]+1735328473&4294967295,w=C+(_<<14&4294967295|_>>>18),_=v+(C^y&(w^C))+T[12]+2368359562&4294967295,v=w+(_<<20&4294967295|_>>>12),_=y+(v^w^C)+T[5]+4294588738&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^w)+T[8]+2272392833&4294967295,C=y+(_<<11&4294967295|_>>>21),_=w+(C^y^v)+T[11]+1839030562&4294967295,w=C+(_<<16&4294967295|_>>>16),_=v+(w^C^y)+T[14]+4259657740&4294967295,v=w+(_<<23&4294967295|_>>>9),_=y+(v^w^C)+T[1]+2763975236&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^w)+T[4]+1272893353&4294967295,C=y+(_<<11&4294967295|_>>>21),_=w+(C^y^v)+T[7]+4139469664&4294967295,w=C+(_<<16&4294967295|_>>>16),_=v+(w^C^y)+T[10]+3200236656&4294967295,v=w+(_<<23&4294967295|_>>>9),_=y+(v^w^C)+T[13]+681279174&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^w)+T[0]+3936430074&4294967295,C=y+(_<<11&4294967295|_>>>21),_=w+(C^y^v)+T[3]+3572445317&4294967295,w=C+(_<<16&4294967295|_>>>16),_=v+(w^C^y)+T[6]+76029189&4294967295,v=w+(_<<23&4294967295|_>>>9),_=y+(v^w^C)+T[9]+3654602809&4294967295,y=v+(_<<4&4294967295|_>>>28),_=C+(y^v^w)+T[12]+3873151461&4294967295,C=y+(_<<11&4294967295|_>>>21),_=w+(C^y^v)+T[15]+530742520&4294967295,w=C+(_<<16&4294967295|_>>>16),_=v+(w^C^y)+T[2]+3299628645&4294967295,v=w+(_<<23&4294967295|_>>>9),_=y+(w^(v|~C))+T[0]+4096336452&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~w))+T[7]+1126891415&4294967295,C=y+(_<<10&4294967295|_>>>22),_=w+(y^(C|~v))+T[14]+2878612391&4294967295,w=C+(_<<15&4294967295|_>>>17),_=v+(C^(w|~y))+T[5]+4237533241&4294967295,v=w+(_<<21&4294967295|_>>>11),_=y+(w^(v|~C))+T[12]+1700485571&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~w))+T[3]+2399980690&4294967295,C=y+(_<<10&4294967295|_>>>22),_=w+(y^(C|~v))+T[10]+4293915773&4294967295,w=C+(_<<15&4294967295|_>>>17),_=v+(C^(w|~y))+T[1]+2240044497&4294967295,v=w+(_<<21&4294967295|_>>>11),_=y+(w^(v|~C))+T[8]+1873313359&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~w))+T[15]+4264355552&4294967295,C=y+(_<<10&4294967295|_>>>22),_=w+(y^(C|~v))+T[6]+2734768916&4294967295,w=C+(_<<15&4294967295|_>>>17),_=v+(C^(w|~y))+T[13]+1309151649&4294967295,v=w+(_<<21&4294967295|_>>>11),_=y+(w^(v|~C))+T[4]+4149444226&4294967295,y=v+(_<<6&4294967295|_>>>26),_=C+(v^(y|~w))+T[11]+3174756917&4294967295,C=y+(_<<10&4294967295|_>>>22),_=w+(y^(C|~v))+T[2]+718787259&4294967295,w=C+(_<<15&4294967295|_>>>17),_=v+(C^(w|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(w+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+w&4294967295,E.g[3]=E.g[3]+C&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);let v=y-this.blockSize,T=this.C,w=this.h,C=0;for(;C<y;){if(w==0)for(;C<=v;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<y;)if(T[w++]=E.charCodeAt(C++),w==this.blockSize){i(this,T),w=0;break}}else for(;C<y;)if(T[w++]=E[C++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var v=E.length-8;v<E.length;++v)E[v]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,v=0;v<4;++v)for(let T=0;T<32;T+=8)E[y++]=this.g[v]>>>T&255;return E};function s(E,y){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=y(E)}function o(E,y){this.h=y;let v=[],T=!0;for(let w=E.length-1;w>=0;w--){let C=E[w]|0;T&&C==y||(v[w]=C,T=!1)}this.g=v}var c={};function u(E){return-128<=E&&E<128?s(E,function(y){return new o([y|0],y<0?-1:0)}):new o([E|0],E<0?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return R(l(-E));let y=[],v=1;for(let T=0;E>=v;T++)y[T]=E/v|0,v*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return R(h(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');let v=l(Math.pow(y,8)),T=p;for(let C=0;C<E.length;C+=8){var w=Math.min(8,E.length-C);let _=parseInt(E.substring(C,C+w),y);w<8?(w=l(Math.pow(y,w)),T=T.j(w).add(l(_))):(T=T.j(v),T=T.add(l(_)))}return T}var p=u(0),m=u(1),I=u(16777216);n=o.prototype,n.m=function(){if(M(this))return-R(this).m();let E=0,y=1;for(let v=0;v<this.g.length;v++){let T=this.i(v);E+=(T>=0?T:4294967296+T)*y,y*=4294967296}return E},n.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(M(this))return"-"+R(this).toString(E);let y=l(Math.pow(E,6));var v=this;let T="";for(;;){let w=K(v,y).g;v=F(v,w.j(y));let C=((v.g.length>0?v.g[0]:v.h)>>>0).toString(E);if(v=w,S(v))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},n.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function M(E){return E.h==-1}n.l=function(E){return E=F(this,E),M(E)?-1:S(E)?0:1};function R(E){let y=E.g.length,v=[];for(let T=0;T<y;T++)v[T]=~E.g[T];return new o(v,~E.h).add(m)}n.abs=function(){return M(this)?R(this):this},n.add=function(E){let y=Math.max(this.g.length,E.g.length),v=[],T=0;for(let w=0;w<=y;w++){let C=T+(this.i(w)&65535)+(E.i(w)&65535),_=(C>>>16)+(this.i(w)>>>16)+(E.i(w)>>>16);T=_>>>16,C&=65535,_&=65535,v[w]=_<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function F(E,y){return E.add(R(y))}n.j=function(E){if(S(this)||S(E))return p;if(M(this))return M(E)?R(this).j(R(E)):R(R(this).j(E));if(M(E))return R(this.j(R(E)));if(this.l(I)<0&&E.l(I)<0)return l(this.m()*E.m());let y=this.g.length+E.g.length,v=[];for(var T=0;T<2*y;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<E.g.length;w++){let C=this.i(T)>>>16,_=this.i(T)&65535,rt=E.i(w)>>>16,Tn=E.i(w)&65535;v[2*T+2*w]+=_*Tn,Z(v,2*T+2*w),v[2*T+2*w+1]+=C*Tn,Z(v,2*T+2*w+1),v[2*T+2*w+1]+=_*rt,Z(v,2*T+2*w+1),v[2*T+2*w+2]+=C*rt,Z(v,2*T+2*w+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new o(v,0)};function Z(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function te(E,y){this.g=E,this.h=y}function K(E,y){if(S(y))throw Error("division by zero");if(S(E))return new te(p,p);if(M(E))return y=K(R(E),y),new te(R(y.g),R(y.h));if(M(y))return y=K(E,R(y)),new te(R(y.g),y.h);if(E.g.length>30){if(M(E)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,T=y;T.l(E)<=0;)v=ae(v),T=ae(T);var w=k(v,1),C=k(T,1);for(T=k(T,2),v=k(v,2);!S(T);){var _=C.add(T);_.l(E)<=0&&(w=w.add(v),C=_),T=k(T,1),v=k(v,1)}return y=F(E,w.j(y)),new te(w,y)}for(w=p;E.l(y)>=0;){for(v=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=l(v),_=C.j(y);M(_)||_.l(E)>0;)v-=T,C=l(v),_=C.j(y);S(C)&&(C=m),w=w.add(C),E=F(E,_)}return new te(w,E)}n.B=function(E){return K(this,E).h},n.and=function(E){let y=Math.max(this.g.length,E.g.length),v=[];for(let T=0;T<y;T++)v[T]=this.i(T)&E.i(T);return new o(v,this.h&E.h)},n.or=function(E){let y=Math.max(this.g.length,E.g.length),v=[];for(let T=0;T<y;T++)v[T]=this.i(T)|E.i(T);return new o(v,this.h|E.h)},n.xor=function(E){let y=Math.max(this.g.length,E.g.length),v=[];for(let T=0;T<y;T++)v[T]=this.i(T)^E.i(T);return new o(v,this.h^E.h)};function ae(E){let y=E.g.length+1,v=[];for(let T=0;T<y;T++)v[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(v,E.h)}function k(E,y){let v=y>>5;y%=32;let T=E.g.length-v,w=[];for(let C=0;C<T;C++)w[C]=y>0?E.i(C+v)>>>y|E.i(C+v+1)<<32-y:E.i(C+v);return new o(w,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,tp=yw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,dn=yw.Integer=o}).apply(typeof mw<"u"?mw:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={};var np,PM,Mi,rp,wo,Jc,ip,sp,op;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in f))break e;f=f[D]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var s=s||{},o=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,f){return a.call.apply(a.bind,arguments)}function l(a,d,f){return l=u,l.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,D,b){for(var P=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)P[Q-2]=arguments[Q];return d.prototype[D].apply(g,P)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function I(a){let d=a.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function S(a,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;let b=D.length||0;a.length=f+b;for(let P=0;P<b;P++)a[f+P]=D[P]}else a.push(D)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function R(a){o.setTimeout(()=>{throw a},0)}function F(){var a=E;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Z{constructor(){this.h=this.g=null}add(d,f){let g=te.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var te=new M(()=>new K,a=>a.reset());class K{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,k=!1,E=new Z,y=()=>{let a=Promise.resolve(void 0);ae=()=>{a.then(v)}};function v(){for(var a;a=F();){try{a.h.call(a.g)}catch(f){R(f)}var d=te;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}k=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function rt(a,d){w.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(rt,w),rt.prototype.init=function(a,d){let f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Tn="closure_listenable_"+(Math.random()*1e6|0),xC=0;function kC(a,d,f,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++xC,this.da=this.fa=!1}function Jo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Xo(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function OC(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function Zm(a){let d={};for(let f in a)d[f]=a[f];return d}let Jm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xm(a,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)a[f]=g[f];for(let b=0;b<Jm.length;b++)f=Jm[b],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function ea(a){this.src=a,this.g={},this.h=0}ea.prototype.add=function(a,d,f,g,D){let b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);let P=_l(a,d,g,D);return P>-1?(d=a[P],f||(d.fa=!1)):(d=new kC(d,this.src,b,!!g,D),d.fa=f,a.push(d)),d};function vl(a,d){let f=d.type;if(f in a.g){var g=a.g[f],D=Array.prototype.indexOf.call(g,d,void 0),b;(b=D>=0)&&Array.prototype.splice.call(g,D,1),b&&(Jo(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _l(a,d,f,g){for(let D=0;D<a.length;++D){let b=a[D];if(!b.da&&b.listener==d&&b.capture==!!f&&b.ha==g)return D}return-1}var El="closure_lm_"+(Math.random()*1e6|0),Il={};function ey(a,d,f,g,D){if(g&&g.once)return ny(a,d,f,g,D);if(Array.isArray(d)){for(let b=0;b<d.length;b++)ey(a,d[b],f,g,D);return null}return f=Cl(f),a&&a[Tn]?a.J(d,f,c(g)?!!g.capture:!!g,D):ty(a,d,f,!1,g,D)}function ty(a,d,f,g,D,b){if(!d)throw Error("Invalid event type");let P=c(D)?!!D.capture:!!D,Q=Tl(a);if(Q||(a[El]=Q=new ea(a)),f=Q.add(d,f,g,P,b),f.proxy)return f;if(g=LC(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)C||(D=P),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(iy(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function LC(){function a(f){return d.call(a.src,a.listener,f)}let d=FC;return a}function ny(a,d,f,g,D){if(Array.isArray(d)){for(let b=0;b<d.length;b++)ny(a,d[b],f,g,D);return null}return f=Cl(f),a&&a[Tn]?a.K(d,f,c(g)?!!g.capture:!!g,D):ty(a,d,f,!0,g,D)}function ry(a,d,f,g,D){if(Array.isArray(d))for(var b=0;b<d.length;b++)ry(a,d[b],f,g,D);else g=c(g)?!!g.capture:!!g,f=Cl(f),a&&a[Tn]?(a=a.i,b=String(d).toString(),b in a.g&&(d=a.g[b],f=_l(d,f,g,D),f>-1&&(Jo(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[b],a.h--)))):a&&(a=Tl(a))&&(d=a.g[d.toString()],a=-1,d&&(a=_l(d,f,g,D)),(f=a>-1?d[a]:null)&&wl(f))}function wl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Tn])vl(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(iy(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Tl(d))?(vl(f,a),f.h==0&&(f.src=null,d[El]=null)):Jo(a)}}}function iy(a){return a in Il?Il[a]:Il[a]="on"+a}function FC(a,d){if(a.da)a=!0;else{d=new rt(d,this);let f=a.listener,g=a.ha||a.src;a.fa&&wl(a),a=f.call(g,d)}return a}function Tl(a){return a=a[El],a instanceof ea?a:null}var Dl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cl(a){return typeof a=="function"?a:(a[Dl]||(a[Dl]=function(d){return a.handleEvent(d)}),a[Dl])}function He(){T.call(this),this.i=new ea(this),this.M=this,this.G=null}p(He,T),He.prototype[Tn]=!0,He.prototype.removeEventListener=function(a,d,f,g){ry(this,a,d,f,g)};function Ye(a,d){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new w(d,a);else if(d instanceof w)d.target=d.target||a;else{var D=d;d=new w(g,a),Xm(d,D)}D=!0;let b,P;if(f)for(P=f.length-1;P>=0;P--)b=d.g=f[P],D=ta(b,g,!0,d)&&D;if(b=d.g=a,D=ta(b,g,!0,d)&&D,D=ta(b,g,!1,d)&&D,f)for(P=0;P<f.length;P++)b=d.g=f[P],D=ta(b,g,!1,d)&&D}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let g=0;g<f.length;g++)Jo(f[g]);delete a.g[d],a.h--}}this.G=null},He.prototype.J=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},He.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function ta(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let b=0;b<d.length;++b){let P=d[b];if(P&&!P.da&&P.capture==f){let Q=P.listener,Pe=P.ha||P.src;P.fa&&vl(a.i,P),D=Q.call(Pe,g)!==!1&&D}}return D&&!g.defaultPrevented}function VC(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function sy(a){a.g=VC(()=>{a.g=null,a.i&&(a.i=!1,sy(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class BC extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:sy(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(a){T.call(this),this.h=a,this.g={}}p(us,T);var oy=[];function ay(a){Xo(a.g,function(d,f){this.g.hasOwnProperty(f)&&wl(d)},a),a.g={}}us.prototype.N=function(){us.Z.N.call(this),ay(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bl=o.JSON.stringify,jC=o.JSON.parse,UC=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function cy(){}function uy(){}var ls={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sl(){w.call(this,"d")}p(Sl,w);function Al(){w.call(this,"c")}p(Al,w);var sr={},ly=null;function na(){return ly=ly||new He}sr.Ia="serverreachability";function dy(a){w.call(this,sr.Ia,a)}p(dy,w);function ds(a){let d=na();Ye(d,new dy(d))}sr.STAT_EVENT="statevent";function fy(a,d){w.call(this,sr.STAT_EVENT,a),this.stat=d}p(fy,w);function Ze(a){let d=na();Ye(d,new fy(d,a))}sr.Ja="timingevent";function hy(a,d){w.call(this,sr.Ja,a),this.size=d}p(hy,w);function fs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function hs(){this.g=!0}hs.prototype.ua=function(){this.g=!1};function HC(a,d,f,g,D,b){a.info(function(){if(a.g)if(b){var P="",Q=b.split("&");for(let ge=0;ge<Q.length;ge++){var Pe=Q[ge].split("=");if(Pe.length>1){let Le=Pe[0];Pe=Pe[1];let Lt=Le.split("_");P=Lt.length>=2&&Lt[1]=="type"?P+(Le+"="+Pe+"&"):P+(Le+"=redacted&")}}}else P=null;else P=b;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+P})}function $C(a,d,f,g,D,b,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+b+" "+P})}function Yr(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+zC(a,f)+(g?" "+g:"")})}function qC(a,d){a.info(function(){return"TIMEOUT: "+d})}hs.prototype.info=function(){};function zC(a,d){if(!a.g)return d;if(!d)return null;try{let b=JSON.parse(d);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let P=1;P<g.length;P++)g[P]=""}}}}return bl(b)}catch{return d}}var ra={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},py={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gy;function Nl(){}p(Nl,cy),Nl.prototype.g=function(){return new XMLHttpRequest},gy=new Nl;function ps(a){return encodeURIComponent(String(a))}function GC(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function Dn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.S=g||1,this.V=new us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new my}function my(){this.i=null,this.g="",this.h=!1}var yy={},Rl={};function Ml(a,d,f){a.M=1,a.A=sa(Ot(d)),a.u=f,a.R=!0,vy(a,null)}function vy(a,d){a.F=Date.now(),ia(a),a.B=Ot(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),My(f.i,"t",g),a.C=0,f=a.j.L,a.h=new my,a.g=Qy(a.j,f?d:null,!a.u),a.P>0&&(a.O=new BC(l(a.Y,a,a.g),a.P)),d=a.V,f=a.g,g=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(oy[0]=D.toString()),D=oy);for(let b=0;b<D.length;b++){let P=ey(f,D[b],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.J?Zm(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),ds(),HC(a.i,a.v,a.B,a.l,a.S,a.u)}Dn.prototype.ba=function(a){a=a.target;let d=this.O;d&&Sn(a)==3?d.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)e:{let Q=Sn(this.g),Pe=this.g.ya(),ge=this.g.ca();if(!(Q<3)&&(Q!=3||this.g&&(this.h.h||this.g.la()||Vy(this.g)))){this.K||Q!=4||Pe==7||(Pe==8||ge<=0?ds(3):ds(2)),Pl(this);var d=this.g.ca();this.X=d;var f=WC(this);if(this.o=d==200,$C(this.i,this.v,this.B,this.l,this.S,Q,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var b=g;break t}}b=null}if(a=b)Yr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xl(this,a);else{this.o=!1,this.m=3,Ze(12),or(this),gs(this);break e}}if(this.R){a=!0;let Le;for(;!this.K&&this.C<f.length;)if(Le=KC(this,f),Le==Rl){Q==4&&(this.m=4,Ze(14),a=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==yy){this.m=4,Ze(15),Yr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Yr(this.i,this.l,Le,null),xl(this,Le);if(_y(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Q!=4||f.length!=0||this.h.h||(this.m=1,Ze(16),a=!1),this.o=this.o&&a,!a)Yr(this.i,this.l,f,"[Invalid Chunked Response]"),or(this),gs(this);else if(f.length>0&&!this.W){this.W=!0;var P=this.j;P.g==this&&P.aa&&!P.P&&(P.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),jl(P),P.P=!0,Ze(11))}}else Yr(this.i,this.l,f,null),xl(this,f);Q==4&&or(this),this.o&&!this.K&&(Q==4?zy(this.j,this):(this.o=!1,ia(this)))}else cb(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,Ze(12)):(this.m=0,Ze(13)),or(this),gs(this)}}}catch{}finally{}};function WC(a){if(!_y(a))return a.g.la();let d=Vy(a.g);if(d==="")return"";let f="",g=d.length,D=Sn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return or(a),gs(a),"";a.h.i=new o.TextDecoder}for(let b=0;b<g;b++)a.h.h=!0,f+=a.h.i.decode(d[b],{stream:!(D&&b==g-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function _y(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function KC(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Rl:(f=Number(d.substring(f,g)),isNaN(f)?yy:(g+=1,g+f>d.length?Rl:(d=d.slice(g,g+f),a.C=g+f,d)))}Dn.prototype.cancel=function(){this.K=!0,or(this)};function ia(a){a.T=Date.now()+a.H,Ey(a,a.H)}function Ey(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=fs(l(a.aa,a),d)}function Pl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Dn.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(qC(this.i,this.B),this.M!=2&&(ds(),Ze(17)),or(this),this.m=2,gs(this)):Ey(this,this.T-a)};function gs(a){a.j.I==0||a.K||zy(a.j,a)}function or(a){Pl(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,ay(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function xl(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||kl(f.h,a))){if(!a.L&&kl(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)da(f),ua(f);else break e;Bl(f),Ze(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=fs(l(f.Va,f),6e3));Ty(f.h)<=1&&f.ta&&(f.ta=void 0)}else cr(f,11)}else if((a.L||f.g==a)&&da(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let ge=D[d],Le=ge[0];if(!(Le<=f.K))if(f.K=Le,ge=ge[1],f.I==2)if(ge[0]=="c"){f.M=ge[1],f.ba=ge[2];let Lt=ge[3];Lt!=null&&(f.ka=Lt,f.j.info("VER="+f.ka));let ur=ge[4];ur!=null&&(f.za=ur,f.j.info("SVER="+f.za));let An=ge[5];An!=null&&typeof An=="number"&&An>0&&(g=1.5*An,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Nn=a.g;if(Nn){let ha=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var b=g.h;b.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Ol(b,b.h),b.h=null))}if(g.G){let Ul=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ul&&(g.wa=Ul,ve(g.J,g.G,Ul))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var P=a;if(g.na=Ky(g,g.L?g.ba:null,g.W),P.L){Dy(g.h,P);var Q=P,Pe=g.O;Pe&&(Q.H=Pe),Q.D&&(Pl(Q),ia(Q)),g.g=P}else $y(g);f.i.length>0&&la(f)}else ge[0]!="stop"&&ge[0]!="close"||cr(f,7);else f.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?cr(f,7):Vl(f):ge[0]!="noop"&&f.l&&f.l.qa(ge),f.A=0)}}ds(4)}catch{}}var QC=class{constructor(a,d){this.g=a,this.map=d}};function Iy(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ty(a){return a.h?1:a.g?a.g.size:0}function kl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Ol(a,d){a.g?a.g.add(d):a.h=d}function Dy(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Iy.prototype.cancel=function(){if(this.i=Cy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Cy(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return I(a.i)}var by=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YC(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let g=a[f].indexOf("="),D,b=null;g>=0?(D=a[f].substring(0,g),b=a[f].substring(g+1)):D=a[f],d(D,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Cn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Cn?(this.l=a.l,ms(this,a.j),this.o=a.o,this.g=a.g,ys(this,a.u),this.h=a.h,Ll(this,Py(a.i)),this.m=a.m):a&&(d=String(a).match(by))?(this.l=!1,ms(this,d[1]||"",!0),this.o=vs(d[2]||""),this.g=vs(d[3]||"",!0),ys(this,d[4]),this.h=vs(d[5]||"",!0),Ll(this,d[6]||"",!0),this.m=vs(d[7]||"")):(this.l=!1,this.i=new Es(null,this.l))}Cn.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(_s(d,Sy,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(_s(d,Sy,!0),"@"),a.push(ps(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(_s(f,f.charAt(0)=="/"?XC:JC,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",_s(f,tb)),a.join("")},Cn.prototype.resolve=function(a){let d=Ot(this),f=!!a.j;f?ms(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var g=a.h;if(f)ys(d,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let b=[];for(let P=0;P<D.length;){let Q=D[P++];Q=="."?g&&P==D.length&&b.push(""):Q==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),g&&P==D.length&&b.push("")):(b.push(Q),g=!0)}g=b.join("/")}else g=D}return f?d.h=g:f=a.i.toString()!=="",f?Ll(d,Py(a.i)):f=!!a.m,f&&(d.m=a.m),d};function Ot(a){return new Cn(a)}function ms(a,d,f){a.j=f?vs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ys(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function Ll(a,d,f){d instanceof Es?(a.i=d,nb(a.i,a.l)):(f||(d=_s(d,eb)),a.i=new Es(d,a.l))}function ve(a,d,f){a.i.set(d,f)}function sa(a){return ve(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function vs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function _s(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,ZC),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sy=/[#\/\?@]/g,JC=/[#\?:]/g,XC=/[#\?]/g,eb=/[#\?@]/g,tb=/#/g;function Es(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ar(a){a.g||(a.g=new Map,a.h=0,a.i&&YC(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Es.prototype,n.add=function(a,d){ar(this),this.i=null,a=Zr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Ay(a,d){ar(a),d=Zr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Ny(a,d){return ar(a),d=Zr(a,d),a.g.has(d)}n.forEach=function(a,d){ar(this),this.g.forEach(function(f,g){f.forEach(function(D){a.call(d,D,g,this)},this)},this)};function Ry(a,d){ar(a);let f=[];if(typeof d=="string")Ny(a,d)&&(f=f.concat(a.g.get(Zr(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}n.set=function(a,d){return ar(this),this.i=null,a=Zr(this,a),Ny(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=Ry(this,a),a.length>0?String(a[0]):d):d};function My(a,d,f){Ay(a,d),f.length>0&&(a.i=null,a.g.set(Zr(a,d),I(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let D=ps(f);f=Ry(this,f);for(let b=0;b<f.length;b++){let P=D;f[b]!==""&&(P+="="+ps(f[b])),a.push(P)}}return this.i=a.join("&")};function Py(a){let d=new Es;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Zr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function nb(a,d){d&&!a.j&&(ar(a),a.i=null,a.g.forEach(function(f,g){let D=g.toLowerCase();g!=D&&(Ay(this,g),My(this,D,f))},a)),a.j=d}function rb(a,d){let f=new hs;if(o.Image){let g=new Image;g.onload=h(bn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(bn,f,"TestLoadImage: error",!1,d,g),g.onabort=h(bn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(bn,f,"TestLoadImage: timeout",!1,d,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function ib(a,d){let f=new hs,g=new AbortController,D=setTimeout(()=>{g.abort(),bn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(b=>{clearTimeout(D),b.ok?bn(f,"TestPingServer: ok",!0,d):bn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),bn(f,"TestPingServer: error",!1,d)})}function bn(a,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function sb(){this.g=new UC}function oa(a){this.i=a.Sb||null,this.h=a.ab||!1}p(oa,cy),oa.prototype.g=function(){return new aa(this.i,this.h)};function aa(a,d){He.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(aa,He),n=aa.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,ws(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xy(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function xy(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Is(this):ws(this),this.readyState==3&&xy(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,Is(this))},n.Na=function(a){this.g&&(this.response=a,Is(this))},n.ga=function(){this.g&&Is(this)};function Is(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ws(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function ws(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ky(a){let d="";return Xo(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Fl(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=ky(f),typeof a=="string"?f!=null&&ps(f):ve(a,d,f))}function we(a){He.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(we,He);var ob=/^https?$/i,ab=["POST","PUT"];n=we.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gy.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(b){Oy(this,b);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let b of g.keys())f.set(b,g.get(b));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(ab,d,void 0)>=0)||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,P]of f)this.g.setRequestHeader(b,P);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){Oy(this,b)}};function Oy(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Ly(a),ca(a)}function Ly(a){a.A||(a.A=!0,Ye(a,"complete"),Ye(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Ye(this,"complete"),Ye(this,"abort"),ca(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ca(this,!0)),we.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Fy(this):this.Xa())},n.Xa=function(){Fy(this)};function Fy(a){if(a.h&&typeof s<"u"){if(a.v&&Sn(a)==4)setTimeout(a.Ca.bind(a),0);else if(Ye(a,"readystatechange"),Sn(a)==4){a.h=!1;try{let b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=b===0){let P=String(a.D).match(by)[1]||null;!P&&o.self&&o.self.location&&(P=o.self.location.protocol.slice(0,-1)),g=!ob.test(P?P.toLowerCase():"")}f=g}if(f)Ye(a,"complete"),Ye(a,"success");else{a.o=6;try{var D=Sn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Ly(a)}}finally{ca(a)}}}}function ca(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||Ye(a,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Sn(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Sn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),jC(d)}};function Vy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cb(a){let d={};a=(a.g&&Sn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=GC(a[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let b=d[D]||[];d[D]=b,b.push(f)}OC(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function By(a){this.za=0,this.i=[],this.j=new hs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ts("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ts("baseRetryDelayMs",5e3,a),this.Za=Ts("retryDelaySeedMs",1e4,a),this.Ta=Ts("forwardChannelMaxRetries",2,a),this.va=Ts("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Iy(a&&a.concurrentRequestLimit),this.Ba=new sb,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=By.prototype,n.ka=8,n.I=1,n.connect=function(a,d,f,g){Ze(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Ky(this,null,this.W),la(this)};function Vl(a){if(jy(a),a.I==3){var d=a.V++,f=Ot(a.J);if(ve(f,"SID",a.M),ve(f,"RID",d),ve(f,"TYPE","terminate"),Ds(a,f),d=new Dn(a,a.j,d),d.M=2,d.A=sa(Ot(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=Qy(d.j,null),d.g.ea(d.A)),d.F=Date.now(),ia(d)}Wy(a)}function ua(a){a.g&&(jl(a),a.g.cancel(),a.g=null)}function jy(a){ua(a),a.v&&(o.clearTimeout(a.v),a.v=null),da(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function la(a){if(!wy(a.h)&&!a.m){a.m=!0;var d=a.Ea;ae||y(),k||(ae(),k=!0),E.add(d,a),a.D=0}}function ub(a,d){return Ty(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=fs(l(a.Ea,a,d),Gy(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let D=new Dn(this,this.j,a),b=this.o;if(this.U&&(b?(b=Zm(b),Xm(b,this.U)):b=this.U),this.u!==null||this.R||(D.J=b,b=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Hy(this,D,d),f=Ot(this.J),ve(f,"RID",a),ve(f,"CVER",22),this.G&&ve(f,"X-HTTP-Session-Id",this.G),Ds(this,f),b&&(this.R?d="headers="+ps(ky(b))+"&"+d:this.u&&Fl(f,this.u,b)),Ol(this.h,D),this.Ra&&ve(f,"TYPE","init"),this.S?(ve(f,"$req",d),ve(f,"SID","null"),D.U=!0,Ml(D,f,null)):Ml(D,f,d),this.I=2}}else this.I==3&&(a?Uy(this,a):this.i.length==0||wy(this.h)||Uy(this))};function Uy(a,d){var f;d?f=d.l:f=a.V++;let g=Ot(a.J);ve(g,"SID",a.M),ve(g,"RID",f),ve(g,"AID",a.K),Ds(a,g),a.u&&a.o&&Fl(g,a.u,a.o),f=new Dn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Hy(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Ol(a.h,f),Ml(f,g,d)}function Ds(a,d){a.H&&Xo(a.H,function(f,g){ve(d,g,f)}),a.l&&Xo({},function(f,g){ve(d,g,f)})}function Hy(a,d,f){f=Math.min(a.i.length,f);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var D=a.i;let Q=-1;for(;;){let Pe=["count="+f];Q==-1?f>0?(Q=D[0].g,Pe.push("ofs="+Q)):Q=0:Pe.push("ofs="+Q);let ge=!0;for(let Le=0;Le<f;Le++){var b=D[Le].g;let Lt=D[Le].map;if(b-=Q,b<0)Q=Math.max(0,D[Le].g-100),ge=!1;else try{b="req"+b+"_"||"";try{var P=Lt instanceof Map?Lt:Object.entries(Lt);for(let[ur,An]of P){let Nn=An;c(An)&&(Nn=bl(An)),Pe.push(b+ur+"="+encodeURIComponent(Nn))}}catch(ur){throw Pe.push(b+"type="+encodeURIComponent("_badmap")),ur}}catch{g&&g(Lt)}}if(ge){P=Pe.join("&");break e}}P=void 0}return a=a.i.splice(0,f),d.G=a,P}function $y(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;ae||y(),k||(ae(),k=!0),E.add(d,a),a.A=0}}function Bl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=fs(l(a.Da,a),Gy(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,qy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=fs(l(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ze(10),ua(this),qy(this))};function jl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function qy(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Ot(a.na);ve(d,"RID","rpc"),ve(d,"SID",a.M),ve(d,"AID",a.K),ve(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&ve(d,"TO",a.ia),ve(d,"TYPE","xmlhttp"),Ds(a,d),a.u&&a.o&&Fl(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=sa(Ot(d)),f.u=null,f.R=!0,vy(f,a)}n.Va=function(){this.C!=null&&(this.C=null,ua(this),Bl(this),Ze(19))};function da(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zy(a,d){var f=null;if(a.g==d){da(a),jl(a),a.g=null;var g=2}else if(kl(a.h,d))f=d.G,Dy(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=a.D;g=na(),Ye(g,new hy(g,f)),la(a)}else $y(a);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&ub(a,d)||g==2&&Bl(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),D){case 1:cr(a,5);break;case 4:cr(a,10);break;case 3:cr(a,6);break;default:cr(a,2)}}}function Gy(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function cr(a,d){if(a.j.info("Error code "+d),d==2){var f=l(a.bb,a),g=a.Ua;let D=!g;g=new Cn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ms(g,"https"),sa(g),D?rb(g.toString(),f):ib(g.toString(),f)}else Ze(2);a.I=0,a.l&&a.l.pa(d),Wy(a),jy(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Wy(a){if(a.I=0,a.ja=[],a.l){let d=Cy(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ja,d),S(a.ja,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.oa()}}function Ky(a,d,f){var g=f instanceof Cn?Ot(f):new Cn(f);if(g.g!="")d&&(g.g=d+"."+g.g),ys(g,g.u);else{var D=o.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let b=new Cn(null);g&&ms(b,g),d&&(b.g=d),D&&ys(b,D),f&&(b.h=f),g=b}return f=a.G,d=a.wa,f&&d&&ve(g,f,d),ve(g,"VER",a.ka),Ds(a,g),g}function Qy(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new we(new oa({ab:f})):new we(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yy(){}n=Yy.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fa(){}fa.prototype.g=function(a,d){return new at(a,d)};function at(a,d){He.call(this),this.g=new By(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Jr(this)}p(at,He),at.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},at.prototype.close=function(){Vl(this.g)},at.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=bl(a),a=f);d.i.push(new QC(d.Ya++,a)),d.I==3&&la(d)},at.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,at.Z.N.call(this)};function Zy(a){Sl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(Zy,Sl);function Jy(){Al.call(this),this.status=1}p(Jy,Al);function Jr(a){this.g=a}p(Jr,Yy),Jr.prototype.ra=function(){Ye(this.g,"a")},Jr.prototype.qa=function(a){Ye(this.g,new Zy(a))},Jr.prototype.pa=function(a){Ye(this.g,new Jy)},Jr.prototype.oa=function(){Ye(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,at.prototype.send=at.prototype.o,at.prototype.open=at.prototype.m,at.prototype.close=at.prototype.close,op=fn.createWebChannelTransport=function(){return new fa},sp=fn.getStatEventTarget=function(){return na()},ip=fn.Event=sr,Jc=fn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ra.NO_ERROR=0,ra.TIMEOUT=8,ra.HTTP_ERROR=6,wo=fn.ErrorCode=ra,py.COMPLETE="complete",rp=fn.EventType=py,uy.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",He.prototype.listen=He.prototype.J,Mi=fn.WebChannel=uy,PM=fn.FetchXmlHttpFactory=oa,we.prototype.listenOnce=we.prototype.K,we.prototype.getLastError=we.prototype.Ha,we.prototype.getLastErrorCode=we.prototype.ya,we.prototype.getStatus=we.prototype.ca,we.prototype.getResponseJson=we.prototype.La,we.prototype.getResponseText=we.prototype.la,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Fa,np=fn.XhrIo=we}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});var vw="@firebase/firestore",_w="4.9.3";var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid"),je.MOCK_USER=new je("mock-user");var Xi="12.7.0";var Br=new $n("@firebase/firestore");function Pi(){return Br.logLevel}function x(n,...e){if(Br.logLevel<=ee.DEBUG){let t=e.map(Gg);Br.debug(`Firestore (${Xi}): ${n}`,...t)}}function hn(n,...e){if(Br.logLevel<=ee.ERROR){let t=e.map(Gg);Br.error(`Firestore (${Xi}): ${n}`,...t)}}function ji(n,...e){if(Br.logLevel<=ee.WARN){let t=e.map(Gg);Br.warn(`Firestore (${Xi}): ${n}`,...t)}}function Gg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function V(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sT(n,r,t)}function sT(n,e,t){let r=`FIRESTORE (${Xi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw hn(r),new Error(r)}function le(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||sT(e,i,r)}function z(n,e){return n}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends dt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Yt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var su=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(je.UNAUTHENTICATED))}shutdown(){}},hp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},pp=class{constructor(e){this.t=e,this.currentUser=je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){le(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new su(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new je(e)}},gp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ou=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){le(this.o===void 0,3512);let r=s=>{s.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ou(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(le(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ou(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function xM(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ao=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=xM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function vp(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return ap(i)===ap(s)?ie(i,s):ap(i)?1:-1}return ie(n.length,e.length)}var kM=55296,OM=57343;function ap(n){let e=n.charCodeAt(0);return e>=kM&&e<=OM}function Ui(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ew="__name__",au=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&V(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&V(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dn.fromString(e.substring(4,e.length-2))}},be=class n extends au{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LM=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=class n extends au{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ew}static keyField(){return new n([Ew])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new O(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new O(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new O(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(be.fromString(e))}static fromName(e){return new n(be.fromString(e).popFirst(5))}static empty(){return new n(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new be(e.slice()))}};function FM(n,e,t){if(!t)throw new O(A.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VM(n,e,t,r){if(e===!0&&r===!0)throw new O(A.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Iw(n){if(!B.isDocumentKey(n))throw new O(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":V(12329,{type:typeof n})}function Wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wg(n);throw new O(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Re(n,e){let t={typeString:n};return e&&(t.value=e),t}function jo(n,e){if(!oT(n))throw new O(A.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new O(A.INVALID_ARGUMENT,t);return!0}var ww=-62135596800,Tw=1e6,Me=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Tw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ww)throw new O(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tw}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jo(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:Re("string",Me._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};var W=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Me(0,0))}static max(){return new n(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var No=-1,_p=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};_p.UNKNOWN_ID=-1;function BM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new Me(t+1,0):new Me(t,r));return new jr(i,B.empty(),e)}function jM(n){return new jr(n.readTime,n.key,No)}var jr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(W.min(),B.empty(),No)}static max(){return new n(W.max(),B.empty(),No)}};function UM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var HM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ep=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function es(n){if(n.code!==A.FAILED_PRECONDITION||n.message!==HM)throw n;x("LocalStore","Unexpectedly lost primary lease")}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&V(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(h=>{o[l]=h,++c,c===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function $M(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ts(n){return n.name==="IndexedDbTransactionError"}var Kg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Qg=-1;function ju(n){return n==null}function Ro(n){return n===0&&1/n==-1/0}function qM(n){return typeof n=="number"&&Number.isInteger(n)&&!Ro(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var aT="";function zM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dw(e)),e=GM(n.get(t),e);return Dw(e)}function GM(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case aT:t+="";break;default:t+=s}}return t}function Dw(n){return n+aT+""}var WM="remoteDocuments",cT="owner";var uT="mutationQueues";var lT="mutations";var dT="documentMutations",KM="remoteDocumentsV14";var fT="remoteDocumentGlobal";var hT="targets";var pT="targetDocuments";var gT="targetGlobal",mT="collectionParents";var yT="clientMetadata";var vT="bundles";var _T="namedQueries";var QM="indexConfiguration";var YM="indexState";var ZM="indexEntries";var ET="documentOverlays";var JM="globals";var XM=[uT,lT,dT,WM,hT,cT,gT,pT,yT,fT,mT,vT,_T],U6=[...XM,ET],eP=[uT,lT,dT,KM,hT,cT,gT,pT,yT,fT,mT,vT,_T,ET],tP=eP,nP=[...tP,QM,YM,ZM];var H6=[...nP,JM];function Cw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ce=class n{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Li(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Li(this.root,e,this.comparator,!1)}getReverseIterator(){return new Li(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Li(this.root,e,this.comparator,!0)}},Li=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw V(43730,{key:this.key,value:this.value});if(this.right.isRed())throw V(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw V(27949);return e+(this.isRed()?0:1)}};Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw V(57766)}get value(){throw V(16141)}get color(){throw V(16727)}get left(){throw V(29726)}get right(){throw V(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ue=class n{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cu(this.data.getIterator())}getIteratorFrom(e){return new cu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},cu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qt=class n{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ue(ft.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ui(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var uu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uu("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var rP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pn(n){if(le(!!n,39018),typeof n=="string"){let e=0,t=rP.exec(n);if(le(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(n.seconds),nanos:Ie(n.nanos)}}function Ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gn(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}var wT="server_timestamp",TT="__type__",DT="__previous_value__",CT="__local_write_time__";function Yg(n){return(n?.mapValue?.fields||{})[TT]?.stringValue===wT}function Uu(n){let e=n.mapValue.fields[DT];return Yg(e)?Uu(e):e}function Mo(n){let e=pn(n.mapValue.fields[CT].timestampValue);return new Me(e.seconds,e.nanos)}var Ip=class{constructor(e,t,r,i,s,o,c,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},lu="(default)",du=class n{constructor(e,t){this.projectId=e,this.database=t||lu}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===lu}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Zg="__type__",bT="__max__",Xc={mapValue:{fields:{__type__:{stringValue:bT}}}},Jg="__vector__",Hi="value";function Zn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yg(n)?4:AT(n)?9007199254740991:ST(n)?10:11:V(28295,{value:n})}function en(n,e){if(n===e)return!0;let t=Zn(n);if(t!==Zn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mo(n).isEqual(Mo(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=pn(i.timestampValue),c=pn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return gn(i.bytesValue).isEqual(gn(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ie(i.geoPointValue.latitude)===Ie(s.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ie(i.integerValue)===Ie(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ie(i.doubleValue),c=Ie(s.doubleValue);return o===c?Ro(o)===Ro(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return Ui(n.arrayValue.values||[],e.arrayValue.values||[],en);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Cw(o)!==Cw(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!en(o[u],c[u])))return!1;return!0})(n,e);default:return V(52216,{left:n})}}function Po(n,e){return(n.values||[]).find(t=>en(t,e))!==void 0}function $i(n,e){if(n===e)return 0;let t=Zn(n),r=Zn(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let c=Ie(s.integerValue||s.doubleValue),u=Ie(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return bw(n.timestampValue,e.timestampValue);case 4:return bw(Mo(n),Mo(e));case 5:return vp(n.stringValue,e.stringValue);case 6:return(function(s,o){let c=gn(s),u=gn(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let c=s.split("/"),u=o.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ie(c[l],u[l]);if(h!==0)return h}return ie(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let c=ie(Ie(s.latitude),Ie(o.latitude));return c!==0?c:ie(Ie(s.longitude),Ie(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Sw(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let c=s.fields||{},u=o.fields||{},l=c[Hi]?.arrayValue,h=u[Hi]?.arrayValue,p=ie(l?.values?.length||0,h?.values?.length||0);return p!==0?p:Sw(l,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Xc.mapValue&&o===Xc.mapValue)return 0;if(s===Xc.mapValue)return 1;if(o===Xc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=vp(u[p],h[p]);if(m!==0)return m;let I=$i(c[u[p]],l[h[p]]);if(I!==0)return I}return ie(u.length,h.length)})(n.mapValue,e.mapValue);default:throw V(23264,{he:t})}}function bw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=pn(n),r=pn(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function Sw(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=$i(t[i],r[i]);if(s)return s}return ie(t.length,r.length)}function qi(n){return wp(n)}function wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=pn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return B.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=wp(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${wp(t.fields[o])}`;return i+"}"})(n.mapValue):V(61005,{value:n})}function nu(n){switch(Zn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Uu(n);return e?16+nu(e):16;case 5:return 2*n.stringValue.length;case 6:return gn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+nu(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Gr(r.fields,(s,o)=>{i+=s.length+nu(o)}),i})(n.mapValue);default:throw V(13486,{value:n})}}function Tp(n){return!!n&&"integerValue"in n}function Xg(n){return!!n&&"arrayValue"in n}function Aw(n){return!!n&&"nullValue"in n}function Nw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ru(n){return!!n&&"mapValue"in n}function ST(n){return(n?.mapValue?.fields||{})[Zg]?.stringValue===Jg}function Do(n){if(n.geoPointValue)return{geoPointValue:j({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:j({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Do(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Do(n.arrayValue.values[t]);return e}return j({},n)}function AT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bT}var q6={mapValue:{fields:{[Zg]:{stringValue:Jg},[Hi]:{arrayValue:{}}}}};var Pt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ru(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Do(t)}setAll(e){let t=ft.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Do(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ru(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return en(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ru(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Do(this.value))}};function NT(n){let e=[];return Gr(n.fields,(t,r)=>{let i=new ft([t]);if(ru(r)){let s=NT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Qt(e)}var xt=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,W.min(),W.min(),W.min(),Pt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,W.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,W.min(),W.min(),Pt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,W.min(),W.min(),Pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zi=class{constructor(e,t){this.position=e,this.inclusive=t}};function Rw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=B.comparator(B.fromName(o.referenceValue),t.key):r=$i(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!en(n.position[t],e.position[t]))return!1;return!0}var Gi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var fu=class{},Oe=class n extends fu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Cp(e,t,r):t==="array-contains"?new Ap(e,r):t==="in"?new Np(e,r):t==="not-in"?new Rp(e,r):t==="array-contains-any"?new Mp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bp(e,r):new Sp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($i(t,this.value)):t!==null&&Zn(this.value)===Zn(t)&&this.matchesComparison($i(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tn=class n extends fu{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return RT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function RT(n){return n.op==="and"}function MT(n){return sP(n)&&RT(n)}function sP(n){for(let e of n.filters)if(e instanceof tn)return!1;return!0}function Dp(n){if(n instanceof Oe)return n.field.canonicalString()+n.op.toString()+qi(n.value);if(MT(n))return n.filters.map(e=>Dp(e)).join(",");{let e=n.filters.map(t=>Dp(t)).join(",");return`${n.op}(${e})`}}function PT(n,e){return n instanceof Oe?(function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&en(r.value,i.value)})(n,e):n instanceof tn?(function(r,i){return i instanceof tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&PT(o,i.filters[c]),!0):!1})(n,e):void V(19439)}function xT(n){return n instanceof Oe?(function(t){return`${t.field.canonicalString()} ${t.op} ${qi(t.value)}`})(n):n instanceof tn?(function(t){return t.op.toString()+" {"+t.getFilters().map(xT).join(" ,")+"}"})(n):"Filter"}var Cp=class extends Oe{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},bp=class extends Oe{constructor(e,t){super(e,"in",t),this.keys=kT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Sp=class extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=kT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kT(n,e){return(e.arrayValue?.values||[]).map(t=>B.fromName(t.referenceValue))}var Ap=class extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Xg(t)&&Po(t.arrayValue,this.value)}},Np=class extends Oe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Po(this.value.arrayValue,t)}},Rp=class extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Po(this.value.arrayValue,t)}},Mp=class extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Po(this.value.arrayValue,r))}};var Pp=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}};function Pw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Pp(n,e,t,r,i,s,o)}function em(n){let e=z(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qi(r)).join(",")),e.Te=t}return e.Te}function tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mw(n.startAt,e.startAt)&&Mw(n.endAt,e.endAt)}function xp(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Wi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function oP(n,e,t,r,i,s,o,c){return new Wi(n,e,t,r,i,s,o,c)}function Hu(n){return new Wi(n)}function xw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aP(n){return n.collectionGroup!==null}function Co(n){let e=z(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ue(ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Gi(s,r))}),t.has(ft.keyField().canonicalString())||e.Ie.push(new Gi(ft.keyField(),r))}return e.Ie}function Jt(n){let e=z(n);return e.Ee||(e.Ee=cP(e,Co(n))),e.Ee}function cP(n,e){if(n.limitType==="F")return Pw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Gi(i.field,s)});let t=n.endAt?new zi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zi(n.startAt.position,n.startAt.inclusive):null;return Pw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kp(n,e,t){return new Wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $u(n,e){return tm(Jt(n),Jt(e))&&n.limitType===e.limitType}function OT(n){return`${em(Jt(n))}|lt:${n.limitType}`}function xi(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>xT(i)).join(", ")}]`),ju(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>qi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>qi(i)).join(",")),`Target(${r})`})(Jt(n))}; limitType=${n.limitType})`}function qu(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):B.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Co(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){let l=Rw(o,c,u);return o.inclusive?l<=0:l<0})(r.startAt,Co(r),i)||r.endAt&&!(function(o,c,u){let l=Rw(o,c,u);return o.inclusive?l>=0:l>0})(r.endAt,Co(r),i))})(n,e)}function uP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LT(n){return(e,t)=>{let r=!1;for(let i of Co(n)){let s=lP(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lP(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):(function(s,o,c){let u=o.data.field(s),l=c.data.field(s);return u!==null&&l!==null?$i(u,l):V(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return V(19790,{direction:n.dir})}}var mn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}};var dP=new Ce(B.comparator);function yn(){return dP}var FT=new Ce(B.comparator);function To(...n){let e=FT;for(let t of n)e=e.insert(t.key,t);return e}function VT(n){let e=FT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kr(){return bo()}function BT(){return bo()}function bo(){return new mn(n=>n.toString(),(n,e)=>n.isEqual(e))}var fP=new Ce(B.comparator),hP=new Ue(B.comparator);function se(...n){let e=hP;for(let t of n)e=e.add(t);return e}var pP=new Ue(ie);function gP(){return pP}function nm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ro(e)?"-0":e}}function jT(n){return{integerValue:""+n}}function mP(n,e){return qM(e)?jT(e):nm(n,e)}var Ki=class{constructor(){this._=void 0}};function yP(n,e,t){return n instanceof Qi?(function(i,s){let o={fields:{[TT]:{stringValue:wT},[CT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yg(s)&&(s=Uu(s)),s&&(o.fields[DT]=s),{mapValue:o}})(t,e):n instanceof Ur?HT(n,e):n instanceof Hr?$T(n,e):(function(i,s){let o=UT(i,s),c=kw(o)+kw(i.Ae);return Tp(o)&&Tp(i.Ae)?jT(c):nm(i.serializer,c)})(n,e)}function vP(n,e,t){return n instanceof Ur?HT(n,e):n instanceof Hr?$T(n,e):t}function UT(n,e){return n instanceof Yi?(function(r){return Tp(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Qi=class extends Ki{},Ur=class extends Ki{constructor(e){super(),this.elements=e}};function HT(n,e){let t=qT(e);for(let r of n.elements)t.some(i=>en(i,r))||t.push(r);return{arrayValue:{values:t}}}var Hr=class extends Ki{constructor(e){super(),this.elements=e}};function $T(n,e){let t=qT(e);for(let r of n.elements)t=t.filter(i=>!en(i,r));return{arrayValue:{values:t}}}var Yi=class extends Ki{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function kw(n){return Ie(n.integerValue||n.doubleValue)}function qT(n){return Xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _P(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ur&&i instanceof Ur||r instanceof Hr&&i instanceof Hr?Ui(r.elements,i.elements,en):r instanceof Yi&&i instanceof Yi?en(r.Ae,i.Ae):r instanceof Qi&&i instanceof Qi})(n.transform,e.transform)}var Op=class{constructor(e,t){this.version=e,this.transformResults=t}},Fr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function iu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Zi=class{};function zT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hu(n.key,Fr.none()):new $r(n.key,n.data,Fr.none());{let t=n.data,r=Pt.empty(),i=new Ue(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vn(n.key,r,new Qt(i.toArray()),Fr.none())}}function EP(n,e,t){n instanceof $r?(function(i,s,o){let c=i.value.clone(),u=Lw(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof vn?(function(i,s,o){if(!iu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Lw(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(GT(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function So(n,e,t,r){return n instanceof $r?(function(s,o,c,u){if(!iu(s.precondition,o))return c;let l=s.value.clone(),h=Fw(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof vn?(function(s,o,c,u){if(!iu(s.precondition,o))return c;let l=Fw(s.fieldTransforms,u,o),h=o.data;return h.setAll(GT(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,c){return iu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function IP(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=UT(r.transform,i||null);s!=null&&(t===null&&(t=Pt.empty()),t.set(r.field,s))}return t||null}function Ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ui(r,i,(s,o)=>_P(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $r=class extends Zi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends Zi{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function GT(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Lw(n,e,t){let r=new Map;le(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,vP(o,c,t[i]))}return r}function Fw(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,yP(s,o,e))}return r}var hu=class extends Zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lp=class extends Zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&EP(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=So(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=So(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=BT();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=zT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Ui(this.mutations,e.mutations,(t,r)=>Ow(t,r))&&Ui(this.baseMutations,e.baseMutations,(t,r)=>Ow(t,r))}},Vp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){le(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return fP})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Bp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ae,oe;function wP(n){switch(n){case A.OK:return V(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return V(15467,{code:n})}}function WT(n){if(n===void 0)return hn("GRPC error has no .code"),A.UNKNOWN;switch(n){case Ae.OK:return A.OK;case Ae.CANCELLED:return A.CANCELLED;case Ae.UNKNOWN:return A.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return A.INTERNAL;case Ae.UNAVAILABLE:return A.UNAVAILABLE;case Ae.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ae.NOT_FOUND:return A.NOT_FOUND;case Ae.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ae.ABORTED:return A.ABORTED;case Ae.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ae.DATA_LOSS:return A.DATA_LOSS;default:return V(39323,{code:n})}}(oe=Ae||(Ae={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var TP=null;function DP(){return new TextEncoder}var CP=new dn([4294967295,4294967295],0);function Vw(n){let e=DP().encode(n),t=new tp;return t.update(e),new Uint8Array(t.digest())}function Bw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new dn([t,r],0),new dn([i,s],0)]}var Up=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Or(`Invalid padding: ${t}`);if(r<0)throw new Or(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Or(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Or(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=dn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(dn.fromNumber(r)));return i.compare(CP)===1&&(i=new dn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Vw(e),[r,i]=Bw(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;let t=Vw(e),[r,i]=Bw(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Or=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(W.min(),i,new Ce(ie),yn(),se())}},xo=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var Fi=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},gu=class{constructor(e,t){this.targetId=e,this.Ce=t}},mu=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},yu=class{constructor(){this.ve=0,this.Fe=jw(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),t=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:V(38017,{changeType:s})}}),new xo(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=jw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Hp=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=yn(),this.Je=eu(),this.He=eu(),this.Ye=new Ce(ie)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:V(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(xp(s))if(r===0){let o=new B(s.path);this.et(t,o,xt.newNoDocument(o,W.min()))}else le(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}TP?.lt((function(h,p,m,I,S){let M={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},R=p.unchangedNames;return R&&(M.bloomFilter={applied:S===0,hashCount:R?.hashCount??0,bitmapLength:R?.bits?.bitmap?.length??0,padding:R?.bits?.padding??0,mightContain:F=>I?.mightContain(F)??!1}),M})(o,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=gn(r).toUint8Array()}catch(u){if(u instanceof uu)return ji("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Up(o,i,s)}catch(u){return ji(u instanceof Or?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let c=this.ot(o);if(c){if(s.current&&xp(c.target)){let u=new B(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,xt.newNoDocument(u,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=se();this.He.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new pu(e,t,this.Ye,this.je,r);return this.je=yn(),this.Je=eu(),this.He=eu(),this.Ye=new Ce(ie),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new yu,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ue(ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ue(ie),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||x("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yu),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function eu(){return new Ce(B.comparator)}function jw(){return new Ce(B.comparator)}var bP={asc:"ASCENDING",desc:"DESCENDING"},SP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AP={and:"AND",or:"OR"},$p=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qp(n,e){return n.useProto3Json||ju(e)?e:{value:e}}function vu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NP(n,e){return vu(n,e.toTimestamp())}function Xt(n){return le(!!n,49232),W.fromTimestamp((function(t){let r=pn(t);return new Me(r.seconds,r.nanos)})(n))}function rm(n,e){return zp(n,e).canonicalString()}function zp(n,e){let t=(function(i){return new be(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QT(n){let e=be.fromString(n);return le(eD(e),10190,{key:e.toString()}),e}function Gp(n,e){return rm(n.databaseId,e.path)}function cp(n,e){let t=QT(e);if(t.get(1)!==n.databaseId.projectId)throw new O(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(ZT(t))}function YT(n,e){return rm(n.databaseId,e)}function RP(n){let e=QT(n);return e.length===4?be.emptyPath():ZT(e)}function Wp(n){return new be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZT(n){return le(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Uw(n,e,t){return{name:Gp(n,e),fields:t.value.mapValue.fields}}function MP(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(le(h===void 0||typeof h=="string",58123),Qe.fromBase64String(h||"")):(le(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qe.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(l){let h=l.code===void 0?A.UNKNOWN:WT(l.code);return new O(h,l.message||"")})(o);t=new mu(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=cp(n,r.document.name),s=Xt(r.document.updateTime),o=r.document.createTime?Xt(r.document.createTime):W.min(),c=new Pt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(i,s,o,c),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Fi(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=cp(n,r.document),s=r.readTime?Xt(r.readTime):W.min(),o=xt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Fi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=cp(n,r.document),s=r.removedTargetIds||[];t=new Fi([],s,i,null)}else{if(!("filter"in e))return V(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new jp(i,s),c=r.targetId;t=new gu(c,o)}}return t}function PP(n,e){let t;if(e instanceof $r)t={update:Uw(n,e.key,e.value)};else if(e instanceof hu)t={delete:Gp(n,e.key)};else if(e instanceof vn)t={update:Uw(n,e.key,e.data),updateMask:UP(e.fieldMask)};else{if(!(e instanceof Lp))return V(16599,{Vt:e.type});t={verify:Gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let c=o.transform;if(c instanceof Qi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ur)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yi)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw V(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:NP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:V(27497)})(n,e.precondition)),t}function xP(n,e){return n&&n.length>0?(le(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Xt(i.updateTime):Xt(s);return o.isEqual(W.min())&&(o=Xt(s)),new Op(o,i.transformResults||[])})(t,e))):[]}function kP(n,e){return{documents:[YT(n,e.path)]}}function OP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YT(n,i);let s=(function(l){if(l.length!==0)return XT(tn.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:ki(m.field),direction:VP(m.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=qp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function LP(n){let e=RP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){le(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let m=JT(p);return m instanceof tn&&MT(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(m=>(function(S){return new Gi(Oi(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,ju(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,I=p.values||[];return new zi(I,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,I=p.values||[];return new zi(I,m)})(t.endAt)),oP(e,i,o,s,c,"F",u,l)}function FP(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Oi(t.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oi(t.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Oi(t.unaryFilter.field);return Oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Oi(t.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return V(61313);default:return V(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Oe.create(Oi(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return V(58110);default:return V(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return tn.create(t.compositeFilter.filters.map(r=>JT(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return V(1026)}})(t.compositeFilter.op))})(n):V(30097,{filter:n})}function VP(n){return bP[n]}function BP(n){return SP[n]}function jP(n){return AP[n]}function ki(n){return{fieldPath:n.canonicalString()}}function Oi(n){return ft.fromServerFormat(n.fieldPath)}function XT(n){return n instanceof Oe?(function(t){if(t.op==="=="){if(Nw(t.value))return{unaryFilter:{field:ki(t.field),op:"IS_NAN"}};if(Aw(t.value))return{unaryFilter:{field:ki(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nw(t.value))return{unaryFilter:{field:ki(t.field),op:"IS_NOT_NAN"}};if(Aw(t.value))return{unaryFilter:{field:ki(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(t.field),op:BP(t.op),value:t.value}}})(n):n instanceof tn?(function(t){let r=t.getFilters().map(i=>XT(i));return r.length===1?r[0]:{compositeFilter:{op:jP(t.op),filters:r}}})(n):V(54877,{filter:n})}function UP(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ko=class n{constructor(e,t,r,i,s=W.min(),o=W.min(),c=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Kp=class{constructor(e){this.yt=e}};function HP(n){let e=LP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kp(e,e.limit,"L"):e}var _u=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ro(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=pn(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(gn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?AT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ST(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):V(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Hi,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ie(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),B.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};_u.Kt=new _u;var Qp=class{constructor(){this.Cn=new Yp}addToCollectionParentIndex(e,t){return this.Cn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(jr.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},Yp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ue(be.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(be.comparator)).toArray()}};var z6=new Uint8Array(0);var Hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tD=41943040,Et=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Et.DEFAULT_COLLECTION_PERCENTILE=10,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Et.DEFAULT=new Et(tD,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Et.DISABLED=new Et(-1,0,0);var Oo=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var $w="LruGarbageCollector",$P=1048576;function qw([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var Zp=class{constructor(e){this.Ir=e,this.buffer=new Ue(qw),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Jp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){x($w,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ts(t)?x($w,"Ignoring IndexedDB error during garbage collection: ",t):await es(t)}await this.Vr(3e5)})}},Xp=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(Kg.ce);let r=new Zp(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(Hw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Pi()<=ee.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function qP(n,e){return new Xp(n,e)}var eg=class{constructor(){this.changes=new mn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ng=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&So(r.mutation,i,Qt.empty(),Me.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=kr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=To();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=kr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=yn(),o=bo(),c=(function(){return bo()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof vn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),So(h.mutation,l,h.mutation.getFieldMask(),Me.now())):o.set(l.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>c.set(l,new tg(h,o.get(l)??null))),c))}recalculateAndSaveOverlays(e,t){let r=bo(),i=new Ce((o,c)=>o-c),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Qt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=BT();h.forEach(m=>{if(!s.has(m)){let I=zT(t.get(m),r.get(m));I!==null&&p.set(m,I),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):N.resolve(kr()),c=No,u=s;return o.next(l=>N.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:c,changes:VT(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=To();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=To();return this.indexManager.getCollectionParents(e,s).next(c=>N.forEach(c,u=>{let l=(function(p,m){return new Wi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,xt.newInvalidDocument(h)))});let c=To();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&So(h.mutation,l,Qt.empty(),Me.now()),qu(t,l)&&(c=c.insert(u,l))}),c})}};var rg=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return N.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Xt(i.createTime)}})(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:HP(i.bundledQuery),readTime:Xt(i.readTime)}})(t)),N.resolve()}};var ig=class{constructor(){this.overlays=new Ce(B.comparator),this.qr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kr();return N.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=kr(),s=t.length+1,o=new B(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ce((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=kr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=kr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return N.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Bp(t,r));let s=this.qr.get(t);s===void 0&&(s=se(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var sg=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Lo=class{constructor(){this.Qr=new Ue(Ne.$r),this.Ur=new Ue(Ne.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ne(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ne(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new B(new be([])),r=new Ne(t,e),i=new Ne(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new B(new be([])),r=new Ne(t,e),i=new Ne(t,e+1),s=se();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ne(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ne=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return B.comparator(e.key,t.key)||ie(e.Yr,t.Yr)}static Kr(e,t){return ie(e.Yr,t.Yr)||B.comparator(e.key,t.key)}};var og=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ue(Ne.$r)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Fp(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.Zr=this.Zr.add(new Ne(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,t){return N.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?Qg:this.tr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ne(t,0),i=new Ne(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let c=this.Xr(o.Yr);s.push(c)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ue(ie);return t.forEach(i=>{let s=new Ne(i,0),o=new Ne(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],c=>{r=r.add(c.Yr)})}),N.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;B.isDocumentKey(s)||(s=s.child(""));let o=new Ne(new B(s),0),c=new Ue(ie);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},o),N.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){le(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return N.forEach(t.mutations,i=>{let s=new Ne(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ne(t,0),i=this.Zr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ag=class{constructor(e){this.ri=e,this.docs=(function(){return new Ce(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(t))}getEntries(e,t){let r=yn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=yn(),o=t.path,c=new B(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||UM(jM(h),r)<=0||(i.has(h.key)||qu(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,t,r,i){V(9500)}ii(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cg(this)}getSize(e){return N.resolve(this.size)}},cg=class extends eg{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var ug=class{constructor(e){this.persistence=e,this.si=new mn(t=>em(t),tm),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new Lo,this.targetCount=0,this.ai=Oo.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),N.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Pr(t),N.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this._i.containsKey(t))}};var Eu=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Kg(0),this.li=!1,this.li=!0,this.hi=new sg,this.referenceDelegate=e(this),this.Pi=new ug(this),this.indexManager=new Qp,this.remoteDocumentCache=(function(i){return new ag(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Kp(t),this.Ii=new rg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ig,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new og(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);let i=new lg(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return N.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},lg=class extends Ep{constructor(e){super(),this.currentSequenceNumber=e}},dg=class n{constructor(e){this.persistence=e,this.Ri=new Lo,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw V(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.fi,r=>{let i=B.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,W.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return N.or([()=>N.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Iu=class n{constructor(e,t){this.persistence=e,this.pi=new mn(r=>zM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qP(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return N.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(c=>{c||(r++,s.removeEntry(o,W.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nu(e.data.value)),t}br(e,t,r){return N.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var fg=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=se(),i=se();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pg=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JI()?8:$M(Be())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hg;return this.Ss(e,t,o).next(c=>{if(s.result=c,this.Vs)return this.bs(e,t,o,c.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Pi()<=ee.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",xi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),N.resolve()):(Pi()<=ee.DEBUG&&x("QueryEngine","Query:",xi(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Pi()<=ee.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",xi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(t))):N.resolve())}ys(e,t){if(xw(t))return N.resolve(null);let r=Jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kp(t,null,"F"),r=Jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=se(...s);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,c);return this.Cs(t,l,o,u.readTime)?this.ys(e,kp(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return xw(t)||i.isEqual(W.min())?N.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?N.resolve(null):(Pi()<=ee.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xi(t)),this.vs(e,o,t,BM(i,No)).next(c=>c))})}Ds(e,t){let r=new Ue(LT(e));return t.forEach((i,s)=>{qu(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Pi()<=ee.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",xi(t)),this.ps.getDocumentsMatchingQuery(e,t,jr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var im="LocalStore",zP=3e8,gg=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ce(ie),this.xs=new mn(s=>em(s),tm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ng(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function GP(n,e,t,r){return new gg(n,e,t,r)}async function nD(n,e){let t=z(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=se();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:c}))})})}function WP(n,e){let t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),I=N.resolve();return m.forEach(S=>{I=I.next(()=>h.getEntry(u,S)).next(M=>{let R=l.docVersions.get(S);le(R!==null,48541),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=se();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rD(n){let e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function KP(n,e){let t=z(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let I=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(Qe.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(p,I),(function(M,R,F){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=zP?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(m,I,h)&&c.push(t.Pi.updateTargetData(s,I))});let u=yn(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(QP(s,o,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(W.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(h)}return N.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.Ms=i,s))}function QP(n,e,t){let r=se(),i=se();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=yn();return t.forEach((c,u)=>{let l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):x(im,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:o,qs:i}})}function YP(n,e){let t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZP(n,e){let t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function mg(n,e,t){let r=z(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ts(o))throw o;x(im,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function zw(n,e,t){let r=z(n),i=W.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(u,l,h){let p=z(u),m=p.xs.get(h);return m!==void 0?N.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,o,Jt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:W.min(),t?s:se())).next(c=>(JP(r,uP(e),c),{documents:c,Qs:s})))}function JP(n,e,t){let r=n.Os.get(e)||W.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var wu=class{constructor(){this.activeTargetIds=gP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yg=class{constructor(){this.Mo=new wu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vg=class{Oo(e){}shutdown(){}};var Gw="ConnectivityMonitor",Tu=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){x(Gw,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){x(Gw,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tu=null;function _g(){return tu===null?tu=(function(){return 268435456+Math.round(2147483648*Math.random())})():tu++,"0x"+tu.toString(16)}var up="RestConnection",XP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Eg=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===lu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=_g(),c=this.zo(e,t.toUriEncodedString());x(up,`Sending RPC '${e}' ${o}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);let{host:l}=new URL(c),h=Hn(l);return this.Jo(e,c,u,r,h).then(p=>(x(up,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ji(up,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=XP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Ig=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var We="WebChannelConnection",wg=class extends Eg{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=_g();return new Promise((c,u)=>{let l=new np;l.setWithCredentials(!0),l.listenOnce(rp.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case wo.NO_ERROR:let p=l.getResponseJson();x(We,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case wo.TIMEOUT:x(We,`RPC '${e}' ${o} timed out`),u(new O(A.DEADLINE_EXCEEDED,"Request time out"));break;case wo.HTTP_ERROR:let m=l.getStatus();if(x(We,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let I=l.getResponseJson();Array.isArray(I)&&(I=I[0]);let S=I?.error;if(S&&S.status&&S.message){let M=(function(F){let Z=F.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(Z)>=0?Z:A.UNKNOWN})(S.status);u(new O(M,S.message))}else u(new O(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(A.UNAVAILABLE,"Connection failed."));break;default:V(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{x(We,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);x(We,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=_g(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=op(),c=sp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=s.join("");x(We,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u);this.I_(p);let m=!1,I=!1,S=new Ig({Yo:R=>{I?x(We,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(x(We,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),x(We,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Zo:()=>p.close()}),M=(R,F,Z)=>{R.listen(F,te=>{try{Z(te)}catch(K){setTimeout(()=>{throw K},0)}})};return M(p,Mi.EventType.OPEN,()=>{I||(x(We,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),M(p,Mi.EventType.CLOSE,()=>{I||(I=!0,x(We,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),M(p,Mi.EventType.ERROR,R=>{I||(I=!0,ji(We,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new O(A.UNAVAILABLE,"The operation could not be completed")))}),M(p,Mi.EventType.MESSAGE,R=>{if(!I){let F=R.data[0];le(!!F,16349);let Z=F,te=Z?.error||Z[0]?.error;if(te){x(We,`RPC '${e}' stream ${i} received error:`,te);let K=te.status,ae=(function(y){let v=Ae[y];if(v!==void 0)return WT(v)})(K),k=te.message;ae===void 0&&(ae=A.INTERNAL,k="Unknown error status: "+K+" with message "+te.message),I=!0,S.a_(new O(ae,k)),p.close()}else x(We,`RPC '${e}' stream ${i} received:`,F),S.u_(F)}}),M(c,ip.STAT_EVENT,R=>{R.stat===Jc.PROXY?x(We,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Jc.NOPROXY&&x(We,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function lp(){return typeof document<"u"?document:null}function zu(n){return new $p(n,!0)}var Du=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Ww="PersistentStream",Cu=class{constructor(e,t,r,i,s,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Du(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(hn(t.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return x(Ww,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(x(Ww,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Tg=class extends Cu{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=MP(this.serializer,e),r=(function(s){if(!("targetChange"in s))return W.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?Xt(o.readTime):W.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=Wp(this.serializer),t.addTarget=(function(s,o){let c,u=o.target;if(c=xp(u)?{documents:kP(s,u)}:{query:OP(s,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=KT(s,o.resumeToken);let l=qp(s,o.expectedCount);l!==null&&(c.expectedCount=l)}else if(o.snapshotVersion.compareTo(W.min())>0){c.readTime=vu(s,o.snapshotVersion.toTimestamp());let l=qp(s,o.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=FP(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=Wp(this.serializer),t.removeTarget=e,this.q_(t)}},Dg=class extends Cu{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=xP(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=Wp(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>PP(this.serializer,r))};this.q_(t)}};var Cg=class{},bg=class extends Cg{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(A.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,zp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(A.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,zp(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(A.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Sg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hn(t),this.aa=!1):x("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var qr="RemoteStore",Ag=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Wr(this)&&(x(qr,"Restarting streams for network reachability change."),await(async function(u){let l=z(u);l.Ea.add(4),await Uo(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Gu(l)})(this))})}),this.Ra=new Sg(r,i)}};async function Gu(n){if(Wr(n))for(let e of n.da)await e(!0)}async function Uo(n){for(let e of n.da)await e(!1)}function iD(n,e){let t=z(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cm(t)?am(t):ns(t).O_()&&om(t,e))}function sm(n,e){let t=z(n),r=ns(t);t.Ia.delete(e),r.O_()&&sD(t,e),t.Ia.size===0&&(r.O_()?r.L_():Wr(t)&&t.Ra.set("Unknown"))}function om(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ns(n).Y_(e)}function sD(n,e){n.Va.Ue(e),ns(n).Z_(e)}function am(n){n.Va=new Hp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ns(n).start(),n.Ra.ua()}function cm(n){return Wr(n)&&!ns(n).x_()&&n.Ia.size>0}function Wr(n){return z(n).Ea.size===0}function oD(n){n.Va=void 0}async function ex(n){n.Ra.set("Online")}async function tx(n){n.Ia.forEach((e,t)=>{om(n,e)})}async function nx(n,e){oD(n),cm(n)?(n.Ra.ha(e),am(n)):n.Ra.set("Unknown")}async function rx(n,e,t){if(n.Ra.set("Online"),e instanceof mu&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){x(qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bu(n,r)}else if(e instanceof Fi?n.Va.Ze(e):e instanceof gu?n.Va.st(e):n.Va.tt(e),!t.isEqual(W.min()))try{let r=await rD(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let c=s.Va.Tt(o);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.Ia.get(l);h&&s.Ia.set(l,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,l)=>{let h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),sD(s,u);let p=new ko(h.target,u,l,h.sequenceNumber);om(s,p)}),s.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){x(qr,"Failed to raise snapshot:",r),await bu(n,r)}}async function bu(n,e,t){if(!ts(e))throw e;n.Ea.add(1),await Uo(n),n.Ra.set("Offline"),t||(t=()=>rD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{x(qr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gu(n)})}function aD(n,e){return e().catch(t=>bu(n,t,e))}async function Wu(n){let e=z(n),t=Jn(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qg;for(;ix(e);)try{let i=await YP(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,sx(e,i)}catch(i){await bu(e,i)}cD(e)&&uD(e)}function ix(n){return Wr(n)&&n.Ta.length<10}function sx(n,e){n.Ta.push(e);let t=Jn(n);t.O_()&&t.X_&&t.ea(e.mutations)}function cD(n){return Wr(n)&&!Jn(n).x_()&&n.Ta.length>0}function uD(n){Jn(n).start()}async function ox(n){Jn(n).ra()}async function ax(n){let e=Jn(n);for(let t of n.Ta)e.ea(t.mutations)}async function cx(n,e,t){let r=n.Ta.shift(),i=Vp.from(r,e,t);await aD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Wu(n)}async function ux(n,e){e&&Jn(n).X_&&await(async function(r,i){if((function(o){return wP(o)&&o!==A.ABORTED})(i.code)){let s=r.Ta.shift();Jn(r).B_(),await aD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Wu(r)}})(n,e),cD(n)&&uD(n)}async function Kw(n,e){let t=z(n);t.asyncQueue.verifyOperationInProgress(),x(qr,"RemoteStore received new credentials");let r=Wr(t);t.Ea.add(3),await Uo(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gu(t)}async function lx(n,e){let t=z(n);e?(t.Ea.delete(2),await Gu(t)):e||(t.Ea.add(2),await Uo(t),t.Ra.set("Unknown"))}function ns(n){return n.ma||(n.ma=(function(t,r,i){let s=z(t);return s.sa(),new Tg(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:ex.bind(null,n),t_:tx.bind(null,n),r_:nx.bind(null,n),H_:rx.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),cm(n)?am(n):n.Ra.set("Unknown")):(await n.ma.stop(),oD(n))})),n.ma}function Jn(n){return n.fa||(n.fa=(function(t,r,i){let s=z(t);return s.sa(),new Dg(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ox.bind(null,n),r_:ux.bind(null,n),ta:ax.bind(null,n),na:cx.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Wu(n)):(await n.fa.stop(),n.Ta.length>0&&(x(qr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var Ng=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function um(n,e){if(hn("AsyncQueue",`${e}: ${n}`),ts(n))return new O(A.UNAVAILABLE,`${e}: ${n}`);throw n}var Su=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=To(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Au=class{constructor(){this.ga=new Ce(B.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):V(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Ji=class n{constructor(e,t,r,i,s,o,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Su.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Rg=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Mg=class{constructor(){this.queries=Qw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=z(t),s=i.queries;i.queries=Qw(),s.forEach((o,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new O(A.ABORTED,"Firestore shutting down"))}};function Qw(){return new mn(n=>OT(n),$u)}async function lD(n,e){let t=z(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Rg,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let c=um(o,`Initialization of query '${xi(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&lm(t)}async function dD(n,e){let t=z(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dx(n,e){let t=z(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&lm(t)}function fx(n,e,t){let r=z(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function lm(n){n.Ca.forEach(e=>{e.next()})}var Pg,Yw;(Yw=Pg||(Pg={})).Ma="default",Yw.Cache="cache";var Nu=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pg.Cache}};var Ru=class{constructor(e){this.key=e}},Mu=class{constructor(e){this.key=e}},xg=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=LT(e),this.tu=new Su(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Au,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),I=qu(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),M=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),R=!1;m&&I?m.data.isEqual(I.data)?S!==M&&(r.track({type:3,doc:I}),R=!0):this.su(m,I)||(r.track({type:2,doc:I}),R=!0,(u&&this.eu(I,u)>0||l&&this.eu(I,l)<0)&&(c=!0)):!m&&I?(r.track({type:0,doc:I}),R=!0):m&&!I&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(I?(o=o.add(I),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(I,S){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V(20277,{Rt:R})}};return M(I)-M(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,o.length!==0||l?{snapshot:new Ji(this.query,e.tu,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Au,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Mu(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Ru(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=se();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ji.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},dm="SyncEngine",kg=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Og=class{constructor(e){this.key=e,this.hu=!1}},Lg=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new mn(c=>OT(c),$u),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(B.comparator),this.Au=new Map,this.Ru=new Lo,this.Vu={},this.mu=new Map,this.fu=Oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function hx(n,e,t=!0){let r=yD(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await fD(r,e,t,!0),i}async function px(n,e){let t=yD(n);await fD(t,e,!0,!1)}async function fD(n,e,t,r){let i=await ZP(n.localStore,Jt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=await gx(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&iD(n.remoteStore,i),c}async function gx(n,e,t,r,i){n.pu=(p,m,I)=>(async function(M,R,F,Z){let te=R.view.ru(F);te.Cs&&(te=await zw(M.localStore,R.query,!1).then(({documents:E})=>R.view.ru(E,te)));let K=Z&&Z.targetChanges.get(R.targetId),ae=Z&&Z.targetMismatches.get(R.targetId)!=null,k=R.view.applyChanges(te,M.isPrimaryClient,K,ae);return Jw(M,R.targetId,k.au),k.snapshot})(n,p,m,I);let s=await zw(n.localStore,e,!0),o=new xg(e,s.Qs),c=o.ru(s.documents),u=xo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(c,n.isPrimaryClient,u);Jw(n,t,l.au);let h=new kg(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function mx(n,e,t){let r=z(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!$u(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&sm(r.remoteStore,i.targetId),Fg(r,i.targetId)}).catch(es)):(Fg(r,i.targetId),await mg(r.localStore,i.targetId,!0))}async function yx(n,e){let t=z(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sm(t.remoteStore,r.targetId))}async function vx(n,e,t){let r=Cx(n);try{let i=await(function(o,c){let u=z(o),l=Me.now(),h=c.reduce((I,S)=>I.add(S.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let S=yn(),M=se();return u.Ns.getEntries(I,h).next(R=>{S=R,S.forEach((F,Z)=>{Z.isValidDocument()||(M=M.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,S)).next(R=>{p=R;let F=[];for(let Z of c){let te=IP(Z,p.get(Z.key).overlayedDocument);te!=null&&F.push(new vn(Z.key,te,NT(te.value.mapValue),Fr.exists(!0)))}return u.mutationQueue.addMutationBatch(I,l,F,c)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(I,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:VT(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let l=o.Vu[o.currentUser.toKey()];l||(l=new Ce(ie)),l=l.insert(c,u),o.Vu[o.currentUser.toKey()]=l})(r,i.batchId,t),await Ho(r,i.changes),await Wu(r.remoteStore)}catch(i){let s=um(i,"Failed to persist write");t.reject(s)}}async function hD(n,e){let t=z(n);try{let r=await KP(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?le(o.hu,14607):i.removedDocuments.size>0&&(le(o.hu,42227),o.hu=!1))}),await Ho(t,r,e)}catch(r){await es(r)}}function Zw(n,e,t){let r=z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(o,c){let u=z(o);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(c)&&(l=!0)}),l&&lm(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _x(n,e,t){let r=z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ce(B.comparator);o=o.insert(s,xt.newNoDocument(s,W.min()));let c=se().add(s),u=new pu(W.min(),new Map,new Ce(ie),o,c);await hD(r,u),r.du=r.du.remove(s),r.Au.delete(e),fm(r)}else await mg(r.localStore,e,!1).then(()=>Fg(r,e,t)).catch(es)}async function Ex(n,e){let t=z(n),r=e.batch.batchId;try{let i=await WP(t.localStore,e);gD(t,r,null),pD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ho(t,i)}catch(i){await es(i)}}async function Ix(n,e,t){let r=z(n);try{let i=await(function(o,c){let u=z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(le(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);gD(r,e,t),pD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ho(r,i)}catch(i){await es(i)}}function pD(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function gD(n,e,t){let r=z(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Fg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||mD(n,r)})}function mD(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(sm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),fm(n))}function Jw(n,e,t){for(let r of t)r instanceof Ru?(n.Ru.addReference(r.key,e),wx(n,r)):r instanceof Mu?(x(dm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mD(n,r.key)):V(19791,{wu:r})}function wx(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(x(dm,"New document in limbo: "+t),n.Eu.add(r),fm(n))}function fm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new B(be.fromString(e)),r=n.fu.next();n.Au.set(r,new Og(t)),n.du=n.du.insert(t,r),iD(n.remoteStore,new ko(Jt(Hu(t.path)),r,"TargetPurposeLimboResolution",Kg.ce))}}async function Ho(n,e,t){let r=z(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=fg.As(u.targetId,l);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(u,l){let h=z(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,m=>N.forEach(m.Es,I=>h.persistence.referenceDelegate.addReference(p,m.targetId,I)).next(()=>N.forEach(m.ds,I=>h.persistence.referenceDelegate.removeReference(p,m.targetId,I)))))}catch(p){if(!ts(p))throw p;x(im,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let I=h.Ms.get(m),S=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,M)}}})(r.localStore,s))}async function Tx(n,e){let t=z(n);if(!t.currentUser.isEqual(e)){x(dm,"User change. New user:",e.toKey());let r=await nD(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(c=>{c.forEach(u=>{u.reject(new O(A.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ho(t,r.Ls)}}function Dx(n,e){let t=z(n),r=t.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function yD(n){let e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_x.bind(null,e),e.Pu.H_=dx.bind(null,e.eventManager),e.Pu.yu=fx.bind(null,e.eventManager),e}function Cx(n){let e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ex.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ix.bind(null,e),e}var vD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=zu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return GP(this.persistence,new pg,t.initialUser,this.serializer)}Cu(t){return new Eu(dg.mi,this.serializer)}Du(t){return new yg}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Vg=class extends vD{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){le(this.persistence.referenceDelegate instanceof Iu,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Jp(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Et.withCacheSize(this.cacheSizeBytes):Et.DEFAULT;return new Eu(r=>Iu.mi(r,t),this.serializer)}};var bx=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Zw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tx.bind(null,this.syncEngine),await lx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Mg})()}createDatastore(t){let r=zu(t.databaseInfo.databaseId),i=(function(o){return new wg(o)})(t.databaseInfo);return(function(o,c,u,l){return new bg(o,c,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,c,u){return new Ag(i,s,o,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>Zw(this.syncEngine,r,0),(function(){return Tu.v()?new Tu:new vg})())}createSyncEngine(t,r){return(function(s,o,c,u,l,h,p){let m=new Lg(s,o,c,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=z(r);x(qr,"RemoteStore shutting down."),i.Ea.add(5),await Uo(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var Pu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xn="FirestoreClient",Bg=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=je.UNAUTHENTICATED,this.clientId=Ao.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{x(Xn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(x(Xn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=um(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function dp(n,e){n.asyncQueue.verifyOperationInProgress(),x(Xn,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Xw(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Sx(n);x(Xn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Kw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Kw(e.remoteStore,i)),n._onlineComponents=e}async function Sx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x(Xn,"Using user provided OfflineComponentProvider");try{await dp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ji("Error using user provided cache. Falling back to memory cache: "+t),await dp(n,new vD)}}else x(Xn,"Using default OfflineComponentProvider"),await dp(n,new Vg(void 0));return n._offlineComponents}async function _D(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(x(Xn,"Using user provided OnlineComponentProvider"),await Xw(n,n._uninitializedComponentsProvider._online)):(x(Xn,"Using default OnlineComponentProvider"),await Xw(n,new bx))),n._onlineComponents}function Ax(n){return _D(n).then(e=>e.syncEngine)}async function jg(n){let e=await _D(n),t=e.eventManager;return t.onListen=hx.bind(null,e.syncEngine),t.onUnlisten=mx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=px.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yx.bind(null,e.syncEngine),t}function Nx(n,e,t={}){let r=new Yt;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,c,u,l){let h=new Pu({next:m=>{h.Nu(),o.enqueueAndForget(()=>dD(s,p));let I=m.docs.has(c);!I&&m.fromCache?l.reject(new O(A.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&m.fromCache&&u&&u.source==="server"?l.reject(new O(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Nu(Hu(c.path),h,{includeMetadataChanges:!0,qa:!0});return lD(s,p)})(await jg(n),n.asyncQueue,e,t,r)),r.promise}function ED(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eT=new Map;var ID="firestore.googleapis.com",tT=!0,xu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ID,this.ssl=tT}else this.host=e.host,this.ssl=e.ssl??tT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$P)throw new O(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ED(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fp;switch(r.type){case"firstParty":return new mp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=eT.get(t);r&&(x("ComponentProvider","Removing Datastore"),eT.delete(t),r.terminate())})(this),Promise.resolve()}};function Rx(n,e,t,r={}){n=Wn(n,Fo);let i=Hn(e),s=n._getSettings(),o=me(j({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(zc(`https://${c}`),Gc("Firestore",!0)),s.host!==ID&&s.host!==c&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=me(j({},s),{host:c,ssl:i,emulatorOptions:r});if(!Wt(u,o)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=je.MOCK_USER;else{l=GI(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new O(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new je(p)}n._authCredentials=new hp(new su(l,h))}}var ku=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ke=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(jo(t,n._jsonSchema))return new n(e,r||null,new B(be.fromString(t.referencePath)))}};Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:Re("string",Ke._jsonSchemaVersion),referencePath:Re("string")};var Vo=class n extends ku{constructor(e,t,r){super(e,t,Hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function rs(n,e,...t){if(n=Ge(n),arguments.length===1&&(e=Ao.newId()),FM("doc","path",e),n instanceof Fo){let r=be.fromString(e,...t);return Iw(r),new Ke(n,null,new B(r))}{if(!(n instanceof Ke||n instanceof Vo))throw new O(A.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return Iw(r),new Ke(n.firestore,n instanceof Vo?n.converter:null,new B(r))}}var nT="AsyncQueue",Ou=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Du(this,"async_queue_retry"),this._c=()=>{let r=lp();r&&x(nT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Yt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ts(e))throw e;x(nT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,hn("INTERNAL UNHANDLED ERROR: ",rT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Ng.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&V(47125,{Pc:rT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function rT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function iT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var zr=class extends Fo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ou,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ou(e),this._firestoreClient=void 0,await e}}};function wD(n,e){let t=typeof n=="object"?n:Yc(),r=typeof n=="string"?n:e||lu,i=Io(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=zI("firestore");s&&Rx(i,...s)}return i}function hm(n){if(n._terminated)throw new O(A.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Mx(n),n._firestoreClient}function Mx(n){let e=n._freezeSettings(),t=(function(i,s,o,c){return new Ip(i,s,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ED(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Bg(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Kn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new O(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jo(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Re("string",Kn._jsonSchemaVersion),bytes:Re("string")};var Bo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Lu=class{constructor(e){this._methodName=e}};var Qn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(jo(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Qn._jsonSchemaVersion="firestore/geoPoint/1.0",Qn._jsonSchema={type:Re("string",Qn._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};var Yn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jo(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Yn._jsonSchemaVersion="firestore/vectorValue/1.0",Yn._jsonSchema={type:Re("string",Yn._jsonSchemaVersion),vectorValues:Re("object")};var Px=/^__.*__$/,Ug=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,t,this.fieldTransforms):new $r(e,this.data,t,this.fieldTransforms)}};function TD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V(40011,{Ac:n})}}var Hg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(j(j({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TD(this.Ac)&&Px.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},$g=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zu(e)}Cc(e,t,r,i=!1){return new Hg({Ac:e,methodName:t,Dc:r,path:ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xx(n){let e=n._freezeSettings(),t=zu(n._databaseId);return new $g(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kx(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);SD("Data must be an object, but it was:",o,r);let c=CD(r,o),u,l;if(s.merge)u=new Qt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Ox(e,p,t);if(!o.contains(m))throw new O(A.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Fx(h,m)||h.push(m)}u=new Qt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Ug(new Pt(c),u,l)}function DD(n,e){if(bD(n=Ge(n)))return SD("Unsupported field value:",e,n),CD(n,e);if(n instanceof Lu)return(function(r,i){if(!TD(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let c of r){let u=DD(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Me.fromDate(r);return{timestampValue:vu(i.serializer,s)}}if(r instanceof Me){let s=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vu(i.serializer,s)}}if(r instanceof Qn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:KT(i.serializer,r._byteString)};if(r instanceof Ke){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yn)return(function(o,c){return{mapValue:{fields:{[Zg]:{stringValue:Jg},[Hi]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return nm(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Wg(r)}`)})(n,e)}function CD(n,e){let t={};return IT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(n,(r,i)=>{let s=DD(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function bD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof Qn||n instanceof Kn||n instanceof Ke||n instanceof Lu||n instanceof Yn)}function SD(n,e,t){if(!bD(t)||!oT(t)){let r=Wg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Ox(n,e,t){if((e=Ge(e))instanceof Bo)return e._internalPath;if(typeof e=="string")return AD(n,e);throw Fu("Field path arguments must be of type string or ",n,!1,void 0,t)}var Lx=new RegExp("[~\\*/\\[\\]]");function AD(n,e,t){if(e.search(Lx)>=0)throw Fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bo(...e.split("."))._internalPath}catch{throw Fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fu(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new O(A.INVALID_ARGUMENT,c+n+u)}function Fx(n,e){return n.some(t=>t.isEqual(e))}var Vu=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ND("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qg=class extends Vu{data(){return super.data()}};function ND(n,e){return typeof e=="string"?AD(n,e):e instanceof Bo?e._internalPath:e._delegate._internalPath}function Vx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zg=class{convertValue(e,t="none"){switch(Zn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw V(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Hi].arrayValue?.values?.map(r=>Ie(r.doubleValue));return new Yn(t)}convertGeoPoint(e){return new Qn(Ie(e.latitude),Ie(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Uu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mo(e));default:return null}}convertTimestamp(e){let t=pn(e);return new Me(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=be.fromString(e);le(eD(r),9688,{name:e});let i=new du(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(t)||hn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Bx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Lr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vr=class n extends Vu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Vi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ND("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vr._jsonSchema={type:Re("string",Vr._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};var Vi=class extends Vr{data(e={}){return super.data(e)}},Bi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Lr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vi(this._firestore,this._userDataWriter,r.key,r,new Lr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Vi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Vi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:jx(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ao.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function jx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V(61501,{type:n})}}function pm(n){n=Wn(n,Ke);let e=Wn(n.firestore,zr);return Nx(hm(e),n._key).then(t=>MD(e,n,t))}Bi._jsonSchemaVersion="firestore/querySnapshot/1.0",Bi._jsonSchema={type:Re("string",Bi._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};var Bu=class extends zg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,t)}};function gm(n,e,t){n=Wn(n,Ke);let r=Wn(n.firestore,zr),i=Bx(n.converter,e,t);return Ux(r,[kx(xx(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Fr.none())])}function RD(n,...e){n=Ge(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||iT(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(iT(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let s,o,c;if(n instanceof Ke)o=Wn(n.firestore,zr),c=Hu(n._key.path),s={next:u=>{e[r]&&e[r](MD(o,n,u))},error:e[r+1],complete:e[r+2]};else{let u=Wn(n,ku);o=Wn(u.firestore,zr),c=u._query;let l=new Bu(o);s={next:h=>{e[r]&&e[r](new Bi(o,l,u,h))},error:e[r+1],complete:e[r+2]},Vx(n._query)}return(function(l,h,p,m){let I=new Pu(m),S=new Nu(h,I,p);return l.asyncQueue.enqueueAndForget(async()=>lD(await jg(l),S)),()=>{I.Nu(),l.asyncQueue.enqueueAndForget(async()=>dD(await jg(l),S))}})(hm(o),c,i,s)}function Ux(n,e){return(function(r,i){let s=new Yt;return r.asyncQueue.enqueueAndForget(async()=>vx(await Ax(r),i,s)),s.promise})(hm(n),e)}function MD(n,e,t){let r=t.docs.get(e._key),i=new Bu(n);return new Vr(n,i,e._key,r,new Lr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Xi=i})(Gn),zn(new _t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new zr(new pp(r.getProvider("auth-internal")),new yp(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(l.options.projectId,h)})(o,i),o);return s=j({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Mt(vw,_w,e),Mt(vw,_w,"esm2020")})();function WD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var KD=WD,QD=new un("auth","Firebase",WD());var Xu=new $n("@firebase/auth");function Hx(n,...e){Xu.logLevel<=ee.WARN&&Xu.warn(`Auth (${Gn}): ${n}`,...e)}function Qu(n,...e){Xu.logLevel<=ee.ERROR&&Xu.error(`Auth (${Gn}): ${n}`,...e)}function It(n,...e){throw Vm(n,...e)}function kt(n,...e){return Vm(n,...e)}function Fm(n,e,t){let r=me(j({},KD()),{[e]:t});return new un("auth","Firebase",r).create(e,{appName:n.name})}function In(n){return Fm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $x(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&It(n,"argument-error"),Fm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vm(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return QD.create(n,...e)}function U(n,e,...t){if(!n)throw Vm(e,...t)}function _n(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Qu(e),new Error(e)}function wn(n,e){n||_n(e)}function vm(){return typeof self<"u"&&self.location?.href||""}function qx(){return PD()==="http:"||PD()==="https:"}function PD(){return typeof self<"u"&&self.location?.protocol||null}function zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qx()||QI()||"connection"in navigator)?navigator.onLine:!0}function Gx(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Kr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,wn(t>e,"Short delay should be less than long delay!"),this.isMobile=WI()||YI()}get(){return zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Bm(n,e){wn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var el=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Wx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Kx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qx=new Kr(3e4,6e4);function nr(n,e){return n.tenantId&&!e.tenantId?me(j({},e),{tenantId:n.tenantId}):e}async function rr(n,e,t,r,i={}){return YD(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let c=Ai(j({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=j({method:e,headers:u},s);return KI()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Hn(n.emulatorConfig.host)&&(l.credentials="include"),el.fetch()(await ZD(n,n.config.apiHost,t,c),l)})}async function YD(n,e,t){n._canInitEmulator=!1;let r=j(j({},Wx),e);try{let i=new _m(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Ku(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ku(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ku(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Fm(n,h,l);It(n,h)}}catch(i){if(i instanceof dt)throw i;It(n,"network-request-failed",{message:String(i)})}}async function Zo(n,e,t,r,i={}){let s=await rr(n,e,t,r,i);return"mfaPendingCredential"in s&&It(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function ZD(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Bm(n.config,i):`${n.config.apiScheme}://${i}`;return Kx.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Yx(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _m=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(kt(this.auth,"network-request-failed")),Qx.get())})}};function Ku(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=kt(n,e,r);return i.customData._tokenResponse=t,i}function xD(n){return n!==void 0&&n.enterprise!==void 0}var Em=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function Zx(n,e){return rr(n,"GET","/v2/recaptchaConfig",nr(n,e))}async function Jx(n,e){return rr(n,"POST","/v1/accounts:delete",e)}async function tl(n,e){return rr(n,"POST","/v1/accounts:lookup",e)}function qo(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JD(n,e=!1){let t=Ge(n),r=await t.getIdToken(e),i=jm(r);U(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qo(mm(i.auth_time)),issuedAtTime:qo(mm(i.iat)),expirationTime:qo(mm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function mm(n){return Number(n)*1e3}function jm(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{let i=$c(t);return i?JSON.parse(i):(Qu("Failed to decode base64 JWT payload"),null)}catch(i){return Qu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kD(n){let e=jm(n);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Go(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof dt&&Xx(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Xx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Im=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Wo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qo(this.lastLoginAt),this.creationTime=qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function nl(n){let e=n.auth,t=await n.getIdToken(),r=await Go(n,tl(e,{idToken:t}));U(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?eC(i.providerUserInfo):[],o=ek(n.providerData,s),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,l=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wo(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function XD(n){let e=Ge(n);await nl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ek(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eC(n){return n.map(r=>{var i=r,{providerId:e}=i,t=ga(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function tk(n,e){let t=await YD(n,{},async()=>{let r=Ai({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await ZD(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Hn(n.emulatorConfig.host)&&(u.credentials="include"),el.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nk(n,e){return rr(n,"POST","/v2/accounts:revokeToken",nr(n,e))}var zo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){U(e.length!==0,"internal-error");let t=kD(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await tk(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(U(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(U(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return _n("not implemented")}};function er(n,e){U(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var tr=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=ga(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Im(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wo(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Go(this,this.stsTokenManager.getToken(this.auth,e));return U(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JD(this,e)}reload(){return XD(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>j({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(me(j({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await nl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nt(this.auth.app))return Promise.reject(In(this.auth));let e=await this.getIdToken();return await Go(this,Jx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return me(j({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>j({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:I,providerData:S,stsTokenManager:M}=t;U(p&&M,e,"internal-error");let R=zo.fromJSON(this.name,M);U(typeof p=="string",e,"internal-error"),er(r,e.name),er(i,e.name),U(typeof m=="boolean",e,"internal-error"),U(typeof I=="boolean",e,"internal-error"),er(s,e.name),er(o,e.name),er(c,e.name),er(u,e.name),er(l,e.name),er(h,e.name);let F=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:I,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:R,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(F.providerData=S.map(Z=>j({},Z))),u&&(F._redirectEventId=u),F}static async _fromIdTokenResponse(e,t,r=!1){let i=new zo;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nl(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];U(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?eC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new zo;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u}};var OD=new Map;function En(n){wn(n instanceof Function,"Expected a class definition");let e=OD.get(n);return e?(wn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,OD.set(n,e),e)}var rk=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),wm=rk;function Yu(n,e,t){return`firebase:${n}:${e}:${t}`}var rl=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await tl(this.auth,{idToken:e}).catch(()=>{});return t?tr._fromGetAccountInfoResponse(this.auth,t,e):null}return tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(En(wm),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||En(wm),o=Yu(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=await l._get(o);if(h){let p;if(typeof h=="string"){let m=await tl(e,{idToken:h}).catch(()=>{});if(!m)break;p=await tr._fromGetAccountInfoResponse(e,m,h)}else p=tr._fromJSON(e,h);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function LD(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oC(e))return"Blackberry";if(aC(e))return"Webos";if(nC(e))return"Safari";if((e.includes("chrome/")||rC(e))&&!e.includes("edge/"))return"Chrome";if(sC(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function tC(n=Be()){return/firefox\//i.test(n)}function nC(n=Be()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rC(n=Be()){return/crios\//i.test(n)}function iC(n=Be()){return/iemobile/i.test(n)}function sC(n=Be()){return/android/i.test(n)}function oC(n=Be()){return/blackberry/i.test(n)}function aC(n=Be()){return/webos/i.test(n)}function Um(n=Be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ik(n=Be()){return Um(n)&&!!window.navigator?.standalone}function sk(){return ZI()&&document.documentMode===10}function cC(n=Be()){return Um(n)||sC(n)||aC(n)||oC(n)||/windows phone/i.test(n)||iC(n)}function uC(n,e=[]){let t;switch(n){case"Browser":t=LD(Be());break;case"Worker":t=`${LD(Be())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gn}/${r}`}var Tm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function ok(n,e={}){return rr(n,"GET","/v2/passwordPolicy",nr(n,e))}var ak=6,Dm=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ak,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Cm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new il(this),this.idTokenSubscription=new il(this),this.beforeStateQueue=new Tm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=En(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await rl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await tl(this,{idToken:e}),r=await tr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nt(this.app))return Promise.reject(In(this));let t=e?Ge(e):null;return t&&U(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nt(this.app)?Promise.reject(In(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nt(this.app)?Promise.reject(In(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await ok(this),t=new Dm(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new un("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&En(e)||this._popupRedirectResolver;U(t,this,"argument-error"),this.redirectPersistenceManager=await rl.create(this,[En(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Hx(`Error while retrieving App Check token: ${e.error}`),e?.token}};function ir(n){return Ge(n)}var il=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=tw(t=>this.observer=t)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ck(n){hl=n}function lC(n){return hl.loadJS(n)}function uk(){return hl.recaptchaEnterpriseScript}function lk(){return hl.gapiScript}function dC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var bm=class{constructor(){this.enterprise=new Sm}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Sm=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var dk="recaptcha-enterprise",fC="NO_RECAPTCHA",Am=class{constructor(e){this.type=dk,this.auth=ir(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{Zx(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new Em(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{c(u)})})}function i(s,o,c){let u=window.grecaptcha;xD(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(fC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bm().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&xD(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=uk();u.length!==0&&(u+=c),lC(u).then(()=>{i(c,s,o)}).catch(l=>{o(l)})}}).catch(c=>{o(c)})})}};async function $o(n,e,t,r=!1,i=!1){let s=new Am(n),o;if(i)o=fC;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}let c=j({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let u=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Nm(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=await $o(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=await $o(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=await $o(n,e,t);return r(n,s).catch(async o=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let c=await $o(n,e,t,!1,!0);return r(n,c)}return Promise.reject(o)})}else{let s=await $o(n,e,t,!1,!0);return r(n,s)}else return Promise.reject(i+" provider is not supported.")}function hC(n,e){let t=Io(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Wt(s,e??{}))return i;It(i,"already-initialized")}return t.initialize({options:e})}function fk(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(En);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function pC(n,e,t){let r=ir(n);U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=gC(e),{host:o,port:c}=hk(e),u=c===null?"":`:${c}`,l={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){U(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),U(Wt(l,r.config.emulator)&&Wt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Hn(o)?(zc(`${s}//${o}${u}`),Gc("Auth",!0)):i||pk()}function gC(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hk(n){let e=gC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:FD(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:FD(o)}}}function FD(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function pk(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ss=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _n("not implemented")}_getIdTokenResponse(e){return _n("not implemented")}_linkToIdToken(e,t){return _n("not implemented")}_getReauthenticationResolver(e){return _n("not implemented")}};async function gk(n,e){return rr(n,"POST","/v1/accounts:signUp",e)}async function mk(n,e){return Zo(n,"POST","/v1/accounts:signInWithPassword",nr(n,e))}async function yk(n,e){return Zo(n,"POST","/v1/accounts:signInWithEmailLink",nr(n,e))}async function vk(n,e){return Zo(n,"POST","/v1/accounts:signInWithEmailLink",nr(n,e))}var Ko=class n extends ss{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,t,"signInWithPassword",mk,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yk(e,{email:this._email,oobCode:this._password});default:It(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,r,"signUpPassword",gk,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vk(e,{idToken:t,email:this._email,oobCode:this._password});default:It(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function is(n,e){return Zo(n,"POST","/v1/accounts:signInWithIdp",nr(n,e))}var _k="http://localhost",sl=class n extends ss{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):It("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let c=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=c,s=ga(c,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return is(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,is(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,is(e,t)}buildRequest(){let e={requestUri:_k,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ai(t)}return e}};function Ek(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ik(n){let e=Ni(Ri(n)).link,t=e?Ni(Ri(e)).deep_link_id:null,r=Ni(Ri(n)).deep_link_id;return(r?Ni(Ri(r)).link:null)||r||t||e||n}var ol=class n{constructor(e){let t=Ni(Ri(e)),r=t.apiKey??null,i=t.oobCode??null,s=Ek(t.mode??null);U(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=Ik(e);try{return new n(t)}catch{return null}}};var mC=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ko._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ol.parseLink(r);return U(i,"argument-error"),Ko._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Qo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var al=class extends Qo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Hm=(()=>{class n extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return sl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();async function wk(n,e){return Zo(n,"POST","/v1/accounts:signUp",nr(n,e))}var os=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await tr._fromIdTokenResponse(e,r,i),o=VD(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=VD(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function VD(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Rm=class n extends dt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function yC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rm._fromErrorAndOperation(n,s,e,r):s})}async function Tk(n,e,t=!1){let r=await Go(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return os._forOperation(n,"link",r)}async function Dk(n,e,t=!1){let{auth:r}=n;if(nt(r.app))return Promise.reject(In(r));let i="reauthenticate";try{let s=await Go(n,yC(r,i,e,n),t);U(s.idToken,r,"internal-error");let o=jm(s.idToken);U(o,r,"internal-error");let{sub:c}=o;return U(n.uid===c,r,"user-mismatch"),os._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&It(r,"user-mismatch"),s}}async function vC(n,e,t=!1){if(nt(n.app))return Promise.reject(In(n));let r="signIn",i=await yC(n,r,e),s=await os._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function _C(n,e){return vC(ir(n),e)}async function EC(n){let e=ir(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $m(n,e,t){if(nt(n.app))return Promise.reject(In(n));let r=ir(n),o=await Nm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wk,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&EC(n),u}),c=await os._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function qm(n,e,t){return nt(n.app)?Promise.reject(In(n)):_C(Ge(n),mC.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&EC(n),r})}function IC(n,e,t,r){return Ge(n).onIdTokenChanged(e,t,r)}function wC(n,e,t){return Ge(n).beforeAuthStateChanged(e,t)}function zm(n,e,t,r){return Ge(n).onAuthStateChanged(e,t,r)}function Gm(n){return Ge(n).signOut()}var cl="__sak";var ul=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cl,"1"),this.storage.removeItem(cl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Ck=1e3,bk=10,Sk=(()=>{class n extends ul{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);sk()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,bk):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),TC=Sk;var Ak=(()=>{class n extends ul{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Wm=Ak;function Nk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Rk=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(async h=>h(r.origin,o)),l=await Nk(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Km(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Mm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let l=Km("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function nn(){return window}function Mk(n){nn().location.href=n}function DC(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}async function Pk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xk(){return navigator?.serviceWorker?.controller||null}function kk(){return DC()?self:null}var CC="firebaseLocalStorageDb",Ok=1,ll="firebaseLocalStorage",bC="fbase_key",Qr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pl(n,e){return n.transaction([ll],e?"readwrite":"readonly").objectStore(ll)}function Lk(){let n=indexedDB.deleteDatabase(CC);return new Qr(n).toPromise()}function Pm(){let n=indexedDB.open(CC,Ok);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ll,{keyPath:bC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(ll)?e(r):(r.close(),await Lk(),e(await Pm()))})})}async function BD(n,e,t){let r=pl(n,!0).put({[bC]:e,value:t});return new Qr(r).toPromise()}async function Fk(n,e){let t=pl(n,!1).get(e),r=await new Qr(t).toPromise();return r===void 0?null:r.value}function jD(n,e){let t=pl(n,!0).delete(e);return new Qr(t).toPromise()}var Vk=800,Bk=3,jk=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>Bk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rk._getInstance(kk()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new Mm(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Pm();return await BD(t,cl,"1"),await jD(t,cl),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>BD(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Fk(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>jD(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=pl(s,!1).getAll();return new Qr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SC=jk;var e5=dC("rcb"),t5=new Kr(3e4,6e4);function AC(n,e){return e?En(e):(U(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Yo=class extends ss{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return is(e,this._buildIdpRequest())}_linkToIdToken(e,t){return is(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return is(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Uk(n){return vC(n.auth,new Yo(n),n.bypassAuthState)}function Hk(n){let{auth:e,user:t}=n;return U(t,e,"internal-error"),Dk(t,new Yo(n),n.bypassAuthState)}async function $k(n){let{auth:e,user:t}=n;return U(t,e,"internal-error"),Tk(t,new Yo(n),n.bypassAuthState)}var dl=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uk;case"linkViaPopup":case"linkViaRedirect":return $k;case"reauthViaPopup":case"reauthViaRedirect":return Hk;default:It(this.auth,"internal-error")}}resolve(e){wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var qk=new Kr(2e3,1e4);async function Qm(n,e,t){if(nt(n.app))return Promise.reject(kt(n,"operation-not-supported-in-this-environment"));let r=ir(n);$x(n,e,Qo);let i=AC(r,t);return new zk(r,"signInViaPopup",e,i).executeNotNull()}var zk=(()=>{class n extends dl{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return U(t,this.auth,"internal-error"),t}async onExecution(){wn(this.filter.length===1,"Popup operations only handle one event");let t=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(kt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qk.get())};t()}}n.currentPopupAction=null;return n})(),Gk="pendingRedirect",Zu=new Map,xm=class extends dl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{let r=await Wk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Wk(n,e){let t=Yk(e),r=Qk(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Kk(n,e){Zu.set(n._key(),e)}function Qk(n){return En(n._redirectPersistence)}function Yk(n){return Yu(Gk,n.config.apiKey,n.name)}async function Zk(n,e,t=!1){if(nt(n.app))return Promise.reject(In(n));let r=ir(n),i=AC(r,e),o=await new xm(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Jk=600*1e3,km=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!NC(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(kt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jk&&this.cachedEventUids.clear(),this.cachedEventUids.has(UD(e))}saveEventToCache(e){this.cachedEventUids.add(UD(e)),this.lastProcessedEventTime=Date.now()}};function UD(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Xk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NC(n);default:return!1}}async function e1(n,e={}){return rr(n,"GET","/v1/projects",e)}var t1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n1=/^https?/;async function r1(n){if(n.config.emulator)return;let{authorizedDomains:e}=await e1(n);for(let t of e)try{if(i1(t))return}catch{}It(n,"unauthorized-domain")}function i1(n){let e=vm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!n1.test(t))return!1;if(t1.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var s1=new Kr(3e4,6e4);function HD(){let n=nn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o1(n){return new Promise((e,t)=>{function r(){HD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HD(),t(kt(n,"network-request-failed"))},timeout:s1.get()})}if(nn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(nn().gapi?.load)r();else{let i=dC("iframefcb");return nn()[i]=()=>{gapi.load?r():t(kt(n,"network-request-failed"))},lC(`${lk()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Ju=null,e})}var Ju=null;function a1(n){return Ju=Ju||o1(n),Ju}var c1=new Kr(5e3,15e3),u1="__/auth/iframe",l1="emulator/auth/iframe",d1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h1(n){let e=n.config;U(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Bm(e,l1):`https://${n.config.authDomain}/${u1}`,r={apiKey:e.apiKey,appName:n.name,v:Gn},i=f1.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ai(r).slice(1)}`}async function p1(n){let e=await a1(n),t=nn().gapi;return U(t,n,"internal-error"),e.open({where:document.body,url:h1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d1,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=kt(n,"network-request-failed"),c=nn().setTimeout(()=>{s(o)},c1.get());function u(){nn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}var g1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m1=500,y1=600,v1="_blank",_1="http://localhost",fl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function E1(n,e,t,r=m1,i=y1){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=me(j({},g1),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Be().toLowerCase();t&&(c=rC(l)?v1:t),tC(l)&&(e=e||_1,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[I,S])=>`${m}${I}=${S},`,"");if(ik(l)&&c!=="_self")return I1(e||"",c),new fl(null);let p=window.open(e||"",c,h);U(p,n,"popup-blocked");try{p.focus()}catch{}return new fl(p)}function I1(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var w1="__/auth/handler",T1="emulator/auth/handler",D1=encodeURIComponent("fac");async function $D(n,e,t,r,i,s){U(n.config.authDomain,n,"auth-domain-config-required"),U(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Gn,eventId:i};if(e instanceof Qo){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ew(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof al){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=await n._getAppCheckToken(),l=u?`#${D1}=${encodeURIComponent(u)}`:"";return`${C1(n)}?${Ai(c).slice(1)}${l}`}function C1({config:n}){return n.emulator?Bm(n,T1):`https://${n.authDomain}/${w1}`}var ym="webStorageSupport",Om=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wm,this._completeRedirectFn=Zk,this._overrideRedirectResult=Kk}async _openPopup(e,t,r,i){wn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=await $D(e,t,r,vm(),i);return E1(e,s,Km())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await $D(e,t,r,vm(),i);return Mk(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(wn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await p1(e),r=new km(e);return t.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ym,{type:ym},i=>{let s=i?.[0]?.[ym];s!==void 0&&t(!!s),It(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cC()||nC()||Um()}},RC=Om;var qD="@firebase/auth",zD="1.12.0";var Lm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S1(n){zn(new _t("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;U(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uC(n)},l=new Cm(r,i,s,u);return fk(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zn(new _t("auth-internal",e=>{let t=ir(e.getProvider("auth").getImmediate());return(r=>new Lm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(qD,zD,b1(n)),Mt(qD,zD,"esm2020")}var A1=300,N1=Vh("authIdTokenMaxAge")||A1,GD=null,R1=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>N1)return;let i=t?.token;GD!==i&&(GD=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ym(n=Yc()){let e=Io(n,"auth");if(e.isInitialized())return e.getImmediate();let t=hC(n,{popupRedirectResolver:RC,persistence:[SC,TC,Wm]}),r=Vh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=R1(s.toString());wC(t,o,()=>o(t.currentUser)),IC(t,c=>o(c))}}let i=Lh("auth");return i&&pC(t,`http://${i}`),t}function M1(){return document.getElementsByTagName("head")?.[0]??document}ck({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=kt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",M1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S1("Browser");var MC={production:!0,firebaseConfig:{apiKey:"AIzaSyB_WSNJbHhEGi6EPYbBKJvlP-MH1nQ846Y",authDomain:"cross-plane-2f5de.firebaseapp.com",projectId:"cross-plane-2f5de",storageBucket:"cross-plane-2f5de.firebasestorage.app",messagingSenderId:"183248187868",appId:"1:183248187868:web:348f43d2a2c5e3e6f0df19"}};var P1=MC.firebaseConfig,as=class n{constructor(){this.app=ep(P1);this.db=wD(this.app);this.auth=Ym(this.app);this.unsubscribe=null;this.sessionId="shared-grid";this.isSynced=Te(!1);this.isLoading=Te(!0);this.currentUser=Te(null);zm(this.auth,e=>{this.currentUser.set(e)})}async saveCells(e){let t=Array.from(e.values()).filter(i=>i.confirmed),r=rs(this.db,"grids",this.sessionId);await gm(r,{cells:t,updatedAt:new Date().toISOString()}),this.isSynced.set(!0)}async loadCells(){let e=rs(this.db,"grids",this.sessionId),t=await pm(e);return t.exists()?t.data().cells||[]:[]}subscribeToChanges(e){let t=rs(this.db,"grids",this.sessionId);this.unsubscribe=RD(t,r=>{if(r.exists()){let i=r.data();e(i?.cells||[])}})}destroy(){this.unsubscribe&&this.unsubscribe()}async signInWithGoogle(){let e=new Hm;try{await Qm(this.auth,e)}catch(t){throw console.error("Error signing in with Google",t),t}}async loginEmail(e,t){await qm(this.auth,e,t)}async registerEmail(e,t){await $m(this.auth,e,t)}async signOut(){try{await Gm(this.auth)}catch(e){throw console.error("Error signing out",e),e}}async saveUserData(e,t){let r=rs(this.db,"users",e);await gm(r,t,{merge:!0})}async getUserData(e){let t=rs(this.db,"users",e),r=await pm(t);return r.exists()?r.data():null}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}};var cs=class n{constructor(){this.cellsMap=new Map;this.firebase=X(as);this.saveTimeout=null;this.isInitialized=!1;this.skipNextSync=!1;this.cells=Te(new Map);this.viewportOffset=Te({x:0,y:0});this.selectedCell=Te(null);this.inputDirection=Te("across");this.isLoading=Te(!0);this.lastPlacedTime=Te(0);this.wordsPlacedCount=Te(0);let e=this.getCookie("cross_plane_last_placed");e&&this.lastPlacedTime.set(parseInt(e,10));let t=this.getCookie("cross_plane_words_placed");t&&this.wordsPlacedCount.set(parseInt(t,10)),this.loadFromFirebase(),this.firebase.subscribeToChanges(r=>{this.handleRemoteUpdate(r)}),cn(()=>{let r=this.cells();if(this.isInitialized){if(this.skipNextSync){this.skipNextSync=!1;return}this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveToFirebase()},1e3)}}),cn(()=>{let r=this.lastPlacedTime();r>0&&this.setCookie("cross_plane_last_placed",r.toString(),365)}),cn(()=>{let r=this.wordsPlacedCount();this.setCookie("cross_plane_words_placed",r.toString(),365);let i=Ws(()=>this.firebase.currentUser());i&&this.firebase.saveUserData(i.uid,{wordsPlacedCount:r})}),cn(()=>{let r=this.firebase.currentUser();r&&this.syncUserStats(r.uid)})}async syncUserStats(e){if(!this.skipNextSync)try{let t=await this.firebase.getUserData(e),r=this.wordsPlacedCount();if(t&&typeof t.wordsPlacedCount=="number"){let i=t.wordsPlacedCount;i>r?this.wordsPlacedCount.set(i):r>i&&this.firebase.saveUserData(e,{wordsPlacedCount:r})}else r>0&&this.firebase.saveUserData(e,{wordsPlacedCount:r})}catch(t){console.error("Error syncing user stats",t)}}resetUserStats(){this.wordsPlacedCount.set(0),this.setCookie("cross_plane_words_placed","0",365)}setCookie(e,t,r){let i="";if(r){let s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3),i="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}getCookie(e){let t=e+"=",r=document.cookie.split(";");for(let i=0;i<r.length;i++){let s=r[i];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null}handleRemoteUpdate(e){let t=new Map;e.forEach(r=>{let i=`${r.x},${r.y} `;t.set(i,r)}),(this.cellsMap.size!==t.size||!this.mapsEqual(this.cellsMap,t))&&(this.skipNextSync=!0,this.cellsMap=t,this.cells.set(new Map(this.cellsMap)),console.log("Grid updated from Firebase (real-time sync)"))}mapsEqual(e,t){if(e.size!==t.size)return!1;for(let[r,i]of e){let s=t.get(r);if(!s||i.char!==s.char||i.confirmed!==s.confirmed)return!1}return!0}async loadFromFirebase(){try{let e=await this.firebase.loadCells();e.length>0?(e.forEach(t=>{let r=`${t.x},${t.y} `;this.cellsMap.set(r,t)}),this.cells.set(new Map(this.cellsMap))):this.initializeDefault()}catch(e){console.error("Failed to load from Firebase - Check Firestore Rules in Console!",e),this.initializeDefault()}finally{this.isLoading.set(!1),this.isInitialized=!0}}initializeDefault(){this.setCell(-5,0,"C",!0),this.setCell(-4,0,"R",!0),this.setCell(-3,0,"O",!0),this.setCell(-2,0,"S",!0),this.setCell(-1,0,"S",!0),this.setCell(0,0,".",!0),this.setCell(1,0,"P",!0),this.setCell(2,0,"L",!0),this.setCell(3,0,"A",!0),this.setCell(4,0,"N",!0),this.setCell(5,0,"E",!0)}async saveToFirebase(){try{await this.firebase.saveCells(this.cellsMap),console.log("Grid saved to Firebase")}catch(e){console.error("Failed to save to Firebase - Check Firestore Rules in Console!",e)}}getCell(e,t){return this.cellsMap.get(`${e},${t} `)}setCell(e,t,r,i){let s=`${e},${t} `;this.cellsMap.set(s,{x:e,y:t,char:r.toUpperCase(),confirmed:i}),this.cells.set(new Map(this.cellsMap))}removeCell(e,t){let r=`${e},${t} `;this.cellsMap.has(r)&&(this.cellsMap.delete(r),this.cells.set(new Map(this.cellsMap)))}isBlackSquare(e,t){if(Math.abs(e)<6&&Math.abs(t)<6)return!1;let r=Math.sin(e*12.9898+t*78.233)*43758.5453123%1;return Math.abs(r)>.88}isValidSlot(e,t){return!this.isBlackSquare(e,t)}incrementWordsPlaced(){this.wordsPlacedCount.update(e=>e+1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}};var k1=["progressPath"];function O1(n,e){n&1&&(L(0,"div",36),Se(1,"div",37),$())}function L1(n,e){n&1&&(L(0,"div",38),tt(),L(1,"svg",39),Se(2,"circle",40)(3,"path",41),$(),qt(),L(4,"span",42),ke(5,"Validating..."),$()())}function F1(n,e){if(n&1&&(L(0,"div",43),ke(1),$()),n&2){let t=xe();oo("text-red-500",t.isError)("text-green-600",!t.isError),ye(),ao(" ",t.validationMessage," ")}}function V1(n,e){if(n&1){let t=Rt();L(0,"button",44),De("click",function(){ne(t);let i=xe();return re(i.toggleAuthMenu())}),tt(),L(1,"svg",25),Se(2,"path",45),$()()}}function B1(n,e){if(n&1&&(L(0,"div",62),ke(1),$()),n&2){let t=xe(2);ye(),jn(t.authError)}}function j1(n,e){if(n&1&&(L(0,"span"),ke(1),$()),n&2){let t=xe(2);ye(),jn(t.isRegisterMode?"Sign Up":"Log In")}}function U1(n,e){n&1&&(tt(),L(0,"svg",63),Se(1,"circle",40)(2,"path",41),$())}function H1(n,e){if(n&1){let t=Rt();L(0,"span"),ke(1,"Need an account? "),L(2,"button",64),De("click",function(){ne(t);let i=xe(2);return i.isRegisterMode=!0,re(i.authError="")}),ke(3,"Sign up"),$()()}}function $1(n,e){if(n&1){let t=Rt();L(0,"span"),ke(1,"Values account? "),L(2,"button",64),De("click",function(){ne(t);let i=xe(2);return i.isRegisterMode=!1,re(i.authError="")}),ke(3,"Log in"),$()()}}function q1(n,e){if(n&1){let t=Rt();L(0,"div",46)(1,"h3",47),ke(2),$(),L(3,"div",48)(4,"input",49,1),De("keydown",function(i){return ne(t),re(i.stopPropagation())})("keyup.enter",function(){ne(t);let i=Pr(7);return re(i.focus())}),$(),L(6,"input",50,2),De("keydown",function(i){return ne(t),re(i.stopPropagation())})("keyup.enter",function(){ne(t);let i=Pr(5),s=Pr(7),o=xe();return re(o.handleAuth(i.value,s.value))}),$(),ot(8,B1,2,1,"div",51),L(9,"button",52),De("click",function(){ne(t);let i=Pr(5),s=Pr(7),o=xe();return re(o.handleAuth(i.value,s.value))}),ot(10,j1,2,1,"span",53)(11,U1,3,0,"svg",54),$()(),L(12,"div",55),Se(13,"div",56),L(14,"span",57),ke(15,"OR"),$(),Se(16,"div",56),$(),L(17,"button",58),De("click",function(){ne(t);let i=xe();return re(i.signInGoogle())}),tt(),L(18,"svg",59),Se(19,"path",60),$(),ke(20," Google "),$(),qt(),L(21,"div",61),ot(22,H1,4,0,"span",53)(23,$1,4,0,"span",53),$()()}if(n&2){let t=xe();ye(2),jn(t.isRegisterMode?"Create Account":"Welcome Back"),ye(6),Ee("ngIf",t.authError),ye(2),Ee("ngIf",!t.isAuthLoading),ye(),Ee("ngIf",t.isAuthLoading),ye(11),Ee("ngIf",!t.isRegisterMode),ye(),Ee("ngIf",t.isRegisterMode)}}function z1(n,e){if(n&1&&Se(0,"img",71),n&2){let t,r=xe(2);Ee("src",(t=r.currentUser())==null?null:t.photoURL,zf)}}function G1(n,e){if(n&1&&(L(0,"span",72),ke(1),$()),n&2){let t,r=xe(2);ye(),jn(((t=r.currentUser())==null||t.displayName==null?null:t.displayName.charAt(0))||"U")}}function W1(n,e){if(n&1){let t=Rt();L(0,"button",65),De("click",function(){ne(t);let i=xe();return re(i.signOut())}),ot(1,z1,1,1,"img",66)(2,G1,2,1,"span",67),L(3,"div",68),tt(),L(4,"svg",69),Se(5,"path",70),$()()()}if(n&2){let t,r,i,s=xe();Ee("title",((t=s.currentUser())==null?null:t.displayName)||"Sign Out"),ye(),Ee("ngIf",(r=s.currentUser())==null?null:r.photoURL),ye(),Ee("ngIf",!((i=s.currentUser())!=null&&i.photoURL))}}function K1(n,e){n&1&&(tt(),L(0,"svg",77),Se(1,"path",78),$())}function Q1(n,e){if(n&1){let t=Rt();L(0,"button",75),De("click",function(){let i=ne(t).$implicit,s=xe(2);return re(s.selectTheme(i))}),ot(1,K1,2,0,"svg",76),$()}if(n&2){let t=e.$implicit,r=xe(2);Rc("background-color",t.colors.bg)("border-color",t.colors.confirmedBorder),oo("ring-2",r.activeTheme.id===t.id)("ring-offset-1",r.activeTheme.id===t.id)("ring-blue-500",r.activeTheme.id===t.id)("opacity-50",r.wordsPlacedCount<t.unlockCount),Ee("title",r.wordsPlacedCount<t.unlockCount?"Unlock at "+t.unlockCount+" words":t.name),ye(),Ee("ngIf",r.wordsPlacedCount<t.unlockCount)}}function Y1(n,e){if(n&1&&(L(0,"div",73),ot(1,Q1,2,14,"button",74),$()),n&2){let t=xe();ye(),Ee("ngForOf",t.themes)}}var gl=class n{constructor(){this.lastPlacedTime=0;this.cooldownMs=15e3;this.wordsPlacedCount=0;this.isValidating=!1;this.validationMessage="";this.isError=!1;this.themes=[];this.themeSelected=new Xe;this.zoomIn=new Xe;this.zoomOut=new Xe;this.resetView=new Xe;this.sharePosition=new Xe;this.ngZone=X(qe);this.firebaseService=X(as);this.gridStore=X(cs);this.currentUser=this.firebaseService.currentUser;this.animationFrameId=null;this.cooldownProgress=1;this.isThemeMenuOpen=!1;this.isAuthMenuOpen=!1;this.isRegisterMode=!1;this.isAuthLoading=!1;this.authError=""}toggleAuthMenu(){this.isAuthMenuOpen=!this.isAuthMenuOpen,this.isThemeMenuOpen=!1,this.authError=""}async signInGoogle(){this.isAuthLoading=!0;try{await this.firebaseService.signInWithGoogle(),this.isAuthMenuOpen=!1}catch(e){this.authError=e.message}finally{this.isAuthLoading=!1}}async handleAuth(e,t){if(!e||!t){this.authError="Please enter email and password";return}this.isAuthLoading=!0,this.authError="";try{this.isRegisterMode?await this.firebaseService.registerEmail(e,t):await this.firebaseService.loginEmail(e,t),this.isAuthMenuOpen=!1}catch(r){console.error(r),r.code==="auth/invalid-credential"?this.authError="Invalid email or password.":r.code==="auth/email-already-in-use"?this.authError="Email already in use.":r.code==="auth/weak-password"?this.authError="Password should be at least 6 characters.":this.authError="Error: "+(r.message||"Unknown")}finally{this.isAuthLoading=!1}}async signOut(){await this.firebaseService.signOut(),this.gridStore.resetUserStats()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{let e=()=>{let r=Date.now()-this.lastPlacedTime,i=1;if(r<this.cooldownMs&&(i=r/this.cooldownMs),this.progressPath?.nativeElement){let s=(i*100).toFixed(1);this.progressPath.nativeElement.setAttribute("stroke-dasharray",`${s}, 100`)}i>=1&&this.cooldownProgress<1?this.ngZone.run(()=>this.cooldownProgress=1):i<1&&this.cooldownProgress>=1&&this.ngZone.run(()=>this.cooldownProgress=i),this.animationFrameId=requestAnimationFrame(e)};e()})}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}toggleThemeMenu(){this.isThemeMenuOpen=!this.isThemeMenuOpen,this.isAuthMenuOpen=!1}selectTheme(e){this.wordsPlacedCount>=e.unlockCount&&(this.themeSelected.emit(e),this.isThemeMenuOpen=!1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=io({type:n,selectors:[["app-top-bar"]],viewQuery:function(t,r){if(t&1&&Di(k1,5),t&2){let i;Ci(i=bi())&&(r.progressPath=i.first)}},inputs:{lastPlacedTime:"lastPlacedTime",cooldownMs:"cooldownMs",wordsPlacedCount:"wordsPlacedCount",isValidating:"isValidating",validationMessage:"validationMessage",isError:"isError",activeTheme:"activeTheme",themes:"themes"},outputs:{themeSelected:"themeSelected",zoomIn:"zoomIn",zoomOut:"zoomOut",resetView:"resetView",sharePosition:"sharePosition"},decls:45,vars:8,consts:[["progressPath",""],["emailInput",""],["passwordInput",""],[1,"absolute","top-0","left-0","right-0","p-4","pointer-events-none","z-50","flex","justify-center","md:justify-start"],[1,"bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","px-4","py-3","rounded-xl","pointer-events-auto","max-w-sm","w-full","md:w-auto","text-center","md:text-left"],[1,"flex","items-center","gap-3","mb-1"],[1,"relative","w-6","h-6","flex-shrink-0"],["viewBox","0 0 36 36",1,"transform","-rotate-90","w-full","h-full"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-gray-200"],["stroke-dasharray","100, 100","d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","4",1,"text-blue-500","transition-[stroke-dasharray]","duration-100","ease-linear"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"text-xl","font-black","tracking-tighter"],[1,"hidden","md:block","text-xs","text-gray-500","mb-2","leading-relaxed"],[1,"flex","items-center","justify-between","mb-3","pt-2","border-t","border-gray-100"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wide"],[1,"text-black","text-sm"],[1,"min-h-[24px]","flex","flex-col","justify-center","items-center","md:items-start"],["class","flex items-center space-x-2 text-blue-600 animate-pulse",4,"ngIf"],["class","text-sm font-medium whitespace-pre-wrap",3,"text-red-500","text-green-600",4,"ngIf"],[1,"absolute","top-4","right-4","flex","flex-col","gap-2","z-50","pointer-events-auto"],[1,"relative"],["class","bg-white shadow-lg border border-gray-200 p-2 rounded-full hover:bg-gray-50 text-gray-700","title","Sign In",3,"click",4,"ngIf"],["class","absolute right-0 top-12 w-72 bg-white/95 backdrop-blur shadow-xl border border-gray-200 p-4 rounded-xl z-50 animate-in fade-in slide-in-from-top-2",4,"ngIf"],["class","bg-white shadow-lg border border-gray-200 p-1 rounded-full hover:bg-gray-50 overflow-hidden w-10 h-10 flex items-center justify-center relative group",3,"title","click",4,"ngIf"],["title","Center View",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Share Position",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"],["title","Themes",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"],["class","absolute right-full top-0 mr-2 bg-white/95 backdrop-blur shadow-lg border border-gray-200 p-2 rounded-xl flex gap-2 animate-in fade-in slide-in-from-right-2",4,"ngIf"],["title","Zoom In",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["title","Zoom Out",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"w-2","h-2","bg-blue-500","rounded-full"],[1,"flex","items-center","space-x-2","text-blue-600","animate-pulse"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-semibold"],[1,"text-sm","font-medium","whitespace-pre-wrap"],["title","Sign In",1,"bg-white","shadow-lg","border","border-gray-200","p-2","rounded-full","hover:bg-gray-50","text-gray-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"absolute","right-0","top-12","w-72","bg-white/95","backdrop-blur","shadow-xl","border","border-gray-200","p-4","rounded-xl","z-50","animate-in","fade-in","slide-in-from-top-2"],[1,"font-bold","text-lg","mb-3"],[1,"space-y-2","mb-4"],["type","email","placeholder","Email",1,"w-full","px-3","py-2","border","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white/50",3,"keydown","keyup.enter"],["type","password","placeholder","Password",1,"w-full","px-3","py-2","border","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white/50",3,"keydown","keyup.enter"],["class","text-xs text-red-500 font-medium",4,"ngIf"],[1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","rounded-lg","transition-colors","flex","justify-center","items-center",3,"click"],[4,"ngIf"],["class","animate-spin h-5 w-5 text-white","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"relative","flex","py-2","items-center"],[1,"flex-grow","border-t","border-gray-300"],[1,"flex-shrink-0","mx-2","text-gray-400","text-xs"],[1,"w-full","bg-white","border","border-gray-300","hover:bg-gray-50","text-gray-700","font-bold","py-2","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2","mb-3",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-4","h-4"],["d","M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"],[1,"text-center","text-xs","text-gray-500"],[1,"text-xs","text-red-500","font-medium"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],[1,"text-blue-600","hover:underline",3,"click"],[1,"bg-white","shadow-lg","border","border-gray-200","p-1","rounded-full","hover:bg-gray-50","overflow-hidden","w-10","h-10","flex","items-center","justify-center","relative","group",3,"click","title"],["class","w-full h-full object-cover rounded-full",3,"src",4,"ngIf"],["class","text-xs font-bold",4,"ngIf"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"w-full","h-full","object-cover","rounded-full",3,"src"],[1,"text-xs","font-bold"],[1,"absolute","right-full","top-0","mr-2","bg-white/95","backdrop-blur","shadow-lg","border","border-gray-200","p-2","rounded-xl","flex","gap-2","animate-in","fade-in","slide-in-from-right-2"],["class","w-8 h-8 rounded-full border transition-all relative flex items-center justify-center group",3,"ring-2","ring-offset-1","ring-blue-500","opacity-50","background-color","border-color","title","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-full","border","transition-all","relative","flex","items-center","justify-center","group",3,"click","title"],["class","w-4 h-4 text-gray-400","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"]],template:function(t,r){if(t&1){let i=Rt();L(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),tt(),L(4,"svg",7),Se(5,"path",8)(6,"path",9,0),$(),ot(8,O1,2,0,"div",10),$(),qt(),L(9,"h1",11),ke(10,"Cross.plane"),$()(),L(11,"p",12),ke(12," Infinite, procedural, collaborative crossword. "),Se(13,"br"),ke(14," Click to select. Space to rotate. Type to type. "),$(),L(15,"div",13)(16,"div",14),ke(17," Words placed: "),L(18,"span",15),ke(19),$()()(),L(20,"div",16),ot(21,L1,6,0,"div",17)(22,F1,2,5,"div",18),$()()(),L(23,"div",19)(24,"div",20),ot(25,V1,3,0,"button",21)(26,q1,24,6,"div",22),$(),ot(27,W1,6,3,"button",23),L(28,"button",24),De("click",function(){return ne(i),re(r.resetView.emit())}),tt(),L(29,"svg",25),Se(30,"path",26),$()(),qt(),L(31,"button",27),De("click",function(){return ne(i),re(r.sharePosition.emit())}),tt(),L(32,"svg",25),Se(33,"path",28),$()(),qt(),L(34,"div",20)(35,"button",29),De("click",function(){return ne(i),re(r.toggleThemeMenu())}),tt(),L(36,"svg",25),Se(37,"path",30),$()(),ot(38,Y1,2,1,"div",31),$(),qt(),L(39,"button",32),De("click",function(){return ne(i),re(r.zoomIn.emit())}),tt(),L(40,"svg",25),Se(41,"path",33),$()(),qt(),L(42,"button",34),De("click",function(){return ne(i),re(r.zoomOut.emit())}),tt(),L(43,"svg",25),Se(44,"path",35),$()()()}t&2&&(ye(8),Ee("ngIf",r.cooldownProgress>=1),ye(11),jn(r.wordsPlacedCount),ye(2),Ee("ngIf",r.isValidating),ye(),Ee("ngIf",!r.isValidating&&r.validationMessage),ye(3),Ee("ngIf",!r.currentUser()),ye(),Ee("ngIf",r.isAuthMenuOpen&&!r.currentUser()),ye(),Ee("ngIf",r.currentUser()),ye(11),Ee("ngIf",r.isThemeMenuOpen))},dependencies:[Si,Lc,Th],encapsulation:2})}};var ml=class n{constructor(){}async validateWord(e){try{let t=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e.toLowerCase()}`);if(t.status===404)return{valid:!1,definition:"",reason:`"${e.toUpperCase()}" not found in dictionary`};if(!t.ok)throw new Error("Dictionary API error");let r=await t.json(),i="No definition found.";if(Array.isArray(r)&&r.length>0){let s=r[0];if(s.meanings&&s.meanings.length>0){let o=s.meanings[0];o.definitions&&o.definitions.length>0&&(i=o.definitions[0].definition)}}return{valid:!0,definition:i}}catch(t){return console.error("Dictionary validation error:",t),{valid:!1,definition:"",reason:"Validation service unavailable"}}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}};var J1=["hiddenInput"],X1=["gridCanvas"],PC=[{id:"default",name:"Classic",unlockCount:0,colors:{bg:"#ffffff",gridLines:"rgba(0,0,0,0.05)",blackSquare:"#000000",text:"#000000",confirmedBg:"#ffffff",confirmedText:"#000000",confirmedBorder:"#d1d5db",startWordBg:"#fef9c3",startWordBorder:"#fde047",pendingBg:"#93c5fd",pendingText:"#2563eb",pendingBorder:"#d1d5db",selectionBg:"#dbeafe",selectionBorder:"#3b82f6",selectionShadow:"rgba(59, 130, 246, 0.5)"}},{id:"dark",name:"Midnight",unlockCount:10,colors:{bg:"#1f2937",gridLines:"rgba(255,255,255,0.1)",blackSquare:"#111827",text:"#f3f4f6",confirmedBg:"#1f2937",confirmedText:"#f3f4f6",confirmedBorder:"#374151",startWordBg:"#3f2c06",startWordBorder:"#ca8a04",pendingBg:"#1e3a8a",pendingText:"#60a5fa",pendingBorder:"#374151",selectionBg:"#1e40af",selectionBorder:"#3b82f6",selectionShadow:"rgba(59, 130, 246, 0.5)"}},{id:"blueprint",name:"Blueprint",unlockCount:20,colors:{bg:"#3555a1",gridLines:"rgba(255,255,255,0.2)",blackSquare:"#25397bff",text:"#ffffff",confirmedBg:"#3555a1",confirmedText:"#ffffff",confirmedBorder:"#93c5fd",startWordBg:"rgba(147, 197, 253,0.2)",startWordBorder:"rgba(147, 197, 253,0.2)",pendingBg:"#2563eb",pendingText:"#ffffff",pendingBorder:"#ffffff",selectionBg:"rgba(255,255,255,0.1)",selectionBorder:"#ffffff",selectionShadow:"rgba(255, 255, 255, 0.5)"}}],yl=class n{constructor(e,t){this.grid=e;this.dictionary=t;this.ngZone=X(qe);this.animationFrameId=null;this.needsRender=!0;this.isPanning=!1;this.startX=0;this.startY=0;this.startOffsetX=0;this.startOffsetY=0;this.zoomLevel=Te(1);this.MIN_ZOOM=.03;this.MAX_ZOOM=2;this.isPinching=!1;this.initialPinchDist=0;this.startZoom=1;this.CELL_SIZE=40;this.COOLDOWN_MS=5e3;this.pendingWordCoords=Te([]);this.isValidating=Te(!1);this.validationMessage=Te("");this.isError=Te(!1);this.activeTheme=Te(PC[0]);this.themes=PC;this.entryStart=Te(null);this.offsetX=co(()=>this.grid.viewportOffset().x);this.offsetY=co(()=>this.grid.viewportOffset().y);this.showText=co(()=>this.zoomLevel()>.35);cn(()=>{this.zoomLevel(),this.grid.viewportOffset(),this.grid.cells(),this.grid.selectedCell(),this.grid.inputDirection(),this.pendingWordCoords(),this.activeTheme(),this.requestRender()});let r=this.grid.getCookie("cross_plane_theme");if(r){let i=this.themes.find(s=>s.id===r);i&&this.activeTheme.set(i)}cn(()=>{let i=this.activeTheme();document.body.style.backgroundColor=i.colors.bg,this.grid.setCookie("cross_plane_theme",i.id,365)})}ngOnInit(){let e=new URLSearchParams(window.location.search),t=e.get("x"),r=e.get("y");if(t&&r){let i=parseInt(t,10),s=parseInt(r,10);if(!isNaN(i)&&!isNaN(s)){let o=this.CELL_SIZE*this.zoomLevel();this.grid.viewportOffset.set({x:-i*o,y:-s*o})}}}ngAfterViewInit(){this.setupCanvas(),this.startRenderLoop(),window.addEventListener("resize",()=>this.resizeCanvas())}setupCanvas(){let e=this.gridCanvas.nativeElement;this.ctx=e.getContext("2d"),this.resizeCanvas()}resizeCanvas(){let e=this.gridCanvas.nativeElement,t=window.devicePixelRatio||1;e.width=window.innerWidth*t,e.height=window.innerHeight*t,e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",this.ctx.scale(t,t),this.requestRender()}requestRender(){this.needsRender=!0}startRenderLoop(){this.ngZone.runOutsideAngular(()=>{let e=()=>{this.needsRender&&(this.renderCanvas(),this.needsRender=!1),this.animationFrameId=requestAnimationFrame(e)};e()})}renderCanvas(){let e=this.ctx,t=window.innerWidth,r=window.innerHeight,i=this.activeTheme().colors;e.clearRect(0,0,t,r),e.fillStyle=i.bg,e.fillRect(0,0,t,r);let s=this.zoomLevel(),o=this.grid.viewportOffset(),c=this.CELL_SIZE*s,u=t/2+o.x,l=r/2+o.y,h=Math.floor(-u/c)-1,p=Math.ceil((t-u)/c)+1,m=Math.floor(-l/c)-1,I=Math.ceil((r-l)/c)+1;e.strokeStyle=i.gridLines,e.lineWidth=1;for(let k=h;k<=p;k++){let E=u+k*c;e.beginPath(),e.moveTo(E,0),e.lineTo(E,r),e.stroke()}for(let k=m;k<=I;k++){let E=l+k*c;e.beginPath(),e.moveTo(0,E),e.lineTo(t,E),e.stroke()}e.fillStyle=i.blackSquare;for(let k=h;k<=p;k++)for(let E=m;E<=I;E++)if(this.grid.isBlackSquare(k,E)){let y=u+k*c,v=l+E*c;e.fillRect(y+.5,v+.5,c-1,c-1)}let S=this.showText(),M=this.grid.selectedCell(),R=Math.max(8,Math.floor(c*.55));e.font=`bold ${R}px ui-monospace, monospace`,e.textAlign="center",e.textBaseline="middle";let F=p-h,Z=I-m,te=F*Z,K=this.grid.cells().size;if(te<K*2)for(let k=h;k<=p;k++)for(let E=m;E<=I;E++){let y=this.grid.getCell(k,E);y&&this.drawCell(e,y,u,l,c,i,S,M)}else this.grid.cells().forEach(k=>{k.x<h||k.x>p||k.y<m||k.y>I||this.drawCell(e,k,u,l,c,i,S,M)});if(this.pendingWordCoords().forEach(k=>{let E=u+k.x*c,y=l+k.y*c;if(!(E+c<0||E>t||y+c<0||y>r))if(S){let v=M&&M.x===k.x&&M.y===k.y;e.fillStyle=v?i.selectionBg:i.confirmedBg,e.fillRect(E+1,y+1,c-2,c-2),e.strokeStyle=i.pendingBorder,e.lineWidth=1,e.strokeRect(E+1,y+1,c-2,c-2),e.fillStyle=i.pendingText,e.fillText(k.char,E+c/2,y+c/2+1)}else e.fillStyle=i.pendingBg,e.fillRect(E+1,y+1,c-2,c-2)}),M&&S){let k=u+M.x*c-1,E=l+M.y*c-1;e.strokeStyle=i.selectionBorder,e.lineWidth=3,e.strokeRect(k,E,c+2,c+2),e.shadowColor=i.selectionShadow,e.shadowBlur=10,e.strokeRect(k,E,c+2,c+2),e.shadowBlur=0;let y=this.grid.inputDirection()==="across",v=Math.max(12,c*.35);if(e.fillStyle=i.selectionBorder,e.beginPath(),y){let T=k+c+8,w=E+c/2;e.moveTo(T,w-v/2),e.lineTo(T+v,w),e.lineTo(T,w+v/2)}else{let T=k+c/2,w=E+c+8;e.moveTo(T-v/2,w),e.lineTo(T,w+v),e.lineTo(T+v/2,w)}e.fill()}}onCanvasClick(e){if(this.isPanning)return;let t=this.screenToGrid(e.clientX,e.clientY);this.grid.isBlackSquare(t.x,t.y)||this.selectCell(t.x,t.y)}onCanvasTouch(e){if(e.touches.length>1)return;let t=e.touches[0],r=this.screenToGrid(t.clientX,t.clientY);this.grid.isBlackSquare(r.x,r.y)||setTimeout(()=>{!this.isPanning&&!this.isPinching&&this.selectCell(r.x,r.y)},100)}screenToGrid(e,t){let r=this.zoomLevel(),i=this.grid.viewportOffset(),s=this.CELL_SIZE*r,o=window.innerWidth/2+i.x,c=window.innerHeight/2+i.y,u=Math.floor((e-o)/s),l=Math.floor((t-c)/s);return{x:u,y:l}}setZoom(e,t,r){let i=this.zoomLevel(),s=this.grid.viewportOffset(),o=Math.min(Math.max(e,this.MIN_ZOOM),this.MAX_ZOOM);if(o===i)return;let c=window.innerWidth,u=window.innerHeight,l=t-c/2,h=r-u/2,p=o/i,m=l-(l-s.x)*p,I=h-(h-s.y)*p;this.grid.viewportOffset.set({x:m,y:I}),this.zoomLevel.set(o)}zoomIn(){this.setZoom(this.zoomLevel()*1.2,window.innerWidth/2,window.innerHeight/2)}zoomOut(){this.setZoom(this.zoomLevel()/1.2,window.innerWidth/2,window.innerHeight/2)}onWheel(e){e.preventDefault();let i=1+-e.deltaY*.001;i>1.15&&(i=1.15),i<.85&&(i=.85);let s=this.zoomLevel()*i;this.setZoom(s,e.clientX,e.clientY)}selectCell(e,t){let r=this.grid.selectedCell();if(r&&r.x===e&&r.y===t){this.grid.inputDirection.update(s=>s==="across"?"down":"across");return}this.pendingWordCoords().some(s=>s.x===e&&s.y===t)||this.clearPending(),this.grid.selectedCell.set({x:e,y:t}),this.entryStart.set({x:e,y:t}),this.validationMessage.set(""),this.focusInput()}focusInput(){this.hiddenInput?.nativeElement?.focus()}onInput(e){let t=e.target,i=t.value.slice(-1).toUpperCase();t.value="",i.match(/[A-Z]/)&&this.processCharInput(i)}onGlobalKeyDown(e){if(this.grid.selectedCell()){if(e.key==="ArrowLeft"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x-1,y:r.y}:null);return}if(e.key==="ArrowRight"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x+1,y:r.y}:null);return}if(e.key==="ArrowUp"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y-1}:null);return}if(e.key==="ArrowDown"){e.preventDefault(),this.grid.selectedCell.update(r=>r?{x:r.x,y:r.y+1}:null);return}if(e.key==="Enter"){e.preventDefault(),this.submitWord();return}if(e.key===" "){e.preventDefault(),this.grid.inputDirection.update(r=>r==="across"?"down":"across");return}if(e.key==="Backspace"){this.handleBackspace();return}if(e.key==="Escape"){this.clearPending();return}if(e.key.length===1&&e.key.match(/[a-zA-Z]/)){if(document.activeElement===this.hiddenInput?.nativeElement)return;e.preventDefault(),this.processCharInput(e.key.toUpperCase())}}}processCharInput(e){let t=this.grid.selectedCell();if(!t||this.grid.isBlackSquare(t.x,t.y))return;let r=this.grid.getCell(t.x,t.y);if(r&&r.confirmed){if(r.char===e)this.moveCursor(1);else{let i=t.x,s=t.y;this.moveCursor(1);let o=this.grid.selectedCell();if(o&&o.x===i&&o.y===s){this.showError("Cannot change existing letters!");return}this.processCharInput(e)}return}this.addPendingChar(t.x,t.y,e),this.moveCursor(1),this.focusInput()}handleBackspace(){let e=this.grid.selectedCell(),t=this.entryStart();if(!e||!t)return;if(this.pendingWordCoords().some(h=>h.x===e.x&&h.y===e.y)){this.removePendingAt(e.x,e.y);return}let i=this.grid.inputDirection()==="across",s=i?-1:0,o=i?0:-1,c=e.x+s,u=e.y+o;if(e.x===t.x&&e.y===t.y||this.grid.isBlackSquare(c,u))return;this.grid.selectedCell.set({x:c,y:u}),this.pendingWordCoords().some(h=>h.x===c&&h.y===u)&&this.removePendingAt(c,u)}moveCursor(e){let t=this.grid.selectedCell();if(!t)return;let r=this.grid.inputDirection()==="across"?e:0,i=this.grid.inputDirection()==="down"?e:0,s=t.x+r,o=t.y+i;this.grid.isBlackSquare(s,o)||this.grid.selectedCell.set({x:s,y:o})}addPendingChar(e,t,r){this.pendingWordCoords.update(i=>[...i.filter(o=>!(o.x===e&&o.y===t)),{x:e,y:t,char:r}]),this.validationMessage.set("")}removePendingAt(e,t){this.pendingWordCoords.update(r=>r.filter(i=>!(i.x===e&&i.y===t)))}async submitWord(){if(this.pendingWordCoords().length===0)return;this.isValidating.set(!0),this.validationMessage.set(""),this.isError.set(!1);let t=this.grid.inputDirection()==="across",r=[...this.pendingWordCoords()].sort((K,ae)=>t?K.x-ae.x:K.y-ae.y),i=r[0],s=r[r.length-1],o=i.x,c=i.y;for(;!this.grid.isBlackSquare(t?o-1:o,t?c:c-1);){let K=t?o-1:o,ae=t?c:c-1,k=this.grid.getCell(K,ae),E=this.pendingWordCoords().find(y=>y.x===K&&y.y===ae);if(k||E)o=K,c=ae;else break}let u=o,l=c;for(o=s.x,c=s.y;!this.grid.isBlackSquare(t?o+1:o,t?c:c+1);){let K=t?o+1:o,ae=t?c:c+1,k=this.grid.getCell(K,ae),E=this.pendingWordCoords().find(y=>y.x===K&&y.y===ae);if(k||E)o=K,c=ae;else break}let h=o,p=c,m="",I=!1,S=!1,M=t?h-u+1:p-l+1;for(let K=0;K<M;K++){let ae=t?u+K:u,k=t?l:l+K,E=this.grid.getCell(ae,k),y=this.pendingWordCoords().find(v=>v.x===ae&&v.y===k);if(E&&E.confirmed)m+=E.char,I=!0;else if(y)m+=y.char,S=!0;else{this.showError("Word has gaps!"),this.isValidating.set(!1);return}}if(!S){this.showError("No new letters added."),this.isValidating.set(!1);return}if(!I&&this.grid.cells().size>0){this.showError("Must connect to existing words!"),this.isValidating.set(!1);return}if(m.length<2){this.showError("Word too short."),this.isValidating.set(!1);return}let R=Date.now(),F=this.grid.lastPlacedTime(),Z=R-F;if(Z<this.COOLDOWN_MS){let K=Math.ceil((this.COOLDOWN_MS-Z)/1e3);this.showError(`Wait ${K}s to place next word.`),this.isValidating.set(!1);return}let te=await this.dictionary.validateWord(m);if(te.valid){for(let K=0;K<M;K++){let ae=t?u+K:u,k=t?l:l+K,E=m[K];this.grid.getCell(ae,k)||this.grid.setCell(ae,k,E,!0)}this.grid.lastPlacedTime.set(Date.now()),this.grid.incrementWordsPlaced(),this.pendingWordCoords.set([]),this.validationMessage.set(`Placed: "${m}"
${te.definition}`),this.isError.set(!1)}else this.showError(te.reason||`"${m}" not found.`);this.isValidating.set(!1)}clearPending(){this.pendingWordCoords.set([]),this.validationMessage.set(""),this.hiddenInput?.nativeElement&&(this.hiddenInput.nativeElement.value="");let e=this.grid.selectedCell();e&&this.entryStart.set(e)}showError(e){this.validationMessage.set(e),this.isError.set(!0)}startPan(e){e.button===0&&(this.isPanning=!0,this.startX=e.clientX,this.startY=e.clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}startPanTouch(e){if(e.touches.length===2){this.isPinching=!0,this.isPanning=!1,this.initialPinchDist=this.getDist(e.touches),this.startZoom=this.zoomLevel();return}e.touches.length===1&&(this.isPanning=!0,this.isPinching=!1,this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.startOffsetX=this.grid.viewportOffset().x,this.startOffsetY=this.grid.viewportOffset().y)}pan(e){if(!this.isPanning)return;let t=e.clientX-this.startX,r=e.clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r})}panTouch(e){if(this.isPinching&&e.touches.length===2){let r=this.getDist(e.touches)/this.initialPinchDist,i=(e.touches[0].clientX+e.touches[1].clientX)/2,s=(e.touches[0].clientY+e.touches[1].clientY)/2,o=this.startZoom*r;this.setZoom(o,i,s),e.preventDefault();return}if(this.isPanning&&e.touches.length===1){let t=e.touches[0].clientX-this.startX,r=e.touches[0].clientY-this.startY;this.grid.viewportOffset.set({x:this.startOffsetX+t,y:this.startOffsetY+r}),e.cancelable&&e.preventDefault()}}endPan(){this.isPanning=!1,this.isPinching=!1}getDist(e){let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)}resetView(){this.grid.viewportOffset.set({x:0,y:0}),this.zoomLevel.set(1)}sharePosition(){let e=this.screenToGrid(window.innerWidth/2,window.innerHeight/2),t=new URL(window.location.href);t.searchParams.set("x",e.x.toString()),t.searchParams.set("y",e.y.toString()),navigator.clipboard.writeText(t.toString()).then(()=>{this.validationMessage.set("Link copied to clipboard!"),this.isError.set(!1),setTimeout(()=>{this.validationMessage()==="Link copied to clipboard!"&&this.validationMessage.set("")},3e3)})}isCellSelected(e,t){let r=this.grid.selectedCell();return!!r&&r.x===e&&r.y===t}drawCell(e,t,r,i,s,o,c,u){let l=r+t.x*s,h=i+t.y*s,p=e.canvas.width/window.devicePixelRatio,m=e.canvas.height/window.devicePixelRatio;if(!(l+s<0||l>p||h+s<0||h>m))if(c){let I=u&&u.x===t.x&&u.y===t.y,S=t.y===0&&Math.abs(t.x)<=5&&t.x!==0;I?e.fillStyle=o.selectionBg:S?e.fillStyle=o.startWordBg:e.fillStyle=o.confirmedBg,e.fillRect(l+1,h+1,s-2,s-2),S&&!I?e.strokeStyle=o.startWordBorder:e.strokeStyle=o.confirmedBorder,e.lineWidth=1,e.strokeRect(l+1,h+1,s-2,s-2),e.fillStyle=o.confirmedText,e.fillText(t.char,l+s/2,h+s/2+1)}else e.fillStyle=o.confirmedBorder,e.fillRect(l+1,h+1,s-2,s-2)}static{this.\u0275fac=function(t){return new(t||n)(Nt(cs),Nt(ml))}}static{this.\u0275cmp=io({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Di(J1,5)(X1,5),t&2){let i;Ci(i=bi())&&(r.hiddenInput=i.first),Ci(i=bi())&&(r.gridCanvas=i.first)}},decls:6,vars:8,consts:[["gridCanvas",""],["hiddenInput",""],[1,"relative","w-full","h-full","overflow-hidden","bg-white","select-none","cursor-grab","active:cursor-grabbing","font-mono",3,"mousedown","touchstart","mousemove","touchmove","mouseup","touchend","keydown","wheel"],[1,"absolute","inset-0","w-full","h-full",3,"click","touchstart"],[3,"themeSelected","zoomIn","zoomOut","resetView","sharePosition","lastPlacedTime","cooldownMs","wordsPlacedCount","isValidating","validationMessage","isError","activeTheme","themes"],["type","text","inputmode","text","autocomplete","off","autocorrect","off","autocapitalize","characters",1,"absolute","opacity-0","top-0","left-0","w-px","h-px","overflow-hidden","-z-10",3,"input"]],template:function(t,r){if(t&1){let i=Rt();L(0,"div",2),De("mousedown",function(o){return ne(i),re(r.startPan(o))})("touchstart",function(o){return ne(i),re(r.startPanTouch(o))})("mousemove",function(o){return ne(i),re(r.pan(o))},Rr)("touchmove",function(o){return ne(i),re(r.panTouch(o))},Rr)("mouseup",function(){return ne(i),re(r.endPan())},Rr)("touchend",function(){return ne(i),re(r.endPan())},Rr)("keydown",function(o){return ne(i),re(r.onGlobalKeyDown(o))},Rr)("wheel",function(o){return ne(i),re(r.onWheel(o))}),L(1,"canvas",3,0),De("click",function(o){return ne(i),re(r.onCanvasClick(o))})("touchstart",function(o){return ne(i),re(r.onCanvasTouch(o))}),$(),L(3,"app-top-bar",4),De("themeSelected",function(o){return ne(i),re(r.activeTheme.set(o))})("zoomIn",function(){return ne(i),re(r.zoomIn())})("zoomOut",function(){return ne(i),re(r.zoomOut())})("resetView",function(){return ne(i),re(r.resetView())})("sharePosition",function(){return ne(i),re(r.sharePosition())}),$(),L(4,"input",5,1),De("input",function(o){return ne(i),re(r.onInput(o))}),$()()}t&2&&(ye(3),Ee("lastPlacedTime",r.grid.lastPlacedTime())("cooldownMs",r.COOLDOWN_MS)("wordsPlacedCount",r.grid.wordsPlacedCount())("isValidating",r.isValidating())("validationMessage",r.validationMessage())("isError",r.isError())("activeTheme",r.activeTheme())("themes",r.themes))},dependencies:[Si,gl],encapsulation:2})}};Ph(yl,{providers:[ph()]}).catch(n=>console.error(n));
