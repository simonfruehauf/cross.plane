<!-- Main Container -->
<div class="relative w-full h-full overflow-hidden bg-white select-none cursor-grab active:cursor-grabbing font-mono"
  (mousedown)="startPan($event)" (touchstart)="startPanTouch($event)" (window:mousemove)="pan($event)"
  (window:touchmove)="panTouch($event)" (window:mouseup)="endPan()" (window:touchend)="endPan()"
  (window:keydown)="onGlobalKeyDown($event)" (wheel)="onWheel($event)">

  <!-- Canvas Layer for High-Performance Rendering -->
  <canvas #gridCanvas class="absolute inset-0 w-full h-full" (click)="onCanvasClick($event)"
    (touchstart)="onCanvasTouch($event)">
  </canvas>

  <!-- Top Bar Component -->
  <app-top-bar [lastPlacedTime]="grid.lastPlacedTime()" [cooldownMs]="COOLDOWN_MS"
    [wordsPlacedCount]="grid.wordsPlacedCount()" [isValidating]="isValidating()"
    [validationMessage]="validationMessage()" [isError]="isError()" [activeTheme]="activeTheme()" [themes]="themes"
    (themeSelected)="activeTheme.set($event)" (zoomIn)="zoomIn()" (zoomOut)="zoomOut()" (resetView)="resetView()"
    (sharePosition)="sharePosition()">
  </app-top-bar>

  <!-- Hidden Input for Mobile/Desktop Typing -->
  <input #hiddenInput type="text" class="absolute opacity-0 top-0 left-0 w-px h-px overflow-hidden -z-10"
    inputmode="text" (input)="onInput($event)" autocomplete="off" autocorrect="off" autocapitalize="characters">
</div>